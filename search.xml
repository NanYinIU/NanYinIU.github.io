<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼</title>
      <link href="/2019/06/19/2019-06-19-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/19/2019-06-19-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼</h1><p>çŠ¶æ€æ¨¡å¼æ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºã€‚è¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»å°±åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å¯¹è±¡çš„è¡Œä¸ºå–å†³äºå…¶çŠ¶æ€ï¼Œå¹¶ä¸”å¿…é¡»æ ¹æ®è¯¥çŠ¶æ€åœ¨è¿è¡Œæ—¶æ›´æ”¹å…¶è¡Œä¸ºã€‚</li><li>é€šå¸¸ï¼Œå‡ ä¸ªæ“ä½œå°†åŒ…å«ç›¸åŒçš„æ¡ä»¶ç»“æ„ã€‚Stateæ¨¡å¼å°†æ¡ä»¶çš„æ¯ä¸ªåˆ†æ”¯æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç±»ä¸­ã€‚å¯ä»¥å°†å¯¹è±¡çš„çŠ¶æ€è§†ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥ç‹¬ç«‹äºå…¶ä»–å¯¹è±¡è€Œå˜åŒ–</li></ul><p>æ¦‚æ‹¬æ¥è¯´ï¼ŒçŠ¶æ€æ¨¡å¼å°†è¡Œä¸ºåŒ…è£…åˆ°å…·ä½“çš„çŠ¶æ€å¯¹è±¡ä¸­ã€‚æ¯ä¸ªçŠ¶æ€å¯¹è±¡æ˜¯æŠ½è±¡çŠ¶æ€çš„å­ç±»ã€‚çŠ¶æ€æ¨¡å¼æ„å›¾æ˜¯åœ¨æ”¹å˜å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€çš„æ—¶å€™ï¼Œè¡Œä¸ºéšä¹‹æ”¹å˜ã€‚</p><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p>çŠ¶æ€æ¨¡å¼åˆ†ä¸ºä¸‰ç§ç»“æ„ï¼šç¯å¢ƒè§’è‰²ã€æŠ½è±¡çŠ¶æ€è§’è‰²ã€å…·ä½“çŠ¶æ€è§’è‰²</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190618203143.png" alt="çŠ¶æ€æ¨¡å¼ç»“æ„å›¾"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç”µç¯æœ‰ä¸¤ç§åŸºæœ¬è¡Œä¸º å¼€å¯ã€å…³é—­ã€‚ä½†æ˜¯æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œæ­£å¸¸å’Œåæ‰çš„çŠ¶æ€ã€‚å°†å…±åŒçš„è¡Œä¸ºå°è£…åˆ°ç»Ÿä¸€çš„çŠ¶æ€æ¥å£ä¸­ï¼Œå†æ ¹æ®ä¸åŒçš„çŠ¶æ€ï¼Œåˆ›å»ºå­ç±»å®Œæˆä¸åŒçŠ¶æ€å½¢æˆä¸åŒçš„è¡Œä¸ºã€‚</p><p>ç¯å†æ­£å¸¸çŠ¶æ€ä¸‹èƒ½å¤Ÿæ­£å¸¸å¼€å¯ï¼Œæ­£å¸¸å…³é—­ã€‚ç­‰åœ¨åæ‰çš„çŠ¶æ€ä¸‹ï¼Œä¸èƒ½å¼€å¯å’Œå…³é—­ã€‚çŠ¶æ€æ¨¡å¼å°±æ˜¯æ ¹æ®è¿™ä¸ªé€»è¾‘æŠ½ç¦»è¡Œä¸ºï¼Œå°†å…·ä½“è¡Œä¸ºåŒ…è£…åˆ°å…·ä½“çŠ¶æ€å¯¹è±¡ä¸­ã€‚</p><h3 id="æŠ½è±¡çŠ¶æ€è§’è‰²"><a href="#æŠ½è±¡çŠ¶æ€è§’è‰²" class="headerlink" title="æŠ½è±¡çŠ¶æ€è§’è‰²"></a>æŠ½è±¡çŠ¶æ€è§’è‰²</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“çŠ¶æ€è§’è‰²"><a href="#å…·ä½“çŠ¶æ€è§’è‰²" class="headerlink" title="å…·ä½“çŠ¶æ€è§’è‰²"></a>å…·ä½“çŠ¶æ€è§’è‰²</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalState</span> <span class="keyword">implements</span> <span class="title">State</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”µç¯å¼€äº†ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”µç¯å…³äº†ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorState</span> <span class="keyword">implements</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”µç¯å¼€ä¸äº†ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”µç¯å…³ä¸äº†ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒè§’è‰²"><a href="#ç¯å¢ƒè§’è‰²" class="headerlink" title="ç¯å¢ƒè§’è‰²"></a>ç¯å¢ƒè§’è‰²</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="comment">//çŠ¶æ€å‚æ•°</span></span><br><span class="line">    State state;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Context</span><span class="params">(State state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestToOpen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        state.open();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestToClose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        state.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//çŠ¶æ€å˜åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeStageTo</span><span class="params">(State state)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯æµ‹è¯•"><a href="#å®¢æˆ·ç«¯æµ‹è¯•" class="headerlink" title="å®¢æˆ·ç«¯æµ‹è¯•"></a>å®¢æˆ·ç«¯æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Context context = <span class="keyword">new</span> Context(<span class="keyword">new</span> NormalState());</span><br><span class="line">        context.requestToOpen();</span><br><span class="line">        context.requestToClose();</span><br><span class="line">        <span class="comment">//å°†çŠ¶æ€å˜æ›´ä¸ºåçš„çŠ¶æ€</span></span><br><span class="line">        context.changeStageTo(<span class="keyword">new</span> ErrorState());</span><br><span class="line">        context.requestToOpen();</span><br><span class="line">        context.requestToClose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼</title>
      <link href="/2019/06/19/2019-06-25-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/19/2019-06-25-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼ğŸ“•"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼ğŸ“•" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼ğŸ“•"></a>è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼ğŸ“•</h1><p>ä¸è¿åå°è£…çš„æƒ…å†µä¸‹ï¼Œæ•è·å¹¶å¤–åŒ–å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»¥ä¾¿ç¨åå¯ä»¥å°†å¯¹è±¡æ¢å¤åˆ°æ­¤çŠ¶æ€ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>å¿…é¡»ä¿å­˜å¯¹è±¡çŠ¶æ€çš„å¿«ç…§ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥å°†å…¶æ¢å¤åˆ°è¯¥çŠ¶æ€</p><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p>æ¨¡å¼ç»“æ„åˆ†ä¸ºä¸‰ç§ç»“æ„ï¼š</p><ol><li><strong>å‘èµ·äºº (Originator)</strong><br>è´Ÿè´£åˆ›å»ºä¸€ä¸ªæœ‰å†…éƒ¨çŠ¶æ€çš„å¤‡å¿˜å½•å¯¹è±¡ã€‚</li><li><strong>è´Ÿè´£äºº (Caretaker)</strong><br>è´Ÿè´£ä¿å­˜å¤‡å¿˜å½•å†…å®¹ï¼Œä½†æ˜¯ä¸æ£€æŸ¥å¤‡å¿˜å½•çš„å†…å®¹ã€‚</li><li><strong>å¤‡å¿˜å½• (Memento)</strong><br>ä¿å­˜å‘èµ·äººçš„å†…éƒ¨çš„çŠ¶æ€ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190625232202.png" alt="æ¨¡å¼ç»“æ„"></p><p>ä¸Šå›¾ä¸­çš„ActionGameä¸ºè´Ÿè´£äººï¼Œè´Ÿè´£ä¿å­˜çŠ¶æ€ï¼ŒPlayerä¸ºå‘èµ·äººè´Ÿè´£ä¸»åŠ¨è®°å½•å¤‡å¿˜å½•ã€‚</p><h3 id="å®é™…åœºæ™¯"><a href="#å®é™…åœºæ™¯" class="headerlink" title="å®é™…åœºæ™¯"></a>å®é™…åœºæ™¯</h3><p>åœ¨ç©å•æœºæ¸¸æˆçš„æ—¶å€™ï¼Œåœ¨é€šè¿‡ä¸€ä¸ªå…³å¡çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè®°å½•ä½ å½“æ—¶çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœä¸‹ä¸€å…³æ²¡é€šè¿‡ï¼Œä¼šè‡ªåŠ¨è¿˜åŸåˆ°ä¸Šä¸€ä¸ªè®°å½•ç‚¹ä»æ–°å¼€å§‹ã€‚è¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼è®°å½•å­˜æ¡£çŠ¶æ€ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™è¿˜åŸçŠ¶æ€ã€‚é’ˆå¯¹æ­¤å¤„åœºæ™¯ï¼Œä½¿ç”¨ä¸‹é¢ä»£ç è¿˜åŸã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="ä½œä¸ºå‘èµ·è€…çš„Player"><a href="#ä½œä¸ºå‘èµ·è€…çš„Player" class="headerlink" title="ä½œä¸ºå‘èµ·è€…çš„Player"></a>ä½œä¸ºå‘èµ·è€…çš„Player</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¸¸æˆçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> GameState gameState;</span><br><span class="line"></span><br><span class="line">    Player(GameState gameState) &#123;</span><br><span class="line">        <span class="keyword">this</span>.gameState = gameState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setGameState</span><span class="params">(GameState gameState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gameState = gameState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–çŠ¶æ€</span></span><br><span class="line">    <span class="function">GameState <span class="title">getGameState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gameState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå­˜æ¡£è®°å½•</span></span><br><span class="line">    <span class="function">Memento <span class="title">createMemento</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Memento(gameState);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å›é€€å­˜æ¡£è®°å½•</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">retrieveMemento</span><span class="params">(Memento memento)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gameState = memento.getGameState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½œä¸ºè´Ÿè´£äººçš„ActionGame"><a href="#ä½œä¸ºè´Ÿè´£äººçš„ActionGame" class="headerlink" title="ä½œä¸ºè´Ÿè´£äººçš„ActionGame"></a>ä½œä¸ºè´Ÿè´£äººçš„ActionGame</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">storeGamePoint</span><span class="params">(Memento memento)</span></span>;</span><br><span class="line">    <span class="function">Memento <span class="title">retrieveGamePoint</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActionGame</span> <span class="keyword">implements</span> <span class="title">Game</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Memento memento;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜æ¡£è®°å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> nanyin</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 17:31 2019-06-26</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> memento 1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">storeGamePoint</span><span class="params">(Memento memento)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.memento = memento;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿˜åŸè®°å½•ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> nanyin</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 17:32 2019-06-26</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Memento</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Memento <span class="title">retrieveGamePoint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.memento;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½œä¸ºå¤‡å¿˜å½•çš„Memento"><a href="#ä½œä¸ºå¤‡å¿˜å½•çš„Memento" class="headerlink" title="ä½œä¸ºå¤‡å¿˜å½•çš„Memento"></a>ä½œä¸ºå¤‡å¿˜å½•çš„Memento</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Memento</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> GameState gameState;</span><br><span class="line">    Memento(GameState gameState) &#123;</span><br><span class="line">        <span class="keyword">this</span>.gameState = gameState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">GameState <span class="title">getGameState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gameState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> GameState &#123;</span><br><span class="line">    DIE,SUCCESS</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯ç¨‹åº"><a href="#å®¢æˆ·ç«¯ç¨‹åº" class="headerlink" title="å®¢æˆ·ç«¯ç¨‹åº"></a>å®¢æˆ·ç«¯ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªåŠ¨ä½œç±»å‹çš„æ¸¸æˆ</span></span><br><span class="line">        Game actionGame = <span class="keyword">new</span> ActionGame();</span><br><span class="line">        <span class="comment">//ç©å®¶é€šå…³</span></span><br><span class="line">        Player player = <span class="keyword">new</span> Player(GameState.SUCCESS);</span><br><span class="line">        <span class="comment">//å­˜æ¡£</span></span><br><span class="line">        Memento memento = player.createMemento();</span><br><span class="line">        actionGame.storeGamePoint(memento);</span><br><span class="line">        <span class="comment">//æ­¤æ—¶ç©å®¶é˜µäº¡</span></span><br><span class="line">        player.setGameState(GameState.DIE);</span><br><span class="line">        System.out.println(player.getGameState());</span><br><span class="line">        <span class="comment">//éœ€è¦ä»ä¸Šä¸€æ¬¡æ¸¸æˆå­˜æ¡£ä¸­åŠ è½½åŸæ¥çš„ç©å®¶çŠ¶æ€</span></span><br><span class="line">        player.retrieveMemento(actionGame.retrieveGamePoint());</span><br><span class="line">        System.out.println(player.getGameState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ¸¸æˆå­˜æ¡£åæ­»äº¡ï¼Œå†é‡å¤è¯»å­˜æ¡£ï¼Œå¾—åˆ°ä¹‹å‰å­˜æ¡£ä¹‹å‰çš„çŠ¶æ€ã€‚æ¸¸æˆä¸ä¼šä¸»åŠ¨å­˜æ¡£å’Œè¯»å–å­˜æ¡£ï¼Œåªä¼šè®°å½•å­˜æ¡£ä¸­çš„å†…å®¹ï¼Œè€Œç©å®¶ä¼šä¸»åŠ¨ä»æ¸¸æˆä¸­è¯»å–å­˜æ¡£ï¼Œç„¶åæ¢å¤åˆ°å­˜æ¡£çš„çŠ¶æ€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2019/06/19/2019-06-24-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/19/2019-06-24-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</h1><p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ï¼Œåˆå«â€œå‘å¸ƒ-è®¢é˜…æ¨¡å¼â€ã€‚ç”±åå­—å°±èƒ½å¤Ÿå¾—çŸ¥ï¼Œè§‚å¯Ÿè¿™æ¨¡å¼æ„é€ äº†ä¸€ä¸ªå‘å¸ƒè€…å’Œè®¢é˜…è€…ã€‚</p><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿å½“ä¸€ä¸ªå¯¹è±¡æ›´æ”¹çŠ¶æ€æ—¶ï¼Œå°†è‡ªåŠ¨é€šçŸ¥å’Œæ›´æ–°å…¶æ‰€æœ‰ä¾èµ–é¡¹ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œä¸»åŠ¨å‘ç”Ÿæ”¹å˜çš„æ˜¯å‘å¸ƒè€…ç§°ä¸ºä¸»é¢˜ï¼Œè€Œè¢«åŠ¨æ”¶åˆ°å‘å¸ƒè€…ä¿¡æ¯çš„è®¢é˜…è€…ç§°ä¸ºè§‚å¯Ÿè€…å¯¹è±¡ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ /å‡å°‘å…·ä½“ä¸»é¢˜çš„è§‚å¯Ÿè€…ï¼Œå®ç°ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´çš„æ¾è€¦åˆã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li><p>å½“è®¾è®¡ä¸­æœ‰ä¸¤ç§ä¸åŒæ–¹é¢çš„æŠ½è±¡ï¼Œå¹¶ä¸”æ˜¯æœ‰ä¾èµ–å…³ç³»çš„ï¼Œè¿™æ—¶å°†ä¸¤ä¸ªæŠ½è±¡åˆ†åˆ«å°è£…åˆ°å…·ä½“çš„ç±»ä¸­ï¼Œè¿™æ ·å°±èƒ½å¤Ÿç‹¬ç«‹çš„æ”¹å˜å’Œé‡ç”¨è¿™äº›å¯¹è±¡ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ä¸¤ç§æŠ½è±¡æŒ‡çš„å°±æ˜¯æŠ½è±¡ä¸»é¢˜å’ŒæŠ½è±¡è§‚å¯Ÿè€…ã€‚</p></li><li><p>å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦æ›´æ”¹æ—¶ï¼Œæ¶‰åŠåˆ°æ›´æ”¹å…¶ä»–ç±»å‹çš„å…¶ä»–å¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡çš„æ•°é‡å¤šä¸”ä¸ç¡®å®šçš„æ—¶å€™ã€‚</p></li><li><p>å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜æ—¶ï¼Œå…¶ä»–å¯¹è±¡èƒ½å¤Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡å·²ç»æ”¹å˜çš„é€šçŸ¥ï¼Œè€Œä¸å¿…çŸ¥é“è¿™äº›å¯¹è±¡å…·ä½“æ˜¯ä»€ä¹ˆã€‚ä¹Ÿå°±æ˜¯è¯´è¦è¾¾åˆ°è¿™ä¸ªæ”¹å˜çš„å¯¹è±¡å’Œé€šçŸ¥çš„å¯¹è±¡çš„æ¾è€¦åˆã€‚</p><p>  <strong>æ‰€ä»¥ç»¼ä¸Š:</strong><br>  å½“å¸Œæœ›ä¸€ä¸ªå¯¹è±¡æ”¹å˜çš„åŒæ—¶ï¼Œå¤šä¸ªå¯¹è±¡èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥ï¼Œä¸€å—è¿›è¡Œå˜æ›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯¹ç³»ç»Ÿè®¾è®¡</p></li></ul><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190624203405.png" alt="è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„å›¾"></p><p>ä¸Šå›¾ä¸­ï¼š</p><ol><li><code>Weather</code>ä¸º<strong>æŠ½è±¡ä¸»é¢˜ç±»</strong>ï¼Œèƒ½å¤Ÿå°†è§‚å¯Ÿè€…<code>Observer</code>æ„æˆä¸€ä¸ª<code>list</code>ç»“æ„,ä»è€Œèƒ½å¤Ÿè¾¾åˆ°<code>Weather</code>æ”¹å˜çš„æ—¶å€™å¯ä»¥å¾ªç¯è¡¨ä¸­çš„è§‚å¯Ÿè€…ï¼Œå‘é€é€šçŸ¥ã€‚å¹¶ä¸”ä½œä¸ºæŠ½è±¡ç±»å®ç°äº†æ·»åŠ ï¼Œç§»é™¤è§‚å¯Ÿè€…æ–¹æ³•ã€‚</li><li><code>BeijingWeather</code>ä¸º<strong>å…·ä½“ä¸»é¢˜ç±»</strong>ï¼Œå®ç°äº†<code>Weather</code>ç±»ã€‚</li><li><code>Observer</code>ä½œä¸º<strong>æŠ½è±¡è§‚å¯Ÿè€…ç±»</strong>ï¼Œä½œä¸ºæ‰€æœ‰è§‚å¯Ÿè€…çš„é€šç”¨æ¥å£ï¼Œå…¶ä¸­å®šä¹‰<code>update</code>æ–¹æ³•ä½œä¸ºæ›´æ–°çŠ¶æ€çš„æ¥å£ã€‚é€šè¿‡è¿™ä¸ªæ¥å£å’Œ<code>Weather</code>ç±»äº¤äº’æ¥è·å–çŠ¶æ€é€šçŸ¥ã€‚</li><li><code>WeatherObserverA</code>ä¸<code>WeatherObserverB</code>ä½œä¸º<strong>å…·ä½“è§‚å¯Ÿè€…ç±»</strong>ï¼Œå®ç°ç±»è§‚å¯Ÿè€…æ¥å£ã€‚ç»Ÿä¸€æ¥å—é€šçŸ¥å¹¶æ›´æ–°è‡ªèº«çŠ¶æ€ã€‚</li></ol><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h4 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡ä¸»é¢˜ç±»"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡ä¸»é¢˜ç±»" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡ä¸»é¢˜ç±»"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡ä¸»é¢˜ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çŠ¶æ€æšä¸¾ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> WeatherState &#123;</span><br><span class="line">    SUNNY_DAY,</span><br><span class="line">    CLOUDY_DAY,</span><br><span class="line">    RAINY_DAY,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŠ½è±¡ä¸»é¢˜ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Weather</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> WeatherState weatherState;</span><br><span class="line">    <span class="comment">// è§‚å¯Ÿè€…é›†åˆ</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; observerList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Weather <span class="title">addObserver</span><span class="params">(Observer observer)</span></span>&#123;</span><br><span class="line">        observerList.add(observer);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>&#123;</span><br><span class="line">        observerList.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡ä¸»é¢˜æ›´æ”¹ä»è€Œåœ¨è¯¥ä¸»é¢˜ä¸Šæ³¨å†Œçš„è§‚å¯Ÿè€…èƒ½å¤ŸåŒæ—¶èƒ½åˆ°é€šçŸ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObserver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer o:observerList</span><br><span class="line">             ) &#123;</span><br><span class="line">            o.update(<span class="keyword">this</span>.weatherState);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒéƒ¨åˆ†ï¼šå…·ä½“ä¸»é¢˜ç±»"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šå…·ä½“ä¸»é¢˜ç±»" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šå…·ä½“ä¸»é¢˜ç±»"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šå…·ä½“ä¸»é¢˜ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeijingWeather</span> <span class="keyword">extends</span> <span class="title">Weather</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    BeijingWeather(WeatherState weatherState) &#123;</span><br><span class="line">        <span class="keyword">this</span>.weatherState = weatherState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä½œä¸ºæ›´æ–°ä¸»é¢˜çš„æ¥å£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeState</span><span class="params">(WeatherState we)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.weatherState = we;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ½è±¡è§‚å¯Ÿè€…"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ½è±¡è§‚å¯Ÿè€…" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ½è±¡è§‚å¯Ÿè€…"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ½è±¡è§‚å¯Ÿè€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ¥å£</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(WeatherState weatherState)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬å››éƒ¨åˆ†ï¼š-å…·ä½“è§‚å¯Ÿè€…"><a href="#ç¬¬å››éƒ¨åˆ†ï¼š-å…·ä½“è§‚å¯Ÿè€…" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼š å…·ä½“è§‚å¯Ÿè€…"></a>ç¬¬å››éƒ¨åˆ†ï¼š å…·ä½“è§‚å¯Ÿè€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherObserverA</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(WeatherState weatherState)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"observer A get new weather message is "</span> + weatherState.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€åè°ƒç”¨"><a href="#æœ€åè°ƒç”¨" class="headerlink" title="æœ€åè°ƒç”¨"></a>æœ€åè°ƒç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰ä¸»é¢˜</span></span><br><span class="line">        Weather weather = <span class="keyword">new</span> BeijingWeather(WeatherState.SUNNY_DAY);</span><br><span class="line">        <span class="comment">//æ·»åŠ è§‚å¯Ÿè€…</span></span><br><span class="line">        weather.addObserver(<span class="keyword">new</span> WeatherObserverA()).addObserver(<span class="keyword">new</span> WeatherObserverB());</span><br><span class="line">        <span class="comment">//é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span></span><br><span class="line">        weather.notifyObserver();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæœ€åæ³¨å†Œåœ¨ä¸»é¢˜ä¸Šçš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½æ”¶åˆ°äº†é€šçŸ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">observer A get new weather message is SUNNY_DAY</span><br><span class="line">observer B get new weather message is SUNNY_DAY</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PlantUMLç±»å›¾ä½¿ç”¨æ€»ç»“</title>
      <link href="/2019/06/19/2019-06-26-PlantUML%E7%B1%BB%E5%9B%BE%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"/>
      <url>/2019/06/19/2019-06-26-PlantUML%E7%B1%BB%E5%9B%BE%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨PlantUMLç»˜åˆ¶ç±»å›¾"><a href="#ä½¿ç”¨PlantUMLç»˜åˆ¶ç±»å›¾" class="headerlink" title="ä½¿ç”¨PlantUMLç»˜åˆ¶ç±»å›¾"></a>ä½¿ç”¨PlantUMLç»˜åˆ¶ç±»å›¾</h1><p>æœ¬æ–‡åŸºäºPlantUMLå®˜ç½‘<a href="http://plantuml.com/zh/class-diagram" target="_blank" rel="noopener">ç»˜åˆ¶ç±»å›¾</a>å’Œç›¸å…³å¦‚ä½•æ­£ç¡®umlç±»å›¾ç›¸å…³æ–‡ç« ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨plantUml"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨plantUml" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨plantUml"></a>ä¸ºä»€ä¹ˆä½¿ç”¨plantUml</h2><p>åŸå› å¾ˆç®€å•ï¼Œä¸ç”¨è‡ªå·±è€ƒè™‘æ„å›¾ï¼Œåƒå†™ä»£ç ä¸€æ ·å†™å‡ºæ¥ï¼Œå›¾å‡ºæ¥æ—¢ç¾è§‚åˆèƒ½å¤Ÿç¬¦åˆé€»è¾‘ã€‚</p><h2 id="åŸºæœ¬ç±»æ„æˆ"><a href="#åŸºæœ¬ç±»æ„æˆ" class="headerlink" title="åŸºæœ¬ç±»æ„æˆ"></a>åŸºæœ¬ç±»æ„æˆ</h2><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190626150930.png" alt="åŸºæœ¬ç±»æ„æˆ"></p><p>ä½¿ç”¨<code>class</code>å…³é”®å­—æ„ä»¶ç±»ï¼ŒåŒç†å…¶ä»–å…³é”®å­—ã€‚å¦‚<code>interface</code>,<code>enum</code>ã€‚</p><p>åœ¨ç±»ä¸­ä½¿ç”¨ <code>- # +</code> åˆ†åˆ«å¯¹åº”è¡¨ç¤ºç±»ä¸­çš„<code>private</code>,<code>protected</code>,<code>public</code>ã€‚å¦‚æœåœ¨ç±»ä¸­ä½¿ç”¨ <code>static</code>ã€<code>abstract</code>å…³é”®å­—ï¼Œéœ€è¦ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹èµ·æ¥ã€‚</p><p><strong>å¤‡æ³¨</strong>ä½¿ç”¨<code>note</code>æ¥å®ç°ï¼Œå¯ä»¥ä½¿ç”¨jsä¼˜åŒ–å¤‡æ³¨çš„æ ·å¼,å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">&apos; ç®€å•å®šä¹‰ç±»A</span><br><span class="line">class classA</span><br><span class="line">&apos;å®šä¹‰ç±»B</span><br><span class="line">class classB&#123;</span><br><span class="line">    -&#123;static&#125; STATIC:Type</span><br><span class="line">    -a:A</span><br><span class="line">    #b:B</span><br><span class="line">    +c:C</span><br><span class="line">    +hello():void</span><br><span class="line">    -word():void</span><br><span class="line">&#125;</span><br><span class="line">&apos;æŠ½è±¡ç±»C</span><br><span class="line">abstract class classC &#123;</span><br><span class="line">    + &#123;abstract&#125; method1:void</span><br><span class="line">&#125;</span><br><span class="line">&apos;å¤‡æ³¨</span><br><span class="line">note right: note on right</span><br><span class="line">note top of classA : note on top</span><br><span class="line">&apos; å¤æ‚å¤‡æ³¨</span><br><span class="line">note top of object</span><br><span class="line">In java, &lt;size:18&gt;every&lt;/size&gt; &lt;u&gt;class&lt;/u&gt;&lt;b&gt;extends&lt;/b&gt;&lt;i&gt;this&lt;/i&gt; one.</span><br><span class="line">end note</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure><h3 id="ç±»æ›´å¤šä½¿ç”¨"><a href="#ç±»æ›´å¤šä½¿ç”¨" class="headerlink" title="ç±»æ›´å¤šä½¿ç”¨"></a>ç±»æ›´å¤šä½¿ç”¨</h3><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190626144335.png" alt="å¤æ‚"></p><p>æ›´å¤æ‚ä¸€äº›çš„ç±»çš„æ„ä»¶å‚è€ƒä¸Šå›¾ã€‚</p><p>ä½¿ç”¨<code>__å†…å®¹__</code>æ¥è¡¨ç¤ºåˆ†å‰²çº¿ï¼Œå¯¹ä¸åŒç±»å‹çš„è¿›è¡Œåˆ†å‰²ã€‚åœ¨ç±»åååŠ <code>&lt;? extends xxx&gt;</code> è¡¨ç¤ºèŒƒå‹,å‚è€ƒä¸‹é¢ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">class classC &lt;&lt;Serializable&gt;&gt; &#123;</span><br><span class="line">__variable__</span><br><span class="line">    -a:A</span><br><span class="line">    #b:B</span><br><span class="line">    +c:C</span><br><span class="line">__methods__</span><br><span class="line">    +hello():void</span><br><span class="line">    -word():void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class classD &lt;? extends List&gt;&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure><h3 id="å…³ç³»è¡¨ç¤º"><a href="#å…³ç³»è¡¨ç¤º" class="headerlink" title="å…³ç³»è¡¨ç¤º"></a>å…³ç³»è¡¨ç¤º</h3><h4 id="ç»§æ‰¿ä¸å®ç°"><a href="#ç»§æ‰¿ä¸å®ç°" class="headerlink" title="ç»§æ‰¿ä¸å®ç°"></a>ç»§æ‰¿ä¸å®ç°</h4><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190626144700.png" alt="ç»§æ‰¿ä¸å®ç°"></p><p>ç»§æ‰¿æŒ‡çš„å°±æ˜¯<strong>æ³›åŒ–</strong>ï¼Œå¦‚å›¾ä¸­å·¦è¡¨ç¤ºä¸€æ ·ï¼Œç±»Aç»§æ‰¿äºBï¼Œç”±å­ç±»å®ç°çˆ¶ç±»çš„è¡Œä¸ºã€‚æ³›åŒ–ä½¿ç”¨å¸¦<strong>å¤§ä¸‰è§’ç®­å¤´å’Œå®çº¿</strong>æ¥è¡¨ç¤ºï¼Œè¡¨ç¤ºä¸€ç§ç»§æ‰¿å…³ç³»ã€‚</p><p><strong>å®ç°</strong>æŒ‡çš„æ˜¯ç‰¹å®šç±»å®ç°æ¥å£ï¼Œå¦‚å›¾ä¸­å³è¡¨ç¤ºä¸€æ ·ï¼Œç±»<code>implement</code>å®ç°<code>interface</code>,è¡¨ç¤ºå®ç°ç±»å®ç°æ¥å£ç±»çš„å…³ç³»ã€‚åŒæ ·ä¼šç”±å­ç±»å®ç°æ¥å£ç±»ä¸­çš„è¡Œä¸ºã€‚å®ç°ä½¿ç”¨å¸¦<strong>å¤§ä¸‰è§’çš„ç®­å¤´å’Œè™šçº¿</strong>æ¥å®ç°ã€‚</p><p>æ— è®ºæ˜¯ç»§æ‰¿è¿˜æ˜¯å®ç°ï¼Œç®­å¤´éƒ½æ‰§è¡Œå¤«ç±»ï¼Œä¹Ÿå°±æ˜¯è¢«å®ç°ç±»ã€‚</p><h4 id="ä¾èµ–ä¸å…³è”"><a href="#ä¾èµ–ä¸å…³è”" class="headerlink" title="ä¾èµ–ä¸å…³è”"></a>ä¾èµ–ä¸å…³è”</h4><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190626160514.png" alt="ä¾èµ–ä¸å…³è”"></p><p>ä½¿ç”¨plantUMLä»£ç å®ç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">&apos;ä¾èµ–ä¸å…³è”</span><br><span class="line">Class X</span><br><span class="line">&apos; ä¾èµ–å…³ç³»</span><br><span class="line">X ..&gt; Y :&quot;ä¾èµ–å…³ç³»&quot;</span><br><span class="line"></span><br><span class="line">class A</span><br><span class="line">&apos; å•å‘å…³è” Aå…³è”B</span><br><span class="line">A--&gt; B :&quot;å•å‘å…³è”&quot;</span><br><span class="line">&apos; åŒå‘å…³è”</span><br><span class="line">class C</span><br><span class="line">C --  D : &quot;åŒå‘å…³è”&quot;</span><br><span class="line">&apos; è‡ªå…³è”</span><br><span class="line">class F</span><br><span class="line">F --&gt; F:&quot;è‡ªå…³è”&quot;</span><br><span class="line">&apos; èšåˆå…³ç³»</span><br><span class="line">class G &#123;</span><br><span class="line">List&lt;H&gt; h</span><br><span class="line">&#125;</span><br><span class="line">G &quot;n&quot; o-- &quot;1&quot; H : &quot;ç»„åˆå…³ç³»&quot;</span><br><span class="line">&apos; ç»„åˆå…³ç³»</span><br><span class="line">class K &#123;</span><br><span class="line">List&lt;L&gt; l</span><br><span class="line">&#125;</span><br><span class="line">K &quot;n&quot;*--&quot;1&quot; L :&quot;èšåˆå…³ç³»&quot;</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure><h5 id="ä¸€ã€ä¾èµ–å…³ç³»"><a href="#ä¸€ã€ä¾èµ–å…³ç³»" class="headerlink" title="ä¸€ã€ä¾èµ–å…³ç³»"></a>ä¸€ã€ä¾èµ–å…³ç³»</h5><p>ä¾èµ–æ˜¯ä¸€ç§ä½¿ç”¨çš„å…³ç³»ï¼Œä»£ç ä¸­ä½“ç°åˆ°ä¾èµ–çš„å…³ç³»çš„æƒ…å†µ:<code>å±€éƒ¨å˜é‡</code>ã€<code>æ–¹æ³•çš„å‚æ•°æˆ–è€…å¯¹é™æ€æ–¹æ³•çš„è°ƒç”¨</code>,ä¾èµ–æ˜¯æœ€å¼±çš„ä¸€ç§å…³è”ã€‚ä¾èµ–å…³ç³»ä½¿ç”¨è™šçº¿å’Œæ™®é€šçš„å°ç®­å¤´æ¥å®ç°ï¼Œç®­å¤´æŒ‡å‘è¢«ä¾èµ–çš„å¯¹è±¡ã€‚å¦‚å›¾ä¸­çš„xä¾èµ–yä¸€æ ·ï¼Œæ‰€ä»¥æŒ‡å‘y,è¿™ä¸ªè¢«xä¾èµ–çš„å¯¹è±¡ã€‚</p><h5 id="äºŒã€å…³è”å…³ç³»"><a href="#äºŒã€å…³è”å…³ç³»" class="headerlink" title="äºŒã€å…³è”å…³ç³»"></a>äºŒã€å…³è”å…³ç³»</h5><p>å…³è”æ˜¯æ‹¥æœ‰çš„å…³ç³»ï¼Œå¦‚ç©å®¶ä¸æ¸¸æˆä¸­çš„è§’è‰²ä¸€æ ·ã€‚å…³è”å¯èƒ½æ˜¯å•å‘çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯åŒå‘çš„ï¼Œä¹ŸåŒæ ·èƒ½å¤Ÿè‡ªå·±å…³è”è‡ªå·±ã€‚ä»£ç ä¸­ä½“ç°åˆ°å…³è”çš„å…³ç³»çš„æƒ…å†µï¼š<code>æˆå‘˜å˜é‡</code>ã€‚å…³è”å…³ç³»ä½¿ç”¨å®çº¿å’Œå°å°–å¤´æ¥å®ç°ï¼Œç®­å¤´æŒ‡å‘è¢«å…³è”çš„å¯¹è±¡ã€‚</p><h5 id="ä¸‰ã€ç»„åˆå…³ç³»"><a href="#ä¸‰ã€ç»„åˆå…³ç³»" class="headerlink" title="ä¸‰ã€ç»„åˆå…³ç³»"></a>ä¸‰ã€ç»„åˆå…³ç³»</h5><p>ç»„åˆå…³ç³»æ˜¯<code>æ•´ä½“ä¸éƒ¨åˆ†</code>çš„å…³ç³»ï¼Œä½†æ˜¯å¦‚æœæ•´ä½“ä¸å­˜åœ¨ï¼Œé‚£éƒ¨åˆ†ä¹Ÿä¸èƒ½å­˜åœ¨ã€‚å°±å¦‚åŒå…¬å¸ä¸éƒ¨é—¨ä¸€æ ·ï¼Œå…¬å¸è§£æ•£äº†ï¼Œéƒ¨é—¨ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚å’Œå…³è”å…³ç³»ç›¸åŒï¼Œåœ¨ä»£ç ä¸­çš„ä½“ç°ä¹Ÿæ˜¯<code>æˆå‘˜å˜é‡</code>ã€‚ç»„åˆå…³ç³»ä½¿ç”¨ç©ºå¿ƒçš„è±å½¢å’Œå®çº¿æ¥è¡¨ç¤ºã€‚</p><h5 id="å››ã€èšåˆå…³ç³»"><a href="#å››ã€èšåˆå…³ç³»" class="headerlink" title="å››ã€èšåˆå…³ç³»"></a>å››ã€èšåˆå…³ç³»</h5><p>èšåˆå…³ç³»æ˜¯<code>æ•´ä½“ä¸éƒ¨åˆ†</code>çš„å…³ç³»ï¼Œä½†æ˜¯å’Œç»„åˆå…³ç³»ä¸åŒçš„æ˜¯ï¼Œèšåˆå…³ç³»ä¸­çš„<code>éƒ¨åˆ†</code>å¯ä»¥è„±ç¦»æ•´ä½“è€Œå­˜åœ¨ï¼Œå°±å¦‚åŒéº¦å½“åŠ³ä¸­çš„å¥—é¤ä¸æ±‰å ¡ä¸€æ ·ã€‚åœ¨ä»£ç ä¸­çš„ä½“ç°åŒæ ·æ˜¯<code>æˆå‘˜å˜é‡</code>ã€‚èšåˆå…³ç³»ä½¿ç”¨å®å¿ƒçš„è±å½¢å’Œå®çº¿æ¥è¡¨ç¤ºã€‚</p><p>æ‰€ä»¥å¯ä»¥è¯´èšåˆå…³ç³»å’Œç»„åˆå…³ç³»æ˜¯å…³ç³»æ›´åŠ ç¡®å®šï¼Œæ›´åŠ ç´§å¯†çš„å…³è”å…³ç³»ã€‚</p><h5 id="å„å…³ç³»çš„å¼ºå¼±é¡ºåº"><a href="#å„å…³ç³»çš„å¼ºå¼±é¡ºåº" class="headerlink" title="å„å…³ç³»çš„å¼ºå¼±é¡ºåº"></a>å„å…³ç³»çš„å¼ºå¼±é¡ºåº</h5><blockquote><p>æ³›åŒ–= å®ç°&gt; ç»„åˆ&gt; èšåˆ&gt; å…³è”&gt; ä¾èµ–</p></blockquote><p>PlantUMLæ”¯æŒæ›´å¤šçš„æ›´å¤æ‚çš„æƒ…æ™¯ä¸‹çš„å›¾å½¢ç»˜åˆ¶ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹<a href="http://plantuml.com/zh/index" target="_blank" rel="noopener">PlantUMLçš„ä¸­æ–‡ç½‘ç«™</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> UML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸‹ä½¿ç”¨ideaæ—¶åœ¨dockæ ä¸€ç›´å­˜åœ¨javaå›¾æ ‡å’Œæ§åˆ¶å°ä¹±ç é—®é¢˜</title>
      <link href="/2019/06/18/2019-06-18-Mac%E4%B8%8Bidea%E5%9C%A8Dock%E6%A0%8F%E4%B8%80%E7%9B%B4%E5%AD%98%E5%9C%A8%E5%9B%BE%E6%A0%87%E5%92%8C%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/"/>
      <url>/2019/06/18/2019-06-18-Mac%E4%B8%8Bidea%E5%9C%A8Dock%E6%A0%8F%E4%B8%80%E7%9B%B4%E5%AD%98%E5%9C%A8%E5%9B%BE%E6%A0%87%E5%92%8C%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="Macä¸‹ä½¿ç”¨Ideaç›¸å…³é—®é¢˜"><a href="#Macä¸‹ä½¿ç”¨Ideaç›¸å…³é—®é¢˜" class="headerlink" title="Macä¸‹ä½¿ç”¨Ideaç›¸å…³é—®é¢˜"></a>Macä¸‹ä½¿ç”¨Ideaç›¸å…³é—®é¢˜</h1><h2 id="ä½¿ç”¨tomcatå¯åŠ¨IDEAé¡¹ç›®åï¼Œdockæ ä¸€ç›´å­˜åœ¨JAVAå›¾æ ‡é—®é¢˜"><a href="#ä½¿ç”¨tomcatå¯åŠ¨IDEAé¡¹ç›®åï¼Œdockæ ä¸€ç›´å­˜åœ¨JAVAå›¾æ ‡é—®é¢˜" class="headerlink" title="ä½¿ç”¨tomcatå¯åŠ¨IDEAé¡¹ç›®åï¼Œdockæ ä¸€ç›´å­˜åœ¨JAVAå›¾æ ‡é—®é¢˜"></a>ä½¿ç”¨tomcatå¯åŠ¨IDEAé¡¹ç›®åï¼Œdockæ ä¸€ç›´å­˜åœ¨JAVAå›¾æ ‡é—®é¢˜</h2><p>åœ¨macä¸Šå¯åŠ¨ideaåï¼Œå­˜åœ¨dockæ ä¸€ç›´å­˜åœ¨JAVAå›¾æ ‡çš„é—®é¢˜ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190618081946.png" alt="Dockæ å­˜åœ¨javaå›¾æ ‡é—®é¢˜"></p><p>è§£å†³æ–¹å¼ï¼š</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190618082435.png" alt="å­˜åœ¨å›¾æ ‡è§£å†³æ–¹å¼"></p><p>æ‰“å¼€<code>Run/Debug configurations</code>,åœ¨<code>vm options</code>ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dapple.awt.UIElement=<span class="keyword">true</span></span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨IDEAåï¼Œæ§åˆ¶å°ä¹±ç "><a href="#å¯åŠ¨IDEAåï¼Œæ§åˆ¶å°ä¹±ç " class="headerlink" title="å¯åŠ¨IDEAåï¼Œæ§åˆ¶å°ä¹±ç "></a>å¯åŠ¨IDEAåï¼Œæ§åˆ¶å°ä¹±ç </h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190618082124.png" alt="æ§åˆ¶å°ä¹±ç "></p><p>è§£å†³æ–¹å¼å’Œä¸Šä¸€ä¸ªé—®é¢˜ç›¸åŒï¼ŒåŒæ ·åœ¨vm optionsä¸­å¢åŠ å‚æ•°ï¼Œå…·ä½“å‚æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dfile.encoding=UTF-<span class="number">8</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹æ¨¡ç‰ˆæ¨¡å¼</title>
      <link href="/2019/06/17/2019-06-17-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E7%89%88%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/17/2019-06-17-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E7%89%88%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</h1><p>æ¨¡ç‰ˆæ¨¡å¼æ˜¯ç±»çš„è¡Œä¸ºæ¨¡å¼ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•æ¥å®ç°ï¼Œå°†å…¶ä»–æ–¹æ³•å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•æ¥è®©å­ç±»æ¥å®ç°ã€‚ä¸åŒçš„å­ç±»å®ç°çš„æ–¹æ³•é€»è¾‘ä¸åŒï¼Œä»è€Œæ•´ä½“çš„é€»è¾‘æœ‰æ‰€å·®å¼‚ã€‚</p><p>è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼š</p><p>ä¸€ã€æŠ½è±¡æ¨¡æ¿(Abstract Template)è§’è‰²æœ‰å¦‚ä¸‹è´£ä»»ï¼š</p><pre><code>- å®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ“ä½œï¼Œä»¥ä¾¿è®©å­ç±»å®ç°ã€‚è¿™äº›æŠ½è±¡æ“ä½œå«åšåŸºæœ¬æ“ä½œï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ã€‚- å®šä¹‰å¹¶å®ç°äº†ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚è¿™ä¸ªæ¨¡æ¿æ–¹æ³•ä¸€èˆ¬æ˜¯ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„éª¨æ¶ï¼Œè€Œé€»è¾‘çš„ç»„æˆæ­¥éª¤åœ¨ç›¸åº”çš„æŠ½è±¡æ“ä½œä¸­ï¼Œæ¨è¿Ÿåˆ°å­ç±»å®ç°ã€‚é¡¶çº§é€»è¾‘ä¹Ÿæœ‰å¯èƒ½è°ƒç”¨ä¸€äº›å…·ä½“æ–¹æ³•ã€‚</code></pre><p>äºŒã€å…·ä½“æ¨¡æ¿(Concrete Template)è§’è‰²åˆå¦‚ä¸‹è´£ä»»ï¼š</p><pre><code>- å®ç°çˆ¶ç±»æ‰€å®šä¹‰çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªé¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ã€‚- æ¯ä¸€ä¸ªæŠ½è±¡æ¨¡æ¿è§’è‰²éƒ½å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå…·ä½“æ¨¡æ¿è§’è‰²ä¸ä¹‹å¯¹åº”ï¼Œè€Œæ¯ä¸€ä¸ªå…·ä½“æ¨¡æ¿è§’è‰²éƒ½å¯ä»¥ç»™å‡ºè¿™äº›æŠ½è±¡æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯é¡¶çº§é€»è¾‘çš„ç»„æˆæ­¥éª¤ï¼‰çš„ä¸åŒå®ç°ï¼Œä»è€Œä½¿å¾—é¡¶çº§é€»è¾‘çš„å®ç°å„ä¸ç›¸åŒã€‚</code></pre><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p> å®ç°ä¸å˜çš„éƒ¨åˆ†ä¸€æ¬¡ï¼Œå¹¶å°†å…¶ä»–ç•™ç»™å­ç±»æ¥å®ç°å¯èƒ½éœ€è¦å˜åŒ–çš„è¡Œä¸ºã€‚</p><ul><li>éœ€è¦ç®€åŒ–ä»£ç ï¼Œåˆ†ç¦»å‡ºå…¬å…±çš„éƒ¨åˆ†ï¼ŒæŠ½ç¦»å‡ºä¸€ä¸ªå…¬å…±çš„æ¨¡æ¿æ–¹æ³•æ¥æ›¿æ¢æ‰€æœ‰çš„ä»£ç ã€‚</li><li>æ§åˆ¶å­ç±»æ‰©å±•ã€‚å®šä¹‰åœ¨ç‰¹å®šç‚¹è°ƒç”¨â€œé’©å­â€æ“ä½œçš„æ¨¡æ¿æ–¹æ³•ï¼Œä»è€Œä»…å…è®¸åœ¨é‚£äº›ç‚¹è¿›è¡Œæ‰©å±•ã€‚</li></ul><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p>è¿™é‡Œä½¿ç”¨åˆ°æ¨¡æ‹Ÿservletä¸­çš„httpServletæ–¹æ³•ï¼ˆç®€å•çš„æ¨¡æ‹Ÿæ–¹æ³•ä¸­ç”¨åˆ°çš„æ¨¡ç‰ˆæ–¹æ³•ï¼‰ã€‚å®šä¹‰ä¸€ä¸ªå…¬å…±çš„æ¨¡ç‰ˆæ–¹æ³•æŠ½è±¡ç±»<code>HttpServletTemplate</code>ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªé’©å­æ–¹æ³•<code>doGet</code>å’Œ<code>doPost</code>ï¼Œæ‰€è°“çš„é’©å­æ–¹æ³•å°±æ˜¯éœ€è¦ç”±å­ç±»å®ç°çš„æ–¹æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªå…·ä½“æ–¹æ³•<code>service</code>æ¥å®ç°æ¨¡ç‰ˆè°ƒç”¨çš„ä½œç”¨ã€‚</p><p>æ¨¡æ‹Ÿä¸¤ä¸ªå­ç±»å®ç°<code>HttpServletTemplate</code>å®ç°ä¸¤ä¸ªé’©å­æ–¹æ³•ã€‚</p><p>å®¢æˆ·ç«¯<code>App</code>åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨ä¸¤ä¸ªå­ç±»çš„çˆ¶ç±»ä¸­çš„å®ç°æ–¹æ³•<code>service</code>å®ç°è°ƒç”¨æ¨¡ç‰ˆã€‚</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190617221808.png" alt="æ¨¡ç‰ˆæ¨¡å¼ç»“æ„"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="æŠ½è±¡æ¨¡ç‰ˆç±»"><a href="#æŠ½è±¡æ¨¡ç‰ˆç±»" class="headerlink" title="æŠ½è±¡æ¨¡ç‰ˆç±»"></a>æŠ½è±¡æ¨¡ç‰ˆç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServletTemplate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpRequestMethod method)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(method.equals(HttpRequestMethod.METHOD_GET))&#123;</span><br><span class="line">            System.out.println(<span class="string">"so something 1"</span>);</span><br><span class="line">            doGet();</span><br><span class="line">            System.out.println(<span class="string">"so something 2"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(method.equals(HttpRequestMethod.METHOD_POST))&#123;</span><br><span class="line">            doPost();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"do nothing!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“æ¨¡ç‰ˆç±»"><a href="#å…·ä½“æ¨¡ç‰ˆç±»" class="headerlink" title="å…·ä½“æ¨¡ç‰ˆç±»"></a>å…·ä½“æ¨¡ç‰ˆç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetClient</span> <span class="keyword">extends</span> <span class="title">HttpServletTemplate</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is my get methods!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostClient</span> <span class="keyword">extends</span> <span class="title">HttpServletTemplate</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is my post methods!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¯·æ±‚ç±»å‹æšä¸¾ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> HttpRequestMethod &#123;</span><br><span class="line">    METHOD_GET,METHOD_POST,METHOD_DELETE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯è°ƒç”¨"><a href="#å®¢æˆ·ç«¯è°ƒç”¨" class="headerlink" title="å®¢æˆ·ç«¯è°ƒç”¨"></a>å®¢æˆ·ç«¯è°ƒç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å£°æ˜postå®¢æˆ·ç«¯</span></span><br><span class="line">        PostClient post = <span class="keyword">new</span> PostClient();</span><br><span class="line">        <span class="comment">//è°ƒç”¨æ¨¡ç‰ˆ</span></span><br><span class="line">        post.service(HttpRequestMethod.METHOD_POST);</span><br><span class="line">        GetClient get = <span class="keyword">new</span> GetClient();</span><br><span class="line">        get.service(HttpRequestMethod.METHOD_GET);</span><br><span class="line">        get.service(HttpRequestMethod.METHOD_POST);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼æ˜¯åˆ›å»ºä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œå…·ä½“çš„å†…å®¹ç”±å­ç±»å»å¡«å……çš„è¿™ä¸ªè¿‡ç¨‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼</title>
      <link href="/2019/06/15/2019-06-15-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/15/2019-06-15-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼</h1><p>è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å¤æ‚çš„è¡Œä¸ºæ¨¡å¼ã€‚è¡¨ç¤ºè¦å¯¹å¯¹è±¡ç»“æ„çš„å…ƒç´ æ‰§è¡Œçš„æ“ä½œã€‚è®¿é—®è€…å…è®¸å¯¹å¯¹è±¡ç»“æ„ä¸­çš„èŠ‚ç‚¹å®šä¹‰æ–°æ“ä½œï¼Œè€Œæ— éœ€æ›´æ”¹å…¶æ“ä½œçš„å…ƒç´ çš„ç±»ã€‚</p><p>é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹æœªå®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>å½“é‡åˆ°å¦‚ä¸‹æƒ…å†µæ—¶ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼š</p><ol><li>å¯¹è±¡ç»“æ„ä¸­åŒ…å«è®¸å¤šå…·æœ‰ä¸åŒæ¥å£çš„å¯¹è±¡ç±»ï¼Œå¹¶ä¸”å¸Œæœ›å¯¹ä¾èµ–äºå…¶å…·ä½“ç±»çš„è¿™äº›å¯¹è±¡æ‰§è¡Œæ“ä½œã€‚</li><li>éœ€è¦å¯¹å¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡æ‰§è¡Œè®¸å¤šä¸åŒä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œå¹¶ä¸”å¸Œæœ›é¿å…ä½¿ç”¨è¿™äº›æ“ä½œâ€œæ±¡æŸ“â€å®ƒä»¬çš„ç±»ã€‚è¿™æ—¶å°±å¯ä»¥å®šä¹‰å¤šä¸ªvisitorç±»æ¥å®Œæˆå¯¹å¤šä¸ªå¯¹è±¡èŠ‚ç‚¹çš„å¤„ç†ã€‚</li><li>å®šä¹‰å¯¹è±¡ç»“æ„çš„ç±»å¾ˆå°‘æ”¹å˜ï¼Œä½†æ˜¯ä½ ç»å¸¸æƒ³è¦åœ¨ç»“æ„ä¸Šå®šä¹‰æ–°çš„æ“ä½œã€‚</li></ol><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼šåœ¨å…¬å¸ä¸­ï¼Œéœ€è¦ç»Ÿè®¡æ‰“å¡è®°å½•å’Œç»©æ•ˆï¼Œåˆ†åˆ«æœ‰è¡Œæ”¿éƒ¨é—¨å’Œè´¢åŠ¡éƒ¨é—¨æ¥å®ç°ã€‚å¹¶ä¸”å°†æ¥å¯èƒ½æœ‰è´¨é‡éƒ¨é—¨ç›‘æµ‹ç ”å‘å’Œå®æ–½äººå‘˜çš„å·¥ä½œè´¨é‡ã€‚ä½†æ˜¯å¯¹ç ”å‘å’Œå®æ–½äººå‘˜çš„è€ƒæ ¸æ ‡å‡†æœ‰æ‰€ä¸åŒã€‚</p><h3 id="ä¸€ã€ç±»å›¾"><a href="#ä¸€ã€ç±»å›¾" class="headerlink" title="ä¸€ã€ç±»å›¾"></a>ä¸€ã€ç±»å›¾</h3><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190616105829.png" alt="ç±»å›¾"></p><p><code>OperateStructure</code>ä½œä¸ºå¯¹è±¡<code>OperateNode</code>çš„æ•°æ®ç»“æ„,å¹¶ä¸”å®ç°ç±»<code>OperateNodeA</code>å’Œ<code>OperateNodeB</code>è¡Œä¸ºæ–¹æ³•æœ‰å„è‡ªçš„å®ç°ã€‚å¹¶ä¸”æƒ³åŸºäºè¿™ä¸ªç›¸å¯¹å›ºå®šçš„æ•°æ®ç»“æ„å®ç°å¤šç§ä¸åŒçš„æ“ä½œ<code>ï¼ˆvisitorï¼‰</code>ã€‚è¿™æ ·åœ¨å¢åŠ <code>visitor</code>çš„æ—¶å€™ä¸å¿…è€ƒè™‘æ•°æ®ç»“æ„ä¼šå‘ç”Ÿå˜æ›´ã€‚</p><h3 id="äºŒã€æ—¶åº"><a href="#äºŒã€æ—¶åº" class="headerlink" title="äºŒã€æ—¶åº"></a>äºŒã€æ—¶åº</h3><p>ç”±äºè°ƒç”¨è¿‡ç¨‹æ¯”è¾ƒä¸å®¹æ˜“çœ‹é€ï¼Œè¿™é‡Œæˆ‘å…ˆä½¿ç”¨æ—¶åºå›¾æ¥è¯´æ˜è°ƒç”¨é¡ºåº</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190616112121.png" alt="è°ƒç”¨è¿‡ç¨‹æ—¶åº"></p><h2 id="ä»£ç å®ä¾‹"><a href="#ä»£ç å®ä¾‹" class="headerlink" title="ä»£ç å®ä¾‹"></a>ä»£ç å®ä¾‹</h2><p>æ ¹æ®ç±»å›¾å¯ä»¥çœ‹å‡ºï¼Œè®¿é—®è€…æ¨¡å¼åˆ†ä¸ºäº”éƒ¨åˆ†ï¼šæŠ½è±¡èŠ‚ç‚¹è§’è‰² ã€å…·ä½“èŠ‚ç‚¹è§’è‰² ã€æŠ½è±¡è®¿é—®è€…è§’è‰² ã€å…·ä½“è®¿é—®è€…è§’è‰² ã€ç»“æ„å¯¹è±¡è§’è‰²</p><ul><li>æŠ½è±¡èŠ‚ç‚¹è§’è‰²ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">OperateNode</span> </span>&#123;</span><br><span class="line"><span class="comment">//  å®šä¹‰èŠ‚ç‚¹å†…éƒ½éœ€è¦å®ç°çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…·ä½“èŠ‚ç‚¹è§’è‰²ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·ä½“èŠ‚ç‚¹A åœ¨å®ä¾‹ä¸­å¯¹åº”ç ”å‘äººå‘˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OperateNodeA</span> <span class="keyword">extends</span> <span class="title">OperateNode</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç»©æ•ˆç³»æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> COEFFICIENT = <span class="number">1.2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> workDate;</span><br><span class="line"></span><br><span class="line">    OperateNodeA(<span class="keyword">int</span> workDate) &#123;</span><br><span class="line">        <span class="keyword">this</span>.workDate = workDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">        visitor.visit(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">attendance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> workDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">performance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> workDate * COEFFICIENT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…·ä½“èŠ‚ç‚¹Bï¼Œåœ¨å®ä¾‹ä¸­å¯¹åº”è¿ç»´äººå‘˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OperateNodeB</span> <span class="keyword">extends</span> <span class="title">OperateNode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> COEFFICIENT = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> workDate;</span><br><span class="line"></span><br><span class="line">    OperateNodeB(<span class="keyword">int</span> workDate) &#123;</span><br><span class="line">        <span class="keyword">this</span>.workDate = workDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">        visitor.visit(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">attendance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> workDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">performance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> workDate * COEFFICIENT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŠ½è±¡è®¿é—®è€…è§’è‰²</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é’ˆå¯¹ç»“æ„ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹åˆ†åˆ«è¿›è¡Œå„è‡ªçš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeA operateNodeA)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeB operateNodeB)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…·ä½“è®¿é—®è€…è§’è‰²</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡Œæ”¿äººå‘˜ç»“ç®—è€ƒå‹¤</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VisitorA</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// éœ€è¦å¯¹å®æ–½äººå‘˜å¢åŠ è·¯ä¸Šçš„è€ƒå‹¤æ—¶é—´ æ¨¡å¼ä¸º2</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BASIC = <span class="number">2</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeA operateNodeA)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> att = operateNodeA.attendance();</span><br><span class="line">        System.out.println(<span class="string">"æœ¬æœˆè¯¥ç ”å‘äººå‘˜è€ƒå‹¤ä¸º"</span>+att + <span class="string">"å¤©"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeB operateNodeB)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> att =operateNodeB.attendance() + BASIC;</span><br><span class="line">        System.out.println(<span class="string">"æœ¬æœˆè¯¥å®æ–½äººå‘˜è€ƒå‹¤ä¸º"</span>+att + <span class="string">"å¤©"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è´¢åŠ¡äººå‘˜ç»“ç®—ç»©æ•ˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VisitorB</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç ”å‘éœ€è¦æ·»åŠ é¢å¤–ç»©æ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> EXTRA = <span class="number">2</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeA operateNodeA)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> att = operateNodeA.performance() + EXTRA;</span><br><span class="line">        System.out.println(<span class="string">"æœ¬æœˆè¯¥ç ”å‘äººå‘˜ç»©æ•ˆä¸º :"</span>+att );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(OperateNodeB operateNodeB)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> att =operateNodeB.performance() ;</span><br><span class="line">        System.out.println(<span class="string">"æœ¬æœˆè¯¥ç ”å‘äººå‘˜ç»©æ•ˆä¸º :"</span>+att );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»“æ„å¯¹è±¡ç»“æ„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OperateStructure</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ç»“æ„ä½“</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;OperateNode&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(OperateNode operateNode)</span></span>&#123;</span><br><span class="line">        list.add(operateNode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¯¹ç»“æ„ä½“ä¸­çš„å¯¹è±¡å®ç°æ¥æ”¶è®¿é—®æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">action</span><span class="params">(Visitor visitor)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (OperateNode operateNode : list)&#123;</span><br><span class="line">        <span class="comment">// ç›®çš„å°±æ˜¯ä½¿ç”¨åŒé‡åˆ†æ´¾è°ƒç”¨æ¥å®ç°</span></span><br><span class="line">        <span class="comment">// èŠ‚ç‚¹æ¥å—è®¿é—®è€…ä¸è®¿é—®è€…è®¿é—®èŠ‚ç‚¹çš„æ“ä½œ</span></span><br><span class="line">            operateNode.accept(visitor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å®¢æˆ·ç«¯è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Visitor visitorA = <span class="keyword">new</span> VisitorA();</span><br><span class="line">        Visitor visitorB = <span class="keyword">new</span> VisitorB();</span><br><span class="line">        OperateStructure structure = <span class="keyword">new</span> OperateStructure();</span><br><span class="line">        structure.add(<span class="keyword">new</span> OperateNodeA(<span class="number">22</span>));</span><br><span class="line">        structure.add(<span class="keyword">new</span> OperateNodeB(<span class="number">22</span>));</span><br><span class="line">        structure.action(visitorA);</span><br><span class="line">        structure.action(visitorB);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æœ¬æœˆè¯¥ç ”å‘äººå‘˜è€ƒå‹¤ä¸º22å¤©</span><br><span class="line">æœ¬æœˆè¯¥å®æ–½äººå‘˜è€ƒå‹¤ä¸º24å¤©</span><br><span class="line">æœ¬æœˆè¯¥ç ”å‘äººå‘˜ç»©æ•ˆä¸º :28.4</span><br><span class="line">æœ¬æœˆè¯¥ç ”å‘äººå‘˜ç»©æ•ˆä¸º :22.0</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</title>
      <link href="/2019/06/14/2019-06-14-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/14/2019-06-14-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</h1><p>ä»£ç†æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ã€‚ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>è¿œç¨‹ä»£ç†ä¸åŒåœ°å€ç©ºé—´çš„å¯¹è±¡ï¼Œéƒ½å½“ä½œæœ¬åœ°åŒ–å¯¹è±¡æ¥å¤„ç†</li><li>æ§åˆ¶å¯¹è±¡çš„è®¿é—®æƒé™ã€‚</li></ol><p>å½“é‡åˆ°ä¸€ä¸‹æƒ…å†µæ˜¯å¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼š</p><ul><li>æƒ³æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®</li><li>æ‡’åŠ è½½</li><li>æ§åˆ¶æ—¥å¿—è¾“å‡º</li><li>è®¡ç®—å¯¹è±¡å¼•ç”¨</li><li>æ§åˆ¶ç½‘ç»œé“¾æ¥é—®é¢˜</li></ul><h2 id="ä»£ç†æ¨¡å¼æ¨¡å¼ç»“æ„"><a href="#ä»£ç†æ¨¡å¼æ¨¡å¼ç»“æ„" class="headerlink" title="ä»£ç†æ¨¡å¼æ¨¡å¼ç»“æ„"></a>ä»£ç†æ¨¡å¼æ¨¡å¼ç»“æ„</h2><p>æµ´å®¤åˆ†ä¸ºç”·æµ´å®¤å’Œå¥³æµ´å®¤ï¼Œå…¶ä¸­å‰å°åˆ¤æ–­èƒ½å¤Ÿè¿›å…¥æµ´å®¤çš„å‰ææ˜¯æ²¡æœ‰çš®è‚¤ç—…ï¼Œå¦‚æœ‰æ²¡æœ‰ï¼Œæ‰è®©è¿›å…¥æµ´å®¤ã€‚è¿™é‡Œçš„å‰å°å°±æ˜¯ä¸€ä¸ªä»£ç†ï¼Œå®ƒä»£ç†æ¥æµ´å®¤ï¼Œç”¨æ¥åˆ¤æ–­èƒ½å¦è¿›å…¥æµ´å®¤çš„æƒé™ã€‚è¿™å°±æ˜¯ä»£ç†çš„ä½œç”¨ã€‚</p><p>ä»£ç†æ¨¡å¼å’Œè£…é¥°è€…æ¨¡å¼æ¯”è¾ƒå®¹æ˜“æ··æ·†ã€‚éœ€è¦è®°ä½çš„æ˜¯ï¼Œä¸¤è€…çš„åŠŸèƒ½åŒºåˆ«åœ¨äºï¼Œä»£ç†æ¨¡å¼æ”¹å˜çš„æ˜¯å¯¹è±¡çš„èŒèƒ½ï¼Œæ§åˆ¶å¯¹è±¡çš„è¡Œä¸ºã€‚è€Œè£…é¥°è€…æ¨¡å¼æ˜¯å¯¹èŒèƒ½çš„å¢åŠ å’Œå‡å°‘ã€‚ä½¿ç”¨åœºæ™¯ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190614132147.png" alt="ä»£ç†æ¨¡å¼ç»“æ„å›¾"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä»£ç†æ¨¡å¼å¤§è‡´èƒ½å¤Ÿåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæŠ½è±¡èŒèƒ½ç±»ï¼Œä»£ç†ç±»ï¼Œè¢«ä»£ç†ç±»</p><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡èŒèƒ½ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Person åŸºæœ¬ä¿¡æ¯ç±» å’Œæ€§åˆ«æšä¸¾ </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SexEnum sex;</span><br><span class="line">    <span class="comment">//æ˜¯å¦æœ‰çš®è‚¤ç—…</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hasSkinDisease;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, SexEnum sex, <span class="keyword">int</span> hasSkinDisease)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">        <span class="keyword">this</span>.hasSkinDisease = hasSkinDisease;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SexEnum <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getHasSkinDisease</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hasSkinDisease;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SexEnum &#123;</span><br><span class="line">    MALE,FEMALE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡èŒèƒ½</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BathRoom</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å»æ¾¡å ‚æ³¡æ¾¡</span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> BathRoom <span class="title">enterBathroom</span><span class="params">(Person person)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒéƒ¨åˆ†ï¼šè¢«ä»£ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaleBathRoom</span> <span class="keyword">extends</span> <span class="title">BathRoom</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BathRoom <span class="title">enterBathroom</span><span class="params">(Person p)</span> </span>&#123;</span><br><span class="line">        String sexName = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span>(SexEnum.MALE.equals(p.getSex()))&#123;</span><br><span class="line">            sexName = SexEnum.MALE.toString();</span><br><span class="line">            System.out.println(<span class="string">"name : "</span>+ p.getName() +<span class="string">" sex: "</span>+ sexName +<span class="string">" go bath for male !"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BathRoomProxy</span> <span class="keyword">extends</span> <span class="title">BathRoom</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    BathRoom bathRoom;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BathRoomProxy</span><span class="params">(BathRoom bathRoom)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bathRoom = bathRoom;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BathRoom <span class="title">enterBathroom</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (person.getHasSkinDisease() == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.bathRoom.enterBathroom(person);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(person.getName() + <span class="string">" has disease."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯è°ƒç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="string">"1"</span>,SexEnum.MALE,<span class="number">0</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"2"</span>,SexEnum.MALE,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        BathRoomProxy bathRoomProxy = <span class="keyword">new</span> BathRoomProxy(<span class="keyword">new</span> MaleBathRoom());</span><br><span class="line">        bathRoomProxy.enterBathroom(p1).enterBathroom(p2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name : 1 sex: MALE go bath for male !</span><br><span class="line">2 has disease.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼</title>
      <link href="/2019/06/13/2019-06-13-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/13/2019-06-13-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼</h1><p>äº«å…ƒæ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ã€‚äº«å…ƒæ¨¡å¼ä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ã€‚å®ƒç”¨äºé€šè¿‡å°½å¯èƒ½å¤šåœ°ä¸ç±»ä¼¼å¯¹è±¡å…±äº«æ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨æˆ–è®¡ç®—å¼€é”€ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>åº”ç”¨ä¸­éœ€è¦å¤§é‡çš„å¯¹è±¡ï¼Œå¤§é‡çš„å¯¹è±¡å¯èƒ½é€ æˆå­˜å‚¨å¯¹è±¡çš„å¼€é”€ã€‚</li><li>å¯¹è±¡å˜åŒ–çš„çŠ¶æ€å¤§å¤šæ˜¯å¤–éƒ¨çŠ¶æ€ã€‚ä¸€æ—¦å¤–éƒ¨çŠ¶æ€è¢«ç§»é™¤ï¼Œè®¸å¤šå¯¹è±¡ç»„å¯è¢«ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡æ›¿æ¢ã€‚è¿™ä¹Ÿå°±æ˜¯äº«å…ƒæ¨¡å¼åˆ©ç”¨çš„ç‚¹ã€‚</li><li>å› ä¸ºåœ¨äº«å…ƒæ¨¡å¼ä¸­å¯¹è±¡æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥åœ¨å«ä¹‰ä¸Šçš„ä¸åŒå¯¹è±¡ä½¿ç”¨equelså®é™…è¿”å›çš„æ˜¯trueã€‚</li></ol><h2 id="äº«å…ƒæ¨¡å¼ç»“æ„"><a href="#äº«å…ƒæ¨¡å¼ç»“æ„" class="headerlink" title="äº«å…ƒæ¨¡å¼ç»“æ„"></a>äº«å…ƒæ¨¡å¼ç»“æ„</h2><p>äº«å…ƒæ¨¡å¼é‡‡ç”¨ä¸€ä¸ªå…±äº«æ¥é¿å…å¤§é‡æ‹¥æœ‰ç›¸åŒå†…å®¹å¯¹è±¡çš„å¼€é”€ã€‚è¿™ç§å¼€é”€æœ€å¸¸è§ã€æœ€ç›´è§‚çš„å°±æ˜¯å†…å­˜çš„æŸè€—ã€‚äº«å…ƒå¯¹è±¡èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†å†…è•´çŠ¶æ€(Internal State)å’Œå¤–è•´çŠ¶æ€(External State)ã€‚</p><p>å†…è•´çŠ¶æ€å†³å®šå¯¹è±¡æœ¬èº«çš„çŠ¶æ€ï¼Œä¸ä¼šéšç€ç¯å¢ƒçš„å˜åŒ–è€Œå˜åŒ–ï¼Œè€Œå¤–è•°çŠ¶æ€æ˜¯ç”±å®¢æˆ·ç«¯å°†çŠ¶æ€ä¼ é€’ç»™äº«å…ƒå¯¹è±¡çš„ï¼Œå¤–è•´çŠ¶æ€ç±»ä¼¼åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒçš„è¡Œä¸ºï¼Œå†…è•´çŠ¶æ€å’Œå¤–è•°çŠ¶æ€æ˜¯ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„ã€‚</p><p>äº«å…ƒæ¨¡å¼ä¸»è¦è¿™å‡ ä¸‰ä¸ªéƒ¨åˆ†ï¼šæŠ½è±¡äº«å…ƒç±»ï¼Œå…·ä½“äº«å…ƒç±»å’Œäº«å…ƒå·¥å‚ç±»ã€‚å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢ä»£ç ã€‚</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190613005252.png" alt="äº«å…ƒæ¨¡å¼"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>åœ¨Javaä¸­ï¼ŒStringç±»å°±ç¬¦åˆäº«å…ƒæ¨¡å¼ï¼Œ<code>string a = &quot;aa&quot;</code> å’Œ <code>string b =&quot;aa&quot;</code> æ˜¯ç›¸ç­‰çš„ã€‚</p><p>åœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œæ„é€ æŠ½è±¡äº«å…ƒç±»â€œMyStringâ€ å’Œå®ƒçš„å…·ä½“å®ç°ç±»ï¼Œä½¿ç”¨åˆ°ç›¸åŒçš„å¯¹è±¡ï¼Œå› ä¸ºäº«å…ƒæ¨¡å¼ï¼Œå¯ä»¥å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œå…±äº«ä½¿ç”¨ã€‚</p><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡äº«å…ƒç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">(String outerState)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æšä¸¾ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> InstanceType &#123;</span><br><span class="line">    INSTANCE1,INSTANCE2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒéƒ¨åˆ†ï¼šå…·ä½“äº«å…ƒç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringIns1</span> <span class="keyword">implements</span> <span class="title">MyString</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†…éƒ¨çŠ¶æ€ï¼Œä¸å¯éšæ—¶å˜åŒ–çš„</span></span><br><span class="line">    String innerState;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StringIns1</span><span class="params">(String innerState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.innerState = innerState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(String outerState)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"create instance 1 -&gt; innerState:"</span>+<span class="keyword">this</span>.innerState);</span><br><span class="line">        <span class="comment">//å¤–éƒ¨çŠ¶æ€ï¼Œéœ€è¦å®¢æˆ·ç«¯ä¼ è¿›æ¥ï¼Œè¿™ä¸ªå€¼æ˜¯å¯å˜åŒ–çš„</span></span><br><span class="line">        System.out.println(<span class="string">"create instance 1 -&gt; outerState:"</span>+outerState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringIns2</span> <span class="keyword">implements</span> <span class="title">MyString</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String innerState;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StringIns2</span><span class="params">(String innerState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.innerState = innerState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(String outerState)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"create instance 2 -&gt; innerState:"</span>+<span class="keyword">this</span>.innerState);</span><br><span class="line">        System.out.println(<span class="string">"create instance 2 -&gt; outerState:"</span>+outerState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šäº«å…ƒå·¥å‚ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyWeight</span> </span>&#123;</span><br><span class="line">    Map&lt;InstanceType,MyString&gt; store;</span><br><span class="line"></span><br><span class="line">    FlyWeight() &#123;</span><br><span class="line">        store = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyString <span class="title">factory</span><span class="params">(InstanceType instanceType)</span></span>&#123;</span><br><span class="line">        MyString curr = store.get(instanceType);</span><br><span class="line">        <span class="keyword">if</span>(curr == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå¯¹è±¡ä¸å­˜åœ¨ï¼Œæ–°å»ºå¯¹åº”çš„å¯¹è±¡</span></span><br><span class="line">            <span class="keyword">if</span>(instanceType.equals(InstanceType.INSTANCE1))&#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®å†…éƒ¨çŠ¶æ€å†³å®šç”Ÿæˆå“ªä¸ªç±»å‹çš„å­ç±»</span></span><br><span class="line">                curr= <span class="keyword">new</span> StringIns1(instanceType.toString());</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(instanceType.equals(InstanceType.INSTANCE2))&#123;</span><br><span class="line">                curr= <span class="keyword">new</span> StringIns2(instanceType.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        store.put(instanceType,curr);</span><br><span class="line">        <span class="keyword">return</span> curr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬å››éƒ¨åˆ†ï¼šå®¢æˆ·ç«¯è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FlyWeight flyWeight = <span class="keyword">new</span> FlyWeight();</span><br><span class="line">        MyString ins1 = flyWeight.factory(InstanceType.INSTANCE1);</span><br><span class="line">        MyString ins2 = flyWeight.factory(InstanceType.INSTANCE1);</span><br><span class="line">        System.out.println(ins1.equals(ins2));<span class="comment">//true æ˜¯åŒä¸€ä¸ªå¯¹è±¡ å†…éƒ¨çŠ¶æ€ç›¸åŒ</span></span><br><span class="line">        ins1.create(<span class="string">"*****"</span>); <span class="comment">//é’ˆå¯¹å¤–éƒ¨çŠ¶æ€æ‰“å°ä¸åŒå†…å®¹</span></span><br><span class="line">        ins2.create(<span class="string">"-----"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">true</span><br><span class="line">create instance 1 -&gt; innerState:INSTANCE1</span><br><span class="line">create instance 1 -&gt; outerState:*****</span><br><span class="line">create instance 1 -&gt; innerState:INSTANCE1</span><br><span class="line">create instance 1 -&gt; outerState:-----</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</title>
      <link href="/2019/06/12/2019-06-12-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/12/2019-06-12-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</h1><p>å¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚å¯¹è±¡è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œä½¿å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å› ä¸ºå­ç³»ç»Ÿéšç€å‘å±•ä¼šå˜æ›´çš„æ›´å¤æ‚ï¼Œå®¢æˆ·ç«¯æƒ³æ›´ç®€å•ç»Ÿä¸€ç»™å­ç³»ç»Ÿå»ºç«‹ä¸€ä¸ªå…¬å…±çš„è°ƒç”¨æ–¹å¼ã€‚è¿™æ ·å³ä½¿å­ç³»ç»Ÿçš„å†å¢åŠ å¯é‡ç”¨æ€§è€Œå˜å¾—æ›´åŠ å¤æ‚ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¸å¿…çŸ¥é“ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¾€å¾€ä¸éœ€è¦é’ˆå¯¹æŸä¸€ä¸ªå­ç³»ç»Ÿè¿›è¡Œç‰¹å®šçš„å®šåˆ¶åŒ–ã€‚</li><li>å®ç°äº†å­ç³»ç»Ÿä¸å®¢æˆ·ä¹‹é—´çš„æ¾è€¦åˆå…³ç³»ï¼Œè¿™ä½¿å¾—å­ç³»ç»Ÿçš„ç»„ä»¶å˜åŒ–ä¸ä¼šå½±å“åˆ°è°ƒç”¨å®ƒçš„å®¢æˆ·ç±»ï¼Œåªéœ€è¦è°ƒæ•´å¤–è§‚ç±»å³å¯ã€‚</li></ul><h2 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h2><p>å¤–è§‚æ¨¡å¼ä¸­å®¢æˆ·ç«¯ä¾é Facadeç±»æ¥è°ƒç”¨å¤šä¸ªå­ç³»ç»Ÿï¼Œæ¥è¾¾åˆ°ç®€åŒ–å®¢æˆ·ç«¯è°ƒç”¨çš„ç›®çš„ã€‚</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190613005252.png" alt="å¤–è§‚æ¨¡å¼"></p><p>ä¾‹å­ä¸­ï¼Œæ¯æ¬¡å¼€æœºçš„æ—¶å€™éƒ½è¦å¯åŠ¨mysql,apacheæœåŠ¡ï¼Œä¸¤ä¸ªè¿˜å¥½ï¼Œè¦æ˜¯æœ‰æ›´å¤šæœåŠ¡å²‚ä¸æ˜¯å¾ˆæ¼äººï¼Œæ¯æ¬¡éƒ½è¦æ•²ä¸€å¤§å †å‘½ä»¤æ¥å¼€å¯æœåŠ¡ã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œå°†æ‰€æœ‰æœåŠ¡åŠ å…¥åˆ°å¤–è§‚ç±»ä¸­ï¼Œæ¯æ¬¡å¼€æœºåªç”¨è°ƒç”¨å¤–è§‚ç±»ä¸­çš„æ¥å£å°±è¡Œäº†ã€‚æ¥è¾¾åˆ°ç®€åŒ–å®¢æˆ·ç«¯ä½¿ç”¨çš„ç›®çš„ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šå­ç³»ç»Ÿæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Services</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">restart</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// mysql æœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysqlService</span> <span class="keyword">implements</span> <span class="title">Services</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"mysql is started"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"mysql is stopped"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"mysql is restart"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// apache æœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApacheService</span> <span class="keyword">implements</span> <span class="title">Services</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"apache is started"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"apache is stopped"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"apache is restart"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒéƒ¨åˆ†ï¼šå¤–è§‚ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    List&lt;Services&gt; services;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Facade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        services = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addService</span><span class="params">(Services services)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.services.add(services);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Services services : <span class="keyword">this</span>.services)&#123;</span><br><span class="line">            services.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Services services : <span class="keyword">this</span>.services)&#123;</span><br><span class="line">            services.stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">restart</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Services services : <span class="keyword">this</span>.services)&#123;</span><br><span class="line">            services.restart();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®¢æˆ·ç«¯è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Facade facade = <span class="keyword">new</span> Facade();</span><br><span class="line">        facade.addService(<span class="keyword">new</span> MysqlService());</span><br><span class="line">        facade.addService(<span class="keyword">new</span> ApacheService());</span><br><span class="line">        facade.start();</span><br><span class="line">        facade.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql is started</span><br><span class="line">apache is started</span><br><span class="line">mysql is stopped</span><br><span class="line">apache is stopped</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°è€…æ¨¡å¼</title>
      <link href="/2019/06/10/2019-06-10-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/10/2019-06-10-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°è€…æ¨¡å¼</h1><p>å¯ä»¥åŠ¨æ€åœ°å°†é™„åŠ èŒè´£é™„åŠ ç»™å¯¹è±¡ã€‚è£…é¥°å™¨ä¸ºå­ç±»åŒ–çš„æ–¹å¼æä¾›äº†çµæ´»çš„æ›¿ä»£æ‰©å±•åŠŸèƒ½ã€‚æ¯”å¦‚åšæ¢¦æ¢¦åˆ°äº†äº¤ä¸ªå¥³æœ‹å‹ï¼Œå¥¹çš„å‘å‹ï¼Œå‘è‰²ï¼Œç©¿ç€éƒ½æ˜¯æ ¹æ®åœºæ™¯åšæ¢¦æ¢¦åˆ°çš„æ—¶å€™é™„åŠ ä¸Šå»çš„ã€‚è¿™æ—¶ï¼Œå°±åº”è¯¥å¯¹â€œå¥³æœ‹å‹â€è¿™ä¸ªå¯¹è±¡å®è¡Œè£…é¥°è€…æ¨¡å¼æ¥åŠ¨æ€çš„ã€çµæ´»çš„æ‹“å±•ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>åŠ¨æ€ä¸”é€æ˜åœ°å‘å„ä¸ªå¯¹è±¡æ·»åŠ èŒè´£çš„åŒæ—¶ä¸å½±å“å…¶ä»–å¯¹è±¡ã€‚</li><li>çµæ´»çš„å¯æ’¤å›èŒè´£ã€‚</li><li>æœ‰æ—¶å€™éœ€è¦å¾ˆå¤šå­ç±»æ¥ç”¨äºæ”¯æŒæ¯ç§åŠŸèƒ½çš„ç»„åˆï¼Œè¿™æ ·æ¯æ¬¡å¢åŠ ä¸€ç§åŠŸèƒ½æ‹“å±•å°±è¦å¢åŠ å¾ˆå¤šå­ç±»çš„æƒ…å†µã€‚æ˜¾ç„¶è¿™æ ·æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ã€‚æ‰€ä»¥é‡åˆ°è¿™ç§å¤šåŠŸèƒ½æ‹“å±•æ—¶ï¼Œéœ€è¦ä½¿ç”¨è£…é¥°è€…æ¨¡å¼æ¥è§£å†³ã€‚</li></ol><h2 id="è£…é¥°è€…æ¨¡å¼ç»“æ„"><a href="#è£…é¥°è€…æ¨¡å¼ç»“æ„" class="headerlink" title="è£…é¥°è€…æ¨¡å¼ç»“æ„"></a>è£…é¥°è€…æ¨¡å¼ç»“æ„</h2><p>è£…é¥°è€…æ¨¡å¼å¯ä»¥å¤§è‡´åˆ†ä¸ºå››ç§ç»“æ„ï¼ˆæœ¬ä¾‹å­ä¸­çš„æŠ½è±¡æ„ä»¶å’ŒæŠ½è±¡è£…é¥°ç±»ä¸ºä¸€ä¸ªï¼‰æŠ½è±¡æ„ä»¶ï¼Œå…·ä½“æ„ä»¶ï¼ŒæŠ½è±¡è£…é¥°ç±»ï¼Œå®é™…è£…é¥°ç±»ã€‚</p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190610190339.png" alt="è£…é¥°è€…æ¨¡å¼"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡æ„ä»¶ä¸æŠ½è±¡è£…é¥°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¶é€ ä¸€ä¸ªå‡æƒ³çš„â€œå¥³æœ‹å‹â€</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractGirl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dyeHair</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">wearClothes</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒéƒ¨åˆ†ï¼šå®ç°ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬çš„åŠŸèƒ½å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalGirl</span> <span class="keyword">extends</span> <span class="title">AbstractGirl</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dyeHair</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"normal hair"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wearClothes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"normal clothes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šé™„åŠ è£…é¥°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¥ä½œä¸­çš„å¥³å­© ç©¿æ­£è£…</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WorkGirl</span> <span class="keyword">extends</span> <span class="title">AbstractGirl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    AbstractGirl abstractGirl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WorkGirl</span><span class="params">(AbstractGirl abstractGirl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.abstractGirl = abstractGirl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wearClothes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        abstractGirl.wearClothes();</span><br><span class="line">        System.out.println(<span class="string">"wearClothes after : "</span>);</span><br><span class="line">        System.out.println(<span class="string">"wear formal clothes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®é™…å‡ºå»é€›è¡—çš„å¥³å­©åº”è¯¥æ˜¯è¿™æ ·çš„</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FashionGirl</span> <span class="keyword">extends</span> <span class="title">AbstractGirl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    AbstractGirl abstractGirl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FashionGirl</span><span class="params">(AbstractGirl abstractGirl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.abstractGirl = abstractGirl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dyeHair</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        abstractGirl.dyeHair();</span><br><span class="line">        System.out.println(<span class="string">"dyeHair after : "</span>);</span><br><span class="line">        System.out.println(<span class="string">"dye blue hair"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wearClothes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        abstractGirl.wearClothes();</span><br><span class="line">        System.out.println(<span class="string">"wearClothes after : "</span> );</span><br><span class="line">        System.out.println(<span class="string">"wear rock type clothes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        abstractGirl.pack();</span><br><span class="line">        System.out.println(<span class="string">"wearClothes after : "</span> );</span><br><span class="line">        System.out.println(<span class="string">"take fashion pack"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åå®¢æˆ·ç«¯çš„è°ƒç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å…ˆåˆ¶é€ ä¸€ä¸ªæ•´ä½“ç»„ä»¶</span></span><br><span class="line">        AbstractGirl normalGirl = <span class="keyword">new</span> NormalGirl();</span><br><span class="line">        normalGirl.dyeHair();</span><br><span class="line">        <span class="comment">// ä¸ºç»„ä»¶æ·»åŠ è£…é¥°ï¼Œæ¯”å¦‚è¿™é‡ŒåŠ äº†ä¸ªæ—¶å°šçš„åŒ…åŒ…</span></span><br><span class="line">        AbstractGirl fashionHair = <span class="keyword">new</span> FashionGirl(normalGirl);</span><br><span class="line">        fashionHair.pack();</span><br><span class="line">        <span class="comment">//ç©¿ä¸€å¥—æ­£è£…</span></span><br><span class="line">        AbstractGirl workClose = <span class="keyword">new</span> WorkGirl(fashionHair);</span><br><span class="line">        workClose.wearClothes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼</title>
      <link href="/2019/06/03/2019-06-03-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/03/2019-06-03-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼</h1><p>ç›®çš„åœ¨äºå°†æŠ½è±¡ä¸å…¶å®ç°åˆ†ç¦»ï¼Œä»¥ä¾¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ç‹¬ç«‹å˜åŒ–çš„åŒæ—¶èƒ½å¤Ÿæ ¹æ®æŠ½è±¡ç±»çš„å¯¹è±¡å…³è”ä»è€Œèƒ½å¤Ÿå°†ä¸¤ä¸ªç»§æ‰¿ç»“æ„è”åŠ¨èµ·æ¥ã€‚å°±åƒåœ¨ä¸¤ä¸ªç»“æ„ä¹‹é—´å»ºç«‹ä¸ªæ¡¥æ¢ä¸€æ ·è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥å«æ¡¥æ¥æ¨¡å¼ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>å¦‚æœæƒ³é¿å…æŠ½è±¡ç±»ä¸å®ç°çš„æ°¸ä¹…ç»‘å®šï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é—´é€‰æ‹©å’Œåˆ‡æ¢å®ç°ç±»ã€‚</li><li>æŠ½è±¡ç±»å’Œæ¥å£éƒ½åº”è¯¥é€šè¿‡å­ç±»æ¥è¿›è¡Œæ‹“å±•ï¼Œåœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å­ç±»æ¥è¿›è¡Œç»„åˆçš„åŒæ—¶èƒ½å¤Ÿç‹¬ç«‹æ‹“å±•ä»–ä»¬ã€‚</li><li>æ¥å£çš„å®ç°çš„å˜åŒ–å¯¹å®¢æˆ·ç«¯æ— å½±å“ã€‚</li><li>å¦‚æœæƒ³è¦åœ¨å¤šä¸ªå¯¹è±¡ç±»ä¸­å…±äº«å®ç°ï¼Œå¹¶ä¸”é¿å…è®©å®¢æˆ·ç«¯æ„ŸçŸ¥åˆ°ã€‚</li></ol><h2 id="æ¡¥æ¥æ¨¡å¼ç»“æ„å›¾"><a href="#æ¡¥æ¥æ¨¡å¼ç»“æ„å›¾" class="headerlink" title="æ¡¥æ¥æ¨¡å¼ç»“æ„å›¾"></a>æ¡¥æ¥æ¨¡å¼ç»“æ„å›¾</h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190603220348.png" alt="æ¡¥æ¥æ¨¡å¼"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œ1.æŠ½è±¡ç±» 2.æŠ½è±¡å®ç°ç±» 3.æ¥å£ç±» 4.æ¥å£å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŠ½è±¡ç±»ä¸æŠ½è±¡å®ç°ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Colors colors;</span><br><span class="line"></span><br><span class="line">    Shape(Colors colors) &#123;</span><br><span class="line">        <span class="keyword">this</span>.colors = colors;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildShape</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ†å½¢å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeCircle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShapeCircle</span><span class="params">(Colors colors)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(colors);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildShape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"\n first step : build circle\n and second step:"</span>);</span><br><span class="line">        colors.paint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ–¹å½¢å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeSquare</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShapeSquare</span> <span class="params">(Colors colors)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(colors);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildShape</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"\n first step : build Square\n and second step:"</span>);</span><br><span class="line">        colors.paint();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ½è±¡æ–¹æ³•ä¸­å¼•ç”¨äº†Colorsç±»å˜é‡ï¼Œä½¿ç”¨å®ç°ç±»ä¸­çš„buildShapeæ–¹æ³•å®ç°å…·ä½“åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Colors</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorBlue</span> <span class="keyword">implements</span> <span class="title">Colors</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">" print blue !!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorRed</span> <span class="keyword">implements</span> <span class="title">Colors</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">" paint inner with red !!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨Coloræ¥å£ï¼Œå®ç°ç±»å®ç°Colorsä¸­çš„paintæ–¹æ³•å®ç°Color</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Shape circle = <span class="keyword">new</span> ShapeCircle(<span class="keyword">new</span> ColorBlue());</span><br><span class="line">        circle.buildShape();</span><br><span class="line">        Shape square = <span class="keyword">new</span> ShapeSquare(<span class="keyword">new</span> ColorRed());</span><br><span class="line">        square.buildShape();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœï¼š</span><br><span class="line"></span><br><span class="line"> first step : build circle</span><br><span class="line"> and second step:</span><br><span class="line"> print blue !!</span><br><span class="line"></span><br><span class="line"> first step : build Square</span><br><span class="line"> and second step:</span><br><span class="line"> paint red !!</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé¢œè‰²å’Œå›¾å½¢æ˜¯ä¸¤ä¸ªç‹¬ç«‹ä¸åŒçš„ç»´åº¦ï¼Œä¸¤ä¸ªå¯ä»¥åˆ†åˆ«å˜åŒ–ã€‚å°†ä¸¤ä¸ªç»´åº¦è®¾è®¡ä¸ºä¸¤ä¸ªä¸åŒçš„ç»§æ‰¿çš„ç»“æ„ï¼Œåœ¨ä¸¤ä¸ªç»“æ„ä¹‹é—´ä½¿ç”¨åœ¨æŠ½è±¡ç±»ä¸­çš„å…³è”æ¥è¾¾åˆ°é“¾æ¥çš„ç›®çš„ï¼Œè¿™ä¸ªé“¾æ¥æˆä¸ºä¸¤ä¸ªç»§æ‰¿ç»“æ„é€šä¿¡çš„æ¡¥æ¢ã€‚æ‰€ä»¥ä¸ºæ¡¥æ¥æ¨¡å¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼</title>
      <link href="/2019/06/02/2019-06-02-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/02/2019-06-02-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼</h1><p>ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹ï¼Œå¹¶é€šè¿‡å¤åˆ¶æ­¤åŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡.å®ç°æ–¹æ³•:é€šè¿‡å…‹éš†æ–¹æ³•,å®ç°å¯¹ç°æœ‰å¯¹è±¡çš„å¤åˆ¶å…‹éš†.</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å½“è¦åœ¨è¿è¡Œæ—¶æŒ‡å®šè¦å®ä¾‹åŒ–çš„ç±»æ—¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åŠ¨æ€åŠ è½½.</li><li>é¿å…æ„å»ºä¸äº§å“ç±»å±‚æ¬¡ç»“æ„ç›¸ä¼¼çš„å·¥å‚ç±»å±‚æ¬¡ç»“æ„</li><li>å½“ä¸€ä¸ªç±»çš„å®ä¾‹å¯ä»¥åªæœ‰å‡ ä¸ªä¸åŒçš„çŠ¶æ€çš„ç»„åˆä¹‹ä¸€æ—¶.ç»„è£…ç›¸åº”æ•°é‡çš„åŸå‹å¹¶å…‹éš†å®ƒä»¬å¯èƒ½æ›´æ–¹ä¾¿ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨å®ä¾‹åŒ–ç±»ï¼Œæ¯æ¬¡éƒ½æœ‰é€‚å½“çš„çŠ¶æ€.</li><li>ä¸å¯¹è±¡åˆ›å»ºç›¸æ¯”,ä½¿ç”¨å…‹éš†æˆæœ¬æ›´ä½</li></ul><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç›´æ¥ç”±ä»£ç çœ‹ç»“æ„,å…¶å®å…‹éš†çš„è¿‡ç¨‹å°±æ˜¯åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªç»†èƒ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> nanyin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 23:49 2019-06-01</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cell</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Cell</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Cell <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.clone();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Cell(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ç¨‹åº:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrototype</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Cell cell = <span class="keyword">new</span> Cell();</span><br><span class="line">       cell.setName(<span class="string">"org"</span>);</span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           Cell cloneCell = cell.clone();</span><br><span class="line">           Assert.assertEquals(<span class="string">"org"</span>,cloneCell.getName());<span class="comment">//pass</span></span><br><span class="line">           Assert.assertEquals(cell,cloneCell);<span class="comment">//not pass</span></span><br><span class="line">       &#125;<span class="keyword">catch</span> (CloneNotSupportedException e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼</title>
      <link href="/2019/06/02/2019-06-02-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/02/2019-06-02-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼</h1><p>æˆ‘ä»¬å®é™…ä¸­ä¼šç”¨åˆ°ä¸¤ä¸ªä¸åŒæ¥å£çš„ç±»çš„é€šä¿¡,åœ¨ä¸ä¿®æ”¹ä¸¤ä¸ªç±»çš„å‰æä¸‹,ä½¿ç”¨æ–°çš„ä¸­é—´ç±»æ¥å®Œæˆè¡”æ¥çš„è¿‡ç¨‹,è¿™ä¸ªä¸­é—´ä»¶å°±æ˜¯é€‚é…å™¨.å¯ä»¥è®©ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¥å£ç›¸äº’è½¬åŒ–.</p><p>é€‚é…å™¨æ¨¡å¼å…è®¸åœ¨é€‚é…å™¨ä¸­åŒ…è£…å…¶ä»–ä¸å…¼å®¹çš„å¯¹è±¡ï¼Œä»¥ä½¿å…¶ä¸å¦ä¸€ä¸ªç±»å…¼å®¹ã€‚</p><p>å°±å¦‚åŒç”Ÿæ´»ä¸­ä¹°äº†æ¸¯ç‰ˆçš„æ‰‹æœº,ä½†æ˜¯é™„èµ çš„æ˜¯ä¸‰è„šæ’å¤´ï¼Œè€Œå¤§é™†ä¸Šç”¨çš„æ˜¯ä¸¤è„šçš„ï¼Œéœ€è¦ä¸€ä¸ªé€‚é…å™¨æ¥å°†ä¸‰è§’æ’å¤´è½¬æ¢ä¸ºä¸¤è„šçš„ã€‚å…¶ä¸­è¿™ä¸ªä¸­é—´ä»¶å°±æ˜¯é€‚é…å™¨ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å½“ä½ æƒ³è¦è¿™ä¸ªç±»ï¼Œä½†æ˜¯ç±»ä¸­çš„æ¥å£ä¸æƒ³ç”¨çš„æ¥å£å¹¶ä¸åŒ¹é…</li><li>å½“æƒ³è¦å»åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„ç±»ï¼Œè®©å®ƒä¸ä¸ç›¸å…³æˆ–ä¸å¯é¢„è§çš„ç±»åˆä½œï¼Œè¿™ä¸ªç±»ä¸å¿…è¦æœ‰å…¼å®¹çš„æ¥å£</li><li>å½“ä½ éœ€è¦ä¸€ç³»åˆ—çš„å­ç±»çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦è°ƒæ•´è¿™äº›å­ç±»çš„æ¥å£æ–¹æ³•çš„æ—¶å€™ï¼Œå¯¹æ¯ä¸€ä¸ªæ¥å£å­ç±»åŒ–çš„è¿™ç§æ–¹æ³•æ˜¯ä¸å¯è¡Œçš„ã€‚è¿™æ—¶å°±å¯ä½¿ç”¨é€‚é…å™¨é€‚é…è¿™äº›å­ç±»çš„å¤«ç±»ã€‚</li></ul><h2 id="ç»“æ„å›¾"><a href="#ç»“æ„å›¾" class="headerlink" title="ç»“æ„å›¾"></a>ç»“æ„å›¾</h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190602120227.png" alt="é€‚é…å™¨æ¨¡å¼å›¾"></p><p>ä½¿ç”¨clientè°ƒç”¨é€‚é…å™¨ï¼Œé€‚é…å™¨ç»§æ‰¿ä¸ä¸‰è„šæ’å¤´ï¼Œä¾èµ–äºäºŒè„šæ’å¤´ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ä¸‰è„šæ’å¤´çš„æ¥å£è°ƒç”¨äºŒè„šæ’å¤´çš„æ–¹æ³•ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‰è§’æ’å¤´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> nanyin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 11:13 2019-06-02</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreeLeggedPlug</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"use three legged plug"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äºŒè„šæ’å¤´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> nanyin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 11:13 2019-06-02</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoLeggedPlug</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fastCharge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"use two legged plug for fast charge !"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€‚é…å™¨ ç»§æ‰¿ä¸‰è§’æ’å¤´</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoLeggedPlugAdapter</span> <span class="keyword">extends</span> <span class="title">ThreeLeggedPlug</span> </span>&#123;</span><br><span class="line">    TwoLeggedPlug twoLeggedPlug;</span><br><span class="line">    <span class="comment">// ä¾èµ–äºäºŒè„šæ’å¤´</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TwoLeggedPlugAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        twoLeggedPlug = <span class="keyword">new</span> TwoLeggedPlug();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨ä¸‰è§’æ’å¤´çš„chargeæ–¹æ³•ï¼Œè°ƒç”¨äºŒè„šæ’å¤´çš„fastChargeæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        twoLeggedPlug.fastCharge();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸS9æ¸¯ç‰ˆæ‰‹æœº</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">S9Plus</span> <span class="keyword">extends</span> <span class="title">ThreeLeggedPlug</span> </span>&#123;</span><br><span class="line">    ThreeLeggedPlug threeLeggedPlug;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">S9Plus</span><span class="params">(ThreeLeggedPlug threeLeggedPlug)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.threeLeggedPlug = threeLeggedPlug;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        threeLeggedPlug.charge();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®¢æˆ·ç«¯æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCharge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸ä½¿ç”¨é€‚é…å™¨ ä½¿ç”¨ç±»ä¸‰è§’æ’å¤´</span></span><br><span class="line">        ThreeLeggedPlug s9Plus = <span class="keyword">new</span> S9Plus(<span class="keyword">new</span> ThreeLeggedPlug());</span><br><span class="line">        s9Plus.charge();</span><br><span class="line">        <span class="comment">// ä½¿ç”¨äºŒè„šæ’å¤´çš„é€‚é…å™¨</span></span><br><span class="line">        ThreeLeggedPlug s9PlusUseTwoLeggedPlug = <span class="keyword">new</span> S9Plus(<span class="keyword">new</span> TwoLeggedPlugAdapter());</span><br><span class="line">        s9PlusUseTwoLeggedPlug.charge();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœï¼š</span><br><span class="line"></span><br><span class="line">use three legged plug</span><br><span class="line">use two legged plug for fast charge !</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</title>
      <link href="/2019/06/01/2019-06-01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/01/2019-06-01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</h1><p>å°†å¤æ‚å¯¹è±¡çš„æ„é€ ä¸å…¶è¡¨ç¤ºåˆ†å¼€ï¼Œä»¥ä¾¿ç›¸åŒçš„æ„é€ è¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p><p>æ¯”å¦‚åœ¨ç©æ¸¸æˆæ—¶çš„æäººç‰©çš„æ—¶å€™,åˆ›å»ºä¸€ä¸ªæ¸¸æˆä»»åŠ¡æœ€ç®€å•çš„æ–¹æ³•æ—¶è®¡ç®—æœºè‡ªå·±ç”Ÿæˆä¸€ä¸ªå›ºå®šçš„æ¸¸æˆä»»åŠ¡,ä½†æ˜¯æƒ³è‡ªå·±æ„å»ºè¿™ä¸ªäººç‰©ç»†èŠ‚çš„æ—¶å€™,è¿™ç§æƒ…å†µä¸‹,äººç‰©çš„ç”Ÿæˆæ—¶ä¸€æ­¥ä¸€æ­¥ç”Ÿæˆçš„.å†å½“æ‰€æœ‰ç±»å‹éƒ½é€‰æ‹©å®Œæˆå,æ‰èƒ½å¤Ÿåˆ›å»ºè¿™ä¸ªäººç‰©.</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ul><li>å¯¹è±¡è¶³å¤Ÿå¤æ‚,åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•åº”ä¸åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„ç»„ä»¶å’Œç»„è£…æ–¹å¼åˆ†å¼€.</li><li>å½“æ„é€ å¯¹è±¡æ—¶è¦æ±‚å¯¹è¿™ä¸ªå¯¹è±¡å…·æœ‰ä¸åŒçš„è¡Œä¸º.</li></ul><h2 id="å»ºé€ è€…æ¨¡å¼ç»“æ„"><a href="#å»ºé€ è€…æ¨¡å¼ç»“æ„" class="headerlink" title="å»ºé€ è€…æ¨¡å¼ç»“æ„"></a>å»ºé€ è€…æ¨¡å¼ç»“æ„</h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190601231729.png" alt="å»ºé€ è€…æ¨¡å¼ç±»å›¾"></p><p>ä¸Šå›¾ä¸ºå»ºé€ è€…æ¨¡å¼ç±»å›¾:å…¶ä¸­CharacterBuilder å’Œ Characters ä¸­çš„å±æ€§ç›¸åŒ,CharacterBuilder å­˜åœ¨çš„ç›®çš„å°±æ˜¯å¤šç§æ„é€ ä¸åŒè¡Œä¸ºçš„Characters .</p><p>å…·ä½“å¯ä»¥çœ‹ä¸‹é¢ä»£ç å®ä¾‹</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>è§’è‰²å®ä½“</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Characters</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è§’è‰²æ„é€ å™¨å†…æœ‰å¤šä¸ªè§’è‰²å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String skill;</span><br><span class="line">    <span class="keyword">private</span> String weapon;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ„é€ å™¨æ¥æ„é€ å®ä½“ å…¶ä¸­å®ä½“å±æ€§æœ‰builderä¸­æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Characters</span><span class="params">(CharacterBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = builder.getName();</span><br><span class="line">        <span class="keyword">this</span>.age = builder.getAge();</span><br><span class="line">        <span class="keyword">this</span>.sex = builder.getSex();</span><br><span class="line">        <span class="keyword">this</span>.skill = builder.getSkill();</span><br><span class="line">        <span class="keyword">this</span>.weapon = builder.getWeapon();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showCharacterBoard</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"äººç‰© ï¼š "</span> + <span class="keyword">this</span>.name + <span class="string">" å¹´é¾„ ï¼š"</span> + <span class="keyword">this</span>.age + <span class="string">" æ€§åˆ«ï¼š"</span> + <span class="keyword">this</span>.sex + <span class="string">" æŠ€èƒ½ï¼š"</span> +<span class="keyword">this</span>.skill + <span class="string">" æ­¦å™¨ï¼š"</span> + <span class="keyword">this</span>.weapon);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è§’è‰²æ„å»ºå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterBuilder</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸è§’è‰²å®ä½“ä¿æŒç›¸åŒçš„å±æ€§ </span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String skill;</span><br><span class="line">    <span class="keyword">private</span> String weapon;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSkill</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> skill;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWeapon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> weapon;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ„é€ åŸºæœ¬å±æ€§çš„æ„é€ å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CharacterBuilder <span class="title">buildBasicAttributes</span><span class="params">(String name , <span class="keyword">int</span> age, String sex)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä¿è¯å§“åä¸èƒ½ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span>(name == <span class="keyword">null</span> || <span class="string">""</span>.equals(name))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"name can not be empty "</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">            <span class="keyword">this</span>.age = age;</span><br><span class="line">            <span class="keyword">this</span>.sex = sex;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> CharacterBuilder <span class="title">buildSkill</span><span class="params">(String skill)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.skill = skill;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CharacterBuilder <span class="title">billdWeapon</span><span class="params">(String weapon)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.weapon = weapon;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆè§’è‰²å®ä½“</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Characters <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Characters(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBuildCharacter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// é“¾å¼è°ƒç”¨,æœ€åä½¿ç”¨buildæ–¹æ³•æ–°å»ºä¸€ä¸ªè§’è‰²å®ä½“</span></span><br><span class="line">        Characters characters = <span class="keyword">new</span> CharacterBuilder()</span><br><span class="line">                .buildBasicAttributes(<span class="string">"jack"</span>,<span class="number">18</span>,<span class="string">"man"</span>)</span><br><span class="line">                .buildSkill(<span class="string">"Emission laser"</span>)</span><br><span class="line">                .billdWeapon(<span class="string">"Laser Cannon"</span>)</span><br><span class="line">                .build();</span><br><span class="line">                <span class="comment">//æ‰“å°è§’è‰²å±æ€§é¢æ¿</span></span><br><span class="line">        characters.showCharacterBoard();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connected to the target VM, address: &apos;127.0.0.1:57347&apos;, transport: &apos;socket&apos;</span><br><span class="line">äººç‰© ï¼š jack å¹´é¾„ ï¼š18 æ€§åˆ«ï¼šman æŠ€èƒ½ï¼šEmission laser æ­¦å™¨ï¼šLaser Cannon</span><br><span class="line">Disconnected from the target VM, address: &apos;127.0.0.1:57347&apos;, transport: &apos;socket&apos;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼</title>
      <link href="/2019/06/01/2019-06-03-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/01/2019-06-03-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼</h1><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘ç»“æ„ä»¥è¡¨ç¤ºéƒ¨åˆ†æ•´ä½“å±‚æ¬¡ç»“æ„ã€‚å½“ä½¿ç”¨æ ‘ç»“æ„çš„ä¸Šå±‚å’Œä¸‹å±‚ç»„ä»¶å±æ€§å¯èƒ½å·®åˆ«å¾ˆå¤§ï¼Œæ‰€ä»¥è¯´ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦å¯¹è¿™ä¸¤ç±»å¯¹è±¡è¿›è¡Œåˆ†åˆ«å¤„ç†ï¼Œ ä½†Compositeå…è®¸å®¢æˆ·ç«¯ç»Ÿä¸€å¤„ç†å•ä¸ªå¯¹è±¡å’Œå¯¹è±¡ç»„åˆã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥å°†å¶å­ç»„ä»¶ä¸æ•´ä½“è¿›è¡Œä¸€è‡´æ€§å¤„ç†ï¼Œå®ç°çš„æ–¹æ³•æ˜¯ç»„ä»¶å’Œæ•´ä½“å®ç°ç›¸åŒæ¥å£ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li>æƒ³è¦è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ†ä¸æ•´ä½“ä¹‹é—´çš„å±‚æ¬¡ç»“æ„</li><li>æƒ³è¦å®¢æˆ·ç«¯å¿½ç•¥ç»„åˆå¯¹è±¡å’Œå•ä¸ªå¯¹è±¡çš„åŒºåˆ«ï¼Œä½¿ç”¨ç»„åˆæ¨¡å¼ä¼šç»Ÿä¸€å¤„ç†æœ€åçš„ç»„åˆå¯¹è±¡ã€‚</li></ol><h2 id="ç»„åˆæ¨¡å¼ç»“æ„"><a href="#ç»„åˆæ¨¡å¼ç»“æ„" class="headerlink" title="ç»„åˆæ¨¡å¼ç»“æ„"></a>ç»„åˆæ¨¡å¼ç»“æ„</h2><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190610110055.png" alt="ç»å…¸æ¨¡å¼"></p><p>æœ€å…¸å‹çš„æƒ…å†µå°±æ˜¯å¤šçº§æ ‘å½¢èœå•å’Œæ–‡ä»¶å¤¹ç»“æ„ã€‚ç›—ä¸ªå›¾ - - </p><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190605154848.png" alt="ç»„åˆæ¨¡å¼ç»“æ„"></p><p>ä¸Šå›¾ï¼Œè™½ç„¶å›½å®¶ï¼Œåœ°åŒºï¼ŒåŸå¸‚å±äºä¸åŒçš„å±‚çº§ï¼Œä½†æ˜¯éƒ½éœ€è¦ç»§æ‰¿åŒä¸€ä¸ªæ¥å£ï¼Œæ˜¯å®¢æˆ·ç«¯èƒ½å¤Ÿç»Ÿä¸€çš„è°ƒç”¨ä¸åŒå±‚çº§çš„å¯¹è±¡ã€‚ç±»ä¼¼å¤šçº§æ ‘å½¢èœå•çš„ç»“æ„ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šæŠ½è±¡ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªæŠ½è±¡ç»„ä»¶å³å®Œæˆäº†æŠ½è±¡ç»„ä»¶çš„åŠŸèƒ½ï¼Œåˆå®Œæˆäº†â€œæ ‘æâ€çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿé“¾æ¥å„ä¸ªå¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Integer areaLevel;</span><br><span class="line">    List&lt;Component&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Component</span><span class="params">(String name, Integer areaLevel)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.areaLevel = areaLevel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Name : "</span>+name);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLevel</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Area Level :"</span> + areaLevel);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// è¿™é‡Œåœ¨æŠ½è±¡ç±»çš„æ–¹æ³•ä¸­ç›´æ¥æ‰“å°å­ç»„ä»¶ï¼ˆps:åº”ç»Ÿä¸€é€’å½’è¾“å‡ºå­ç»„ä»¶çš„å­ç»„ä»¶ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Component p:list</span><br><span class="line">             ) &#123;</span><br><span class="line">            System.out.println(<span class="string">"å­ç»„ä»¶ï¼š"</span>+ p.name);</span><br><span class="line">            p.printName();</span><br><span class="line">            p.printLevel();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Component component)</span></span>&#123;</span><br><span class="line">       list.add(component);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‘å¶æ„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›½å®¶çº§åˆ«æ ‘å¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Country</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    List&lt;Province&gt; provinceList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Country</span><span class="params">(String name, Integer areaLevel)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, areaLevel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Country Name :"</span> + <span class="keyword">this</span>.name);;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Province province)</span></span>&#123;</span><br><span class="line">        provinceList.add(province);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">         System.out.println(<span class="string">"å½“å‰ç»„ä»¶:"</span>+name + <span class="string">"ç­‰çº§ï¼š"</span>+ areaLevel);</span><br><span class="line">        <span class="keyword">for</span> (Province p:provinceList</span><br><span class="line">        ) &#123;</span><br><span class="line">            p.printAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Country Level :"</span> + <span class="keyword">this</span>.areaLevel);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// çœçº§åˆ«æ ‘å¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Province</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">   List&lt;City&gt; cityList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Province</span><span class="params">(String name, Integer areaLevel)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, areaLevel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Province Name :"</span> +<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(City city)</span></span>&#123;</span><br><span class="line">       cityList.add(city);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å½“å‰ç»„ä»¶:"</span>+name + <span class="string">"ç­‰çº§ï¼š"</span>+ areaLevel);</span><br><span class="line">        <span class="keyword">for</span> (City p:cityList</span><br><span class="line">        ) &#123;</span><br><span class="line">            p.printAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¸‚çº§åˆ«æ ‘å¶èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">City</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">City</span><span class="params">(String name, Integer areaLevel)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, areaLevel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"City Name :"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"City Level "</span> + <span class="keyword">this</span>.areaLevel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç»„ä»¶ï¼š"</span>+ <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®¢æˆ·ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Country zhongguo = <span class="keyword">new</span> Country(<span class="string">"china"</span>, <span class="number">0</span>);</span><br><span class="line">        City langfang = <span class="keyword">new</span> City(<span class="string">"langfang"</span>, <span class="number">2</span>);</span><br><span class="line">        Province hebei = <span class="keyword">new</span> Province(<span class="string">"hebei"</span>, <span class="number">1</span>);</span><br><span class="line">        zhongguo.add(hebei);</span><br><span class="line">        hebei.add(langfang);</span><br><span class="line">        zhongguo.printAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰ç»„ä»¶:china ç­‰çº§ï¼š0</span><br><span class="line">å½“å‰ç»„ä»¶:hebei ç­‰çº§ï¼š1</span><br><span class="line">ç»„ä»¶ï¼šlangfang</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="/2019/05/30/2019-05-30-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/30/2019-05-30-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p>æ„åœ¨ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹,å¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹.</p><p>é€šè¿‡å°†ç±»çš„æ„é€ å™¨ç§æœ‰åŒ–,åªå‘å¤–æä¾›ä¸€ä¸ªå•ç‹¬çš„åˆ›å»ºå”¯ä¸€å¯¹è±¡çš„æ–¹æ³•æ¥å®ç°ä¸€ä¸ªç±»åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡.ä¸»è¦æœ‰ä¸‰ç§å®ç° 1. é¥¿æ±‰æ¨¡å¼ 2. æ‡’æ±‰æ¨¡å¼ 3.ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹.ä¸‹é¢é€šè¿‡å…·ä½“å®ä¾‹æ¥åˆ†æå¦‚ä½•åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä»èƒ½æ»¡è¶³å•ä¾‹æ¨¡å¼åˆ›å»ºå¯¹è±¡.</p><h2 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">    <span class="comment">//1. ä½¿ç”¨é™æ€å˜é‡</span></span><br><span class="line"><span class="comment">//    private static Singleton singleton = new Singleton();</span></span><br><span class="line">    <span class="comment">//2.ä½¿ç”¨é™æ€ä»£ç å— æœªä½¿ç”¨æ—¶é€ æˆå†…å­˜ç©ºé—´æµªè´¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¸ä¼šå½±å“åˆ°å¤šçº¿ç¨‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºç±»çš„è£…è½½æœºåˆ¶åœ¨åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™æ˜¯ä¿è¯ä¸ä¼šæœ‰ç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥çš„ã€‚ä½†æ˜¯æœ‰ä¸ªå¾ˆå¤§çš„å¼Šç«¯æ˜¯ä»–ä¸æ˜¯<code>lazy-loading</code>çš„ï¼Œè¿™å›äº§ç”Ÿèµ„æºçš„æµªè´¹ï¼Œæ¯”å¦‚åˆ›å»ºå®Œå¯¹è±¡åï¼Œè‡ªå§‹è‡³ç»ˆæ²¡ç”¨è¿‡ã€‚æ‰€ä»¥ä¸æ¨èä½¿ç”¨</p><h2 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ™®é€šçš„çº¿ç¨‹ä¸å®‰å…¨çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(singleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.é™æ€å†…éƒ¨ç±» ä¸€æ–¹é¢èƒ½å¤Ÿè¾¾åˆ°lazy-loadingçš„æ•ˆæœï¼Œå¦ä¸€æ–¹é¢èƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºjvmä¿è¯åˆå§‹åŒ–çš„æ—¶å€™åˆ«çš„çº¿ç¨‹æ˜¯ä¸èƒ½è¿›å…¥çš„</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">newSingleton</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstanceInnerClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newSingleton.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ç§æ˜¯ä¸èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹ä¸‹ä¼šå¯¼è‡´å¤±æ•ˆã€‚è€Œç¬¬äºŒç§ä½¿ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼å®ç°èƒ½å¤Ÿå®ç°çº¿ç¨‹å®‰å…¨å¾—å®œäºç±»çš„åŠ è½½æœºåˆ¶ï¼Œç±»ä¼¼é¥¿æ±‰æ¨¡å¼ã€‚ä½†åŒæ—¶å…·æœ‰<code>lazy-Loading</code>çš„ç‰¹æ€§ã€‚æ˜¯å¸¸ç”¨çš„å•ä¾‹æ¨¡å¼ç”¨æ³•ã€‚</p><h3 id="double-checkåŒé‡é”"><a href="#double-checkåŒé‡é”" class="headerlink" title="double-checkåŒé‡é”"></a><code>double-check</code>åŒé‡é”</h3><p>åŒé‡é”ç»“æ„åªæ˜¯ä¸ºäº†æ»¡è¶³å¤šçº¿ç¨‹å®‰å…¨è€Œå»ºç«‹çš„,æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ‡’æ±‰æ¨¡å¼,æ€æƒ³åŒæ‡’æ±‰æ¨¡å¼ç›¸åŒ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleCheck</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DoubleCheck</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> DoubleCheck doubleCheck; <span class="comment">//ä½¿ç”¨volatileä¿è¯åŸå­æ€§ï¼Œé˜²æ­¢é‡æ’åº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DoubleCheck <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(doubleCheck == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åˆ°è¿™æ­¥ aå…ˆè¿›åŒæ­¥å—ï¼Œåœ¨aè¿›å…¥åè·å¾—instanceåï¼Œbè·å¾—é”ï¼Œè¿›å…¥åŒæ­¥å—ï¼Œ</span></span><br><span class="line">            <span class="comment">// è¿™æ—¶å€™ä¸‹ä¸€ä¸ªåˆ¤æ–­å°±èµ·åˆ°ä½œç”¨äº†ï¼Œè¿™æ—¶å€™çš„doubleCheckä¸ä¸ºç©ºï¼Œ</span></span><br><span class="line">            <span class="comment">// ç›´æ¥returnï¼Œå¦åˆ™åˆï¸æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleCheck.class)&#123;</span><br><span class="line">                <span class="keyword">if</span>(doubleCheck == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    doubleCheck = <span class="keyword">new</span> DoubleCheck();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> doubleCheck;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šdouble-checkä¹Ÿæ˜¯æ‡’æ±‰æ¨¡å¼çš„ä¸€ç§ï¼Œèƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å¾ˆå®Œç¾ã€‚ã€‚</p><h2 id="ä½¿ç”¨æšä¸¾åˆ›å»ºå•ä¾‹"><a href="#ä½¿ç”¨æšä¸¾åˆ›å»ºå•ä¾‹" class="headerlink" title="ä½¿ç”¨æšä¸¾åˆ›å»ºå•ä¾‹"></a>ä½¿ç”¨æšä¸¾åˆ›å»ºå•ä¾‹</h2><p>åœ¨stackoverflowä¸­æœ‰ä¸€ä¸ªé—®é¢˜<a href="https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java" target="_blank" rel="noopener">What is an efficient way to implement a singleton pattern in Java?</a></p><p>è¿™é‡Œçš„å›ç­”å¼•ç”¨åˆ°äº†Effective Java ä½œè€… Joshua Blochå¯¹äºå•ä¾‹çš„å¤„ç†æ–¹å¼:ä½¿ç”¨æšä¸¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SingletonEnum &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String[] favoriteSongs =</span><br><span class="line">            &#123; <span class="string">"Hound Dog"</span>, <span class="string">"Heartbreak Hotel"</span> &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printFavorites</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Arrays.toString(favoriteSongs));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ç­‰åŒä¸ä½¿ç”¨publicçš„æ„é€ æ–¹æ³•,å¹¶ä¸”æ¯”ä¸Šé¢çš„æ›´åŠ ç®€æ´,å¹¶ä¸”å³ä½¿é¢å¯¹å¤æ‚çš„åå°„ä¸åºåˆ—åŒ–ä¹Ÿèƒ½å¤Ÿä¿è¯å•ä¸€çš„å®ä¾‹.è™½ç„¶ç°å®ä»£ç ä¸­åº”ç”¨çš„è¾ƒå°‘,ä½†æ˜¯è¿™ç§ä½¿ç”¨æšä¸¾ç±»å‹æ˜¯åˆ›å»ºå•ä¾‹çš„æœ€ä½³æ–¹æ³•.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testEnum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SingletonEnum singletonEnum = SingletonEnum.INSTANCE;</span><br><span class="line">SingletonEnum singletonEnumCopy = SingletonEnum.INSTANCE;</span><br><span class="line">Assert.assertEquals(singletonEnum, singletonEnumCopy); <span class="comment">//é€šè¿‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ideaå¯¹spring bootåº”ç”¨è¿›è¡Œçƒ­éƒ¨ç½²</title>
      <link href="/2019/05/29/2019-02-17-%E4%BD%BF%E7%94%A8IDEA%E8%AE%BE%E7%BD%AEspringboot%E7%83%AD%E9%83%A8%E7%BD%B2/"/>
      <url>/2019/05/29/2019-02-17-%E4%BD%BF%E7%94%A8IDEA%E8%AE%BE%E7%BD%AEspringboot%E7%83%AD%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨ideaå¯¹spring-bootåº”ç”¨è¿›è¡Œçƒ­éƒ¨ç½²"><a href="#ä½¿ç”¨ideaå¯¹spring-bootåº”ç”¨è¿›è¡Œçƒ­éƒ¨ç½²" class="headerlink" title="ä½¿ç”¨ideaå¯¹spring bootåº”ç”¨è¿›è¡Œçƒ­éƒ¨ç½²"></a>ä½¿ç”¨ideaå¯¹spring bootåº”ç”¨è¿›è¡Œçƒ­éƒ¨ç½²</h1><h2 id="POM"><a href="#POM" class="headerlink" title="POM"></a>POM</h2><h3 id="åœ¨pom-xmlä¸­æ·»åŠ mavenä¾èµ–"><a href="#åœ¨pom-xmlä¸­æ·»åŠ mavenä¾èµ–" class="headerlink" title="åœ¨pom.xmlä¸­æ·»åŠ mavenä¾èµ–"></a>åœ¨pom.xmlä¸­æ·»åŠ mavenä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span> <span class="comment">&lt;!-- è¿™è¡Œå¿…å¡« --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¹¶ä¸”åœ¨åé¢çš„æ’ä»¶é…ç½®ä¸­é…ç½®dev"><a href="#å¹¶ä¸”åœ¨åé¢çš„æ’ä»¶é…ç½®ä¸­é…ç½®dev" class="headerlink" title="å¹¶ä¸”åœ¨åé¢çš„æ’ä»¶é…ç½®ä¸­é…ç½®dev"></a>å¹¶ä¸”åœ¨åé¢çš„æ’ä»¶é…ç½®ä¸­é…ç½®dev</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœæ²¡æœ‰è¯¥é¡¹é…ç½®ï¼Œdevtoolsä¸ä¼šèµ·ä½œç”¨ï¼Œå³åº”ç”¨ä¸ä¼šrestart --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="IDEA"><a href="#IDEA" class="headerlink" title="IDEA"></a>IDEA</h2><h3 id="åœ¨IDEAä¸­æ·»åŠ é…ç½®å¦‚ä¸‹"><a href="#åœ¨IDEAä¸­æ·»åŠ é…ç½®å¦‚ä¸‹" class="headerlink" title="åœ¨IDEAä¸­æ·»åŠ é…ç½®å¦‚ä¸‹"></a>åœ¨IDEAä¸­æ·»åŠ é…ç½®å¦‚ä¸‹</h3><ol><li>æ‰“å¼€ setting ,æœç´¢ <code>compiler</code> åï¼ŒæŠŠ <code>Build Project automaticial</code> é€‰é¡¹å‹¾ä¸Š</li></ol><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190531171258.png" alt="compiler"></p><ol start="2"><li>ä½¿ç”¨  <code>ctrl+shift+A</code>  å¿«æ·é”®æ‰“å¼€çª—å£ï¼Œå¹¶æœç´¢ <code>Registry...</code> ã€‚å‹¾é€‰ <code>compiler.automake.allow.when.app.running</code> </li></ol><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190531171606.png" alt="running"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨springbootæ„å»ºjpa+springdata+reståº”ç”¨çš„åŸºæœ¬é…ç½®è¿‡ç¨‹</title>
      <link href="/2019/05/29/2019-01-30-%E5%88%A9%E7%94%A8springboot%E6%9E%84%E5%BB%BASpringData+JAP+RestFul%E5%BA%94%E7%94%A8/"/>
      <url>/2019/05/29/2019-01-30-%E5%88%A9%E7%94%A8springboot%E6%9E%84%E5%BB%BASpringData+JAP+RestFul%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ©ç”¨springbootæ„å»ºjpa-springdata-reståº”ç”¨çš„åŸºæœ¬é…ç½®è¿‡ç¨‹"><a href="#åˆ©ç”¨springbootæ„å»ºjpa-springdata-reståº”ç”¨çš„åŸºæœ¬é…ç½®è¿‡ç¨‹" class="headerlink" title="åˆ©ç”¨springbootæ„å»ºjpa+springdata+reståº”ç”¨çš„åŸºæœ¬é…ç½®è¿‡ç¨‹"></a>åˆ©ç”¨springbootæ„å»ºjpa+springdata+reståº”ç”¨çš„åŸºæœ¬é…ç½®è¿‡ç¨‹</h1><h2 id="å‰è¿°"><a href="#å‰è¿°" class="headerlink" title="å‰è¿°"></a>å‰è¿°</h2><p>åˆ©ç”¨SpringBootæ•´åˆspringData+JPAåº”ç”¨éå¸¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æœ¬ç€å­¦ä¹ çš„ç›®çš„æ¥æ„å»ºä¸€ä¸ªåŸºæœ¬çš„webåº”ç”¨ï¼Œé…ç½®èµ·æ¥éå¸¸ç®€å•ã€‚ä¸‹é¢æ¥è¯´è¯´é…ç½®è¿‡ç¨‹å’Œè¸©è¿‡çš„å‘ã€‚</p><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h2><h3 id="åç«¯é…ç½®"><a href="#åç«¯é…ç½®" class="headerlink" title="åç«¯é…ç½®"></a>åç«¯é…ç½®</h3><p>å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯IDEAçš„spring initalizerï¼Œå‹¾é€‰å¦‚ä¸‹ï¼š</p><ul><li><p>Rest Repositories</p></li><li><p>Thymeleaf</p></li><li><p>JPA</p></li><li><p>H2</p></li><li><p>Lombok éœ€è¦ideä¸‹è½½æ’ä»¶ä½¿ç”¨</p></li></ul><p>ä»¥å‰åœ¨é…ç½®spring MVCæ¥å£æ—¶ï¼Œå¾€å¾€ä¼šæµªè´¹å¾ˆé•¿æ—¶é—´é…ç½®reståœ°å€ï¼Œspringdataè§£å†³äº†è¿™ä¸ªä¸€éåˆä¸€ééº»çƒ¦çš„è¿‡ç¨‹ã€‚</p><h4 id="é¦–å…ˆé…ç½®å®ä½“ç±»"><a href="#é¦–å…ˆé…ç½®å®ä½“ç±»" class="headerlink" title="é¦–å…ˆé…ç½®å®ä½“ç±»"></a>é¦–å…ˆé…ç½®å®ä½“ç±»</h4><p>ä»»ä½•åŸºäºSpring Data RESTçš„åº”ç”¨ç¨‹åºçš„åŸºçŸ³éƒ½æ˜¯åŸŸå¯¹è±¡ã€‚å…¶ä¸­çš„@Idç­‰éƒ½æ˜¯JPAè¯­æ³•ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥çœ‹ä¸Šä¸€ç¯‡æ–‡ç« ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"username"</span>,nullable = <span class="keyword">true</span>,length = <span class="number">255</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"password"</span>,nullable = <span class="keyword">true</span>,length = <span class="number">255</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToOne</span>()</span><br><span class="line">    <span class="meta">@JoinColumn</span>(name = <span class="string">"person_id"</span>,nullable = <span class="keyword">false</span>)</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰ä¸€ä¸ªå­˜å‚¨åº“"><a href="#å®šä¹‰ä¸€ä¸ªå­˜å‚¨åº“" class="headerlink" title="å®šä¹‰ä¸€ä¸ªå­˜å‚¨åº“"></a>å®šä¹‰ä¸€ä¸ªå­˜å‚¨åº“</h4><p>Spring Data RESTåº”ç”¨ç¨‹åºçš„å¦ä¸€ä¸ªå…³é”®éƒ¨åˆ†æ˜¯åˆ›å»ºç›¸åº”çš„å­˜å‚¨åº“å®šä¹‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>,<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®serviceå’Œcontroller"><a href="#é…ç½®serviceå’Œcontroller" class="headerlink" title="é…ç½®serviceå’Œcontroller"></a>é…ç½®serviceå’Œcontroller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserRepository userRepository;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        user.setPassword(...); <span class="comment">//å®šä¹‰ä»£ç </span></span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ•°æ®åº“å’Œapplication-properties"><a href="#é…ç½®æ•°æ®åº“å’Œapplication-properties" class="headerlink" title="é…ç½®æ•°æ®åº“å’Œapplication.properties"></a>é…ç½®æ•°æ®åº“å’Œapplication.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># é©±åŠ¨é…ç½®ä¿¡æ¯</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">spring.datasource.url = jdbc:mysql://127.0.0.1:3306/jreact?useUnicode=true&amp;characterEncoding=utf-8</span><br><span class="line">spring.datasource.username = root</span><br><span class="line">spring.datasource.password = 123456</span><br><span class="line">spring.datasource.driverClassName = com.mysql.jdbc.Driver</span><br><span class="line">#éä¸¥æ ¼çš„htmlè§£æ</span><br><span class="line">spring.thymeleaf.mode =LEGACYHTML5</span><br><span class="line"># å½©è‰²è¾“å‡º</span><br><span class="line">spring.output.ansi.enabled=DETECT</span><br><span class="line"># è®¾ç½®é»˜è®¤å¼•æ“</span><br><span class="line">spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line">#é…ç½®è‡ªåŠ¨å»ºè¡¨ï¼šupdata:æ²¡æœ‰è¡¨æ–°å»ºï¼Œæœ‰è¡¨æ›´æ–°æ“ä½œ,æ§åˆ¶å°æ˜¾ç¤ºå»ºè¡¨è¯­å¥</span><br><span class="line">spring.jpa.hibernate.ddl-auto=update</span><br><span class="line">spring.jpa.show-sql=true</span><br><span class="line">#é…ç½®spring data restçš„åŸºåœ°å€</span><br><span class="line">spring.data.rest.base-path=/api</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨åº”ç”¨"><a href="#å¯åŠ¨åº”ç”¨" class="headerlink" title="å¯åŠ¨åº”ç”¨"></a>å¯åŠ¨åº”ç”¨</h4><p>è®¿é—® <code>localhost:8080/api/users</code> å¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯,è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚åªæ˜¯è¡¨ä¸­è¿˜æ²¡æœ‰æ•°æ®ï¼Œå¦å¤–è¡¨å·²ç»ç”±è‡ªåŠ¨å»ºå¥½ï¼Œä»¥åå¦‚æœæ›´æ–°ï¼Œç›´æ¥æ›´æ–°ç¨‹åºå°±å¥½äº†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"_embedded"</span> : &#123;</span><br><span class="line">    <span class="attr">"users"</span> : [ ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"_links"</span> : &#123;</span><br><span class="line">    <span class="attr">"self"</span> : &#123;</span><br><span class="line">      <span class="attr">"href"</span> : <span class="string">"http://localhost:8080/api/users&#123;?page,size,sort&#125;"</span>,</span><br><span class="line">      <span class="attr">"templated"</span> : <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"profile"</span> : &#123;</span><br><span class="line">      <span class="attr">"href"</span> : <span class="string">"http://localhost:8080/api/profile/users"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"page"</span> : &#123;</span><br><span class="line">    <span class="attr">"size"</span> : <span class="number">20</span>,</span><br><span class="line">    <span class="attr">"totalElements"</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"totalPages"</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"number"</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯é…ç½®"><a href="#å‰ç«¯é…ç½®" class="headerlink" title="å‰ç«¯é…ç½®"></a>å‰ç«¯é…ç½®</h3><p>ä½¿ç”¨reactæ¡†æ¶ä½œä¸ºå‰ç«¯æ¡†æ¶ï¼Œé¦–å…ˆä¸‹è½½create-react-appä½œä¸ºå¼€å‘çš„è„šæ‰‹æ¶ã€‚è¿™é‡Œæˆ‘é€‰ç”¨çš„æ˜¯meterial-UIçš„create-react-appï¼ŒæŒ‰ç…§æ–‡æ¡£ä¸­çš„è¯´æ˜æ¥ä¸‹è½½å¹¶å®‰è£…ã€‚</p><h4 id="é…ç½®proxy"><a href="#é…ç½®proxy" class="headerlink" title="é…ç½®proxy"></a>é…ç½®proxy</h4><p>åœ¨srcç›®å½•ä¸‹æ–°å»ºåç§°ä¸ºsetupProxy.jsçš„æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(proxy(<span class="string">'/api/'</span>, </span><br><span class="line">        &#123; <span class="attr">target</span>: <span class="string">'http://localhost:8080/'</span> &#125;</span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­/api/ä¸ºè®¿é—®åç«¯çš„åŸºåœ°å€ï¼Œtargetä¸ºè®¿é—®åç«¯çš„ä¸»æœºåœ°å€å’Œç«¯å£å·</p><h4 id="é…ç½®router"><a href="#é…ç½®router" class="headerlink" title="é…ç½®router"></a>é…ç½®router</h4><p>ä½¿ç”¨npmä¸‹è½½ <code>react-router-dom</code>åï¼Œåœ¨srcç›®å½•ä¸‹æ–°å»ºrouteræ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºbaseRouter.jsæ–‡ä»¶ï¼Œå¼•å…¥åˆšä¸‹è½½çš„åŒ…ï¼ŒåŸºæœ¬çš„æ–‡ä»¶å†…å®¹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Route, Link,Switch &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> Index <span class="keyword">from</span> <span class="string">"../pages/index"</span></span><br><span class="line"><span class="keyword">import</span> SignIn <span class="keyword">from</span> <span class="string">"../pages/login/signIn"</span></span><br><span class="line"><span class="keyword">import</span> Error404 <span class="keyword">from</span> <span class="string">"../pages/error/404"</span></span><br><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>About<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line"><span class="keyword">const</span> Users = <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> AppRouter = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &lt;Switch&gt;</span><br><span class="line">        &lt;Route exact path=<span class="string">"/"</span> component=&#123;Index&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">"/SignIn"</span> component=&#123;SignIn&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">"/About"</span> component=&#123;About&#125; /&gt;</span><br><span class="line">        &#123;<span class="comment">/* when none of the above match, &lt;NoMatch&gt; will be rendered */</span>&#125;</span><br><span class="line">        &lt;Route component=&#123;Error404&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/Router&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp">export default AppRouter;</span></span><br></pre></td></tr></table></figure><p>å¹¶æœ€ååœ¨index.jså…¥å£æ–‡ä»¶ä¸­å†™å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">AppRouter</span> /&gt;</span>, document.getElementById('root'));</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥è®¿é—®localhost:3000çš„æ—¶å€™å¯ä»¥è®¿é—®åˆ°Indexæ–‡ä»¶å†…å®¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼</title>
      <link href="/2019/05/29/2019-05-29-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/29/2019-05-29-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼</h1><p>å·¥å‚æ¨¡å¼åˆ†ä¸º<code>ç®€å•å·¥å‚æ¨¡å¼</code>,<code>å·¥å‚æ–¹æ³•æ¨¡å¼</code>,<code>æŠ½è±¡å·¥å‚æ–¹æ³•æ¨¡å¼</code>ä¸‰ç§,ä½†æ˜¯å…¶ä¸­ç®€å•å·¥å‚æ–¹æ³•å…¶å®ä¸åœ¨23ä¸­è®¾è®¡æ¨¡å¼ä¹‹ä¸­,éƒ½å±äºåˆ›å»ºå‹çš„è®¾è®¡æ¨¡å¼.</p><h2 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h2><p>ç®€å•å·¥å‚æ–¹æ³•å…¶å®ä¸å±äºå·¥å‚æ¨¡å¼çš„,ä»–åªæ˜¯ä¸€ç§è®¾è®¡æ€è·¯,æ˜¯ä¸€ç§å¯¹æ¥å£çš„ç¼–ç¨‹çš„ä¹ æƒ¯è€Œå·².ç®€å•å·¥å‚æŠ½è±¡å‡ºä¸€ä¸ªå…¬å…±çš„æ¥å£,ä¸åŒçš„å¯¹è±¡å®ç°è¿™ä¸ªå…¬å…±çš„æ¥å£.å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»,æ ¹æ®ä¸åŒçš„æ¡ä»¶æ¥è¿”å›ä¸åŒç±»å‹çš„å®ä¾‹.</p><h3 id="ç®€å•å·¥å‚ç»“æ„"><a href="#ç®€å•å·¥å‚ç»“æ„" class="headerlink" title="ç®€å•å·¥å‚ç»“æ„"></a>ç®€å•å·¥å‚ç»“æ„</h3><p>ç®€å•å·¥å‚çš„ç®€å•ç±»å›¾å¦‚ä¸‹:</p><p><img src="https://i.loli.net/2019/05/28/5ced33e62381b24104.png" alt="ç®€å•å·¥å‚ç±»å›¾"></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>æ¥å£ä¸å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shoes</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getColor</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedShoes</span> <span class="keyword">implements</span> <span class="title">Shoes</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">" is red color shoes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhiteShoes</span> <span class="keyword">implements</span> <span class="title">Shoes</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getColor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"is white color shoes"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¥å‚ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShoesFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoes <span class="title">getShoes</span><span class="params">(String color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"red"</span>.equals(color))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> RedShoes();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"white"</span>.equals(color))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> WhiteShoes();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> OtherShoes();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h2><p>åˆ›å»ºä¸€ä¸ªå…¬å…±çš„å·¥å‚æ¥å£ç±»,å…¶ä¸­åœ¨æ¥å£ç±»ä¸­å®šä¹‰å·¥å‚æ–¹æ³•.ä½†æ˜¯é€šè¿‡å®ç°ç±»å»å®ç°ç»“æ„,åœ¨è°ƒç”¨çš„æ—¶å€™é€šè¿‡ä½¿ç”¨å®ç°ç±»æ¥å®ä¾‹åŒ–ç‰¹å®šçš„å·¥å‚.ä¹Ÿå°±æ˜¯è¯´,å·¥å‚æ–¹æ³•ç±»éœ€è¦é€šè¿‡å­ç±»å»å®ä¾‹åŒ–å»ºé€ å¯¹è±¡.</p><h3 id="å·¥å‚æ–¹æ³•ç»“æ„"><a href="#å·¥å‚æ–¹æ³•ç»“æ„" class="headerlink" title="å·¥å‚æ–¹æ³•ç»“æ„"></a>å·¥å‚æ–¹æ³•ç»“æ„</h3><p>å·¥å‚æ–¹æ³•çš„ç±»å›¾å¦‚ä¸‹:</p><p><img src="https://i.loli.net/2019/05/28/5ced3f6d5a12f11044.png" alt="å·¥å‚æ–¹æ³•æ¨¡å¼"></p><p>å’Œä¸Šé¢ç®€å•å·¥å‚ç±»çš„ä¾‹å­ç±»ä¼¼,è¿™é‡ŒåŒæ ·é€šè¿‡å®ç°é‹å­è¿™ä¸ªæ¥å£æ¥åˆ›å»ºçº¢é‹å­å’Œç™½é‹å­,ç®€å•å·¥å‚æ— è®ºç™½é‹å­ã€çº¢é‹å­è¿˜æ˜¯å…¶ä»–é¢œè‰²çš„é‹å­éƒ½æ˜¯åŒä¸€ä¸ªå·¥å‚æ¥åˆ›å»ºå‡ºæ¥çš„,è€Œ <strong>å·¥å‚æ–¹æ³•æ˜¯é€šè¿‡å…·ä½“çš„ç™½é‹å­å·¥å‚å’Œçº¢é‹å­å·¥å‚æ¥åˆ†åˆ«ç”Ÿäº§å¯¹åº”çš„ç™½é‹å­å’Œçº¢é‹å­</strong>.</p><p>æ‰€ä»¥å¦‚ç±»å›¾ä¸­æ‰€å±•ç¤ºçš„ä¸€æ ·,<code>RedShoesFactory</code>å’Œ<code>WhiteShoesFactroy</code>éƒ½å®ç°æ¥æ¥å£<code>ShoesFactory</code>,å¹¶ä¸”åœ¨getshoesæ–¹æ³•é‡Œåˆ†åˆ«åˆ›å»ºå¯¹åº”çš„<code>RedShoes</code>å’Œ<code>WhiteShoes</code>.</p><h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯:"></a>å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯:</h3><ol><li>å®¢æˆ·ç«¯ä¸å¿…è¦çŸ¥é“å®ƒéœ€è¦åˆ›å»ºå¯¹è±¡çš„ç±»,åªéœ€è¦åˆ›å»ºå®Œå·¥å‚å,ä»å·¥å‚ä¸­ç›´æ¥å–å¯¹åº”çš„å¯¹è±¡å³å¯.</li><li>å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æŒ‡å®šå®ç°å­ç±»æ¥åˆ›å»ºå¯¹åº”å¯¹è±¡.</li></ol><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‹å­æ¥å£ä¸å®ç°åŒç®€å•å·¥å‚ä¸­çš„ç›¸åŒ,æ‰€ä»¥è¿™é‡Œçœç•¥....</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ShoesFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">Shoes <span class="title">getShoes</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedShoesFactory</span> <span class="keyword">implements</span> <span class="title">ShoesFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoes <span class="title">getShoes</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RedShoes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhiteShoesFactory</span> <span class="keyword">implements</span> <span class="title">ShoesFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoes <span class="title">getShoes</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WhiteShoes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®¢æˆ·ç«¯è°ƒç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ShoesFactory redFactory = <span class="keyword">new</span> RedShoesFactory();</span><br><span class="line">        <span class="comment">// åªéœ€è¦åˆ›å»ºä¸€ä¸ªå·¥å‚,æ¯æ¬¡è·å–çº¢é‹å­,åªéœ€è°ƒç”¨å·¥å‚çš„getShoesæ–¹æ³•å³å¯</span></span><br><span class="line">        Shoes redshoes = redFactory.getShoes();</span><br><span class="line">        redshoes.getColor();</span><br><span class="line">        ShoesFactory whiteFactory = <span class="keyword">new</span> WhiteShoesFactory();</span><br><span class="line">        Shoes whiteshoes = whiteFactory.getShoes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p>æä¾›ç”¨äºåˆ›å»ºç›¸å…³æˆ–ä»å±çš„å¯¹è±¡æ—(å¤šä¸ªç»„ä»¶,å¹¶ä¸”ç»„ä»¶ä¹‹é—´æ˜¯ç”±å¿…è¦è”ç³»çš„)çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå…¶å…·ä½“ç±».æ˜¯å¯¹å·¥å‚æ–¹æ³•çš„å†æ¬¡å»¶å±•.</p><h3 id="æŠ½è±¡æ–¹æ³•ç»“æ„"><a href="#æŠ½è±¡æ–¹æ³•ç»“æ„" class="headerlink" title="æŠ½è±¡æ–¹æ³•ç»“æ„"></a>æŠ½è±¡æ–¹æ³•ç»“æ„</h3><p><img src="https://i.loli.net/2019/05/28/5ced50f7bd0d134180.png" alt="æŠ½è±¡å·¥å‚ç±»å›¾"></p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‹åº•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sole</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ææ–™</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getMaterial</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‹å¸¦</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shoelace</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é•¿åº¦</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">length</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ShoesFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sole <span class="title">createSole</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoelace <span class="title">createShoelace</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Nikeå·¥å‚éœ€è¦ç”Ÿäº§é‹å¸¦å’Œé‹åº•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NikeBrandSole</span> <span class="keyword">implements</span> <span class="title">Sole</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMaterial</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ©¡èƒ¶é‹åº•</span></span><br><span class="line">        System.out.println(<span class="string">"rubber"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NikeBrandShoelace</span> <span class="keyword">implements</span> <span class="title">Shoelace</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">length</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"1 m "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„LiNingå·¥å‚éœ€è¦ç”Ÿäº§é‹å¸¦å’Œé‹åº•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiNingBrandSole</span> <span class="keyword">implements</span> <span class="title">Sole</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMaterial</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"air cushion"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiNingBrandShoelace</span> <span class="keyword">implements</span> <span class="title">Shoelace</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">length</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"1.5 m"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LiNingå’ŒNikeå·¥å‚éƒ½éœ€è¦ç”Ÿäº§å„è‡ªçš„é‹å¸¦å’Œé‹åº•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NikeShoeFactory</span> <span class="keyword">implements</span> <span class="title">ShoesFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sole <span class="title">createSole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NikeBrandSole();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoelace <span class="title">createShoelace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> createShoelace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiNingShoeFactory</span> <span class="keyword">implements</span> <span class="title">ShoesFactory</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sole <span class="title">createSole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LiNingBrandSole();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Shoelace <span class="title">createShoelace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LiNingBrandShoelace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ä»£ç ,åˆ›å»ºå·¥å‚,ç”Ÿäº§å„è‡ªç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ShoesFactory shoesFactory = <span class="keyword">new</span> NikeShoeFactory();</span><br><span class="line">        Shoelace nikeLace = shoesFactory.createShoelace();</span><br><span class="line">        Sole nikeSole = shoesFactory.createSole();</span><br><span class="line">        nikeLace.length();</span><br><span class="line">        nikeSole.getMaterial();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼</title>
      <link href="/2019/05/27/2019-05-27-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/27/2019-05-27-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼</h1><p>è´£ä»»é“¾æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼.é€šè¿‡ä¸ºå¤šä¸ªå¯¹è±¡å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„æ–¹å¼,å®ç°é™ä½å‘é€è€…ä¸æ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆæ€§.å¯¹è±¡é“¾ç”±ä¸€ä¸ªå¯¹è±¡å¯¹ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ç»„æˆä¸€æ¡é“¾,è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’,çŸ¥é“è¿™ä¸ªé“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒ.ä¸‹é¢å¼•ç”¨<a href="https://java-design-patterns.com/patterns/chain/" target="_blank" rel="noopener">https://java-design-patterns.com/patterns/chain/</a> æ¥è¯´æ˜</p><p><img src="https://i.loli.net/2019/05/27/5ceb9a338d29c93932.png" alt="..."></p><p>Kingåªéœ€è¦ä¸‹è¾¾å‘½ä»¤,å…·ä½“è°æ¥åšå¹¶ä¸å…³å¿ƒ,ç„¶è€Œè¿™ä¸ªå‘½ä»¤ä¼šé€šè¿‡commander, officer,soldier,è¿™ä¸‰ç±»äººåªéœ€è¦æ¥æ‰§è¡Œå„è‡ªè´Ÿè´£çš„éƒ¨åˆ†,å®Œæˆåä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŒè´£çš„äººå°±è¡Œäº†.è¿™å°±æ˜¯è´£ä»»é“¾æ¨¡å¼.ä¸‹é¢æ ¹æ®ä¾‹å­ç±»å›¾æ¥åˆ†æè´£ä»»é“¾ä¸­çš„ç»“æ„å…³ç³».</p><h3 id="è´£ä»»é“¾çš„ç»“æ„"><a href="#è´£ä»»é“¾çš„ç»“æ„" class="headerlink" title="è´£ä»»é“¾çš„ç»“æ„"></a>è´£ä»»é“¾çš„ç»“æ„</h3><p><img src="https://i.loli.net/2019/05/27/5ceba5ca3ceaf56696.png" alt="ç±»å›¾"></p><ul><li>æŠ½è±¡å¤„ç†è€… RequestHandler,å®šä¹‰æ¥å£æ–¹æ³•,ä½¿ç”¨handlerRequestæ–¹æ³•è§„å®šå®ç°ç±»é€šè¿‡è¯¥æ–¹æ³•æ¥è§„èŒƒå­ç±»çš„å®ç°.</li><li>å…·ä½“å¤„ç†è€… OrcCommanderå’ŒOrcOfficer,é€šè¿‡ç»§æ‰¿RequestHandlerå®ç°å…¶ä¸­çš„handleRequestæ–¹æ³•</li><li>è¯·æ±‚Request,Kingé€šè¿‡æ–¹æ³•å°†requestæ”¾å…¥å¤„ç†è€…é“¾ä¸­,å¤„ç†è€…ä¸€æ¬¡æ‰§è¡Œè¿™ä¸ªrequest.</li></ul><h3 id="è´£ä»»é“¾æ¨¡å¼çš„ä½¿ç”¨ç¯å¢ƒ"><a href="#è´£ä»»é“¾æ¨¡å¼çš„ä½¿ç”¨ç¯å¢ƒ" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼çš„ä½¿ç”¨ç¯å¢ƒ"></a>è´£ä»»é“¾æ¨¡å¼çš„ä½¿ç”¨ç¯å¢ƒ</h3><blockquote><p>1ã€æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ç”±è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚<br>2ã€åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚<br>3ã€å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚</p></blockquote><p>ç¤ºä¾‹ä»£ç :<a href="https://java-design-patterns.com/patterns/chain/" target="_blank" rel="noopener">java-design-patterns</a></p><ul><li>RequestHandler</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestHandler</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> RequestHandler next;</span><br><span class="line">  </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">RequestHandler</span><span class="params">(RequestHandler next)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">this</span>.next = next;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request req)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (next != <span class="keyword">null</span>) &#123;</span><br><span class="line">              next.handleRequest(req);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">printHandling</span><span class="params">(Request req)</span> </span>&#123;</span><br><span class="line">          System.out.println(<span class="string">"1."</span>+req.getRequestType() + <span class="string">" 2."</span>+req.getRequestDescription());</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>å…·ä½“å¤„ç†è€…</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrcCommander</span> <span class="keyword">extends</span> <span class="title">RequestHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OrcCommander</span><span class="params">(RequestHandler handler)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request req)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (req.getRequestType().equals(RequestType.DEFEND_CASTLE)) &#123;</span><br><span class="line">            printHandling(req);</span><br><span class="line">            req.markHandled();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.handleRequest(req);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Orc commander"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrcOfficer</span> <span class="keyword">extends</span> <span class="title">RequestHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OrcOfficer</span><span class="params">(RequestHandler next)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(next);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request req)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (req.getRequestType().equals(RequestType.TORTURE_PRISONER)) &#123;</span><br><span class="line">            printHandling(req);</span><br><span class="line">            req.markHandled();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.handleRequest(req);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Orc officer"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Requestè¯·æ±‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Request</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RequestType requestType;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String requestDescription;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> handled;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Request</span><span class="params">(<span class="keyword">final</span> RequestType requestType, <span class="keyword">final</span> String requestDescription)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.requestType = Objects.requireNonNull(requestType);</span><br><span class="line">        <span class="keyword">this</span>.requestDescription = Objects.requireNonNull(requestDescription);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRequestDescription</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> requestDescription; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RequestType <span class="title">getRequestType</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> requestType; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">markHandled</span><span class="params">()</span> </span>&#123; <span class="keyword">this</span>.handled = <span class="keyword">true</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHandled</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.handled; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> getRequestDescription(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯å‘èµ·å‘½ä»¤è€…</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">King</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> RequestHandler chain;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buildChain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        chain = <span class="keyword">new</span> OrcCommander(<span class="keyword">new</span> OrcOfficer(<span class="keyword">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">makeRequest</span><span class="params">(Request req)</span> </span>&#123;</span><br><span class="line">        chain.handleRequest(req);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        King king = <span class="keyword">new</span> King();</span><br><span class="line">        king.buildChain();</span><br><span class="line">        king.makeRequest(<span class="keyword">new</span> Request(RequestType.DEFEND_CASTLE, <span class="string">"defend castle"</span>));</span><br><span class="line">        king.makeRequest(<span class="keyword">new</span> Request(RequestType.TORTURE_PRISONER, <span class="string">"torture prisoner"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</title>
      <link href="/2019/05/27/2019-05-28-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/05/27/2019-05-28-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="javaè®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼"><a href="#javaè®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼" class="headerlink" title="javaè®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼"></a>javaè®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</h1><p>ç­–ç•¥è®¾è®¡æ¨¡å¼æ˜¯è¡Œä¸ºè®¾è®¡æ¨¡å¼çš„ä¸€ç§.å½“ä½¿ç”¨å¤šç§ç®—æ³•è§£å†³ä¸€ä¸ªç‰¹æ®Šçš„ä»»åŠ¡çš„æ—¶å€™,å®¢æˆ·ç«¯å†³å®šä½¿ç”¨æ—¶çš„ç‰¹å®šå®ç°.</p><h2 id="å“ªç§æƒ…å†µä¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼"><a href="#å“ªç§æƒ…å†µä¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼" class="headerlink" title="å“ªç§æƒ…å†µä¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼"></a>å“ªç§æƒ…å†µä¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼</h2><p>ä»¥ä¸‹æƒ…å†µå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼: </p><ol><li>è®¸å¤šç›¸å…³ç±»åªæœ‰è¡Œä¸ºä¸Šæœ‰æ‰€ä¸åŒ,ç­–ç•¥æ¨¡å¼å¯ä»¥é€šè¿‡ç›¸åŒçš„è¡Œä¸ºæ–¹æ³•æ¥é…ç½®ç±».</li><li>å½“éœ€è¦ä½¿ç”¨åˆ°ç®—æ³•çš„å˜ç§çš„æ—¶å€™,å½“å®šä¹‰ä¸åŒçš„è¡Œä¸ºå‚æ•°çš„æ—¶å€™,å¦‚æœä½¿ç”¨ç±»çš„å±‚æ¬¡ç»“æ„å®ç°çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼(å½“ä½¿ç”¨æ–¹æ³•å±‚æ¬¡ç»“æ„çš„æ—¶å€™å°±æ˜¯å¤šæ€)</li><li>å®¢æˆ·ç«¯ä¸ç”¨æ¸…æ¥šç®—æ³•çš„ç»†èŠ‚å®ç°,åªéœ€å…³æ³¨æ¥å£.é¿å…æš´éœ²å…·ä½“çš„ç±»çš„å®ç°ã€ç‰¹æ®Šç®—æ³•çš„æ•°æ®ç»“æ„.</li><li>ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§ä¸åŒçš„è¡Œä¸º,å¹¶ä¸”ä½¿ç”¨æ‚ä¹±çš„æ¡ä»¶è¿›è¡Œåˆ¤æ–­å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªæ¡ä»¶,è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ä»£æ›¿,å¯¹ä¸åŒçš„ç­–ç•¥å½¢æˆä¸åŒçš„ç±».å¯ä»¥æ¸…æ™°çš„è¡¨è¾¾å‡ºç±»çš„ä½œç”¨ä¸å®ç°çš„è¡Œä¸ºæ–¹å¼.</li></ol><h2 id="ç­–ç•¥æ¨¡å¼ç»“æ„"><a href="#ç­–ç•¥æ¨¡å¼ç»“æ„" class="headerlink" title="ç­–ç•¥æ¨¡å¼ç»“æ„"></a>ç­–ç•¥æ¨¡å¼ç»“æ„</h2><p><img src="https://i.loli.net/2019/05/27/5cebf32d8658d41858.png" alt="ç­–ç•¥æ¨¡å¼ç±»å›¾"></p><p>å¦‚ä¸Šå›¾å®šä¹‰ä¸€ä¸ªæ€»çš„Trafficæ¥å£,é‡Œé¢æœ‰ä¸€ä¸ªgo()æ–¹æ³•.ä½¿ç”¨carå’Œwalkåˆ†åˆ«æ¥å®ç°æ¥å£,å¹¶ä¸”å®ç°æ¥å£ä¸­çš„goæ–¹æ³•.</p><p>Contextç±»æ˜¯ç¯å¢ƒç±»,æŒæœ‰ä¸€ä¸ªTrafficStrategyçš„å¼•ç”¨,éšè—å…·ä½“çš„ç­–ç•¥æ¥å£çš„å®ç°,è®©å®¢æˆ·ç«¯ä¸“æ³¨äºæ–¹æ³•çš„è°ƒç”¨.</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TrafficStrategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">go</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WalkStrategy</span> <span class="keyword">implements</span> <span class="title">TrafficStrategy</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">go</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"i am walking"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarStrategy</span> <span class="keyword">implements</span> <span class="title">TrafficStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">go</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"i am driving"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>contextç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TrafficStrategy trafficStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Context</span><span class="params">(TrafficStrategy trafficStrategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.trafficStrategy = trafficStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TrafficStrategy <span class="title">getTrafficStrategy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> trafficStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTrafficStrategy</span><span class="params">(TrafficStrategy trafficStrategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.trafficStrategy = trafficStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doStrategy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        trafficStrategy.go();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Appå®¢æˆ·ç«¯ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Context context = <span class="keyword">new</span> Context(<span class="keyword">new</span> CarStrategy());</span><br><span class="line">        context.doStrategy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springé‡ç‚¹çŸ¥è¯†å­¦ä¹ </title>
      <link href="/2019/05/05/2019-05-05-Spring_Framework%E9%87%8D%E7%82%B9%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/05/05/2019-05-05-Spring_Framework%E9%87%8D%E7%82%B9%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Framework"><a href="#Spring-Framework" class="headerlink" title="Spring Framework"></a>Spring Framework</h1><p>ä½¿ç”¨springå¯ä»¥è½»æ˜“çš„åˆ›å»ºä¸€ä¸ªä¼ä¸šçº§åº”ç”¨,å®ƒä½¿ç”¨Javaè¯­è¨€æ‰€æœ‰çš„ä¼ä¸šçº§ç¯å¢ƒä¸­çš„æ‰€æœ‰ä¸œè¥¿,springæ˜¯å¼€æºçš„,æ‹¥æœ‰åºå¤§è€Œæ´»è·ƒçš„ç¤¾åŒºæ¥æä¾›æŒç»­çš„æ”¯æŒ.</p><h2 id="Spring-Core"><a href="#Spring-Core" class="headerlink" title="Spring Core"></a>Spring Core</h2><p>springåˆ†ä¸ºå¤šä¸ªæ¨¡å—,å…¶ä¸­coreä¸ºå…¶ä¸­çš„ä¸€ä¸ª,é‡Œé¢åŒ…å«springçš„æ ¸å¿ƒæŠ€æœ¯ç‚¹</p><h3 id="IOCå®¹å™¨-æ§åˆ¶åè½¬"><a href="#IOCå®¹å™¨-æ§åˆ¶åè½¬" class="headerlink" title="IOCå®¹å™¨(æ§åˆ¶åè½¬)"></a>IOCå®¹å™¨(æ§åˆ¶åè½¬)</h3><p>IOCä¹Ÿè¢«æˆä¸ºä¾èµ–æ³¨å…¥,è¿™æ˜¯ç”±ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä»–æ‰€ä¾èµ–çš„å…³ç³»çš„è¿‡ç¨‹.å½“åˆ›å»ºè¿™ä¸ªbeançš„æ—¶å€™ä¹ŸåŒæ—¶åˆ›å»ºè¿™äº›ä¾èµ–ä¾›å…¶ä½¿ç”¨.è¿™æ ·çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯åè½¬æ§åˆ¶çš„è¿‡ç¨‹,æ¯”å¦‚è¯´å»ºæˆ¿å­,ä»¥å‰éœ€è¦ç –,ç“¦,æ°´æ³¥æ‰èƒ½å»ºé€ æˆ¿å­,å¦‚æœä¸å®ç”¨iocæ—¶,å°±æ˜¯è‡ªå·±å»é€ ç –,é€ ç“¦,ç„¶åä½¿ç”¨.<br>ç°åœ¨ä½¿ç”¨iocå®¹å™¨,åªéœ€è¦æŠŠç –,ç“¦,æ°´æ³¥å†™åˆ°æ¸…å•ä¸Š,iocå®¹å™¨è‡ªåŠ¨æŠŠè¿™äº›å‡†å¤‡å¥½ä¾›ä½¿ç”¨,çœå»æ¥è‡ªå·±åˆ¶é€ çš„è¿‡ç¨‹.</p><p><code>org.springframework.beans</code> å’Œ <code>org.springframework.context</code> æ˜¯springå®ç°IOCå®¹å™¨çš„åŸºç¡€.<code>BeanFactory</code>æ¥å£æ˜¯èƒ½å¤Ÿç®¡ç†ä»»ä½•å¯¹è±¡çš„é«˜çº§çš„é…ç½®æ¥å£,<code>ApplicationContext</code>æ˜¯BeanFactoryçš„å­æ¥å£.å› ä¸º:</p><ul><li>æ›´å®¹æ˜“å’ŒSpring çš„AOPç‰¹æ€§ç›¸ç»“åˆ</li><li>æ¶ˆæ¯èµ„æºå¤„ç†,ç”¨äºå›½é™…åŒ–é—®é¢˜</li><li>äº‹ä»¶å‘å¸ƒ</li><li>ç”¨äºç‰¹å®šçš„ä¸Šä¸‹æ–‡æ¯”å¦‚webåº”ç”¨ç¨‹åºçš„<code>WebApplicationContext</code></li></ul><p>ç®€å•æ¥è¯´å°±æ˜¯<code>BeanFactory</code>æä¾›äº†åŸºæœ¬çš„åŠŸèƒ½,è€Œ<code>ApplicationContext</code>æä¾›äº†æ›´å¤šçš„ä¼ä¸šå®šåˆ¶åŒ–çš„åŠŸèƒ½.</p><p><code>ApplicationContext</code>ä»£è¡¨äº†IOCå®¹å™¨,æä¾›äº†åˆå§‹åŒ–ã€é…ç½®ã€ç»„è£…beans.é€šè¿‡é…ç½®å…ƒæ•°æ®æ¥è·å–æœ‰å…³åˆå§‹åŒ–..ç­‰çš„æŒ‡ä»¤.è¿™é‡Œæ‰€æŒ‡çš„é…ç½®å…ƒæ•°æ®å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶,æ³¨è§£æˆ–è€…javaä»£ç æ¥å®ç°.é€šè¿‡é…ç½®å…ƒæ•°æ®æ¥ä½“ç°å¯¹è±¡å’Œå…¶ä¾èµ–.</p><p>ä¸‹å›¾ä¸ºå®˜ç½‘æä¾›çš„springå·¥ä½œçš„ç®€åŒ–å›¾:</p><p><img src="https://docs.spring.io/spring/docs/current/spring-framework-reference/images/container-magic.png" alt="IOCå®¹å™¨"></p><h3 id="SpringBeançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#SpringBeançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="SpringBeançš„ç”Ÿå‘½å‘¨æœŸ"></a>SpringBeançš„ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://raw.githubusercontent.com/NanYinIU/PicRoom/master/img/20190531170713.png" alt="ç”Ÿå‘½å‘¨æœŸ"><br>ç”Ÿå‘½å‘¨æœŸå¤§æ¦‚åŒ…å«è¿™å‡ ä¸ªé˜¶æ®µ:</p><ol><li>å®ä¾‹åŒ–Beanå¯¹è±¡,è¿™æ—¶è¿˜æœªè¿›è¡Œä¾èµ–æ³¨å…¥,æœ€åå°†beanåŠ å…¥åˆ°beanwapperä¸­.</li><li>è®¾ç½®å¯¹è±¡å±æ€§.Springæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯è¿›è¡Œä¾èµ–æ³¨å…¥.å¹¶ä¸”é€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li><li>æ³¨å…¥Awareæ¥å£,æ£€æµ‹æ˜¯å¦æ˜¯æƒ³ç›¸å…³Awareæ¥å£,å¹¶è£…é…ç›¸å…³æ¥å£çš„æ–¹æ³•.</li><li>BeanPostProcessor æ­¤æ—¶beanå·²ç»æˆåŠŸè¢«æ„é€ ,é€šè¿‡å®ç°è¿™ä¸ªæ¥å£æ¥è‡ªå®šä¹‰å‰ç½®å’Œåç½®çš„å¤„ç†è§„åˆ™.</li><li>è°ƒç”¨initialzingBeanå’Œint-methods,è¿™æ—¶å¯¹è±¡æˆåŠŸè¢«åˆå§‹åŒ–</li><li>æœ€åè°ƒç”¨disposableBeançš„afterpropertiesSetæ–¹æ³•å’Œdestroy-methodsæ¥å®ç°æŒ‡å®šå¯¹è±¡é”€æ¯.</li></ol><h3 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h3><p>AOPçš„æ„æ€æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹,åœ¨ç†è§£é¢å‘åˆ‡é¢å‰,ä¸å¾—ä¸è¯´é¢å‘å¯¹è±¡.ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡,é¢å‘å¯¹è±¡ç¼–ç¨‹å°±æ˜¯å°†äº‹åŠ¡å¯¹è±¡åŒ–,ä¾æ®å¯¹è±¡è¿›è¡Œå±‚çº§åŒ–,é¢å‘å¯¹è±¡é€šè¿‡å°è£…ç»§æ‰¿å¤šæ€çš„æ–¹å¼å®ç°äº†å¯¹è±¡å±‚æ¬¡ç»“æ„,ä½†æ˜¯å®é™…åº”ç”¨æ—¶å¯èƒ½ä¼šé‡åˆ°éœ€è¦æ¨ªå‘çš„è¿›è¡Œä¸šåŠ¡å¤„ç†,å…¸å‹çš„å°±å¦‚æ—¥å¿—,å› ä¸ºåœ¨å®é™…ä»£ç ç¼–å†™æ—¶,ä¸èƒ½æ¯æ¬¡åœ¨å†™æ–¹æ³•å‰åéƒ½åŠ å…¥ç›¸åŒçš„ä»£ç ,è¿™æ ·å³æµªè´¹æ—¶é—´,åˆå¯¼è‡´ä»£ç å†—ä½™.æ‰€ä»¥é¢å‘åˆ‡é¢ç¼–ç¨‹å¿…ä¸å¯å°‘.</p><p>AOPå°†å¤šä¸ªç›¸åŒçš„ä¸šåŠ¡ä»£ç æ•´åˆ,å½¢æˆä¸€ä¸ªé€šç”¨çš„<code>â€œåˆ‡é¢â€</code>,é€šè¿‡åˆ‡é¢å¯ä»¥åˆ†å‰²å‡º<code>â€œæ ¸å¿ƒå…³æ³¨ç‚¹â€</code>å’Œ<code>â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€</code>,æ ¸å¿ƒå…³æ³¨ç‚¹å°±æ˜¯å®é™…çš„æ ¸å¿ƒä¸šåŠ¡å…³æ³¨çš„ä»£ç é€»è¾‘éƒ¨åˆ†,æ¨ªåˆ‡å…³æ³¨ç‚¹å°±æ˜¯å…¬å…±çš„ä»£ç çš„å®ç°.</p><p>å…¶ä¸­AOPä¸­æœ‰å‡ ä¸ªæ¯”è¾ƒå…³é”®çš„æ¦‚å¿µ:</p><ol><li>æ¨ªåˆ‡å…³æ³¨ç‚¹:å¯¹å“ªäº›æ–¹æ³•è¿›è¡Œæ‹¦æˆª,æ‹¦æˆªåå¦‚ä½•å¤„ç†.è¿™äº›å…³æ³¨ç‚¹å«åšæ¨ªåˆ‡å…³æ³¨ç‚¹</li><li>åˆ‡é¢:åˆ‡é¢å°±æ˜¯å¯¹æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æŠ½è±¡,å°±å¦‚åŒç±»å¯¹äº‹ç‰©çš„æŠ½è±¡ç±»ä¼¼</li><li>è¿æ¥ç‚¹(joinpoint):è¢«æ‹¦æˆªåˆ°çš„ç‚¹,å¯ä»¥é€šè¿‡è¿æ¥ç‚¹è·å–è¢«æ‹¦æˆªçš„å‚æ•°ç­‰ä¿¡æ¯</li><li>åˆ‡å…¥ç‚¹:è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</li><li>ç»‡å…¥:æ¨ªåˆ‡çš„è¿‡ç¨‹å«åšç»‡å…¥</li></ol><h4 id="ç®€å•çš„ä»£ç å®ç°-æ³¨è§£"><a href="#ç®€å•çš„ä»£ç å®ç°-æ³¨è§£" class="headerlink" title="ç®€å•çš„ä»£ç å®ç°(æ³¨è§£)"></a>ç®€å•çš„ä»£ç å®ç°(æ³¨è§£)</h4><p>ä¸‹é¢ä»£ç ä½¿ç”¨æ³¨è§£çš„æ–¹å¼å®ç°çš„Spring AOP,é…ç½®æ–‡ä»¶åŒç†,éœ€è¦é…ç½®åˆ‡é¢(ä¸»è¦æ˜¯åˆ‡ç‚¹å’Œé€šçŸ¥æ–¹æ³•)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// æ ‡å¿—ä¸ºAOP @Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceLog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(ServiceLog.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    HttpSession httpSession;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰ç½®é€šçŸ¥ åˆ‡å…¥ç‚¹å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"execution(* com.nanyin.jreact.service.serviceImpl..*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handelServiceMethodBefore</span><span class="params">(JoinPoint joinpoint)</span></span>&#123; <span class="comment">//JoinPoint ä¸ºè¿æ¥ç‚¹,é€šè¿‡è¿æ¥ç‚¹å¯è·å–å‚æ•°ç­‰</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String username = (String) httpSession.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">            BaseUtil.setUser(Optional.ofNullable(username).orElse(<span class="string">"ç©º "</span>));</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åç½®é€šçŸ¥ åˆ‡å…¥ç‚¹åæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"execution(* com.nanyin.jreact.service.serviceImpl..*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handelServiceMethodAfter</span><span class="params">(JoinPoint joinpoint)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String username = (String) httpSession.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">            BaseUtil.setUser(Optional.ofNullable(username).orElse(<span class="string">"ç©º "</span>));</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†"><a href="#JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†" class="headerlink" title="JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†"></a>JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†</h4><p>ä¸¤è€…éƒ½å¯ä»¥å®ç°AOPä»£ç†åŠŸèƒ½,ä½†æ˜¯jdkä»£ç†éœ€è¦ä»£ç†ç±»å’Œå§”æ‰˜ç±»éƒ½å®ç°ç³»ç»Ÿçš„æ¥å£,ä½†æ˜¯å®é™…åº”ç”¨çš„æ—¶å€™è¿™ç§æƒ…å†µéå¸¸å°‘,è¿™æ—¶å€™ä¼šè‡ªåŠ¨ä½¿ç”¨CGLIBå®ç°åŠ¨æ€ä»£ç†</p><h3 id="Springäº‹åŠ¡ç®¡ç†"><a href="#Springäº‹åŠ¡ç®¡ç†" class="headerlink" title="Springäº‹åŠ¡ç®¡ç†"></a>Springäº‹åŠ¡ç®¡ç†</h3><p>äº‹åŠ¡åŒ…å«å››ä¸ªåŸºæœ¬ç‰¹æ€§,ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ACID,åˆ†åˆ«ä¸ºåŸå­æ€§,ä¸€è‡´æ€§,éš”ç¦»æ€§,æŒä¹…æ€§</p><h4 id="äº‹åŠ¡çš„æ¥å£"><a href="#äº‹åŠ¡çš„æ¥å£" class="headerlink" title="äº‹åŠ¡çš„æ¥å£"></a>äº‹åŠ¡çš„æ¥å£</h4><ol><li>PlatformTransactionManagerï¼š ï¼ˆå¹³å°ï¼‰äº‹åŠ¡ç®¡ç†å™¨</li></ol><blockquote><p>spring ä¸ç›´æ¥ç®¡ç†äº‹åŠ¡,è€Œæ˜¯å®ç°ä¸åŒçš„äº‹åŠ¡ç®¡ç†å™¨,å°†äº‹åŠ¡äº¤ç»™æ¡†æ¶å¤„ç†,å¦‚ä¸ºibaits å’Œ hibernate æœ‰ä¸åŒçš„å®ç°.</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ xml é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>TransactionDefinitionï¼š äº‹åŠ¡å®šä¹‰ä¿¡æ¯(äº‹åŠ¡éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶ã€åªè¯»ã€å›æ»šè§„åˆ™)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TransactionDefinition</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getPropagationBehavior</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="comment">// è¿”å›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡ç®¡ç†å™¨æ ¹æ®å®ƒæ¥æ§åˆ¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°æœ¬äº‹åŠ¡å†…çš„å“ªäº›æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getIsolationLevel</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="comment">//è¿”å›äº‹åŠ¡çš„åå­—</span></span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span>ï¼›</span></span><br><span class="line"><span class="function">    <span class="comment">// è¿”å›äº‹åŠ¡å¿…é¡»åœ¨å¤šå°‘ç§’å†…å®Œæˆ</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">getTimeout</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="comment">// è¿”å›æ˜¯å¦ä¼˜åŒ–ä¸ºåªè¯»äº‹åŠ¡ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isReadOnly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>TransactionStatusï¼š ç”¨æ¥è®°å½•äº‹åŠ¡è¿è¡ŒçŠ¶æ€</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TransactionStatus</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isNewTransaction</span><span class="params">()</span></span>; <span class="comment">// æ˜¯å¦æ˜¯æ–°çš„äº‹ç‰©</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasSavepoint</span><span class="params">()</span></span>; <span class="comment">// æ˜¯å¦æœ‰æ¢å¤ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setRollbackOnly</span><span class="params">()</span></span>;  <span class="comment">// è®¾ç½®ä¸ºåªå›æ»š</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isRollbackOnly</span><span class="params">()</span></span>; <span class="comment">// æ˜¯å¦ä¸ºåªå›æ»š</span></span><br><span class="line">    <span class="keyword">boolean</span> isCompleted; <span class="comment">// æ˜¯å¦å·²å®Œæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><h4 id="æ„é€ æ³¨è§£"><a href="#æ„é€ æ³¨è§£" class="headerlink" title="æ„é€ æ³¨è§£"></a>æ„é€ æ³¨è§£</h4><p>æ³¨è§£ä½¿ç”¨<code>@interface</code>æ¥æ ‡è¯†ä¸ºä¸€ä¸ªæ³¨è§£,å…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @TargetåŸæ³¨è§£çš„æ„ä¹‰æ˜¯è¡¨æ˜ä½œç”¨åŸŸï¼Œæ¯”å¦‚typeå°±æ˜¯è¡¨ç¤ºè¦æ ‡æ³¨åˆ°ç±»æ¥å£ä¸Š</span></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="comment">// è¡¨ç¤ºä½œç”¨åŸŸ</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="comment">// è¡¨æ˜å…¶ä»–æ³¨è§£èƒ½å¤Ÿç»§æ‰¿è¯¥æ³¨è§£</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="comment">// javadocä¼šåŒ…å«</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TableDescription &#123;</span><br><span class="line">    <span class="function">String <span class="title">description</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­è¯¥æ³¨è§£çš„ä½œç”¨å°±æ˜¯1.æ ‡æ³¨åœ¨ç±»æ¥å£ä¸Š2.ä½œç”¨åœ¨è¿è¡Œæ—¶,èƒ½å¤Ÿé€šè¿‡åå°„å¾—åˆ°æ¥å£ä¸­çš„å†…å®¹3.èƒ½å¤Ÿè®©å…¶ä»–æ³¨è§£ç»§æ‰¿è¯¥æ³¨è§£4.èƒ½å¤Ÿç”Ÿæˆjavaddocæ–‡æ¡£</p><p>ä¸‹é¢æ¥é‡ç‚¹å…³æ³¨ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒæ³¨è§£:</p><ol><li>@Targetæ˜¯è¿™ä¸ªæ³¨è§£çš„ä½œç”¨åŸŸï¼ŒElementType.METHODæ˜¯è¿™ä¸ªæ³¨è§£çš„ä½œç”¨åŸŸçš„åˆ—è¡¨ï¼ŒMETHODæ˜¯æ–¹æ³•å£°æ˜ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼šCONSTRUCTORï¼ˆæ„é€ æ–¹æ³•å£°æ˜ï¼‰,FIELDï¼ˆå­—æ®µå£°æ˜ï¼‰,LOCAL VARIABLEï¼ˆå±€éƒ¨å˜é‡å£°æ˜ï¼‰,METHODï¼ˆæ–¹æ³•å£°æ˜ï¼‰,PACKAGEï¼ˆåŒ…å£°æ˜ï¼‰,PARAMETERï¼ˆå‚æ•°å£°æ˜ï¼‰,TYPEï¼ˆç±»æ¥å£ï¼‰</li><li>@Retentionæ˜¯å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå‰é¢ä¸æ˜¯è¯´æ³¨è§£æŒ‰ç…§è¿è¡Œæœºåˆ¶æœ‰ä¸€ä¸ªåˆ†ç±»å˜›ï¼ŒRUNTIMEå°±æ˜¯åœ¨è¿è¡Œæ—¶å­˜åœ¨ï¼Œå¯ä»¥é€šè¿‡åå°„è¯»å–ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰: SOURCEï¼ˆåªåœ¨æºç æ˜¾ç¤ºï¼Œç¼–è¯‘æ—¶ä¸¢å¼ƒï¼‰,CLASSï¼ˆç¼–è¯‘æ—¶è®°å½•åˆ°classä¸­ï¼Œè¿è¡Œæ—¶å¿½ç•¥ï¼‰,RUNTIMEï¼ˆè¿è¡Œæ—¶å­˜åœ¨ï¼Œå¯ä»¥é€šè¿‡åå°„è¯»å–ï¼‰</li></ol><h4 id="å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"><a href="#å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£"></a>å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</h4><ul><li><p>æ·»åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"person"</span>)</span><br><span class="line"><span class="comment">// è¿™é‡Œä½¿ç”¨åˆ°äº†ä¸Šé¢çš„è‡ªå®šä¹‰æ³¨è§£TableDescription</span></span><br><span class="line"><span class="meta">@TableDescription</span>(description = <span class="string">"this is person table"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"name"</span>,length = <span class="number">128</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"age"</span>,length = <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">short</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è·å¾—æ³¨è§£å†…å®¹</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAnn</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// åå°„è·å–ç±»</span></span><br><span class="line">        Class clazz = Class.forName(<span class="string">"com.nanyin.jreact.entry.Person"</span>);</span><br><span class="line">        Boolean exist = clazz.isAnnotationPresent(TableDescription.class);</span><br><span class="line">        <span class="keyword">if</span>(exist)&#123;</span><br><span class="line">           <span class="comment">//å¦‚æœæ³¨è§£åœ¨ç±»ä¸­å­˜åœ¨</span></span><br><span class="line">           TableDescription tableDescription = (TableDescription) clazz.getAnnotation(TableDescription.class);</span><br><span class="line">           <span class="comment">// è·å¾—æ³¨è§£å†…å®¹</span></span><br><span class="line">            System.out.println(tableDescription.description());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (ClassNotFoundException c)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢åªæ˜¯ç®€å•çš„æ©é¥°æ³¨è§£çš„ç”¨æ³•,ä½†å®é™…ä¸Šä¸šåŠ¡ä¼šæ¯”è¿™éš¾ä¸Šè®¸å¤š.</p><h3 id="springMVC-å·¥ä½œæµç¨‹"><a href="#springMVC-å·¥ä½œæµç¨‹" class="headerlink" title="springMVC å·¥ä½œæµç¨‹"></a>springMVC å·¥ä½œæµç¨‹</h3><p>å…ˆä¸Šä¸€å¼ å›¾:æ¥è‡ª<a href="https://www.cnblogs.com/xiaoxi/p/6164383.html" target="_blank" rel="noopener">https://www.cnblogs.com/xiaoxi/p/6164383.html</a><br><img src="https://i.loli.net/2019/05/12/5cd7cf13c933c.jpg" alt="SpringMvcå·¥ä½œåŸç†"></p><p>ç”±å›¾ä¸­å¯ä»¥çœ‹åˆ°SpringMvcä¸­æœ€é‡è¦çš„èµ·åˆ°ä¸­æ¢çš„æ˜¯<code>DispatcherServlet</code>(å‰ç«¯æ§åˆ¶å™¨).</p><ol><li>åœ¨DispatcherServletæ¥å—åˆ°å®¢æˆ·ç«¯è¯·æ±‚å,ä½¿ç”¨ <code>handlerMapping</code> è¿›è¡Œæ˜ å°„å¤„ç†.åœ¨ç”Ÿæˆå¤„ç†å™¨æ˜ å°„å™¨ä¹‹å, è¿”å›ä¸€ä¸ªhandler,å¦‚æœæœ‰æ‹¦æˆªå™¨çš„åŒ–è¿˜ç”Ÿæˆæ‹¦æˆªå™¨.äº¤ç»™ <code>DispatcherServlet</code> è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†.</li><li>ç¬¬äºŒæ­¥äº¤ç»™ <code>handlerAdatper</code> (å¤„ç†å™¨é€‚å™¨) <code>HandlerAdapter</code> ç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨( <code>Controller</code> ï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ã€‚Controlleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewã€‚</li><li>ç¬¬ä¸‰æ­¥,DispatcherServletå°†æœ€ç»ˆçš„ç»“æœäº¤ç»™ <code>viewResolver</code> è¯•å›¾è§£æå™¨è¿›è¡Œè§†å›¾è§£æ</li><li>DispatcherServlet æ ¹æ®è¿”å›çš„viewè¿›è¡Œè§†å›¾æ¸²æŸ“,æœ€ç»ˆè¿”å›ç»™å®¢æˆ·ç«¯ç”¨æˆ·.</li></ol>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hibernateé‡ç‚¹çŸ¥è¯†æ€»ç»“</title>
      <link href="/2019/04/29/2019-04-29-Hibernate%E9%87%8D%E7%82%B9%E6%80%BB%E7%BB%93/"/>
      <url>/2019/04/29/2019-04-29-Hibernate%E9%87%8D%E7%82%B9%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="Hibernateé‡ç‚¹çŸ¥è¯†æ€»ç»“"><a href="#Hibernateé‡ç‚¹çŸ¥è¯†æ€»ç»“" class="headerlink" title="Hibernateé‡ç‚¹çŸ¥è¯†æ€»ç»“"></a>Hibernateé‡ç‚¹çŸ¥è¯†æ€»ç»“</h1><h2 id="Hibernateçš„ä¸‰ç§çŠ¶æ€"><a href="#Hibernateçš„ä¸‰ç§çŠ¶æ€" class="headerlink" title="Hibernateçš„ä¸‰ç§çŠ¶æ€"></a>Hibernateçš„ä¸‰ç§çŠ¶æ€</h2><ol><li>ç¬æ—¶æ€(transient):å½“å®ä½“è¿˜æœªå’Œsessionå…³è”,å¦‚new Person(â€œ1â€);</li><li>æŒä¹…æ€(persistent): é€šè¿‡getæˆ–è€…loadå¾—åˆ°çš„å®ä½“ç±»,è¿™æ—¶çš„çŠ¶æ€éƒ½æ˜¯æŒä¹…æ€.</li><li>æ¸¸ç¦»æ€(detached): å½“é€šè¿‡getæˆ–è€…loadå¾—åˆ°æŒä¹…æ€çš„å¯¹è±¡å,æ‰§è¡Œåˆ é™¤deleteæ—¶,è¿™æ—¶å·²ç»è„±ç¦»session.å› deleteè€Œå˜ä¸ºæ¸¸ç¦»æ€å¯æœ‰saveæˆ–è€…saveOrUpateè½¬åŒ–ä¸ºæŒä¹…æ€.æˆ–åˆ™å½“sessionå…³é—­å,sessionä¸­çš„å¯¹è±¡å°±å˜ä¸ºæ¸¸ç¦»æ€.</li></ol><h2 id="hibernateä¸­updateå’ŒsaveOrUpdateçš„åŒºåˆ«"><a href="#hibernateä¸­updateå’ŒsaveOrUpdateçš„åŒºåˆ«" class="headerlink" title="hibernateä¸­updateå’ŒsaveOrUpdateçš„åŒºåˆ«"></a>hibernateä¸­updateå’ŒsaveOrUpdateçš„åŒºåˆ«</h2><p>updateåªèƒ½æ˜¯å¯¹è±¡æœ‰ä¸»é”®æ—¶èµ·ä½œç”¨,è€ŒsaveOrUpdateåˆ™åœ¨å¯¹è±¡æ²¡æœ‰ä¸»é”®æ—¶æ‰§è¡Œæ’å…¥æ“ä½œ.å¯¹åº”çš„updateæ“ä½œåªèƒ½æ“ä½œæ¸¸ç¦»æ€çš„å¯¹è±¡,è€Œä¸èƒ½å¯¹ç¬æ—¶æ€çš„å¯¹è±¡æ“ä½œ.è€ŒsaveOrUpdateåˆ™ä¸¤ç§çŠ¶æ€çš„å¯¹è±¡éƒ½å¯ä»¥æ“ä½œ.</p><h2 id="hibernateä¸­çš„updateå’Œmergeæ–¹æ³•çš„åŒºåˆ«"><a href="#hibernateä¸­çš„updateå’Œmergeæ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="hibernateä¸­çš„updateå’Œmergeæ–¹æ³•çš„åŒºåˆ«"></a>hibernateä¸­çš„updateå’Œmergeæ–¹æ³•çš„åŒºåˆ«</h2><p>å½“æ‰§è¡Œupdateæ–¹æ³•çš„æ—¶å€™,ä¸€ä¸ªsessionä¸­å…·æœ‰ä¸å½“å‰updateç›¸åŒçš„æŒä¹…åŒ–æ ‡è¯†(identifier)çš„å®ä¾‹,ä½¿ç”¨upateæ“ä½œåä¼šæŠ¥é”™,è€Œä½¿ç”¨mergeåæŠŠå¤„ç†è‡ªç”±æ€çš„poå¯¹è±¡Açš„å±æ€§copyåˆ°sessionå½“ä¸­å¤„äºæŒä¹…æ€çš„poçš„å±æ€§ä¸­ï¼Œæ‰§è¡Œå®ŒæˆååŸæ¥æ˜¯æŒä¹…çŠ¶æ€è¿˜æ˜¯æŒä¹…æ€ï¼Œè€Œæˆ‘ä»¬æä¾›çš„Aè¿˜æ˜¯è‡ªç”±æ€ã€‚</p><h2 id="hibernateä¸­getå’Œloadçš„åŒºåˆ«"><a href="#hibernateä¸­getå’Œloadçš„åŒºåˆ«" class="headerlink" title="hibernateä¸­getå’Œloadçš„åŒºåˆ«"></a>hibernateä¸­getå’Œloadçš„åŒºåˆ«</h2><p>ä¸€å¥è¯ï¼Œhibernateå¯¹äºloadæ–¹æ³•è®¤ä¸ºè¯¥æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¸€å®šå­˜åœ¨ï¼Œå¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨ä»£ç†æ¥å»¶è¿ŸåŠ è½½ï¼Œå¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°äº†é—®é¢˜ï¼Œåªèƒ½æŠ›å¼‚å¸¸ï¼›è€Œå¯¹äºgetæ–¹æ³•ï¼Œhibernateä¸€å®šè¦è·å–åˆ°çœŸå®çš„æ•°æ®ï¼Œå¦åˆ™è¿”å›nullã€‚</p><h2 id="hibernateä¸­listå’Œiteratorçš„åŒºåˆ«"><a href="#hibernateä¸­listå’Œiteratorçš„åŒºåˆ«" class="headerlink" title="hibernateä¸­listå’Œiteratorçš„åŒºåˆ«"></a>hibernateä¸­listå’Œiteratorçš„åŒºåˆ«</h2><p>(1)ã€Listæ–¹å¼æ˜¯1æ¬¡æ€§æŠŠæ‰€æœ‰çš„æ•°æ®å…¨éƒ¨å–åˆ°å†…å­˜ä¸­ï¼Œæ„é€ ä¸€ä¸ªè¶…å¤§çš„ç»“æœé›†ï¼Œä¸»è¦çš„æ—¶é—´å¼€é”€æ˜¯è¿™ä¸€æ­¥ï¼Œè¿™ä¸€æ­¥çš„æ—¶é—´å¼€é”€è¦è¿œè¿œè¶…è¿‡JDBCå’Œ Iteratoræ–¹å¼ä¸‹æ„é€ ç»“æœé›†çš„æ—¶é—´å¼€é”€ï¼Œå¹¶ä¸”å†…å­˜å¼€é”€ä¹Ÿå¾ˆæƒŠäººï¼›è€Œå¯¹ç»“æœé›†çš„éå†æ“ä½œï¼Œé€Ÿåº¦åˆ™æ˜¯éå¸¸çš„æƒŠäººï¼ˆç»è¿‡æµ‹è¯•ï¼Œ30ä¸‡è®°å½•çš„å†… å­˜éå†ä¸åˆ°100msï¼Œç”±äºè¿™ä¸€æ­¥ä¸å—JDBCå½±å“ï¼Œå› æ­¤ç»“æœå¯ä¿¡ï¼‰ã€‚å› æ­¤ï¼ŒListæ–¹å¼é€‚åˆäºå¯¹ç»“æœé›†è¿›è¡Œåå¤å¤šæ¬¡æ“ä½œçš„æƒ…å†µï¼Œä¾‹å¦‚åˆ†é¡µæ˜¾ç¤ºï¼Œå¾€åå¾€å‰ éå†ï¼Œè·³åˆ°ç¬¬ä¸€è¡Œï¼Œè·³åˆ°æœ€åä¸€è¡Œç­‰ç­‰ã€‚</p><p>(2)ã€Iteratoræ–¹å¼åªå–è®°å½•idåˆ°å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠæ‰€æœ‰æ•°æ®å–åˆ°å†…å­˜ä¸­ï¼Œå› æ­¤æ„é€ ç»“æœé›†çš„æ—¶é—´å¼€é”€å¾ˆå°ï¼Œæ¯”JDBCå’ŒListæ–¹å¼éƒ½è¦å°‘ï¼Œå¹¶ä¸”å†… å­˜å¼€é”€ä¹Ÿå°å¾ˆå¤šã€‚è€Œå¯¹ç»“æœé›†çš„éå†çš„æ“ä½œçš„æ—¶å€™ï¼ŒIteratorä»ç„¶è¦è®¿é—®æ•°æ®åº“ï¼Œæ‰€æœ‰ä¸»è¦çš„æ—¶é—´å¼€é”€éƒ½èŠ±åœ¨è¿™é‡Œã€‚å› æ­¤ï¼ŒIteratoræ–¹å¼é€‚åˆäºåª å¯¹ç»“æœé›†è¿›è¡Œ1æ¬¡éå†æ“ä½œçš„æƒ…å†µï¼Œå¹¶ä¸”Iteratoræ–¹å¼ç‰¹åˆ«é€‚åˆäºä»è¶…å¤§ç»“æœé›†ä¸­å–å°‘é‡æ•°æ®ï¼Œè¿™ç§æƒ…å†µIteratoræ€§èƒ½éå¸¸å¥½ã€‚</p><p>æ€»ç»“: listæŠŠæ•°æ®ä¸€æ¬¡åŠ è½½åˆ°å†…å­˜,å†è¿›è¡Œéå†æ“ä½œå°±éå¸¸å¿«äº†.è€ŒIteratoræ–¹å¼åªä¼šæŠŠidæ”¾åˆ°å†…å­˜ä¸­,ä½†æ˜¯å†æ¬¡éå†æ—¶ä»ç„¶è¦è®¿é—®æ•°æ®åº“æŸ¥è¯¢æ•°æ®,é€‚åˆä¸€æ¬¡éå†çš„æƒ…å†µ.</p><h2 id="hibernateä¸­çš„inverseå±æ€§"><a href="#hibernateä¸­çš„inverseå±æ€§" class="headerlink" title="hibernateä¸­çš„inverseå±æ€§"></a>hibernateä¸­çš„inverseå±æ€§</h2><p>è®¾ç½®inverse=â€œfalseâ€ä¸ºä¸»æ§æ–¹,ç”±ä¸»æ§æ–¹ç±»ç»´æŠ¤å¯¹è±¡é—´çš„å…³ç³».æ¯”å¦‚å†many-to-oneçš„å…³ç³»ä¸­,å†oneçš„ä¸€æ–¹è®¾ç½®<code>inverse=&quot;true&quot;</code>è¿™æ ·èƒ½å¤Ÿæé«˜æ•ˆç‡,æ¯”å¦‚ç­çº§é‡Œä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿ,è€å¸ˆè®°ä½å¤šä¸ªå­¦ç”Ÿæ¯”è¾ƒå›°éš¾,è€Œå­¦ç”Ÿè®°ä½ä¸€ä¸ªè€å¸ˆå¾ˆå®¹æ˜“.åŒç†one-to-many.å†å¤šå¯¹å¤šçš„å…³ç³»ä¸­,å†ä»»æ„ä¸€æ–¹è®¾ç½®<code>inverse=&#39;true&#39;</code>å³å¯.</p><h2 id="hibernateä¸­çš„cascadeå±æ€§"><a href="#hibernateä¸­çš„cascadeå±æ€§" class="headerlink" title="hibernateä¸­çš„cascadeå±æ€§"></a>hibernateä¸­çš„cascadeå±æ€§</h2><p>çº§è”æ“ä½œï¼šæŒ‡å½“ä¸»æ§æ–¹æ‰§è¡ŒæŸé¡¹æ“ä½œæ—¶ï¼Œæ˜¯å¦è¦å¯¹è¢«å…³è”æ–¹ä¹Ÿæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚</p><h2 id="ä»€ä¹ˆæƒ…å†µä¸‹æ‡’åŠ è½½èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜æ•ˆç‡"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹æ‡’åŠ è½½èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜æ•ˆç‡" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹æ‡’åŠ è½½èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜æ•ˆç‡"></a>ä»€ä¹ˆæƒ…å†µä¸‹æ‡’åŠ è½½èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜æ•ˆç‡</h2><p>æ‡’åŠ è½½æ˜¯å½“ç”¨åˆ°å¯¹è±¡çš„æ—¶å€™å†ä»æ•°æ®åº“åŠ è½½æ•°æ®,æŒä¹…åŒ–æ¥ä½¿ç”¨.ä»è¿™å¥è¯ä¸­å°±å¯ä»¥ç†è§£ä¸º,å› ä¸ºåŠè”çš„å…³ç³»,ä¸€ä¸ªè¡¨çš„æ•°æ®å¯èƒ½ä¼šå¸¦å‡ºå¤šå¼ è¡¨çš„æ•°æ®,è¿™æ—¶å€™ä½¿ç”¨æ‡’åŠ è½½å°±èƒ½å¤Ÿå®ç°æ•ˆç‡çš„æé«˜,æ²¡å¿…è¦ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°æ®éƒ½åŠ è½½å‡ºæ¥,è€Œæ˜¯ç”¨æ—¶åŠ è½½.hibernateé»˜è®¤æ˜¯ä½¿ç”¨æ‡’åŠ è½½çš„,å½“ç„¶å¯ä»¥ä½¿ç”¨lazy=falseæ¥ç¦ç”¨æ‡’åŠ è½½.</p><h2 id="ä»€ä¹ˆæ˜¯hibernateçš„äºŒçº§ç¼“å­˜"><a href="#ä»€ä¹ˆæ˜¯hibernateçš„äºŒçº§ç¼“å­˜" class="headerlink" title="ä»€ä¹ˆæ˜¯hibernateçš„äºŒçº§ç¼“å­˜"></a>ä»€ä¹ˆæ˜¯hibernateçš„äºŒçº§ç¼“å­˜</h2><p>ç¼“å­˜å°±æ˜¯å°†ä»¥å‰çš„æ•°æ®å­˜æ”¾åˆ°å†…å­˜ä¸­,å½“æŸ¥è¯¢æ•°æ®çš„æ—¶å€™,ç°åœ¨å†…å­˜ä¸­æŸ¥è¯¢,æ˜¯å¦æœ‰è¿™ä¸ªå¯¹è±¡,å¦‚æœæ²¡æœ‰å†ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¯¹è±¡,è¿™æ ·å¤§å¤§çš„æé«˜äº†æŸ¥è¯¢çš„æ•ˆç‡.</p><p>Hibenateçš„sessionå°±æ˜¯ä¸€çº§ç¼“å­˜,å½“æŸ¥è¯¢æ•°æ®çš„æ—¶å€™éƒ½ä¼šå…ˆä»sessionä¸­æŸ¥è¯¢å¯¹è±¡æ˜¯å¦å­˜åœ¨,ä¸å­˜åœ¨æ‰ä»æ•°æ®åº“æŸ¥è¯¢.ä½†æ˜¯sessionæ˜¯éçº¿ç¨‹å®‰å…¨çš„,å¤šçº¿ç¨‹å…±äº«çš„æƒ…å†µä¸‹ä¼šå‡ºç°é—®é¢˜.å¹¶ä¸”sessionæ˜¯è¡¨ç¤ºçš„æ˜¯ä¸€æ®µä¼šè¯,è¡¨ç¤ºçš„æ˜¯ä¸€æ¬¡äº‹åŠ¡,åŸºäºä»¥ä¸Šä¸¤ç‚¹,æ‰€ä»¥åœ¨ä¸€æ¬¡äº‹åŠ¡å®Œæˆå,sessionå°±åº”ç«‹å³å…³é—­.æ‰€ä»¥è¿™é‡Œè¯´çš„ä¸€çº§ç¼“å­˜æ„ä¹‰ä¸å¤§.</p><p>Hibernateçš„äºŒçº§ç¼“å­˜å…¶å®å°±æ˜¯ä½¿ç”¨å¤–éƒ¨ç¼“å­˜,å¦‚Echacheæˆ–è€…redisç­‰,ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½®ç¼“å­˜ç­–ç•¥ç­‰.</p><h2 id="Hibernateä¸­ä½¿ç”¨hibernateTemplateçš„å¥½å¤„æœ‰å“ªäº›"><a href="#Hibernateä¸­ä½¿ç”¨hibernateTemplateçš„å¥½å¤„æœ‰å“ªäº›" class="headerlink" title="Hibernateä¸­ä½¿ç”¨hibernateTemplateçš„å¥½å¤„æœ‰å“ªäº›?"></a>Hibernateä¸­ä½¿ç”¨hibernateTemplateçš„å¥½å¤„æœ‰å“ªäº›?</h2><ol><li>HibernateTemplateç®€åŒ–äº†ä¸Hibernate Sessionçš„äº¤äº’</li><li>å¸¸è§çš„å‡½æ•°ç®€åŒ–ä¸ºå•ä¸ªæ–¹æ³•è°ƒç”¨ã€‚</li><li>å¼‚å¸¸ä¼šè‡ªåŠ¨æ•è·å¹¶è½¬æ¢ä¸ºè¿è¡Œæ—¶å¼‚å¸¸</li><li>session è‡ªåŠ¨å…³é—­</li></ol>]]></content>
      
      
      <categories>
          
          <category> Hibernate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„å„ç§IOæ“ä½œ</title>
      <link href="/2019/04/28/2019-04-28-Java_IO%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/04/28/2019-04-28-Java_IO%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaä¸­çš„IOæ“ä½œ"><a href="#Javaä¸­çš„IOæ“ä½œ" class="headerlink" title="Javaä¸­çš„IOæ“ä½œ"></a>Javaä¸­çš„IOæ“ä½œ</h1><p>Javaæ€»çš„æ¥è¯´æœ‰ä¸‰ç±»IO,æ•ˆç‡ä¸é«˜,æ“ä½œç®€å•çš„BIO(blocking IO),éé˜»å¡çš„NIO(New IO),å’Œå¼‚æ­¥éé˜»å¡IO,ä¹Ÿå°±æ˜¯å‡çº§ç‰ˆçš„NIO(Asynchronous I/O).</p><p>åœ¨å­¦ä¹ è¿™ä¸‰ç±»IOå‰,éœ€è¦äº†è§£ä»€ä¹ˆæ˜¯é˜»å¡.ä»€ä¹ˆæ˜¯å¼‚æ­¥.ä¸¤ä¸ªçš„å«ä¹‰æœ‰ä»€ä¹ˆåŒºåˆ«.</p><blockquote><p>åŒæ­¥å’Œå¼‚æ­¥å…³æ³¨çš„æ˜¯æ¶ˆæ¯é€šä¿¡æœºåˆ¶ (synchronous communication/ asynchronous communication)æ‰€è°“åŒæ­¥ï¼Œå°±æ˜¯åœ¨å‘å‡ºä¸€ä¸ª<em>è°ƒç”¨</em>æ—¶ï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥ <em>è°ƒç”¨</em> å°±ä¸è¿”å›ã€‚ä½†æ˜¯ä¸€æ—¦è°ƒç”¨è¿”å›ï¼Œå°±å¾—åˆ°è¿”å›å€¼äº†ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯ç”±<em>è°ƒç”¨è€…</em>ä¸»åŠ¨ç­‰å¾…è¿™ä¸ª<em>è°ƒç”¨</em>çš„ç»“æœã€‚è€Œå¼‚æ­¥åˆ™æ˜¯ç›¸åï¼Œ<em>è°ƒç”¨</em>åœ¨å‘å‡ºä¹‹åï¼Œè¿™ä¸ªè°ƒç”¨å°±ç›´æ¥è¿”å›äº†ï¼Œæ‰€ä»¥æ²¡æœ‰è¿”å›ç»“æœã€‚æ¢å¥è¯è¯´ï¼Œå½“ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹è°ƒç”¨å‘å‡ºåï¼Œè°ƒç”¨è€…ä¸ä¼šç«‹åˆ»å¾—åˆ°ç»“æœã€‚è€Œæ˜¯åœ¨<em>è°ƒç”¨</em>å‘å‡ºåï¼Œ<em>è¢«è°ƒç”¨è€…</em>é€šè¿‡çŠ¶æ€ã€é€šçŸ¥æ¥é€šçŸ¥è°ƒç”¨è€…ï¼Œæˆ–é€šè¿‡å›è°ƒå‡½æ•°å¤„ç†è¿™ä¸ªè°ƒç”¨ã€‚</p></blockquote><blockquote><p>é˜»å¡å’Œéé˜»å¡å…³æ³¨çš„æ˜¯ç¨‹åºåœ¨ç­‰å¾…è°ƒç”¨ç»“æœï¼ˆæ¶ˆæ¯ï¼Œè¿”å›å€¼ï¼‰æ—¶çš„çŠ¶æ€.é˜»å¡è°ƒç”¨æ˜¯æŒ‡è°ƒç”¨ç»“æœè¿”å›ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚è°ƒç”¨çº¿ç¨‹åªæœ‰åœ¨å¾—åˆ°ç»“æœä¹‹åæ‰ä¼šè¿”å›ã€‚éé˜»å¡è°ƒç”¨æŒ‡åœ¨ä¸èƒ½ç«‹åˆ»å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚</p></blockquote><h2 id="BIO"><a href="#BIO" class="headerlink" title="BIO"></a>BIO</h2><p>BIOè¿‡ç¨‹å°±å¦‚åŒåå­—ä¸€æ ·,æ˜¯ä¸€ä¸ªé˜»å¡çš„IO,æœåŠ¡ç«¯é€šå¸¸ä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ¥é€šè¿‡è°ƒç”¨accept()æ¥ç›‘å¬å®¢æˆ·ç«¯æ¶ˆæ¯.å¦‚æœæƒ³å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚åˆ™æœåŠ¡ç«¯éœ€è¦å»ºç«‹ç­‰åŒæ•°é‡çš„çº¿ç¨‹æ¥å¤„ç†è¿™äº›æ¶ˆæ¯,è¿™å°±æ˜¯æ™®éçš„ä¸€è¯·æ±‚ä¸€åº”ç­”çš„æ¨¡å‹.å¤„ç†å®Œæˆåè¿”å›åº”ç­”ç»™å®¢æˆ·ç«¯åé”€æ¯çº¿ç¨‹,å› ä¸ºçº¿ç¨‹æ˜¯ä¸€ä¸ªæ˜‚è´µçš„èµ„æº,è¿™æ ·é‡å¤çš„æ–°å»ºçº¿ç¨‹,é”€æ¯çº¿ç¨‹,å¾ˆæµªè´¹å¤„ç†å™¨èµ„æº,æ‰€ä»¥ä½¿ç”¨BIOåŒæ—¶èƒ½å¤Ÿå°½å¯èƒ½çš„å°‘åˆ›å»ºçº¿ç¨‹,å°±å¯ä»¥ç”¨åˆ°çº¿ç¨‹æ± çš„æ–¹å¼å®ç°,æ¥è¾¾åˆ°æœåŠ¡ç«¯åˆ›å»ºçº¿ç¨‹æ•°è¿œè¿œå°äºå®¢æˆ·ç«¯æ•°çš„ç›®çš„,ä½†è¿™ç§æ–¹æ³•åªæ˜¯ä¼ªå¼‚æ­¥IO.</p><p>åœ¨å¤„ç†é“¾æ¥æ•°é‡å°‘çš„æƒ…å†µä¸‹,BIOçš„æ•ˆç‡è¿˜ä¸é”™,å¹¶ä¸”ä¸»è¦é€»è¾‘æ¨¡å‹æ¸…æ™°æ˜äº†,ä»£ç ç®€å•.ä½†æ˜¯åœ¨ä¸Šä¸‡çš„é“¾æ¥çš„æƒ…å†µä¸‹,BIOå¤„ç†èµ·æ¥å°±éå¸¸åƒç´§äº†.</p><h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><p>NIOæ˜¯ä¸€ç§åŒæ­¥éé˜»å¡çš„I/Oæ¨¡å‹ï¼Œåœ¨Java 1.4 ä¸­å¼•å…¥äº†NIOæ¡†æ¶ï¼Œå¯¹åº” java.nio åŒ…ï¼Œæä¾›äº† Channel , Selectorï¼ŒBufferç­‰æŠ½è±¡ã€‚</p><blockquote><p>NIOä¸­çš„Nå¯ä»¥ç†è§£ä¸ºNon-blockingï¼Œä¸å•çº¯æ˜¯Newã€‚å®ƒæ”¯æŒé¢å‘ç¼“å†²çš„ï¼ŒåŸºäºé€šé“çš„I/Oæ“ä½œæ–¹æ³•ã€‚ NIOæä¾›äº†ä¸ä¼ ç»ŸBIOæ¨¡å‹ä¸­çš„ Socket å’Œ ServerSocket ç›¸å¯¹åº”çš„ SocketChannel å’Œ ServerSocketChannel ä¸¤ç§ä¸åŒçš„å¥—æ¥å­—é€šé“å®ç°,ä¸¤ç§é€šé“éƒ½æ”¯æŒé˜»å¡å’Œéé˜»å¡ä¸¤ç§æ¨¡å¼ã€‚é˜»å¡æ¨¡å¼ä½¿ç”¨å°±åƒä¼ ç»Ÿä¸­çš„æ”¯æŒä¸€æ ·ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æ€§èƒ½å’Œå¯é æ€§éƒ½ä¸å¥½ï¼›éé˜»å¡æ¨¡å¼æ­£å¥½ä¸ä¹‹ç›¸åã€‚å¯¹äºä½è´Ÿè½½ã€ä½å¹¶å‘çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥é˜»å¡I/Oæ¥æå‡å¼€å‘é€Ÿç‡å’Œæ›´å¥½çš„ç»´æŠ¤æ€§ï¼›å¯¹äºé«˜è´Ÿè½½ã€é«˜å¹¶å‘çš„ï¼ˆç½‘ç»œï¼‰åº”ç”¨ï¼Œåº”ä½¿ç”¨ NIO çš„éé˜»å¡æ¨¡å¼æ¥å¼€å‘ã€‚</p></blockquote><h3 id="NIOç‰¹æ€§å’ŒNIOä¸ä¼ ç»ŸIOçš„åŒºåˆ«"><a href="#NIOç‰¹æ€§å’ŒNIOä¸ä¼ ç»ŸIOçš„åŒºåˆ«" class="headerlink" title="NIOç‰¹æ€§å’ŒNIOä¸ä¼ ç»ŸIOçš„åŒºåˆ«"></a>NIOç‰¹æ€§å’ŒNIOä¸ä¼ ç»ŸIOçš„åŒºåˆ«</h3><ul><li>ä¼ ç»ŸIO(BIO)æ˜¯ä¸€ç§é˜»å¡IOæ¨¡å‹,è€ŒNIOæ˜¯éé˜»å¡çš„IOæ¨¡å‹,åŒºåˆ«ä¸ºå½“çº¿ç¨‹è¯»å–æ•°æ®çš„æ—¶å€™,éé˜»å¡IOå¯ä»¥ä¸ç”¨ç­‰,è€Œé˜»å¡IOéœ€è¦ä¸€ç›´ç­‰å¾…IOå®Œæˆåæ‰èƒ½ç»§ç»­.</li><li>IOé¢å‘æµ,è€ŒNIOé¢å‘ç¼“å†²åŒº.</li><li>é€šé“(channel) NIOé€šè¿‡é€šé“è¿›è¡Œæ•°æ®è¯»å†™.é€šé“æ˜¯åŒå‘çš„,è€Œä¼ ç»Ÿçš„IOæ˜¯å•å‘çš„.é€šé“é“¾æ¥çš„éƒ½æ˜¯Buffer,æ‰€ä»¥é€šé“å¯ä»¥å¼‚æ­¥çš„è¯»å†™.</li><li>é€‰æ‹©å™¨(Selectors) NIOæ‹¥æœ‰é€‰æ‹©å™¨,è€ŒIOæ²¡æœ‰.é€‰æ‹©å™¨çš„ä½œç”¨å°±æ˜¯ç”¨æ¥ä½¿ç”¨å•ä¸ªçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªé€šé“(NIOé¢å‘buffer,é€šé“åªä¸bufferäº¤äº’).<br><img src="https://camo.githubusercontent.com/3a68153ce17be90275df07a47409afaea91aff83/68747470733a2f2f6d792d626c6f672d746f2d7573652e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f323031392d322f536c6563746f722e706e67" alt="Selectorå›¾è§£"><h2 id="AIO"><a href="#AIO" class="headerlink" title="AIO"></a>AIO</h2></li></ul><p>AIO ä¹Ÿå°±æ˜¯ NIO 2ã€‚åœ¨ Java 7 ä¸­å¼•å…¥äº† NIO çš„æ”¹è¿›ç‰ˆ NIO 2,å®ƒæ˜¯å¼‚æ­¥éé˜»å¡çš„IOæ¨¡å‹ã€‚å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå µå¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚</p><p>AIO æ˜¯å¼‚æ­¥IOçš„ç¼©å†™ï¼Œè™½ç„¶ NIO åœ¨ç½‘ç»œæ“ä½œä¸­ï¼Œæä¾›äº†éé˜»å¡çš„æ–¹æ³•ï¼Œä½†æ˜¯ NIO çš„ IO è¡Œä¸ºè¿˜æ˜¯åŒæ­¥çš„ã€‚å¯¹äº NIO æ¥è¯´ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯åœ¨ IO æ“ä½œå‡†å¤‡å¥½æ—¶ï¼Œå¾—åˆ°é€šçŸ¥ï¼Œæ¥ç€å°±ç”±è¿™ä¸ªçº¿ç¨‹è‡ªè¡Œè¿›è¡Œ IO æ“ä½œï¼ŒIOæ“ä½œæœ¬èº«æ˜¯åŒæ­¥çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMåŸºæœ¬çŸ¥è¯†æ•´ç†</title>
      <link href="/2019/04/24/2019-04-24-JVM%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
      <url>/2019/04/24/2019-04-24-JVM%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="javaå†…å­˜ç©ºé—´"><a href="#javaå†…å­˜ç©ºé—´" class="headerlink" title="javaå†…å­˜ç©ºé—´"></a>javaå†…å­˜ç©ºé—´</h1><p><img src="https://i.loli.net/2019/05/12/5cd7c7e477235.jpg" alt="å†…å­˜ç©ºé—´"></p><p>å…¶ä¸­å¦‚å›¾ä¸­æ‰€å±•ç¤ºçš„ï¼ŒæŒ‰åŠŸèƒ½åˆ†äº†å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»ä¸ºçº¿ç¨‹å…±äº«çš„JAVAå †å’Œå…ƒæ•°æ®åŒºå’Œç›´æ¥å†…å­˜ï¼Œå¦ä¸€ç±»æ˜¯çº¿ç¨‹ç§æœ‰çš„è™šæ‹Ÿæœºæ ˆï¼Œæ–¹æ³•åŒºæ ˆå’Œç¨‹åºè®¡æ•°å™¨ã€‚ </p><p>ä¸‹é¢é’ˆå¯¹è¿™å‡ ç§åŒºåŸŸæ¥è¯¦ç»†å°†è¿™å‡ ä¸ªåŒºåŸŸåˆ†åˆ«çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚ </p><h2 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h2><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰§è¡Œç¨‹åºçš„å­—èŠ‚ç çš„çš„è¡Œå·çš„æŒ‡ç¤ºå™¨ã€‚å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨çš„å€¼æ¥æ”¹å˜å°†è¦é€‰å–çš„ä¸‹ä¸€ä¸ªæŒ‡ä»¤ã€‚å¹¶ä¸”ç”±äºæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œçš„è¿è¡Œçš„æŒ‡ä»¤ä¸åŒï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰ä¸ªå­—çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå¹¶ä¸”äº’ä¸å¹²æ‰°ã€‚æ‰€ä»¥ç¨‹åºè®¡æ•°å™¨è¢«ç§°ä½œæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚è¿™ç§çº¿ç¨‹ç§æœ‰çš„åŒºåŸŸæœ‰ç€å¾ˆæ˜æ˜¾çš„ç‰¹å¾å°±æ˜¯ç”Ÿå‘½å‘¨æœŸå’Œå½“å‰çº¿ç¨‹çš„å‘¨æœŸä¿æŒä¸€è‡´ã€‚å¹¶ä¸”éœ€è¦æ³¨æ„çš„æ˜¯ç¨‹åºè®¡æ•°å™¨æ˜¯å†…å­˜ä¸­å”¯ä¸€ä¸€ä¸ªä¸ä¼šå‡ºç°<code>outOfMemory</code>çš„åŒºåŸŸã€‚ </p><p> ç¨‹åºè®¡æ•°å™¨æœ‰ä¸¤ä¸ªä½œç”¨ï¼š </p><p> A: å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡è¯»å–ç¨‹åºè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡å°†è¦æ‰§è¡Œçš„è¯­å¥ã€‚ </p><p>B:åœ¨å¤šçº¿ç¨‹åˆ‡æ¢çš„æƒ…å†µä¸‹ï¼Œè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼Œæ–¹ä¾¿äºåˆ‡æ¢å›æ—¶è¿›ç¨‹è¿è¡Œçš„ä½ç½®ã€‚ </p><h2 id="è™šæ‹Ÿæœºæ ˆ"><a href="#è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h2><p>Javaå†…å­˜å¯ä»¥ç²—ç³™çš„åˆ†ä¸ºå †å†…å­˜å’Œæ ˆå†…å­˜ï¼Œæ‰€è°“çš„å †å°±æ˜¯å›¾ä¸­çš„javaå †ï¼ˆ<code>Heap</code>ï¼‰ï¼Œè€Œæ‰€è°“çš„æ ˆå°±æ˜¯æŒ‡çš„è™šæ‹Ÿæœºæ ˆï¼ˆ<code>VM Stack</code>ï¼‰çš„å±€éƒ¨å˜é‡è¡¨ã€‚è™šæ‹Ÿæœºæ ˆæ˜¯ç”±ä¸€ä¸ªä¸ªæ ˆé’ˆæ„æˆçš„ï¼Œå¯ä»¥æƒ³ä¸ºä¸€ä¸ªæ–¹æ³•ä¸ºä¸€ä¸ªæ ˆé’ˆï¼Œéšç€æ–¹æ³•çš„è¢«è°ƒç”¨å®Œæˆï¼ˆå®Œæˆçš„æ¡ä»¶æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯returnï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å‘ç”Ÿå¼‚å¸¸ï¼‰ï¼Œå¯¹åº”ç€æ–¹æ³•çš„æ ˆé’ˆå‡ºæ ˆã€‚æ ˆé’ˆä¸­éƒ½åŒ…å«ï¼šå±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥å’Œæ–¹æ³•å‡ºå£ã€‚<strong>å±€éƒ¨å˜é‡è¡¨ä¸»è¦å­˜æ”¾äº†ç¼–è¯‘å™¨å¯çŸ¥çš„å„ç§æ•°æ®ç±»å‹</strong>ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€<strong>å¯¹è±¡å¼•ç”¨</strong>ï¼ˆreferenceç±»å‹ï¼Œå®ƒä¸åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰ </p><p><img src="https://i.loli.net/2019/05/12/5cd7cb63399f3.jpg" alt="è™šæ‹Ÿæœºæ ˆç»“æ„"></p><h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>æœ¬åœ°æ–¹æ³•æ ˆåŒæ ·æ˜¯çº¿ç¨‹ç§æœ‰çš„,åŒºåˆ«æ˜¯javaè™šæ‹Ÿæœºæ ˆæ˜¯ç”¨äºjavaå­—èŠ‚ç çš„,è€Œæœ¬åœ°æ–¹æ³•æ ˆæ˜¯ç”¨æ¥æ‰§è¡ŒNativeæ–¹æ³•çš„.ç»“æ„éƒ½å’Œè™šæ‹Ÿæœºæ ˆçš„ç»“æ„ç›¸åŒ. </p><h2 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h2><p>Javaå †æ˜¯æ•´ä¸ªè™šæ‹Ÿæœºä¸­æœ€å¤§çš„ä¸€å—åŒºåŸŸ,æ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸ,å†è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»º,è¯¥å—å­˜åœ¨çš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾ç±»çš„äº‹ä¾‹å’Œæ•°ç»„. </p><h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><p>å’ŒJavaå †ä¸€æ ·éƒ½æ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸ,ä¸»è¦ç”¨äºå­˜æ”¾å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯,å¸¸é‡,é™æ€å˜é‡å’Œå·²ç»è¢«ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®.æ–¹æ³•åŒºå’Œæ°¸ä¹…ä»£çš„å…³ç³»å¾ˆåƒJavaä¸­æ¥å£å’Œç±»çš„å…³ç³»ï¼Œç±»å®ç°äº†æ¥å£ï¼Œè€Œæ°¸ä¹…ä»£å°±æ˜¯HotSpotè™šæ‹Ÿæœºå¯¹è™šæ‹Ÿæœºè§„èŒƒä¸­æ–¹æ³•åŒºçš„ä¸€ç§å®ç°æ–¹å¼ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ°¸ä¹…ä»£æ˜¯HotSpotçš„æ¦‚å¿µï¼Œæ–¹æ³•åŒºæ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­çš„å®šä¹‰ï¼Œæ˜¯ä¸€ç§è§„èŒƒï¼Œè€Œæ°¸ä¹…ä»£æ˜¯ä¸€ç§å®ç°ï¼Œä¸€ä¸ªæ˜¯æ ‡å‡†ä¸€ä¸ªæ˜¯å®ç°ï¼Œå…¶ä»–çš„è™šæ‹Ÿæœºå®ç°å¹¶æ²¡æœ‰æ°¸ä¹…å¸¦è¿™ä¸€è¯´æ³•ã€‚ </p><h2 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h2><p>åŸæ¥çš„è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†,è€Œåœ¨1.7ä¹‹å,è®²è¿è¡Œæ—¶å¸¸é‡æ± æ”¾åˆ°å †(Heap)ä¸­å¼€è¾Ÿäº†ä¸€ä¸ªåŒºåŸŸä¸“é—¨ç”¨æ¥æ”¾è¿è¡Œæ—¶å¸¸é‡æ± .è¿è¡Œæ—¶å¸¸é‡æ± ä¸­é¥é¥åŒ…æ‹¬ä¸¤éƒ¨åˆ†,ä¸€éƒ¨åˆ†æ˜¯å®é™…å­˜åœ¨çš„å­—é¢é‡,æ‰€è°“å­—é¢é‡åŒ…æ‹¬[1.æ–‡æœ¬å­—ç¬¦ä¸²,2.è¢«å£°æ˜ä¸ºfinalçš„å¸¸é‡,åŸºæœ¬æ•°æ®ç±»å‹â€¦..],å¦ä¸€éƒ¨åˆ†æ˜¯ç¬¦å·å¼•ç”¨,åŒ…å«[ç±»å’Œç»“æ„çš„åç§°,å­—æ®µçš„åç§°,æ–¹æ³•çš„åç§°]</p><p><img src="https://i.loli.net/2019/05/12/5cd7cbf57ba27.jpg" alt="è¿è¡Œæ—¶å¸¸é‡æ± "></p><h2 id="å…ƒæ•°æ®åŒº"><a href="#å…ƒæ•°æ®åŒº" class="headerlink" title="å…ƒæ•°æ®åŒº"></a>å…ƒæ•°æ®åŒº</h2><p>æ›¿ä»£äº†æ°¸ä¹…ä»£,ä½¿ç”¨çš„æ˜¯ç›´æ¥å†…å­˜,ä»€ä¹ˆæ˜¯ç›´æ¥å†…å­˜,å®ƒæœ‰èƒ½å¤Ÿå¹²ä»€ä¹ˆ? é¦–å…ˆç›´æ¥å†…å­˜åŒºåŸŸä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†,ä¹Ÿä¸æ˜¯è™šæ‹Ÿæœºå®šä¹‰çš„ä¸€éƒ¨åˆ†,ä½†æ˜¯ç»å¸¸ä¼šä½¿ç”¨åˆ°.</p><blockquote><p>JDK1.4 ä¸­æ–°åŠ å…¥çš„ <strong>NIO(New Input/Output) ç±»</strong>ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäº<strong>é€šé“ï¼ˆChannelï¼‰</strong> ä¸<strong>ç¼“å­˜åŒºï¼ˆBufferï¼‰</strong> çš„ I/O æ–¹å¼ï¼Œå®ƒå¯ä»¥ç›´æ¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †ä¸­çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·å°±èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸º<strong>é¿å…äº†åœ¨ Java å †å’Œ Native å †ä¹‹é—´æ¥å›å¤åˆ¶æ•°æ®</strong>ã€‚</p></blockquote><p>æœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šæ”¶åˆ° Java å †çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜å°±ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ã€‚</p><h1 id="å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹"><a href="#å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹" class="headerlink" title="å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹"></a>å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹</h1><p><img src="https://i.loli.net/2019/05/12/5cd7cbf57ba27.jpg" alt="å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹"></p><p>å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†ä¸ºä¸Šå›¾ä¸­çš„5æ­¥ </p><ol><li>ç±»åŠ è½½æ£€æŸ¥:å½“è™šæ‹Ÿæœºé‡åˆ°newçš„æ—¶å€™,ä¼šæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦å­˜åœ¨,æ˜¯å¦è¢«åŠ è½½,è§£é‡Šå’Œåˆå§‹åŒ–è¿‡,å¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œç±»çš„åˆå§‹åŒ–è¿‡ç¨‹. </li><li>åˆ†é…å†…å­˜:å†è¿›è¡Œç±»åŠ è½½æ£€æŸ¥å,ä¼šåœ¨å †å†…å­˜ä¸­ä¸ºæ–°çš„å¯¹è±¡åˆ†é…å†…å­˜,åˆ†é…çš„è§„åˆ™æœ‰ä¸¤ç§,ä¸€ç§æ˜¯æŒ‡é’ˆç¢°æ’,å¦ä¸€ç§æ˜¯ç©ºé—²åˆ—è¡¨,é’ˆå¯¹ä¸åŒçš„åƒåœ¾å›æ”¶å™¨ä¼šä½¿ç”¨ä¸åŒçš„æ–¹æ³•.ç¬¬ä¸€ç§æ–¹æ³•æŒ‡é’ˆç¢°æ’çš„åŸç†å¤§è‡´ä¸ºå®ƒä¼šå°†åˆ†é…è¿‡çš„å†…å­˜å’Œæœªåˆ†é…çš„å†…å­˜é—´å»ºç«‹ä¸€ä¸ªæŒ‡é’ˆ,å½“åˆ†é…å†…å­˜çš„æ—¶å€™,å‘ä¸ºåˆ†é…å†…å­˜çš„åœ°æ–¹ç§»åŠ¨æ–°çš„å¯¹è±¡çš„å¤§å°çš„ä½ç½®,é€‚ç”¨äºæ¯”è¾ƒè§„æ•´çš„å†…å­˜ç©ºé—´.ç¬¬äºŒç§æ–¹æ³•æ˜¯ç»´æŠ¤ä¸€ä¸ªåˆ†é…å†…å­˜çš„åˆ—è¡¨,æ¯æ¬¡åˆ†é…å†…å­˜éƒ½æƒ³åˆ—è¡¨ä¸­æ·»åŠ ç›¸å…³è®°å½•,è¡¨æ˜è¿™äº›å¯¹è±¡åœ¨å“ª. </li><li>åˆå§‹åŒ–é›¶å€¼:ä¿è¯åœ¨åˆ†é…å®Œå†…å­˜å,ä¸ºåˆ†é…çš„å†…å­˜åŒºåŸŸåˆå§‹åŒ–ä¸ºé›¶å€¼ </li><li>è®¾ç½®å¯¹è±¡å¤´:è™šæ‹Ÿæœºå¯¹å¯¹è±¡çš„å„ç§è®¾ç½®ä¿¡æ¯,ä¿å­˜åœ¨å¯¹è±¡å¤´ä¸­. </li><li>æ‰§è¡Œinitæ–¹æ³•:åœ¨æ‰§è¡Œinitæ–¹æ³•å‰,ä»è™šæ‹Ÿæœºçš„è§’åº¦æ¥çœ‹å…¶å®å¯¹è±¡å·²ç»ç”Ÿæˆäº†,ä½†æ˜¯åœ¨ç¨‹åºå‘˜çš„è§’åº¦å¯¹è±¡å¹¶æ²¡æœ‰ç”Ÿæˆ,åªæœ‰åœ¨initæ–¹æ³•æ‰§è¡Œè¿‡å,å¯¹è±¡æ‰ç®—ç”Ÿæˆ. </li></ol><h1 id="å¯¹è±¡çš„å®šä½æ–¹å¼"><a href="#å¯¹è±¡çš„å®šä½æ–¹å¼" class="headerlink" title="å¯¹è±¡çš„å®šä½æ–¹å¼"></a>å¯¹è±¡çš„å®šä½æ–¹å¼</h1><p>Javaè™šæ‹Ÿæœºå®šä½å¯¹è±¡çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§,ä¸€æ˜¯ä½¿ç”¨å¥æŸ„,äºŒæ˜¯ç›´æ¥ä½¿ç”¨æŒ‡é’ˆ.</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JVM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‚²è§‚é”å’Œä¹è§‚é”</title>
      <link href="/2019/04/23/2019-04-08-%E6%82%B2%E8%A7%82%E9%94%81%E5%92%8C%E4%B9%90%E8%A7%82%E9%94%81/"/>
      <url>/2019/04/23/2019-04-08-%E6%82%B2%E8%A7%82%E9%94%81%E5%92%8C%E4%B9%90%E8%A7%82%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‚²è§‚é”å’Œä¹è§‚é”"><a href="#æ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="æ‚²è§‚é”å’Œä¹è§‚é”"></a>æ‚²è§‚é”å’Œä¹è§‚é”</h1><h2 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h2><p>æ‚²è§‚é”æ˜¯æ€»ä¼šå…ˆå»æƒ³æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡çº¿ç¨‹æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šè®¤ä¸ºä»–ä¼šè¿›è¡Œä¿®æ”¹ï¼Œé€‚ç”¨äºçš„åœºæ™¯æ˜¯å¤šå†™å°‘è¯»ï¼Œè¿™æ—¶ä½¿ç”¨æ‚²è§‚é”æ•ˆç‡ä¼šé«˜ã€‚ç¨‹åºä¸­å…¸å‹çš„æ‚²è§‚é”æ—¶synchronizedå’ŒReentrantLock </p><h2 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h2><p>ä¹è§‚é”æ˜¯æ€»ä¼šå…ˆå»æƒ³å¥½çš„æƒ…å†µï¼Œæ¯æ¬¡çº¿ç¨‹æ‹¿æ•°æ®åªä¼šçœ‹ä¸€çœ¼ï¼Œå¹¶ä¸ä¼šåšä¿®æ”¹æ“ä½œï¼Œè¿™æ—¶æ²¡æœ‰å¿…è¦åŠ é”ï¼Œç¨‹åºä¸­çš„atomåŸå­ç±»ä½¿ç”¨cas+volatile+nativeæ–¹æ³•å®ç°ä¹è§‚é”ã€‚ </p><p>ä¸¤ç§é”çš„æœºåˆ¶ï¼Œæœ‰å„è‡ªçš„å¥½å¤„ï¼Œä¸èƒ½è¯´è°å¥½è°åï¼Œå„æœ‰ä¼˜ç‚¹ï¼š </p><p>æ‚²è§‚é”é€‚ç”¨äºå¤šå†™å°‘è¯»çš„æƒ…å†µï¼Œè€Œä¹è§‚é”é€‚ç”¨äºå¤šè¯»å°‘å†™çš„æƒ…å†µï¼Œå¦‚æœåœ¨å¤šå†™çš„æƒ…å†µä¸‹ä½¿ç”¨ä¹è§‚é”ï¼Œä¼šç»å¸¸äº§ç”Ÿå†²çªï¼Œåè€Œä¼šé™ä½æ€§èƒ½ã€‚ </p><h3 id="ä¹è§‚é”å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼"><a href="#ä¹è§‚é”å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="ä¹è§‚é”å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼"></a>ä¹è§‚é”å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼</h3><h4 id="ç‰ˆæœ¬å·çš„æ§åˆ¶"><a href="#ç‰ˆæœ¬å·çš„æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬å·çš„æ§åˆ¶"></a>ç‰ˆæœ¬å·çš„æ§åˆ¶</h4><p>æ¯æ¬¡è¯»å–æ•°æ®çš„æ—¶å€™éƒ½ä¼šè¿åŒç‰ˆæœ¬å·ä¸€åŒè¯»å–ï¼Œåœ¨å½“æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¼šæ¯”è¾ƒè¯»å–åˆ°çš„ç‰ˆæœ¬å·å’Œæ•°æ®åº“ä¸­çš„ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™æ›´æ–°ï¼Œå¦‚æœä¸ä¸€è‡´åˆ™ç»§ç»­è¯»å–ï¼Œæ›´æ–°æ•°æ®ã€‚ </p><h4 id="CASæ“ä½œï¼ˆcompareAndSwapï¼‰"><a href="#CASæ“ä½œï¼ˆcompareAndSwapï¼‰" class="headerlink" title="CASæ“ä½œï¼ˆcompareAndSwapï¼‰"></a>CASæ“ä½œï¼ˆcompareAndSwapï¼‰</h4><p>ä¸¾ä¸ªä¾‹å­,åœ¨atomIntegerç±»ä¸­æ¶‰åŠäº†CAS</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">compareAndSwapInt</span><span class="params">(Object o, <span class="keyword">long</span> offset,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                  <span class="keyword">int</span> expected,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                  <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"><span class="comment">//è¿™é‡Œæ˜¯nativeæ–¹æ³• offsetæ˜¯åç§»é‡å…ˆæš‚ä¸”ä¸æï¼Œoæ˜¯éœ€è¦æ¯”è¾ƒçš„å€¼ï¼Œexpectedæ˜¯é¢„æœŸå€¼ï¼Œxæ˜¯æ–°å€¼</span></span></span><br><span class="line"><span class="function"><span class="comment">// å¦‚æœä½¿ç”¨ç¨‹åºå†™å‡ºæ¥å°±æ˜¯å¤§æ¦‚è¿™æ ·ï¼š</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> value</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">fakeCAS</span><span class="params">(<span class="keyword">int</span> expect,<span class="keyword">int</span> newValue)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(value == expect)&#123;</span><br><span class="line">            value = newValue;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>æ¯”è¾ƒæ›¿æ¢(compareAndSwap)</code>æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè‡ªæ—‹æ“ä½œï¼Œç­‰å¾…ä¸€ä¸ªå‘¨æœŸå†æ¬¡å°è¯•ã€‚</p><h4 id="CASæ“ä½œçš„ç¼ºç‚¹"><a href="#CASæ“ä½œçš„ç¼ºç‚¹" class="headerlink" title="CASæ“ä½œçš„ç¼ºç‚¹"></a>CASæ“ä½œçš„ç¼ºç‚¹</h4><ol><li>ABAé—®é¢˜ï¼Œä½•è°“ABAï¼šå½“ä¸¤ä¸ªçº¿ç¨‹è¯»å–åˆ°å½“å‰å€¼ä¸ºAï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æŠŠå€¼æ”¹ä¸ºBåå†æŠŠBæ”¹ä¸ºAï¼Œè¿™æ˜¯å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨casæ“ä½œè¯»å–åˆ°çš„å€¼ä»ç„¶æ˜¯Aï¼ŒCASä¼šè®¤ä¸ºè¿™ä¸ªå€¼ä»æ¥æ²¡æœ‰å˜è¿‡ï¼Œè¿™å°±æ˜¯ABAé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´é—å¤±æ‰ä¸­é—´çš„è¿‡ç¨‹ï¼Œåœ¨é“¾å¼çš„æ“ä½œæ€»æ›´èƒ½ä½“ä¼šåˆ°ABAé—®é¢˜çš„ä¸¥é‡æ€§ã€‚ </li><li>è‡ªæ—‹æ—¶é—´è¿‡é•¿ï¼Œæ¶ˆè€—CPUèµ„æºã€‚ </li><li>åªèƒ½å¯¹å•ä¸ªå…±äº«å˜é‡çš„åŸå­æ€§æ“ä½œ </li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹æ± å’ŒAQSçŸ¥è¯†æ•´ç†</title>
      <link href="/2019/04/23/2019-04-23-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
      <url>/2019/04/23/2019-04-23-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿ç¨‹æ± å’ŒAQSä»£ç è§£æ"><a href="#çº¿ç¨‹æ± å’ŒAQSä»£ç è§£æ" class="headerlink" title="çº¿ç¨‹æ± å’ŒAQSä»£ç è§£æ"></a>çº¿ç¨‹æ± å’ŒAQSä»£ç è§£æ</h1><p>ä½¿ç”¨çº¿ç¨‹æ± æ˜¯ä¸ºäº†å°†çº¿ç¨‹å¾—ä»¥å¤ç”¨,çº¿ç¨‹åˆ›å»ºååœ¨çº¿ç¨‹æ± ä¸­è¢«å¾ªç¯åˆ©ç”¨,é˜²æ­¢äº†çº¿ç¨‹å¾—å¤šæ¬¡åˆ›å»ºå’Œé”€æ¯.ä¸‹é¢å°±é€šè¿‡ä»£ç æ¥çœ‹çº¿ç¨‹æ± çš„å·¥ä½œåŸç†.</p><p>çº¿ç¨‹æ± é…ç½®æ¯”è¾ƒç¹ç,æ‰€ä»¥javaæä¾›äº†ä¸€ä¸ªçº¿ç¨‹æ± çš„å·¥å…·ç±»<code>Executors</code> æ¥ä½¿ç”¨é™æ€çš„æ–¹æ³•æ¥åˆ›å»ºæ‹¥æœ‰ç‰¹å®šå±æ€§çš„çº¿ç¨‹æ± .ä¸‹é¢å…ˆæ€»ä½“çš„çœ‹ä¸€ä¸‹éƒ½æœ‰å“ªäº›åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹æ³•,å’Œå„è‡ªçš„å®ç°.</p><ol><li><code>newFixedThreadPool</code> åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚æ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚çº¿ç¨‹æ± çš„å¤§å°ä¸€æ—¦è¾¾åˆ°æœ€å¤§å€¼å°±ä¼šä¿æŒä¸å˜ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</li><li><code>newCachedThreadPool</code> åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ,æ­¤æ—¶çº¿ç¨‹æ± å¯¹çº¿ç¨‹å¾—å¤šå°‘æ²¡æœ‰é™åˆ¶,å¦‚æœå¤šäº†å°±å®šæ—¶å›æ”¶,å¦‚æœå°‘äº†,å°±ä¼šåªèƒ½æ·»åŠ </li><li><code>newScheduledThreadPool</code> åˆ›å»ºä¸€ä¸ªæ— é™å¤§å°çš„çº¿ç¨‹æ± ,æ­¤çº¿ç¨‹æ± å¯æ‰§è¡Œå®šæ—¶çš„ä»»åŠ¡</li><li><code>newSingleThreadExecutor</code> çº¿ç¨‹æ± ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡,å¦‚æœå› å¼‚å¸¸ç»“æŸ,åˆ™ä¼šç”Ÿæˆä¸€ä¸ªçº¿ç¨‹æ¥æ›¿æ¢åŸæ¥çš„çº¿ç¨‹.æ­¤ç§è¿æ¥æ± ä¼šæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºä¾æ¬¡æ‰§è¡Œ.å› ä¸ºæ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œ.</li></ol><p>åœ¨<code>Excutors</code>ä¸­æœ‰ä¸Šé¢å››ç§æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹æ± ,é‚£ä¹ˆè¿™å‡ ç§çº¿ç¨‹æ± å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?é€šè¿‡æºç æ¥ä¸€æ¢ç©¶ç«Ÿ.</p><h2 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h2><p>é™¤äº†<code>newScheduledThreadPool</code>è¿æ¥æ± æ²¡æœ‰ä½¿ç”¨<code>ThreadPoolExcutor</code>æ¥å®ç°,å…¶ä»–ä¸‰ç§éƒ½ä½¿ç”¨åˆ°äº†<code>ThreadPoolExcutor</code>æ¥è¿›è¡Œè¿æ¥æ± çš„å®ç°å’Œå®šåˆ¶.ä¸‹å›¾æ˜¯<code>ThreadPoolExcutor</code>çš„ç»“æ„å…³ç³».å®ƒæ˜¯ExecutorServiceçš„ç›´æ¥å®ç°ç±».</p><p><img src="https://i.loli.net/2019/04/24/5cc08171ca014.jpg" alt="5cc08171ca014"></p><p>ThreadPoolExcutoræä¾›äº†ä¸‰ç§æ„é€ å‡½æ•°,ä¸åŒçš„æ„é€ å‡½æ•°å«æœ‰ä¸åŒçš„å‚æ•°.ä¸‹é¢å…ˆäº†è§£ä¸€ä¸‹å„å‚æ•°çš„å«ä¹‰</p><table><thead><tr><th align="center">å‚æ•°åç§°</th><th>å‚æ•°ç±»å‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td align="center">corePoolSize</td><td>Int</td><td>æ± ä¸­çš„çº¿ç¨‹æ•°é‡,å³ä½¿ä»–ä»¬æ˜¯ç©ºé—²çš„,é™¤éè®¾ç½®allowCoreThreadTimeOutå‚æ•°</td></tr><tr><td align="center">maximumPoolSize</td><td>int</td><td>æ± ä¸­å…è®¸çš„æœ€å¤§çš„çº¿ç¨‹æ•°é‡</td></tr><tr><td align="center">keepAliveTime</td><td>long</td><td>å¦‚æœæ± ä¸­çš„çº¿ç¨‹è¶…è¿‡æ ¸å¿ƒæ•°,å¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´çº¿ç¨‹ä»æ˜¯ç©ºé—²çš„åˆ™ç»“æŸè¿™ä¸ªçº¿ç¨‹</td></tr><tr><td align="center">unit</td><td>TimeUnit</td><td>keepAilveTimeçš„æ—¶é—´çš„å•ä½</td></tr><tr><td align="center">workQueue</td><td>BlockingQueue<runnable></runnable></td><td>ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—,ç”¨æ¥å­˜å‚¨æœªè¿›è¡Œçš„ä»»åŠ¡.æœªæ‰§è¡Œçš„ä»»åŠ¡ä¼šä¸€ç›´åœ¨é˜Ÿåˆ—é‡Œ,çŸ¥é“ä½¿ç”¨Excuteæ–¹æ³•æ‰§è¡Œ.</td></tr><tr><td align="center">threadFactory</td><td>ThreadFactory</td><td>çº¿ç¨‹å·¥å‚,ç”¨äºç”Ÿäº§çº¿ç¨‹</td></tr><tr><td align="center">handle</td><td>RejectedExecutionHandler</td><td>æ‰§è¡Œé˜»å¡çš„å¤„ç†ç­–ç•¥,é€ æˆé˜»å¡çš„åŸå› å¯èƒ½æ˜¯è¾¾åˆ°äº†çº¿ç¨‹è¾¹ç•Œæˆ–è€…é˜Ÿåˆ—å®¹é‡</td></tr></tbody></table><p>å…¶ä¸­çº¿ç¨‹æ± ä½¿ç”¨ctlå˜é‡æ§åˆ¶çŠ¶æ€ä¿¡æ¯,ctlæ˜¯ä¸€ä¸ªAtomInteger,å…¶ä¸­é«˜28ä½è¡¨ç¤ºçº¿ç¨‹å¾—æ•°é‡,ä¹Ÿå°±æ˜¯workerCount,ä½ä½çš„4ä½è¡¨ç¤ºçº¿ç¨‹æ± çš„çŠ¶æ€.</p><table><thead><tr><th>åç§°</th><th>æ‰¿æ‹…çš„ä»»åŠ¡</th></tr></thead><tbody><tr><td>RUNNING</td><td>æ¥å—æ–°çš„ä»»åŠ¡,å¹¶ä¸”å¤„ç†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</td></tr><tr><td>SHUTDOWN</td><td>ä¸æ¥å—æ–°çš„ä»»åŠ¡,ä½†æ˜¯ä¼šå¤„ç†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</td></tr><tr><td>STOP</td><td>ä¸æ¥å—æ–°ä»»åŠ¡,ä¸å¤„ç†æ’é˜Ÿçš„äººç‰©,å¹¶ä¸”ç»ˆæ­¢æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡</td></tr><tr><td>TIDYING</td><td>æ‰€æœ‰ä»»åŠ¡å·²ç»ç»ˆæ­¢,workerä¸ºç©º,é€šè¿‡terminateæ–¹æ³•æ¥è½¬æ¢ä¸ºTIDYING</td></tr><tr><td>TERMINATED</td><td>å½“terminateæ–¹æ³•æ‰§è¡Œè¿‡åçš„çŠ¶æ€</td></tr></tbody></table><p><img src="https://wx1.sinaimg.cn/large/006tNc79ly1g2cznnpfkqj311e0lcn0e.jpg" alt="Xnip2019-04-23_23-21-36"></p><h3 id="æ–¹æ³•æºç è§£æ"><a href="#æ–¹æ³•æºç è§£æ" class="headerlink" title="æ–¹æ³•æºç è§£æ"></a>æ–¹æ³•æºç è§£æ</h3><p>æäº¤çš„æ–¹æ³•submitå®åœ¨ExcutorServiceçš„å®ç°ç±»<code>AbstarctExecutorService</code>ä¸­æ‰€å®šä¹‰çš„,å¯ä»¥çœ‹å‡ºsubmitæ˜¯excuteæ–¹æ³•çš„å¤–å£³,å…¶å®æ ¸å¿ƒè¿˜æ˜¯æ‰§è¡Œexcuteæ–¹æ³•,ä½†æ˜¯ä¼šè¿”å›<code>Future</code>ç»“æœ.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Future&lt;?&gt; submit(Runnable task) &#123;</span><br><span class="line">        <span class="keyword">if</span> (task == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        RunnableFuture&lt;Void&gt; ftask = newTaskFor(task, <span class="keyword">null</span>);</span><br><span class="line">        execute(ftask);</span><br><span class="line">        <span class="keyword">return</span> ftask;<span class="comment">//è¿”å›Futureç»“æœ</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ‰§è¡Œçš„æ ¸å¿ƒæ–¹æ³•æ˜¯excute,æ‰€ä»¥è¿›åˆ°ThreadPoolExecutorç±»ä¸­çœ‹excuteæ–¹æ³•æ˜¯å¦‚ä½•æ‰§è¡Œçš„.å…¶å®æœ€é€šä¿—çš„è§£é‡Šexcuteçš„è¿‡ç¨‹å°±æ˜¯,å°†æ–°çš„workeråŠ å…¥åˆ°workerçš„é˜Ÿåˆ—ä¸­,å¹¶æ‰§è¡Œå½“å‰çš„commandçº¿ç¨‹.æ‰§è¡Œè¿‡ç¨‹å¯ä»¥å‚è€ƒå®˜æ–¹æ³¨é‡Š:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(Runnable command)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (command == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œæ€»å…±åˆ†ä¸ºä¸‰æ­¥</span></span><br><span class="line"><span class="comment">         * 1. å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°,åˆ™æ·»åŠ ä¸€ä¸ªworkeræ¥æ‰§è¡Œå½“å‰è¿™ä¸ªä»»åŠ¡</span></span><br><span class="line"><span class="comment">         * 2. ä¸ºäº†é˜²æ­¢è¿›å…¥æ–¹æ³•åçº¿ç¨‹æ± å…³é—­æˆ–è€…çº¿ç¨‹æŒ‚æ‰éœ€è¦é‡æ–°è·å–ctl,å¹¶ä¸”è¿›è¡Œåˆ¤æ–­,æ˜¯å¦è¿›è¡Œ</span></span><br><span class="line"><span class="comment">         * å›é€€æˆ–è€…æ˜¯ç©ºæ± åæ·»åŠ ä¸€ä¸ªç©ºçº¿ç¨‹.</span></span><br><span class="line"><span class="comment">         * 3.å¦‚æœä¸èƒ½å°†ä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—ä¸­,åˆ™æ‰§è¡Œrollback,å›é€€ä»»åŠ¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">int</span> c = ctl.get();<span class="comment">//è·å¾—ctlå˜é‡,ä»è€Œè·å¾—workercountå’ŒçŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (workerCountOf(c) &lt; corePoolSize) &#123; <span class="comment">//å¦‚æœçº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (addWorker(command, <span class="keyword">true</span>)) <span class="comment">//æ·»åŠ ä¸€ä¸ªæ–°çš„workeræ¥æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            c = ctl.get();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; </span><br><span class="line">          <span class="comment">//å¦‚æœå½“å‰æ± çš„çŠ¶æ€ä¸ºè¿è¡ŒçŠ¶æ€å¹¶ä¸”æ¥å—äº†è¿™ä¸ªä»»åŠ¡,ä¹Ÿå°±æ˜¯è¯´ä»»åŠ¡æˆåŠŸè¿›å…¥äº†æ‰§è¡Œé˜Ÿåˆ—</span></span><br><span class="line">            <span class="keyword">int</span> recheck = ctl.get();</span><br><span class="line">          <span class="comment">//é‡æ–°è·å–ctl,å› ä¸ºæœ‰å¯èƒ½åœ¨è¿›å…¥è¿™ä¸ªifè¯­å¥çš„æ—¶å€™ä¸€ä¸ªçº¿ç¨‹æŒ‚äº†,æˆ–è€…æ•´ä¸ªæ± è¢«å…³é—­äº†</span></span><br><span class="line">            <span class="keyword">if</span> (! isRunning(recheck) &amp;&amp; remove(command)) <span class="comment">//å¦‚æœçº¿ç¨‹æ± çš„çŠ¶æ€ä¸ºéè¿è¡ŒçŠ¶æ€</span></span><br><span class="line">              <span class="comment">// ä»é˜Ÿåˆ—ä¸­ç§»é™¤ä»»åŠ¡,å¹¶ä¸”rejectä»»åŠ¡ ç›¸å½“äºç¬¬ä¸€æ­¥æ“ä½œçš„rollback</span></span><br><span class="line">                reject(command);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (workerCountOf(recheck) == <span class="number">0</span>) <span class="comment">//å¦‚æœæ± æ˜¯ç©ºçš„</span></span><br><span class="line">                addWorker(<span class="keyword">null</span>, <span class="keyword">false</span>);<span class="comment">//æ–°å»ºä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!addWorker(command, <span class="keyword">false</span>))</span><br><span class="line">          <span class="comment">//å¦‚æœæ”¾åˆ°é˜Ÿåˆ—ä¸­å¤±è´¥,åˆ™å°†ä»»åŠ¡rollback</span></span><br><span class="line">            reject(command);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>çº¿ç¨‹æ± ä¸­æ‹¥æœ‰çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ç§:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RUNNING    = -<span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SHUTDOWN   =  <span class="number">0</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> STOP       =  <span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TIDYING    =  <span class="number">2</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TERMINATED =  <span class="number">3</span> &lt;&lt; COUNT_BITS;</span><br></pre></td></tr></table></figure><p>åœ¨excuteæ–¹æ³•ä¸­éœ€è¦ç”¨åˆ°addWorkeråœ¨å½“å‰çŠ¶æ€å’Œç»™å®šçš„è¾¹ç•Œæ¡ä»¶ä¸‹(æ ¸å¿ƒçº¿ç¨‹æ•°<code>core</code>æˆ–è€…æœ€å¤§çº¿ç¨‹æ•°<code>maximum</code>)èƒ½å¦æ·»åŠ ä¸€ä¸ªworkerçº¿ç¨‹æ‰§è¡Œä»»åŠ¡.å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸ºç©ºæˆ–è€…æœ‰èµ„æ ¼å…³é—­çº¿ç¨‹æ± .è¿™æ˜¯è°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›false.å¦‚æœçº¿ç¨‹æ± å·¥å‚<code>the thread factory</code>ä¸èƒ½å†äº§å‡ºæ›´å¤šçš„çº¿ç¨‹ä¹Ÿä¼šè¿”å›false.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">addWorker</span><span class="params">(Runnable firstTask, <span class="keyword">boolean</span> core)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * firstTask ç†è§£ä¸ºåˆå§‹åŒ–æ—¶ç»™çš„ç¬¬ä¸€ä¸ªä»»åŠ¡,å¯ä»¥ç»•è¿‡æ’é˜Ÿçš„è¿‡ç¨‹,ç›´æ¥ä½¿ç”¨æ–°çš„çº¿ç¨‹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">   * core å¦‚æœæ˜¯trueåˆ™ä½¿ç”¨corePoolSizeä½œä¸ºè¾¹ç•Œ,å¦åˆ™ä½¿ç”¨maximumPoolSizeä½œä¸ºè¾¹ç•Œ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">        retry:<span class="comment">//flagæ ‡è®°</span></span><br><span class="line">        <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">            <span class="keyword">int</span> c = ctl.get(); <span class="comment">//è·å–ctlå˜é‡</span></span><br><span class="line">            <span class="keyword">int</span> rs = runStateOf(c);<span class="comment">// è·å–çŠ¶æ€å‚æ•°</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Check if queue empty only if necessary. æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> (rs &gt;= SHUTDOWN &amp;&amp;</span><br><span class="line">                ! (rs == SHUTDOWN &amp;&amp;</span><br><span class="line">                   firstTask == <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">                   ! workQueue.isEmpty()))</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                <span class="keyword">int</span> wc = workerCountOf(c);</span><br><span class="line">                <span class="keyword">if</span> (wc &gt;= CAPACITY ||</span><br><span class="line">                    wc &gt;= (core ? corePoolSize : maximumPoolSize))</span><br><span class="line">                  <span class="comment">//å¦‚æœå¤§äºæœ€å¤§çš„CAPACITYæˆ–è€…wcå¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">if</span> (compareAndIncrementWorkerCount(c))</span><br><span class="line">                  <span class="comment">//ä½¿ç”¨CASæ·»åŠ workerå,æ“ä½œæˆåŠŸåè·³å‡ºå¾ªç¯</span></span><br><span class="line">                    <span class="keyword">break</span> retry;</span><br><span class="line">                c = ctl.get();  <span class="comment">// Re-read ctl</span></span><br><span class="line">                <span class="keyword">if</span> (runStateOf(c) != rs)</span><br><span class="line">                    <span class="keyword">continue</span> retry;</span><br><span class="line">                <span class="comment">// else CAS failed due to workerCount change; retry inner loop</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> workerStarted = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">boolean</span> workerAdded = <span class="keyword">false</span>;</span><br><span class="line">        Worker w = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            w = <span class="keyword">new</span> Worker(firstTask);<span class="comment">//ä»¥åå•è¯´è¿™ä¸ªworker</span></span><br><span class="line">            <span class="keyword">final</span> Thread t = w.thread;</span><br><span class="line">            <span class="keyword">if</span> (t != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">final</span> ReentrantLock mainLock = <span class="keyword">this</span>.mainLock;</span><br><span class="line">                mainLock.lock();</span><br><span class="line">              <span class="comment">// ä½¿ç”¨ReentrantLockä¸Šé”ä¿æŒåŸå­æ€§</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// Recheck while holding lock.</span></span><br><span class="line">                    <span class="comment">// Back out on ThreadFactory failure or if</span></span><br><span class="line">                    <span class="comment">// shut down before lock acquired.</span></span><br><span class="line">                    <span class="keyword">int</span> rs = runStateOf(ctl.get());</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (rs &lt; SHUTDOWN ||</span><br><span class="line">                        (rs == SHUTDOWN &amp;&amp; firstTask == <span class="keyword">null</span>)) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (t.isAlive()) <span class="comment">// precheck that t is startable</span></span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalThreadStateException();</span><br><span class="line">                        workers.add(w);</span><br><span class="line">                        <span class="keyword">int</span> s = workers.size();</span><br><span class="line">                        <span class="keyword">if</span> (s &gt; largestPoolSize)<span class="comment">// å½“å‰workerçš„æ•°é‡å¤§äºlargestPoolSizeæ—¶</span></span><br><span class="line">                            largestPoolSize = s;</span><br><span class="line">                        workerAdded = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    mainLock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (workerAdded) &#123;</span><br><span class="line">                    t.start();<span class="comment">//çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">                    workerStarted = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (! workerStarted) <span class="comment">//å¦‚æœåˆ°è¿™é‡Œçº¿ç¨‹è¿˜æ˜¯æ²¡æœ‰å¼€å§‹,rollbackæ·»åŠ workerçš„è¿‡ç¨‹</span></span><br><span class="line">                addWorkerFailed(w);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> workerStarted;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ¶‰åŠåˆ°äº†wokerçº¿ç¨‹åˆ›å»ºçš„rollbackè¿‡ç¨‹,è°ƒç”¨äº†<code>addWorkerFailed</code>æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addWorkerFailed</span><span class="params">(Worker w)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">final</span> ReentrantLock mainLock = <span class="keyword">this</span>.mainLock;</span><br><span class="line">       mainLock.lock();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (w != <span class="keyword">null</span>)</span><br><span class="line">               workers.remove(w);<span class="comment">//å¦‚æœå­˜åœ¨åœ¨é˜Ÿåˆ—ä¸­ç§»é™¤w</span></span><br><span class="line">           decrementWorkerCount();<span class="comment">//å‡å°‘workerCountå˜é‡çš„å€¼</span></span><br><span class="line">           tryTerminate();<span class="comment">//é‡æ–°æ£€æŸ¥ç»ˆæ­¢è¿‡ç¨‹,ä»¥é˜²æ­¢å› ä¸ºè¿™ä¸ªworkerçš„å­˜åœ¨å¯¼è‡´ç»ˆæ­¢å¤±è´¥</span></span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           mainLock.unlock();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨å½“è¿è¡Œçš„çº¿ç¨‹æ•°åˆ°è¾¾æ ¸å¿ƒçº¿ç¨‹æ•°å,å°±ä¼šå°†ä»»åŠ¡æ’å…¥åˆ°workQueueé‡Œé¢,è®©æ± ä¸­çš„å·¥ä½œçº¿ç¨‹å®Œæˆä»»åŠ¡,ä¸Šé¢çš„æºç ä¸­ä½¿ç”¨addWokeræ–¹æ³•æ¥æ‰§è¡Œå½“å‰æŒ‡å®šçš„ä»»åŠ¡,è€Œæœªæ¶‰åŠåˆ°åŠ å…¥åˆ°workQueueä¸­çš„ä»»åŠ¡æ˜¯å¦‚ä½•æ‰§è¡Œçš„,ä¸‹é¢é€šè¿‡æŸ¥çœ‹Wokerä¸­çš„runæ–¹æ³•æ¥æŸ¥çœ‹æ± ä¸­çš„çº¿ç¨‹å¦‚ä½•è·å–ä»»åŠ¡æ¥æ‰§è¡Œçš„è¿‡ç¨‹.</p><p>å› ä¸ºWorkerå®ç°AQSã€ŒAbstractQueuedSynchronizerã€,å¹¶ç»§æ‰¿æ¥Runnable,æ‰€ä»¥Workerå…¶å®æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªçº¿ç¨‹.åœ¨æ‰§è¡Œstartå,åŒæ ·ä¼šæ‰§è¡Œrunæ–¹æ³•.</p><p>Workerä¸­çš„å…¨å±€å˜é‡:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Thread this worker is running in.  Null if factory fails. æ‰§è¡Œå½“å‰å·¥ä½œçº¿ç¨‹*/</span></span><br><span class="line"><span class="keyword">final</span> Thread thread;</span><br><span class="line"><span class="comment">/** åˆå§‹åŒ–çš„ä»»åŠ¡,å¯èƒ½æ˜¯ç©º*/</span></span><br><span class="line">Runnable firstTask;</span><br><span class="line"><span class="comment">/** æ¯ä¸ªçº¿ç¨‹çš„ä»»åŠ¡è®¡æ•°å™¨(ç»Ÿè®¡å®Œæˆçš„ä»»åŠ¡æ•°) */</span></span><br><span class="line"><span class="keyword">volatile</span> <span class="keyword">long</span> completedTasks;</span><br></pre></td></tr></table></figure><p>Workerçš„æ„é€ å™¨,é»˜è®¤æ˜¯éœ€è¦ä¼ å…¥Runnableçš„ä»»åŠ¡çš„.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Worker(Runnable firstTask) &#123;</span><br><span class="line">    setState(-<span class="number">1</span>); <span class="comment">// inhibit interrupts until runWorker</span></span><br><span class="line">    <span class="keyword">this</span>.firstTask = firstTask;</span><br><span class="line">    <span class="keyword">this</span>.thread = getThreadFactory().newThread(<span class="keyword">this</span>);<span class="comment">//ä¿å­˜ä»ThreadFactoryä¸­è·å–åˆ°çš„Thread</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>workerä¸­çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥çœ‹æ˜¯å¦æ˜¯ç‹¬å çš„</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isHeldExclusively</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> getState() != <span class="number">0</span>; <span class="comment">//AQSä¸­çš„stateä¿å­˜è¿™ä¸ªçŠ¶æ€</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°è¯•è·å¾—é”</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryAcquire</span><span class="params">(<span class="keyword">int</span> unused)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (compareAndSetState(<span class="number">0</span>, <span class="number">1</span>)) &#123; <span class="comment">//é€šè¿‡æ”¹å˜stateæ¥å®ç° å¦‚æœstate&gt;0è¯´æ˜è·å–åˆ°äº†é”</span></span><br><span class="line">        setExclusiveOwnerThread(Thread.currentThread()); <span class="comment">//è®¾ç½®ç‹¬å è®¿é—®çš„çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°è¯•é‡Šæ”¾é”</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">tryRelease</span><span class="params">(<span class="keyword">int</span> unused)</span> </span>&#123;</span><br><span class="line">    setExclusiveOwnerThread(<span class="keyword">null</span>);<span class="comment">//æ¸…ç©ºç‹¬å è®¿é—®çš„çº¿ç¨‹</span></span><br><span class="line">    setState(<span class="number">0</span>);<span class="comment">//çŠ¶æ€ç½®ä¸ºã€Œé‡Šæ”¾é”ã€</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lock</span><span class="params">()</span>        </span>&#123; acquire(<span class="number">1</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">tryLock</span><span class="params">()</span>  </span>&#123; <span class="keyword">return</span> tryAcquire(<span class="number">1</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span>      </span>&#123; release(<span class="number">1</span>); &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLocked</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> isHeldExclusively(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">interruptIfStarted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Thread t;</span><br><span class="line">    <span class="keyword">if</span> (getState() &gt;= <span class="number">0</span> &amp;&amp; (t = thread) != <span class="keyword">null</span> &amp;&amp; !t.isInterrupted()) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t.interrupt();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SecurityException ignore) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨addWorkeä¸­è°ƒç”¨runæ–¹æ³•æ‰§è¡Œä»»åŠ¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Delegates main run loop to outer runWorker  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    runWorker(<span class="keyword">this</span>); <span class="comment">//å§”æ‰˜runWorkeræ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">runWorker</span><span class="params">(Worker w)</span> </span>&#123;</span><br><span class="line">    Thread wt = Thread.currentThread();<span class="comment">//è·å¾—å½“å‰çº¿ç¨‹</span></span><br><span class="line">    Runnable task = w.firstTask;<span class="comment">//è·å¾—ä»»åŠ¡</span></span><br><span class="line">    w.firstTask = <span class="keyword">null</span>;</span><br><span class="line">    w.unlock(); <span class="comment">// allow interrupts</span></span><br><span class="line">    <span class="keyword">boolean</span> completedAbruptly = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (task != <span class="keyword">null</span> || (task = getTask()) != <span class="keyword">null</span>) &#123; <span class="comment">//å¦‚æœå­˜åœ¨ä»»åŠ¡</span></span><br><span class="line">            w.lock(); <span class="comment">//å°†å½“å‰å·¥ä½œçº¿ç¨‹ä¸Šé”</span></span><br><span class="line">            <span class="comment">// If pool is stopping, ensure thread is interrupted;</span></span><br><span class="line">            <span class="comment">// if not, ensure thread is not interrupted.  This</span></span><br><span class="line">            <span class="comment">// requires a recheck in second case to deal with</span></span><br><span class="line">            <span class="comment">// shutdownNow race while clearing interrupt</span></span><br><span class="line">            <span class="comment">//å¦‚æœçº¿ç¨‹æ± æ­£åœ¨è¢«åœæ­¢,éœ€è¦ç¡®ä¿çº¿ç¨‹å·²ç»è¢«ä¸­æ–­</span></span><br><span class="line">            <span class="comment">//å¦‚æœçº¿ç¨‹æ± æ²¡æœ‰è¢«åœæ­¢,éœ€è¦ç¡®ä¿çº¿ç¨‹ä¸èƒ½è¢«ä¸­æ–­</span></span><br><span class="line">            <span class="keyword">if</span> ((runStateAtLeast(ctl.get(), STOP) ||</span><br><span class="line">                 (Thread.interrupted() &amp;&amp;</span><br><span class="line">                  runStateAtLeast(ctl.get(), STOP))) &amp;&amp;</span><br><span class="line">                !wt.isInterrupted())</span><br><span class="line">                wt.interrupt();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                beforeExecute(wt, task);</span><br><span class="line">                Throwable thrown = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    task.run(); <span class="comment">//æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (RuntimeException x) &#123;</span><br><span class="line">                    thrown = x; <span class="keyword">throw</span> x;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Error x) &#123;</span><br><span class="line">                    thrown = x; <span class="keyword">throw</span> x;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Throwable x) &#123;</span><br><span class="line">                    thrown = x; <span class="keyword">throw</span> <span class="keyword">new</span> Error(x);</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    afterExecute(task, thrown);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                task = <span class="keyword">null</span>; <span class="comment">//æ¸…ç©ºä»»åŠ¡</span></span><br><span class="line">                w.completedTasks++; <span class="comment">//å½“å‰çº¿ç¨‹å¤„ç†ä»»åŠ¡æ•°åŠ ä¸€</span></span><br><span class="line">                w.unlock();<span class="comment">//è§£é”</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        completedAbruptly = <span class="keyword">false</span>;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        processWorkerExit(w, completedAbruptly);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AQSã€ŒAbstractQueuedSynchronizerã€-é˜Ÿåˆ—åŒæ­¥å™¨"><a href="#AQSã€ŒAbstractQueuedSynchronizerã€-é˜Ÿåˆ—åŒæ­¥å™¨" class="headerlink" title="AQSã€ŒAbstractQueuedSynchronizerã€ é˜Ÿåˆ—åŒæ­¥å™¨"></a>AQSã€ŒAbstractQueuedSynchronizerã€ é˜Ÿåˆ—åŒæ­¥å™¨</h2><p>AQSçš„ä½¿ç”¨æ–¹å¼æ˜¯ç»§æ‰¿,ä¹‹ç±»é€šè¿‡ç»§æ‰¿AQS,å®ç°æŠ½è±¡æ–¹æ³•æ¥å®ç°ç®¡ç†åŒæ­¥å™¨. å…¶ä¸­ä¸Šæ–‡ä¸­çš„ThreadPoolExcutorä¸­çš„Workerå°±æ˜¯ç»§æ‰¿AQSæ¥å®ç°çš„.</p><p>AQSä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡stateæ¥è¡¨ç¤ºå½“å‰çš„é”çš„çŠ¶æ€,å¦‚æœstate&gt;0,è¯´æ˜å·²ç»è·å–åˆ°äº†é”,å¦‚æœstate=0,è¯´æ˜é‡Šæ”¾äº†é”.</p><p>AQSä¾é CLHé˜Ÿåˆ—å®Œæˆå¯¹çŠ¶æ€çš„ç®¡ç†.å½“å‰çº¿ç¨‹å¦‚æœè·å–åŒæ­¥çŠ¶æ€å¤±è´¥æ—¶ï¼ŒAQSåˆ™ä¼šå°†å½“å‰çº¿ç¨‹å·²ç»ç­‰å¾…çŠ¶æ€ç­‰ä¿¡æ¯æ„é€ æˆä¸€ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰å¹¶å°†å…¶åŠ å…¥åˆ°CLHåŒæ­¥é˜Ÿåˆ—ï¼ŒåŒæ—¶ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå½“åŒæ­¥çŠ¶æ€é‡Šæ”¾æ—¶ï¼Œä¼šæŠŠé¦–èŠ‚ç‚¹å”¤é†’ï¼ˆå…¬å¹³é”ï¼‰ï¼Œä½¿å…¶å†æ¬¡å°è¯•è·å–åŒæ­¥çŠ¶æ€ã€‚</p><p>å…¶ä¸­CLHçš„ä¸€ä¸ªèŠ‚ç‚¹åŒ…æ‹¬äº†:å½“å‰çš„çŠ¶æ€,å‰é©±,åç»§,å½“å‰èŠ‚ç‚¹ä¿å­˜çš„çº¿ç¨‹.</p><p>å…·ä½“çš„AQSè¿‡ç¨‹å¯ä»¥å‚è€ƒ<a href="https://juejin.im/entry/5ae02a7c6fb9a07ac76e7b70" target="_blank" rel="noopener">QASåŸç†</a></p><h2 id="è¡¥å……çš„countDownLatchå’ŒcyclicBarrierçš„åŒºåˆ«"><a href="#è¡¥å……çš„countDownLatchå’ŒcyclicBarrierçš„åŒºåˆ«" class="headerlink" title="è¡¥å……çš„countDownLatchå’ŒcyclicBarrierçš„åŒºåˆ«"></a>è¡¥å……çš„countDownLatchå’ŒcyclicBarrierçš„åŒºåˆ«</h2><p><img src="https://camo.githubusercontent.com/5c19d9e66ffaf3d7193b01948279db9b9b3b98d3/68747470733a2f2f6d792d626c6f672d746f2d7573652e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f4a6176612532302545372541382538422545352542412538462545352539312539382545352542462538352545352541342538372545462542432539412545352542392542362545352538462539312545372539462541352545382541462538362545372542332542422545372542422539462545362538302542422545372542422539332f4151533333332e706e67" alt="åŒºåˆ«"></p>]]></content>
      
      
      <categories>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç†è§£å’Œä½¿ç”¨synchronizedå…³é”®å­—</title>
      <link href="/2019/04/22/2019-04-22-Synchronized%E5%85%B3%E9%94%AE%E5%AD%97%E6%80%BB%E7%BB%93/"/>
      <url>/2019/04/22/2019-04-22-Synchronized%E5%85%B3%E9%94%AE%E5%AD%97%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h1><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨synchronized"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨synchronized" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨synchronized"></a>ä¸ºä»€ä¹ˆè¦ç”¨<code>synchronized</code></h2><p>å¤šçº¿ç¨‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šåŸå­æ€§ï¼Œæœ‰åºæ€§ï¼ˆé‡æ’åºé—®é¢˜ï¼Ÿï¼‰å’Œå¯è§æ€§ï¼›å…¶ä¸­åŸå­æ€§åœ¨ç¨‹åºä¸Šçš„ä½“ç°å°±æ˜¯ä½¿ç”¨synchronized,ä¸ºäº†ä¿è¯å¯è§æ€§æ˜¯ä½¿ç”¨éœ€è¦ä½¿ç”¨volatile.<br>ä½¿ç”¨synchronizedæ¥ä¿è¯ç¨‹åºçš„åŸå­æ€§<br>é¦–å…ˆåœ¨è®¨è®ºä¸‰å¤§ç‰¹æ€§å‰éœ€è¦çŸ¥é“javaçš„å†…å­˜æ¨¡å‹å’Œhappen-beforeåŸåˆ™ã€‚<a href="https://www.jianshu.com/p/cf57726e77f2" target="_blank" rel="noopener">å†…å­˜æ¨¡å‹ä¸happen-beforeåŸåˆ™</a></p><p>ç‰µæ‰¯å‡ºçš„é—®é¢˜ï¼š</p><ol><li><p>ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼šæˆ‘çš„ç†è§£å°±æ˜¯å¦‚æœä¿è¯å¤šçº¿ç¨‹æ‰§è¡Œçš„ç»“æœå’Œé¢„æœŸç»“æœç›¸åŒï¼Œå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦åˆ™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„</p></li><li><p>ä»€ä¹ˆæ˜¯JAVAå†…å­˜æ¨¡å‹ï¼Ÿ </p><p> åœ¨javaå†…å®¹ä¸­ç¨‹åºè®¡æ•°å™¨ï¼Œè™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆéƒ½æ˜¯çº¿ç¨‹ç§æœ‰çš„åŒºåŸŸï¼Œè€Œæ–¹æ³•åŒºå’Œjavaå †æ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸ</p><p> å› ä¸ºcpuçš„å¤„ç†é€Ÿåº¦ä¸å†…å­˜çš„è¯»å†™é€Ÿåº¦ä¹‹é—´æœ‰ç€ç€å·¨å¤§çš„å·®è·ï¼Œæ‰€ä»¥åœ¨cpuå’Œå†…å­˜é—´æ·»åŠ ä¸€å±‚ç¼“å­˜ï¼Œæ¯æ¬¡ç°åœ¨cpuçš„ç¼“å­˜ä¸­ï¼Œè¿™ä¸ªç¼“å­˜åŒºåŸŸçš„è¯»å†™é€Ÿåº¦å¾€å¾€æ¯”å†…å­˜çš„è¯»å†™é€Ÿåº¦å¿«å¾ˆå¤šï¼Œè¿™æ ·å°±èƒ½å¤Ÿç¼“è§£cpuå’Œä¸»å­˜ä¹‹é—´çš„é€Ÿåº¦å·®è·ã€‚</p><p> æ‰€ä»¥æ¯æ¬¡cpuè¯»å†™æ•°æ®å‰ï¼Œä¼šå…ˆè¯»å–å…±äº«å˜é‡åˆ°æœ¬åœ°å†…å®¹ï¼Œcpuå†ä»æœ¬åœ°å†…å­˜ä¸­è¯»å–æ•°æ®ã€‚è¿™å°±æ˜¯javaçš„å†…å­˜æ¨¡å‹</p><p> è¿™æ ·ä¹Ÿä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¿™æ˜¯å°±è¦éœ€è¦ä¿è¯å…±äº«å˜é‡çš„æ•°æ®å¯è§æ€§ï¼Œå³çº¿ç¨‹1ä¿®æ”¹äº†å˜é‡ï¼Œåˆ™çº¿ç¨‹2å†ä¿®æ”¹å˜é‡å‰å·²ç»å¾—çŸ¥å˜é‡å·²ç»è¢«ä¿®æ”¹äº†ã€‚</p></li></ol><h2 id="åº”ç”¨synchronized"><a href="#åº”ç”¨synchronized" class="headerlink" title="åº”ç”¨synchronized"></a>åº”ç”¨<code>synchronized</code></h2><p>ä¸ºäº†ä¿è¯ç¨‹åºçš„åŸå­æ€§ï¼šæˆ‘ä»¬åœ¨ç¨‹åºä¸­ä½¿ç”¨synchronizedå…³é”®å­—å¯¹ç¨‹åºè¿›è¡Œé”å®šï¼Œè¡¨ç¤ºåœ¨é”ä½çš„åŒºåŸŸå†…åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨synchronized"><a href="#å¦‚ä½•ä½¿ç”¨synchronized" class="headerlink" title="å¦‚ä½•ä½¿ç”¨synchronized"></a>å¦‚ä½•ä½¿ç”¨<code>synchronized</code></h3><ul><li>ä½¿ç”¨synchronizedä¿®é¥°é™æ€æ–¹æ³•ï¼Œé’ˆå¯¹ç±»å˜é‡è¿›è¡ŒåŠ é”ã€‚è¿›å…¥æ–¹æ³•çš„å‰ææ˜¯è·å¾—ç±»çš„é”ã€‚</li><li>ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼Œé’ˆå¯¹å®ä¾‹å¯¹è±¡ï¼Œåœ¨è¿›å…¥æ–¹æ³•å‰è¦è·å¾—å®ä¾‹å˜é‡çš„é”ã€‚</li><li>ä¿®é¥°ä»£ç å—ã€‚æŒ‡å®šåŠ é”çš„å¯¹è±¡ï¼Œåœ¨è¿›å…¥ä»£ç å—é’±è¦å…ˆè·å¾—æŒ‡å®šå¯¹è±¡çš„é”ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//synchronizedçš„ä¸‰ç§ç”¨æ³•</span></span><br><span class="line">    <span class="comment">//1.ä¿®é¥°å®ä¾‹æ–¹æ³• éœ€è¦æ‹¥æœ‰å®ä¾‹å¯¹è±¡çš„é”</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.ä¿®é¥°é™æ€æ–¹æ³• éœ€è¦æ‹¥æœ‰ç±»å¯¹è±¡çš„é”</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"staticHello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">blockHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//3.ä¿®é¥°ä»£ç å— éœ€è¦æ‹¥æœ‰ã€thisã€‘çš„é”</span></span><br><span class="line">        <span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123; </span><br><span class="line">            System.out.println(<span class="string">"code block hello"</span>);</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…¸å‹çš„ä½¿ç”¨synchronizedçš„åœºæ™¯â€“å•ä¾‹æ¨¡å¼çš„åŒé‡é”ç»“æ„"><a href="#å…¸å‹çš„ä½¿ç”¨synchronizedçš„åœºæ™¯â€“å•ä¾‹æ¨¡å¼çš„åŒé‡é”ç»“æ„" class="headerlink" title="å…¸å‹çš„ä½¿ç”¨synchronizedçš„åœºæ™¯â€“å•ä¾‹æ¨¡å¼çš„åŒé‡é”ç»“æ„"></a>å…¸å‹çš„ä½¿ç”¨<code>synchronized</code>çš„åœºæ™¯â€“å•ä¾‹æ¨¡å¼çš„åŒé‡é”ç»“æ„</h3><p>åœ¨è®¨è®ºåŒé‡é”çš„å‰ï¼Œéœ€è¦èŠèŠå•ä¾‹æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼é€šä¿—çš„æ¥è¯´ä¸€ä¸ªç±»åªèƒ½æ„é€ ä¸€ä¸ªå®ä¾‹ã€‚é’ˆå¯¹çš„å®ç°åˆä¸¤ç§ï¼š1.é¥¿æ±‰æ¨¡å¼ï¼Œ2.æ‡’æ±‰æ¨¡å¼</p><h4 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">    <span class="comment">//1. ä½¿ç”¨é™æ€å˜é‡</span></span><br><span class="line"><span class="comment">//    private static Singleton singleton = new Singleton();</span></span><br><span class="line">    <span class="comment">//2.ä½¿ç”¨é™æ€ä»£ç å— æœªä½¿ç”¨æ—¶é€ æˆå†…å­˜ç©ºé—´æµªè´¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¸ä¼šå½±å“åˆ°å¤šçº¿ç¨‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºç±»çš„è£…è½½æœºåˆ¶åœ¨åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™æ˜¯ä¿è¯ä¸ä¼šæœ‰ç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥çš„ã€‚ä½†æ˜¯æœ‰ä¸ªå¾ˆå¤§çš„å¼Šç«¯æ˜¯ä»–ä¸æ˜¯<code>lazy-loading</code>çš„ï¼Œè¿™å›äº§ç”Ÿèµ„æºçš„æµªè´¹ï¼Œæ¯”å¦‚åˆ›å»ºå®Œå¯¹è±¡åï¼Œè‡ªå§‹è‡³ç»ˆæ²¡ç”¨è¿‡ã€‚æ‰€ä»¥ä¸æ¨èä½¿ç”¨</p><h4 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ™®é€šçš„çº¿ç¨‹ä¸å®‰å…¨çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(singleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.é™æ€å†…éƒ¨ç±» ä¸€æ–¹é¢èƒ½å¤Ÿè¾¾åˆ°lazy-loadingçš„æ•ˆæœï¼Œå¦ä¸€æ–¹é¢èƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºjvmä¿è¯åˆå§‹åŒ–çš„æ—¶å€™åˆ«çš„çº¿ç¨‹æ˜¯ä¸èƒ½è¿›å…¥çš„</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">newSingleton</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">newInstanceInnerClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newSingleton.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ç§æ˜¯ä¸èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹ä¸‹ä¼šå¯¼è‡´å¤±æ•ˆã€‚è€Œç¬¬äºŒç§ä½¿ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼å®ç°èƒ½å¤Ÿå®ç°çº¿ç¨‹å®‰å…¨å¾—å®œäºç±»çš„åŠ è½½æœºåˆ¶ï¼Œç±»ä¼¼é¥¿æ±‰æ¨¡å¼ã€‚ä½†åŒæ—¶å…·æœ‰<code>lazy-Loading</code>çš„ç‰¹æ€§ã€‚æ˜¯å¸¸ç”¨çš„å•ä¾‹æ¨¡å¼ç”¨æ³•ã€‚</p><h4 id="double-checkåŒé‡é”"><a href="#double-checkåŒé‡é”" class="headerlink" title="double-checkåŒé‡é”"></a><code>double-check</code>åŒé‡é”</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleCheck</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DoubleCheck</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> DoubleCheck doubleCheck; <span class="comment">//ä½¿ç”¨volatileä¿è¯åŸå­æ€§ï¼Œé˜²æ­¢é‡æ’åº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DoubleCheck <span class="title">newInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(doubleCheck == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åˆ°è¿™æ­¥ aå…ˆè¿›åŒæ­¥å—ï¼Œåœ¨aè¿›å…¥åè·å¾—instanceåï¼Œbè·å¾—é”ï¼Œè¿›å…¥åŒæ­¥å—ï¼Œ</span></span><br><span class="line">            <span class="comment">// è¿™æ—¶å€™ä¸‹ä¸€ä¸ªåˆ¤æ–­å°±èµ·åˆ°ä½œç”¨äº†ï¼Œè¿™æ—¶å€™çš„doubleCheckä¸ä¸ºç©ºï¼Œ</span></span><br><span class="line">            <span class="comment">// ç›´æ¥returnï¼Œå¦åˆ™åˆï¸æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleCheck.class)&#123;</span><br><span class="line">                <span class="keyword">if</span>(doubleCheck == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    doubleCheck = <span class="keyword">new</span> DoubleCheck();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> doubleCheck;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šdouble-checkä¹Ÿæ˜¯æ‡’æ±‰æ¨¡å¼çš„ä¸€ç§ï¼Œèƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å¾ˆå®Œç¾ã€‚ã€‚</p><h3 id="synchronziedåº•å±‚å®ç°"><a href="#synchronziedåº•å±‚å®ç°" class="headerlink" title="synchronziedåº•å±‚å®ç°"></a><code>synchronzied</code>åº•å±‚å®ç°</h3><p>synchronized åŒæ­¥<code>è¯­å¥å—</code>çš„å®ç°ä½¿ç”¨çš„æ˜¯<code>monitorenter</code> å’Œ<code>monitorexit</code> æŒ‡ä»¤ï¼Œå…¶ä¸­ <code>monitorenter</code> æŒ‡ä»¤æŒ‡å‘åŒæ­¥ä»£ç å—çš„å¼€å§‹ä½ç½®ï¼Œ<code>monitorexit</code> æŒ‡ä»¤åˆ™æŒ‡æ˜åŒæ­¥ä»£ç å—çš„ç»“æŸä½ç½®ã€‚</p><blockquote><p> synchronized ä¿®é¥°çš„<code>æ–¹æ³•</code>å¹¶æ²¡æœ‰ monitorenter æŒ‡ä»¤å’Œ monitorexit æŒ‡ä»¤ï¼Œå–å¾—ä»£ä¹‹çš„ç¡®å®æ˜¯ ACC_SYNCHRONIZED æ ‡è¯†ï¼Œè¯¥æ ‡è¯†æŒ‡æ˜äº†è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼ŒJVM é€šè¿‡è¯¥ ACC_SYNCHRONIZED è®¿é—®æ ‡å¿—æ¥è¾¨åˆ«ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å£°æ˜ä¸ºåŒæ­¥æ–¹æ³•ï¼Œä»è€Œæ‰§è¡Œç›¸åº”çš„åŒæ­¥è°ƒç”¨ã€‚</p></blockquote><h3 id="volatileå’Œsynachronizedçš„åŒºåˆ«"><a href="#volatileå’Œsynachronizedçš„åŒºåˆ«" class="headerlink" title="volatileå’Œsynachronizedçš„åŒºåˆ«"></a><code>volatile</code>å’Œ<code>synachronized</code>çš„åŒºåˆ«</h3><ol><li>volatileæ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨volatileçš„æ€§èƒ½è‚¯å®šè¦å¼ºäºsynchronizedã€‚</li><li>volatileä½œç”¨äºå˜é‡ï¼Œè€Œsynachronziedä½œç”¨äºæ–¹æ³•å’Œä»£ç å—ã€‚</li><li>å¤šçº¿ç¨‹é—´ä½¿ç”¨volatileä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œè€Œä½¿ç”¨synachronizedå¯èƒ½å‘ç”Ÿé˜»å¡</li><li>volatileä¿è¯å˜é‡åœ¨å¤šçº¿ç¨‹é—´çš„å¯è§æ€§ï¼Œå‘è™šæ‹Ÿæœºå£°æ˜è¿™ä¸ªå˜é‡ä¸ç¨³å®šï¼Œéœ€è¦æ¯æ¬¡éƒ½ä»ä¸»å­˜ä¸­è·å–ï¼Œè€Œsynchronizedæ—¢èƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œåˆèƒ½ä¿è¯åŸå­æ€§ã€‚        </li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤šçº¿ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­å¸¸ç”¨å…³é”®å­—æ€»ç»“</title>
      <link href="/2019/04/22/2019-04-12-Java%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97/"/>
      <url>/2019/04/22/2019-04-12-Java%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaä¸­å…³é”®å­—æ€»ç»“"><a href="#Javaä¸­å…³é”®å­—æ€»ç»“" class="headerlink" title="Javaä¸­å…³é”®å­—æ€»ç»“"></a>Javaä¸­å…³é”®å­—æ€»ç»“</h1><h2 id="finalå…³é”®å­—"><a href="#finalå…³é”®å­—" class="headerlink" title="finalå…³é”®å­—"></a><code>final</code>å…³é”®å­—</h2><p><code>final</code>ä¸»è¦ç”¨äºä¸‰ä¸ªåœ°æ–¹ï¼šå˜é‡ã€æ–¹æ³•ã€ç±»</p><ul><li>å˜é‡ï¼š å¦‚æœ<code>final</code>ä¿®é¥°å˜é‡ï¼Œå¦‚æœå˜é‡æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¡¨ç¤ºå¦‚æœè¯¥åŸºæœ¬æ•°æ®ç±»å‹ä¸€æ—¦åˆå§‹åŒ–åˆ™ä¸èƒ½å†æ”¹å˜ï¼Œå¦‚æœä¿®é¥°å¼•ç”¨å˜é‡ï¼Œåˆ™è¡¨ç¤ºåˆå§‹åŒ–ä¹‹åä¸èƒ½æ‰§è¡Œå¦å¤–ä¸€ä¸ªå˜é‡ã€‚</li><li>æ–¹æ³•ï¼š å¦‚æœ<code>final</code>ä½œç”¨åŸŸæ–¹æ³•ä¸Šï¼Œè¯´æ˜è¯¥æ–¹æ³•æ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»§æ‰¿ç´¯æ— æ³•æ”¹å˜æ–¹æ³•ã€‚æ‰€æœ‰<code>private</code>æ–¹æ³•é»˜è®¤æ˜¯<code>final</code>çš„</li><li>ç±»ï¼šå¦‚æœ<code>final</code>ä½œç”¨ä¸ç±»ä¸Šï¼Œè¯´æ˜è¯¥ç±»æ˜¯æ— æ³•è¢«ç»§æ‰¿çš„ã€‚å¹¶ä¸”ä»–çš„ç±»ä¸­çš„æ–¹æ³•é»˜è®¤éƒ½æ˜¯<code>private</code>çš„ã€‚</li></ul><h2 id="staticå…³é”®å­—"><a href="#staticå…³é”®å­—" class="headerlink" title="staticå…³é”®å­—"></a><code>static</code>å…³é”®å­—</h2><p><code>static</code>å…³é”®å­—åœ¨ä»¥ä¸‹å››ç§æƒ…å†µä¸‹ç”¨åˆ°ã€‚</p><ul><li>ç”¨æ¥ä¿®é¥°æˆå‘˜å˜é‡æˆ–æ–¹æ³•ï¼Œé€šè¿‡<code>static</code>ä¿®é¥°çš„å˜é‡æˆ–è€…æ–¹æ³•è¢«ç§°ä½œä¸ºé™æ€å˜é‡å’Œé™æ€æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡ç±»å.å˜é‡æˆ–æ–¹æ³•()è°ƒç”¨ï¼Œé™æ€å˜é‡å’Œæ–¹æ³•å±äºæ•´ä¸ªç±»å¯¹è±¡ï¼Œè€Œä¸å±äºå®ä¾‹å˜é‡ã€‚é™æ€å˜é‡å­˜æ”¾åœ¨<code>java</code>å†…å­˜ä¸­çš„æ–¹æ³•åŒºã€‚</li><li>ç”¨æ¥ä¿®é¥°é™æ€ä»£ç å—ã€‚ä½¿ç”¨<code>static</code>ä¿®é¥°çš„é™æ€ä»£ç å—ï¼Œä¼šå…ˆäºä»£ç å—å’Œæ„é€ æ–¹æ³•ã€‚å¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</li><li>ç”¨æ¥ä¿®é¥°é™æ€å†…éƒ¨ç±»ã€‚ä½¿ç”¨<code>static</code>ä¿®é¥°é™æ€å†…éƒ¨ç±»ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œå…¶ä¸€æ˜¯ä»–çš„åˆ›å»ºä¸ä¾èµ–äºå¤–éƒ¨ç±»ï¼Œå…¶äºŒæ˜¯ä»–åªèƒ½è°ƒç”¨å¤–éƒ¨ç±»çš„é™æ€å˜é‡æˆ–æ–¹æ³•ã€‚</li><li>ç”¨æ¥é™æ€å¯¼å…¥åŒ…ï¼Œè¿™ä¸ªä¸å¤ªå¸¸ç”¨ã€‚ä½¿ç”¨ <code>import static</code>å¯¼å…¥é™æ€èµ„æºã€‚</li></ul><h2 id="this-å…³é”®å­—"><a href="#this-å…³é”®å­—" class="headerlink" title="this å…³é”®å­—"></a><code>this</code> å…³é”®å­—</h2><p><code>this</code>ç”¨äºæ‰§è¡Œå½“å‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½åœ¨<code>static</code>æ–¹æ³•æˆ–è€…ä»£ç å—ä¸­ä½¿ç”¨<code>this</code>æ¥æŒ‡å‘å¯¹è±¡ã€‚</p><h2 id="super-å…³é”®å­—"><a href="#super-å…³é”®å­—" class="headerlink" title="super å…³é”®å­—"></a><code>super</code> å…³é”®å­—</h2><p><code>this</code>å…³é”®å­—æŒ‡å‘æœ¬èº«å¯¹è±¡ï¼Œè€Œ<code>super</code>å…³é”®å­—åˆ™æŒ‡å‘çˆ¶ç±»å¯¹è±¡ã€‚</p><h1 id="javaä¸­äºŒè¿›åˆ¶è¿ç®—æ“ä½œ"><a href="#javaä¸­äºŒè¿›åˆ¶è¿ç®—æ“ä½œ" class="headerlink" title="javaä¸­äºŒè¿›åˆ¶è¿ç®—æ“ä½œ"></a>javaä¸­äºŒè¿›åˆ¶è¿ç®—æ“ä½œ</h1><h2 id="ä¸è¿ç®—-amp"><a href="#ä¸è¿ç®—-amp" class="headerlink" title="ä¸è¿ç®— &amp;"></a>ä¸è¿ç®— &amp;</h2><p>è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œéƒ½ä¸ºä¸€æ—¶åˆ™ä¸ºä¸€</p><h2 id="æˆ–è¿ç®—"><a href="#æˆ–è¿ç®—" class="headerlink" title="æˆ–è¿ç®— |"></a>æˆ–è¿ç®— |</h2><p>è½¬æ¢ä¸ºäºŒè¿›åˆ¶åï¼Œåªè¦æœ‰ä¸€ä¸ªä¸ºä¸€ï¼Œåˆ™ç»“æœä¸ºä¸€</p><h2 id="å¼‚æˆ–æ“ä½œ"><a href="#å¼‚æˆ–æ“ä½œ" class="headerlink" title="å¼‚æˆ–æ“ä½œ ^"></a>å¼‚æˆ–æ“ä½œ ^</h2><p>è½¬æ¢ä¸ºäºŒè¿›åˆ¶åï¼Œä¸åŒåˆ™ä¸ºä¸€</p><h2 id="å–åæ“ä½œ-ï½"><a href="#å–åæ“ä½œ-ï½" class="headerlink" title="å–åæ“ä½œ ï½"></a>å–åæ“ä½œ ï½</h2><p>æŒ‰ä½å–åçš„æ“ä½œï¼ˆç”±æ­£æ•°å˜ä¸ºè´Ÿæ•°ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testBitOperating()&#123;</span><br><span class="line">        System.out.println(5&amp;6);</span><br><span class="line">        // 0101</span><br><span class="line">        // 0110</span><br><span class="line">        // -----</span><br><span class="line">        // 0100 ç»“æœæ˜¯4</span><br><span class="line">        System.out.println(5 | 6);</span><br><span class="line">        // 0101</span><br><span class="line">        // 0110</span><br><span class="line">        // -----</span><br><span class="line">        // 0111 ç»“æœæ˜¯7</span><br><span class="line">        System.out.println(5 ^ 6);</span><br><span class="line">        // 0101</span><br><span class="line">        // 0110</span><br><span class="line">        // -----</span><br><span class="line">        // 0011 ç»“æœæ˜¯ 3</span><br><span class="line">        System.out.println(~5);</span><br><span class="line">        // 0.... 0101</span><br><span class="line">        //-----------</span><br><span class="line">        // 0.... 0101 è¡¥ç  = æ­£æ•°çš„è¡¥ç å’Œæºç ç›¸åŒ è´Ÿæ•°çš„è¡¥ç ç­‰äºæºç å–åå+1</span><br><span class="line">        // 1.... 0110 æºç  =  å–å ååŠ ä¸€ -6</span><br><span class="line">        System.out.println(~-6);</span><br><span class="line">        // 1.....0110</span><br><span class="line">        // 1.....1010  è¡¥ç ï¼šè´Ÿæ•°çš„è¡¥ç ä¸ºåç +1</span><br><span class="line">        // 0.....0101  æº</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå¸¸ç”¨å‘½ä»¤æ•´ç†</title>
      <link href="/2019/01/29/2019-01-29-%E5%9F%BA%E6%9C%ACLlinux%E5%91%BD%E4%BB%A4(%E5%BF%85%E9%A1%BB%E6%8E%8C%E6%8F%A1)/"/>
      <url>/2019/01/29/2019-01-29-%E5%9F%BA%E6%9C%ACLlinux%E5%91%BD%E4%BB%A4(%E5%BF%85%E9%A1%BB%E6%8E%8C%E6%8F%A1)/</url>
      
        <content type="html"><![CDATA[<h1 id="linuxä¸­å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤"><a href="#linuxä¸­å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="linuxä¸­å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤"></a>linuxä¸­å¿…é¡»æŒæ¡çš„åŸºæœ¬å‘½ä»¤</h1><p>åœ¨å¼€å§‹å‰ï¼Œæˆ‘æ¨èå®‰è£… <a href="https://github.com/tldr-pages/tldr" target="_blank" rel="noopener">trdrï¼ˆtoo long dont readï¼‰</a>å·¥å…·ï¼Œç”¨æ¥ç®€åŒ–manå‘½ä»¤ï¼Œæ¥å®ç°æŸ¥çœ‹å‘½ä»¤å«ä¹‰å’Œç”¨æ³•çš„ä½œç”¨ã€‚</p><h2 id="ä¸€-ã€ç³»ç»Ÿå·¥ä½œå‘½ä»¤"><a href="#ä¸€-ã€ç³»ç»Ÿå·¥ä½œå‘½ä»¤" class="headerlink" title="ä¸€ ã€ç³»ç»Ÿå·¥ä½œå‘½ä»¤"></a>ä¸€ ã€ç³»ç»Ÿå·¥ä½œå‘½ä»¤</h2><ol><li><p><code>echo</code></p><p><code>echo</code>å‘½ä»¤ä¸€èˆ¬ç”¨äºshellä¸­æ‰“å°å˜é‡æˆ–è€…å­—ç¬¦ä¸²çš„ä½œç”¨ï¼Œä¸»è¦ç”¨æ¥æ˜¾ç¤ºå’Œæé†’ã€‚</p><ul><li>è¾“å‡ºä¸€æ®µä¿¡æ¯ å¦‚ï¼š<code>echo &quot;hello world&quot;</code> å…¶ä¸­<code>&quot;</code>ä¸æ˜¯å¿…é¡»çš„ </li><li>è¾“å‡ºä¸€æ®µå¸¦ç¯å¢ƒå˜é‡çš„ä¿¡æ¯ å¦‚ï¼š<code>echo &quot;My Path is $PATH&quot;</code> </li><li>è¾“å‡ºå¹¶ä¸å¸¦æ¢è¡Œç¬¦å· å¦‚ï¼š<code>echo  -n &quot;Hello World&quot;</code></li><li>è¾“å‡ºä¸€æ®µæ¿€æ´»è½¬ä¾å­—ç¬¦ å¦‚ï¼š <code>echo -e &quot;Column 1 \t Column 2&quot;</code></li></ul></li><li><p><code>date</code> </p><p><code>date</code> å‘½ä»¤ä¸»è¦ç”¨æ¥è®¾ç½®å’Œæ‰“å°ç³»ç»Ÿæ—¶é—´ã€‚</p><ul><li>è¾“å‡ºé»˜è®¤æ—¶åŒºæ ¼å¼çš„äº‹ä»¶ <code>date +&quot;%c&quot;</code></li><li>è¾“å‡ºå½“å‰äº‹ä»¶æŒ‰ç…§UTCå’Œisoæ ¼å¼è¾“å‡º <code>date -u +&quot;%Y-%m-%dT%H:%M:%SZ&quot;</code></li><li>è¾“å‡ºäº‹ä»¶æˆ³ <code>date +&quot;%s&quot;</code></li></ul></li><li><p><code>reboot</code> å‘½ä»¤ä¸»è¦ç”¨æ¥é‡å¯ç³»ç»Ÿ</p><ul><li>é‡å¯ç³»ç»Ÿ <code>reboot</code></li><li>å¼ºåˆ¶é‡å¯ <code>reboot -f</code></li></ul></li><li><p><code>poweroff</code> å‘½ä»¤ç”¨æˆ·å…³æœº</p></li><li><p><code>wget</code> å‘½ä»¤ ç”¨äºä»webä¸­ä¸‹è½½æ–‡ä»¶ï¼Œæ”¯æŒ <code>http</code>,<code>https</code>,<code>ftp</code></p><ul><li>è·å–URLä¸­çš„å†…å®¹åˆ°<code>foo</code>ä¸­ <code>wget https://example.com/foo</code></li><li>è·å–URLä¸­çš„å†…å®¹åˆ°barä¸­ <code>wget -O bar https://example.com/foo</code></li><li>ç»§ç»­æœªå®Œæˆçš„ä¸‹è½½ <code>wget -c https://example.com</code></li><li>åå°ä¸‹è½½ <code>wget -q https://example.com</code></li></ul></li><li><p><code>ps</code>å‘½ä»¤ä¸»è¦ç”¨äºæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¿¡æ¯</p><ul><li>æ‰“å°å…¨éƒ¨æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ <code>ps aux</code></li><li>æ‰“å°å…¨éƒ¨æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹å¹¶ä¸”ä¼´æœ‰å®Œæ•´çš„å‘½ä»¤ä¸² <code>ps auxww</code></li><li>é€šè¿‡ <code>grep</code> ç®¡é“è¿‡æ»¤ <code>ps aux | grep &quot;tomcat&quot;</code></li><li>å¾—åˆ°è¿›ç¨‹çš„çˆ¶è¿›ç¨‹<code>pid</code> :<code>ps -o ppid= -p pid</code> </li></ul></li><li><p><code>top</code>å‘½ä»¤ ä¸»è¦ç”¨æˆ·åŠ¨æ€çš„å®æ—¶çš„æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„ç¨‹åº</p><ul><li><code>top -i</code> ä¸æ˜¾ç¤ºç©ºé—²æˆ–è€…æ˜¯åƒµå°¸è¿›ç¨‹</li><li><code>top -u $user</code> æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹ </li><li><code>top -p PID</code> åªæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹PID</li><li><code>top -p $(pgrep -d &#39;,&#39; process_name)</code> é€šè¿‡è¿›ç¨‹åæ¥æŸ¥è¯¢</li></ul></li><li><p><code>pidof</code> å‘½ä»¤ä¸»è¦ç”¨äºæŸ¥æ‰¾æŒ‡å®šè¿›ç¨‹çš„idå·</p><ul><li><code>pidof -s</code> è¿›è¿”å›ä¸€ä¸ªè¿›ç¨‹å·</li><li><code>pidof</code> -c ä»…æ˜¾ç¤ºå…·æœ‰ç›¸åŒrootç›®å½•ä¸‹çš„è¿›ç¨‹</li></ul></li></ol><h2 id="äºŒã€ç³»ç»ŸçŠ¶æ€"><a href="#äºŒã€ç³»ç»ŸçŠ¶æ€" class="headerlink" title="äºŒã€ç³»ç»ŸçŠ¶æ€"></a>äºŒã€ç³»ç»ŸçŠ¶æ€</h2><ol><li><code>ifconfig</code> å‘½ä»¤ä¸»è¦ç”¨äºç½‘ç»œæ¥å£çš„æŸ¥çœ‹å’Œé…ç½®</li></ol><ul><li><code>Ifconfig eth0</code> æŸ¥çœ‹etho0æ¥å£ç½‘ç»œè®¾ç½®</li><li><code>ifconfig -a</code> æŸ¥çœ‹æ‰€æœ‰æ¥å£çš„è¯¦ç»†ä¿¡æ¯</li><li><code>ifconfig eth0 down</code> å…³é—­æ¥å£eth0</li><li><code>ifconfig eth0 ipaddr</code> è®¾ç½®ç«¯å£ipåœ°å€</li></ul><ol start="2"><li><code>uname</code> æ‰“å°å‡ºç°å½“å‰æœºå™¨å’Œç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯</li></ol><ul><li><code>uname -n</code> æ‰“å°å½“å‰çš„<code>hostname</code></li><li><code>uname -a</code> æ‰“å°å½“å‰å¯ç”¨çš„ç³»ç»Ÿçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¡¬ä»¶è½¯ä»¶ã€‚</li></ul><ol start="3"><li><code>who</code> æ‰“å°å“ªäº›ç”¨æˆ·ç™»å½•å†è¿™å°æœºå™¨ä¸Š</li></ol><ul><li><code>who</code> æ˜¾ç¤º<code>username</code>ç­‰æ¯”è¾ƒå…¨çš„ä¿¡æ¯</li><li><code>who am i</code> æ‰“å°å‡ºå½“å‰ç”¨æˆ· </li></ul><ol start="4"><li><code>last</code> ç”¨äºæŸ¥çœ‹å½“å‰ç”¨æˆ·æœ€è¿‘çš„ç™»å½•ä¿¡æ¯</li></ol><h2 id="ä¸‰ã€æ–‡ä»¶å’Œç›®å½•"><a href="#ä¸‰ã€æ–‡ä»¶å’Œç›®å½•" class="headerlink" title="ä¸‰ã€æ–‡ä»¶å’Œç›®å½•"></a>ä¸‰ã€æ–‡ä»¶å’Œç›®å½•</h2><ol><li><p><code>pwd</code> ç”¨äºæ‰“å°å½“å‰ç›®å½•</p></li><li><p><code>cd</code> ç”¨äºåˆ‡æ¢ç›®å½•</p></li><li><p><code>ls</code> ç”¨äºç½—åˆ—ç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</p></li></ol><ul><li><code>ls -l</code>æŒ‰è¡Œç½—åˆ—æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li><li><code>ls -a</code> æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—çš„æ–‡ä»¶ã€‚</li><li><code>ls -lh</code> æŒ‰ç…§å¤§å°æ’æ³„æ’åˆ—</li></ul><ol start="4"><li><code>touch</code> å‘½ä»¤ä¸»è¦ç”¨äºæ”¹å˜æ–‡ä»¶çš„è®¿é—®æ—¶é—´å’Œä¿®æ”¹æ—¶é—´ã€‚</li></ol><ul><li><code>touch filename</code> ä»¥å½“å‰æ—¶é—´åˆ›å»ºæ–‡ä»¶</li><li><code>touch -t yyyy-mm-dd filename</code> ä»¥æŸä¸€æ—¶é—´æ¥æ”¹å˜æ–‡ä»¶æ—¶é—´</li></ul><ol start="5"><li><code>mkdir</code> å‘½ä»¤ä¸»è¦ç”¨äºåˆ›å»ºæ–‡ä»¶</li></ol><ul><li><code>mkdir dir</code> åˆ›å»ºæ–‡ä»¶å¤¹</li><li><code>mkdir -p /path/dir</code> åˆ›å»ºæŒ‡å®šè·¯å¾„ä¸‹çš„æ–‡ä»¶</li></ul><ol start="6"><li><code>cp</code> å‘½ä»¤ä¸»è¦ç”¨äºæ–‡ä»¶çš„å¤åˆ¶</li></ol><ul><li><code>cp path/to/file.ext path/to/copy.ext</code> å¤åˆ¶æ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°å€</li><li><code>cp path/to/file.ext path/to/target_parent_directory</code> å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šåœ°å€ï¼Œå¹¶ä¸”ä¿æŒæ–‡ä»¶åä¸å˜</li><li><code>cp -r path/to/directory path/to/copy</code> é€’å½’çš„å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹åŠå…¶ä¸­çš„å†…å®¹åˆ°æŒ‡å®šç›®å½•</li><li><code>cp -i *.txt path/to/target_directory</code> ä»¥äº¤äº’çš„æ¨¡å¼å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸­</li></ul><ol start="7"><li><code>mv</code> å‘½ä»¤ä¸»è¦ç”¨äºç§»åŠ¨æ–‡ä»¶</li></ol><ul><li><code>mv source target</code> ç§»åŠ¨æ–‡ä»¶</li><li><code>mv -f</code> å¼ºåˆ¶ç§»åŠ¨ï¼Œè¦†ç›–ç°æœ‰æ–‡ä»¶æ—¶ä¸è¦æç¤º</li></ul><ol start="8"><li><code>rm</code>å‘½ä»¤ä¸»è¦ç”¨äºåˆ é™¤æ–‡ä»¶</li></ol><ul><li><code>rm path/to/file path/to/another/file</code> åˆ é™¤ç‰¹å®šæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶</li><li><code>rm -r path/to/directory</code> é€’å½’åˆ é™¤æ–‡ä»¶å¤¹åŠæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶</li><li><code>rm -rf</code> é€’å½’åˆ é™¤ï¼Œå¹¶ä¸”ä¸è¦æç¤ºä¿¡æ¯</li></ul><ol start="9"><li><code>dd</code> å‘½ä»¤ä¸»è¦ç”¨äºè½¬åŒ–å’Œå¤åˆ¶æ–‡ä»¶,åˆ¶ä½œusbé•œåƒ</li></ol><ul><li>Clone a drive to another drive with 4MB block and ignore error <code>dd if=/dev/source_drive of=/dev/dest_drive bs=4m conv=noerror</code></li></ul><ol start="10"><li><code>file</code>å‘½ä»¤ä¸»è¦ç”¨äºç¡®å®šæ–‡ä»¶ç±»å‹</li></ol><ul><li><code>file filename</code> è¾“å‡ºæ–‡ä»¶ç±»å‹</li><li><code>file -s filename</code> ç”¨äºç‰¹æ®Šçš„æ–‡ä»¶æˆ–è€…è®¾å¤‡æ–‡ä»¶ã€‚</li></ul><h2 id="å››ã€æ–‡æœ¬ç¼–è¾‘å‘½ä»¤"><a href="#å››ã€æ–‡æœ¬ç¼–è¾‘å‘½ä»¤" class="headerlink" title="å››ã€æ–‡æœ¬ç¼–è¾‘å‘½ä»¤"></a>å››ã€æ–‡æœ¬ç¼–è¾‘å‘½ä»¤</h2><ol><li><code>cat</code> æ‰“å°å’Œä¸²è”æ–‡ä»¶</li></ol><ul><li><code>cat file</code> æ‰“å°æ–‡ä»¶å†…å®¹åˆ°æ ‡å‡†è¾“å‡º</li><li><code>cat file1 file2  &gt; targetFile</code> å°†å¤šä¸ªæ–‡ä»¶å†…å®¹ä¸²è”åˆ°ç›®æ ‡æ–‡ä»¶ä¸­</li><li><code>cat -n file</code> æ‰“å°å‡ºè¡Œæ•°åˆ°æ ‡å‡†è¾“å‡º</li></ul><ol start="2"><li><code>more</code> ç”¨äºäº’åŠ¨çš„é˜…è¯»æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥ä¸Šä¸‹æ»šåŠ¨</li></ol><ul><li><code>more file</code> æ‰“å¼€æ–‡ä»¶ï¼Œ<code>&lt;space&gt;</code>ç”¨äºç§»åŠ¨åˆ°ä¸‹ä¸€é¡µï¼Œ<code>/</code>ç”¨äºæœç´¢æ–‡ä»¶å†…å®¹ï¼Œ <code>q</code>ç”¨äºé€€å‡ºå½“å‰ç•Œé¢</li></ul><ol start="3"><li><code>head</code> è¾“å‡ºæ–‡ä»¶å¼€å§‹çš„éƒ¨åˆ†</li></ol><ul><li><code>head -n count_of_line filename</code> æŸ¥çœ‹æ–‡ä»¶çš„å‰nè¡Œ</li><li><code>head -c number_of_byte filename</code> æŸ¥çœ‹æ–‡ä»¶çš„å‰nä¸ªå­—èŠ‚</li></ul><ol start="4"><li><code>tail</code> è¾“å‡ºæ–‡ä»¶æœ€åçš„éƒ¨åˆ†</li></ol><ul><li><code>tail -n num file</code>æ‰“å°å‡ºæ–‡ä»¶æœ€ånumè¡Œ </li><li><code>tail -n +num file</code> æ‰“å°å‡ºæ–‡ä»¶ä»numå¼€å§‹çš„å‡ è¡Œ</li><li><code>tail -f file</code> ä¿æŒé˜…è¯»çŠ¶æ€ç›´åˆ° <code>Ctrl + c</code></li></ul><ol start="5"><li><code>wc</code>å‘½ä»¤ç”¨äºç»Ÿè®¡æ–‡ä»¶çš„å•è¯ï¼Œå­—èŠ‚ï¼Œè¡Œæ•° </li></ol><ul><li><code>wc -l filename</code> ç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°</li><li><code>wc -w filename</code> ç»Ÿè®¡æ–‡ä»¶çš„å­—æ•°</li><li><code>wc -c filename</code> ç»Ÿè®¡æ–‡ä»¶çš„å­—èŠ‚æ•°</li></ul><ol start="6"><li><code>æ˜¾ç¤ºæ–‡ä»¶çš„çŠ¶æ€</code> </li></ol><ul><li><code>stat filename</code> æ˜¾ç¤ºæ–‡ä»¶çš„å±æ€§æ¯”å¦‚å¤§å°ï¼Œæƒé™ç­‰ã€‚</li><li><code>stat -x filename</code>æ ¼å¼åŒ–æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†å±æ€§ä¿¡æ¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootè¿‡ç¨‹é—®é¢˜</title>
      <link href="/2019/01/04/2019-01-25-%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98/"/>
      <url>/2019/01/04/2019-01-25-%E8%BF%87%E7%A8%8B%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootè¿‡ç¨‹é—®é¢˜"><a href="#SpringBootè¿‡ç¨‹é—®é¢˜" class="headerlink" title="SpringBootè¿‡ç¨‹é—®é¢˜"></a>SpringBootè¿‡ç¨‹é—®é¢˜</h1><h2 id="springæ³¨è§£ç›¸å…³"><a href="#springæ³¨è§£ç›¸å…³" class="headerlink" title="springæ³¨è§£ç›¸å…³"></a>springæ³¨è§£ç›¸å…³</h2><h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a><code>@RestController</code></h3><p>â€‹    <code>@RestController</code> æ˜¯<code>spring 4.0</code>æ¥å¼•å…¥çš„ç®€åŒ–çš„<code>RESTful WEB</code>åº”ç”¨çš„åˆ›å»ºï¼Œæ˜¯ä¸€ä¸ªç»“åˆ<code>@Constroller</code>å’Œ<code>@ResponseBody</code>çš„æ³¨è§£ï¼Œä¸ç”¨æ¯ä¸ªç±»éƒ½ä½¿ç”¨<code>ResponseBody</code>æ³¨è§£æ¥è¾¾åˆ°å¤„ç†è¯·æ±‚çš„ç›®çš„ã€‚</p><p>â€‹    æ§åˆ¶å™¨ä½¿ç”¨<code>@RestController</code>æ³¨é‡Šè¿›è¡Œæ³¨é‡Šï¼Œå› æ­¤ä¸éœ€è¦<code>@ResponseBody</code>ã€‚</p><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a><code>@RequestMapping</code></h3><p><code>@RequestMapping</code>çš„æ³¨è§£ä¸­çš„å‚æ•°ï¼š</p><p>name ï¼š åœ¨4.0åå¼•å…¥çš„ï¼Œå¼€å§‹æˆ‘é”™æŠŠnameå½“valueç”¨ï¼Œç»“æœå‡ºç° <code>[java.lang.IllegalStateException: Ambiguous mapping found. Cannot map &#39;appController&#39; bean method]</code> ç±»ä¼¼è¿™ç§é”™è¯¯ã€‚å…¶å®nameå°±æ˜¯ä¸€ä¸ªåå­—è€Œå·²,æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­æŒ‡å‡º <code>åœ¨ç±»å‹çº§åˆ«å’Œæ–¹æ³•çº§åˆ«æ”¯æŒï¼åœ¨ä¸¤ä¸ªçº§åˆ«ä¸Šä½¿ç”¨æ—¶ï¼Œç»„åˆåç§°é€šè¿‡ä¸²è”ä»¥â€œï¼ƒâ€ä½œä¸ºåˆ†éš”ç¬¦æ´¾ç”Ÿ</code> ã€‚ä½¿ç”¨ä¸Šï¼Œå®˜æ–¹è¯´æ˜æ˜¯ä¸»è¦å¯ä»¥é€šè¿‡ä½¿ç”¨Spring jsp tagåŒ…é‡Œé¢çš„mvcUrlï¼Œæ¥ç”Ÿæˆjspåˆ°controllerçš„é“¾æ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/people"</span>)</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> HttpEntity <span class="title">getPerson</span><span class="params">(@PathVariable String id)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">"http://www.springframework.org/tags"</span> prefix=<span class="string">"s"</span> %&gt;</span><br><span class="line"></span><br><span class="line"> &lt;a href="$&#123;s:mvcUrl('PC#getPerson').arg(0,"123").build()&#125;"&gt;Get Person&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>value:ç”¨æ¥è¡¨ç¤ºä¸»è¦æ˜ å°„,æ˜¯å¸¸ç”¨çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/user"</span>,method = RequestMethod.GET,produces = <span class="string">"application/json"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.findUsers();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>path: æŒ‡å®šè®¿é—®çš„uriåœ°å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(path = <span class="string">"/user"</span>,method = RequestMethod.POST,name = <span class="string">"this is user`s post methods"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insertUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        userService.saveUser();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>method:æ˜ å°„çš„HTTPçš„è®¿é—®æ–¹æ³•ï¼Œæœ‰GET, POST, HEAD, OPTIONS, PUT, PATCH, DELETE, TRACE</p><p>consumesï¼š æŒ‡å®š<strong>å¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰</strong>ï¼Œä¾‹å¦‚application/json, text/html;</p><p>produces: æŒ‡å®š<strong>è¿”å›çš„å†…å®¹ç±»å‹</strong>ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›</p><p>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚</p><p>headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p><h3 id="Jpaå¸¸ç”¨æ³¨è§£"><a href="#Jpaå¸¸ç”¨æ³¨è§£" class="headerlink" title="Jpaå¸¸ç”¨æ³¨è§£"></a><code>Jpa</code>å¸¸ç”¨æ³¨è§£</h3><h4 id="Entity"><a href="#Entity" class="headerlink" title="@Entity"></a>@Entity</h4><p>æ ‡æ³¨åœ¨ç±»å¤–ä¾§ï¼Œæ ‡æ³¨ç€è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªå®ä½“ç±»ã€‚</p><h4 id="Table"><a href="#Table" class="headerlink" title="@Table"></a><code>@Table</code></h4><p>â€‹    æ ‡æ³¨åœ¨ç±»å¤–ä¾§ï¼Œæ ‡æ³¨å®ä½“çš„ä¸»è¡¨ï¼Œå…¶ä¸­æœ‰ <code>catalog</code>,<code>indexes</code>, <code>name</code>, <code>schema</code>ï¼Œåˆ†åˆ«æ³¨æ˜ä¸ºï¼šæŒ‡å®šdatabaseçš„ç›®å½•ï¼Œç´¢å¼•ï¼Œåç§°ï¼Œå’Œè¡¨çš„ç»“æ„æè¿° </p><p>â€‹    æ³¨æ„ï¼šschemaå®šä¹‰äº†è¡¨ã€æ¯ä¸ªè¡¨çš„å­—æ®µï¼Œè¿˜æœ‰è¡¨å’Œå­—æ®µä¹‹é—´çš„å…³ç³»ã€‚ </p><h4 id="Id"><a href="#Id" class="headerlink" title="@Id"></a>@Id</h4><p>è¡¨ç¤ºæ˜¯å®ä½“ç±»çš„ä¸»é”®</p><h4 id="GeneratedValue"><a href="#GeneratedValue" class="headerlink" title="@GeneratedValue"></a>@GeneratedValue</h4><p>â€‹    æä¾›ä¸»é”®çš„å€¼å¾—ç”Ÿæˆç­–ç•¥è§„èŒƒã€‚GeneratedValueæ³¨é‡Šå¯ä»¥ä¸Idæ³¨é‡Šä¸€èµ·åº”ç”¨äºå®ä½“æˆ–æ˜ å°„è¶…ç±»çš„ä¸»é”®å±æ€§æˆ–å­—æ®µï¼Œæ´¾ç”Ÿä¸»é”®ä¸æ”¯æŒè¯¥æ³¨è§£ã€‚æä¾›ä¸¤ä¸ªå¯é€‰å€¼ï¼š1. <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/GeneratedValue.html#generator--" target="_blank" rel="noopener">generator</a> ï¼šè¦åœ¨SequenceGeneratoræˆ–TableGeneratoræ³¨è§£ä¸­æŒ‡å®šçš„ä¸»é”®ç”Ÿæˆå™¨çš„åç§°ã€‚2. <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/GeneratedValue.html#strategy--" target="_blank" rel="noopener">strategy</a> ç”Ÿæˆç­–ç•¥ï¼Œæœ‰å››ä¸ªå¯é€‰å€¼AUTO,INDENTITY,SEQUENCE å’Œ TABLE ï¼Œé»˜è®¤ä¸ºAUTO</p><h4 id="Column"><a href="#Column" class="headerlink" title="@Column"></a>@Column</h4><p>æŒ‡å®šæŒä¹…å±æ€§æˆ–å­—æ®µçš„æ˜ å°„åˆ—ã€‚å¦‚æœæœªæŒ‡å®šColumnæ³¨é‡Šï¼Œåˆ™åº”ç”¨é»˜è®¤å€¼ã€‚</p><p><a href="https://docs.oracle.com/javaee/7/api/javax/persistence/Column.html#updatable--" target="_blank" rel="noopener">updatable</a>ï¼šæ˜¯å¦åŒ…å«åœ¨æ¡†æ¶è‡ªåŠ¨ç”Ÿæˆçš„updateè¯­å¥ä¸­ã€‚</p><p>å…¶ä»–å¯ä»¥é€šè¿‡ä¾‹å­ä¸€çœ‹ä¾¿çŸ¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column</span>(name=<span class="string">"description"</span>, nullable=<span class="keyword">false</span>, length=<span class="number">512</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> description; &#125;</span><br></pre></td></tr></table></figure><h4 id="Transient"><a href="#Transient" class="headerlink" title="@Transient"></a>@Transient</h4><p><code>@Transient</code>è¡¨ç¤ºè¯¥å±æ€§å¹¶éä¸€ä¸ªåˆ°æ•°æ®åº“è¡¨çš„å­—æ®µçš„æ˜ å°„,<code>ORM</code>æ¡†æ¶å°†å¿½ç•¥è¯¥å±æ€§.<br>å¦‚æœä¸€ä¸ªå±æ€§å¹¶éæ•°æ®åº“è¡¨çš„å­—æ®µæ˜ å°„,å°±<strong>åŠ¡å¿…</strong>å°†å…¶æ ‡ç¤ºä¸º<code>@Transient</code>,å¦åˆ™,<code>ORM</code>æ¡†æ¶é»˜è®¤å…¶æ³¨è§£ä¸º<code>@Basic</code>.</p><h4 id="ManyToOne"><a href="#ManyToOne" class="headerlink" title="@ManyToOne"></a>@ManyToOne</h4><p>è¡¨ç¤ºä¸€ä¸ªå¤šå¯¹ä¸€çš„æ˜ å°„,è¯¥æ³¨è§£æ ‡æ³¨çš„å±æ€§é€šå¸¸æ˜¯æ•°æ®åº“è¡¨çš„å¤–é”®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¢å•Orderå’Œç”¨æˆ·Useræ˜¯ä¸€ä¸ªManyToOneçš„å…³ç³»</span></span><br><span class="line"><span class="comment">//åœ¨Orderç±»ä¸­å®šä¹‰</span></span><br><span class="line"><span class="meta">@ManyToOne</span>()</span><br><span class="line"><span class="meta">@JoinColumn</span>(name=â€USERâ€)</span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="JoinColumn"><a href="#JoinColumn" class="headerlink" title="@JoinColumn"></a>@JoinColumn</h4><p>â€‹    æŒ‡å®šç”¨äºè¿æ¥å®ä½“å…³è”æˆ–å…ƒç´ é›†åˆçš„åˆ—ã€‚å¦‚æœJoinColumnæ³¨è§£æœ¬èº«æ˜¯é»˜è®¤çš„ï¼Œåˆ™å‡å®šä½¿ç”¨å•ä¸ªè¿æ¥åˆ—å¹¶åº”ç”¨é»˜è®¤å€¼ã€‚å…¶é»˜è®¤çš„åç§°ä¸ºå®ä½“Userçš„åç§°+ä¸‹åˆ’çº¿+å®ä½“Userçš„ä¸»é”®åç§°ã€‚ä¹Ÿå°±æ˜¯USER_ID.</p><h4 id="OneToMany"><a href="#OneToMany" class="headerlink" title="@OneToMany"></a>@OneToMany</h4><p>@OneToManyæè¿°ä¸€ä¸ªä¸€å¯¹å¤šçš„å…³è”,è¯¥å±æ€§åº”è¯¥ä¸ºé›†ä½“ç±»å‹,åœ¨æ•°æ®åº“ä¸­å¹¶æ²¡æœ‰å®é™…å­—æ®µ.ä¾‹å¦‚:å®ä½“Userå’ŒOrderæ˜¯OneToManyçš„å…³ç³»,åˆ™å®ä½“Userè¢«åˆ é™¤æ—¶,å…¶å…³è”çš„å®ä½“Orderä¹Ÿåº”è¯¥è¢«å…¨éƒ¨åˆ é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OneTyMany</span>(cascade=ALL)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List <span class="title">getOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> orders;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OneToOne"><a href="#OneToOne" class="headerlink" title="@OneToOne"></a>@OneToOne</h4><p>æè¿°ä¸€å¯¹ä¸€çš„å…³ç³»</p><p>å¦‚Userè¡¨å’Œpersonè¡¨ï¼Œä¸€ä¸ªæ˜¯åŸºæœ¬ä¿¡æ¯ä¸€ä¸ªæ˜¯è¯¦ç»†ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OneToOne</span>(fetch=FetchType.LAZY) <span class="comment">// Fetchæ˜¯æŠ“å–ç­–ç•¥ï¼Œå¦‚æœä¸å†™ï¼Œè‡ªåŠ¨çš„ç­–ç•¥æ˜¯LAZY</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Person <span class="title">getPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> person;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ManyToMany"><a href="#ManyToMany" class="headerlink" title="@ManyToMany"></a>@ManyToMany</h4><p>@ManyToMany æè¿°ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”.å¤šå¯¹å¤šå…³è”ä¸Šæ˜¯ä¸¤ä¸ªä¸€å¯¹å¤šå…³è”,ä½†æ˜¯åœ¨ManyToManyæè¿°ä¸­,ä¸­é—´è¡¨æ˜¯ç”±ORMæ¡†æ¶è‡ªåŠ¨å¤„ç†</p><h4 id="Embedded"><a href="#Embedded" class="headerlink" title="@Embedded"></a>@Embedded</h4><p>@Embeddedå°†å‡ ä¸ªå­—æ®µç»„åˆæˆä¸€ä¸ªç±»,å¹¶ä½œä¸ºæ•´ä¸ªEntityçš„ä¸€ä¸ªå±æ€§.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Embeddable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;city,street,zip&#125;</span><br><span class="line">    <span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Embedded</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Address <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>æ³¨è§£</th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@Null</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</td></tr><tr><td>@NotNull</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</td></tr><tr><td>@AssertTrue</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</td></tr><tr><td>@Min(value)</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼,åŒç†@Max(value)</td></tr><tr><td>@DecimalMin(value)</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼ï¼ŒåŒç†@DecimalMax(value)</td></tr><tr><td>@Size(max=, min=)</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</td></tr><tr><td>@Past</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸï¼ŒåŒç†@Future</td></tr><tr><td>@Pattern(regex=,flag=)</td><td>ç¬¦åˆæ­£åˆ™</td></tr><tr><td>Hibernate Validator é™„åŠ çš„ constraint</td><td></td></tr><tr><td>@NotBlank(message =)</td><td>éªŒè¯å­—ç¬¦ä¸²énullï¼Œä¸”é•¿åº¦å¿…é¡»å¤§äº0ï¼Œmessageè¡¨ç¤ºæç¤ºä¿¡æ¯</td></tr><tr><td>@Email</td><td>é‚®ç®±éªŒè¯</td></tr><tr><td>@Range(min=,max=,message=)</td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</td></tr><tr><td></td><td></td></tr></tbody></table><h2 id="spring-boot-é…ç½®é—®é¢˜"><a href="#spring-boot-é…ç½®é—®é¢˜" class="headerlink" title="spring boot é…ç½®é—®é¢˜"></a>spring boot é…ç½®é—®é¢˜</h2><h3 id="spring2-0åé™æ€èµ„æºè®¿é—®ä¸åˆ°çš„é—®é¢˜"><a href="#spring2-0åé™æ€èµ„æºè®¿é—®ä¸åˆ°çš„é—®é¢˜" class="headerlink" title="spring2.0åé™æ€èµ„æºè®¿é—®ä¸åˆ°çš„é—®é¢˜"></a>spring2.0åé™æ€èµ„æºè®¿é—®ä¸åˆ°çš„é—®é¢˜</h3><p>éœ€è¦æ‰‹åŠ¨å†™é…ç½®ç±»è¿›è¡Œé™æ€èµ„æºé…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ é™æ€èµ„æºæ–‡ä»¶ï¼Œå¤–éƒ¨å¯ä»¥ç›´æ¥è®¿é—®åœ°å€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/static/**"</span>).addResourceLocations(<span class="string">"classpath:/static/"</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/templates/**"</span>).addResourceLocations(<span class="string">"classpath:/templates/"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®SpringBoot-Jpaé»˜è®¤mysqlç”Ÿæˆè¡¨å¼•æ“ä¸ºInnoDB"><a href="#é…ç½®SpringBoot-Jpaé»˜è®¤mysqlç”Ÿæˆè¡¨å¼•æ“ä¸ºInnoDB" class="headerlink" title="é…ç½®SpringBoot Jpaé»˜è®¤mysqlç”Ÿæˆè¡¨å¼•æ“ä¸ºInnoDB"></a>é…ç½®<code>SpringBoot Jpa</code>é»˜è®¤<code>mysql</code>ç”Ÿæˆè¡¨å¼•æ“ä¸º<code>InnoDB</code></h3><p>åœ¨é…ç½®æ–‡ä»¶<code>appliction.properties</code>ä¸­åŠ å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu18.04 é…ç½®å…¨è¿‡ç¨‹</title>
      <link href="/2019/01/04/2019-01-04-Ubuntu%E9%85%8D%E7%BD%AE%E5%85%A8%E8%BF%87%E7%A8%8B/"/>
      <url>/2019/01/04/2019-01-04-Ubuntu%E9%85%8D%E7%BD%AE%E5%85%A8%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu18-04-é…ç½®å…¨è¿‡ç¨‹"><a href="#Ubuntu18-04-é…ç½®å…¨è¿‡ç¨‹" class="headerlink" title="Ubuntu18.04 é…ç½®å…¨è¿‡ç¨‹"></a>Ubuntu18.04 é…ç½®å…¨è¿‡ç¨‹</h1><p>å› ä¸ºæœ€è¿‘åœ¨å¼„win10åŒç³»ç»Ÿï¼Œåˆå› ä¸ºPopOsåœ¨è£…æœºçš„æ—¶å€™è®¾ç½®grubæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æ¢æˆæœ€æ–°çš„Ubuntuç¨³å®šç‰ˆæ¥åšæˆwin/ubunutåŒç³»ç»Ÿã€‚</p><h2 id="å®‰è£…é—®é¢˜"><a href="#å®‰è£…é—®é¢˜" class="headerlink" title="å®‰è£…é—®é¢˜"></a>å®‰è£…é—®é¢˜</h2><p>åœ¨è£…æœºçš„éœ€è¦ä½¿ç”¨grubåšå¯åŠ¨å¼•å¯¼ã€‚æ‰€ä»¥è®¾ç½®ä¿ç•™BIOSå¯åŠ¨åŒºåŸŸè€Œä¸æ˜¯æŒ‚è½½/bootã€‚äº²èº«ç»å†ï¼ŒUEFIå¯åŠ¨æ¨¡å¼ä¸‹ï¼ŒUbuntuçš„å¼•å¯¼æŒ‚è½½åº”è¯¥æ˜¯biosgrubï¼Œå¦åˆ™å‡ºé”™ã€‚å¯¼è‡´æ— æ³•å®¶åœ¨grubã€‚</p><h2 id="ç•Œé¢é…ç½®"><a href="#ç•Œé¢é…ç½®" class="headerlink" title="ç•Œé¢é…ç½®"></a>ç•Œé¢é…ç½®</h2><h3 id="å®‰è£…gnome-tweak-tool"><a href="#å®‰è£…gnome-tweak-tool" class="headerlink" title="å®‰è£…gnome-tweak-tool"></a>å®‰è£…gnome-tweak-tool</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gnome-tweak-tool</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ›´æ”¹shellåˆ™éœ€è¦å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gnome-shell-extensions</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½è½»æ¾æ„‰å¿«çš„ä½¿ç”¨gnome-tewak-tooläº†ã€‚</p><h3 id="ä¸»é¢˜æ–¹æ¡ˆ"><a href="#ä¸»é¢˜æ–¹æ¡ˆ" class="headerlink" title="ä¸»é¢˜æ–¹æ¡ˆ"></a>ä¸»é¢˜æ–¹æ¡ˆ</h3><h4 id="ä¸»ç•Œé¢"><a href="#ä¸»ç•Œé¢" class="headerlink" title="ä¸»ç•Œé¢"></a>ä¸»ç•Œé¢</h4><p>å› ä¸ºå‰ä¸€é˜µä½¿ç”¨Pop!_OSå‘ç°å®ƒé»˜è®¤çš„ä¸»é¢˜éå¸¸å¥½çœ‹ï¼Œæ‰€ä»¥ä¸‹è½½Poposé»˜è®¤çš„ä¸»é¢˜ï¼Œç„¶ååœ¨gnome-tweak-toolä¸­è®¾ç½®å¥½å°±okäº†ï¼Œ<a href="https://github.com/pop-os/gtk-theme" target="_blank" rel="noopener">è¿™é‡Œæ˜¯PopOsçš„gtkä¸»é¢˜åœ°å€</a>ã€‚ä½†æ˜¯å‘ç°PopOsé»˜è®¤çš„è¾“å…¥æ³•è¾“å…¥æ¡†æ˜¯é»˜è®¤ç±³é»„è‰²çš„ï¼Œæ‰“å­—çš„æ—¶å€™ä¸å¤ªæ˜¾çœ¼ï¼Œæ‰€ä»¥åœ¨åŸºç¡€ä¸Šæ·»åŠ äº†å¦‚ä¸‹ä»£ç ã€‚æ·»åŠ æ–¹æ³•ï¼š</p><ol><li>æ ¹æ®è¯´æ˜ä¸‹è½½Pop-theme</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:system76/pop</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install pop-theme</span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä½åˆ° <code>/usr/share/themes/Pop/gnome-shell/</code> çš„gnome-shell.csså’ŒPop.css å°†IBusçš„ç•Œé¢ä»£ç æ›¿æ¢æˆå¦‚ä¸‹ä»£ç </li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.candidate-popup-content</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-index</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-box</span><span class="selector-pseudo">:selected</span> <span class="selector-class">.candidate-index</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-box</span> &#123;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0ms</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-box</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.06);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.9);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-box</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.1);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.9);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-box</span><span class="selector-pseudo">:selected</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0046DB</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.85);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-page-button-box</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">28px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vertical</span> <span class="selector-class">.candidate-page-button-box</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.horizontal</span> <span class="selector-class">.candidate-page-button-box</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-page-button</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-page-button-previous</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-page-button-next</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.candidate-page-button-icon</span> &#123;</span><br><span class="line">  <span class="attribute">icon-size</span>: <span class="number">1.23077em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆå“ï¼š</p><p><img src="https://wx4.sinaimg.cn/large/006tNc79gy1g2dt15yse2j318u0miagk.jpg" alt="è¾“å…¥æ³•"></p><ol start="3"><li>åº”ç”¨ç¨‹åºçª—å£ç”¨çš„æ˜¯ macOS High Sierra  ä¸»é¢˜ï¼Œä»¿ç…§MACçš„çª—å£ã€‚æ¯”è¾ƒæ¼‚äº®ã€‚<a href="https://www.gnome-look.org/p/1013714/" target="_blank" rel="noopener">macOS High Sierra ä¸»é¢˜</a>ï¼Œä¸‹è½½ä¸‹æ¥åè§£å‹åæ”¾åˆ° <code>/usr/share/themes</code> ä¸‹ï¼Œä¹‹åå°±èƒ½åœ¨gnome-tweak-toolä¸­çœ‹åˆ°äº†ï¼Œè®¾ç½®å®Œæˆåå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæœã€‚</li></ol><p><img src="https://wx4.sinaimg.cn/large/006tNc79gy1g2dt17ye4jj31900u01dj.jpg" alt="ä¸»é¢˜"></p><h4 id="gdmä¸»é¢˜"><a href="#gdmä¸»é¢˜" class="headerlink" title="gdmä¸»é¢˜"></a>gdmä¸»é¢˜</h4><p>gdmä¸»é¢˜é€‰ç”¨ç±»ä¼¼MACç™»é™†çš„ä¸»é¢˜ï¼Œç•Œé¢ç¾è§‚ï¼Œè€Œä¸”è¿˜æœ‰æ¯›ç»ç’ƒæ•ˆæœã€‚<a href="https://www.gnome-look.org/p/1207015/" target="_blank" rel="noopener">High Ubunterra</a>ä¸‹è½½åè§£å‹ä¹‹åï¼Œç›´æ¥å‘½ä»¤è¡Œæ‰§è¡Œ./install.shã€‚ä¹‹åç›´æ¥å³é”®è®¾ç½®åï¼Œç›´æ¥å°†é”å±ç•Œé¢ç›´æ¥è®¾ç½®å¥½ã€‚å…¶å®ä¸»è¦ç›®çš„çš„å°±æ˜¯å°† <code>/usr/share/gnome-shell/theme</code> ä¸­çš„ubuntu.cssæ›¿æ¢æ‰ã€‚</p><h4 id="grubä¸»é¢˜"><a href="#grubä¸»é¢˜" class="headerlink" title="grubä¸»é¢˜"></a>grubä¸»é¢˜</h4><p>grubçš„ä¸»é¢˜æ¯”è¾ƒå°‘ï¼Œæ¨èçš„å°±æ˜¯<a href="https://www.gnome-look.org/p/1000140/" target="_blank" rel="noopener">Breeze GRUB2 theme</a> æ˜¯ä¸€æ¬¾æ¯”è¾ƒæ¼‚äº®ç¾è§‚çš„ä¸»é¢˜ã€‚å…·ä½“æˆæœç•Œé¢å¯ä»¥ç‚¹å‡»é“¾æ¥åœ°å€æŸ¥çœ‹ã€‚</p><p>æ™®é€šä¸»é¢˜éœ€è¦ä½œå¦‚ä¸‹é¡ºåºçš„æ“ä½œï¼Œä½†æ˜¯ Breeze Grub2 theme æœ‰è„šæœ¬ï¼Œç›´æ¥æ‰§è¡Œè§£å‹åçš„è„šæœ¬ç¨‹åºï¼Œå°±okäº†ã€‚</p><ol><li>åˆ›å»ºgrubçš„ä¸»é¢˜æ–‡ä»¶å¤¹</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /boot/grub/themes</span><br></pre></td></tr></table></figure><ol start="2"><li>å°†ä¸»é¢˜åŒ…ç§»åŠ¨åˆ°è¿™ä¸ªç›®å½•ä¸‹</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp ä¸»é¢˜åŒ…å /boot/grub/themes/</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/grub.d/00_header</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRUB_THEME=<span class="string">"/boot/grub/themes/ä¸»é¢˜åŒ…å/theme.txt"</span></span><br><span class="line">GRUB_GFXMODE=<span class="string">"1920x1080x32"</span></span><br></pre></td></tr></table></figure><ol start="5"><li>æœ€åæ‰§è¡Œ update-grub å‘½ä»¤</li></ol><h3 id="gnomeæ‹“å±•æ¨è"><a href="#gnomeæ‹“å±•æ¨è" class="headerlink" title="gnomeæ‹“å±•æ¨è"></a>gnomeæ‹“å±•æ¨è</h3><p>æˆ‘æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„æ‹“å±•å®‰è£…ï¼Œåœ¨Ubuntuç³»ç»Ÿä¸‹ï¼Œä¸€èˆ¬å®‰è£…å¦‚ä¸‹æ‹“å±•ã€‚</p><ol><li><p>User themes å¯ä»¥ä½¿ç”¨ç”¨æˆ·ç›®å½•ä¸‹çš„ä¸»é¢˜</p></li><li><p>removeable Drive Menu å½“æ’å…¥ç§»é™¤è®¾å¤‡çš„æ—¶å€™åœ¨ä¸Šæ–¹æœ‰çŠ¶æ€å›¾æ ‡æé†’ã€‚</p></li><li><p>Caffeine å¯ä»¥å…³é—­å±ä¿å’Œè‡ªåŠ¨æŒ‚èµ·ï¼Œå¾ˆå¥½ç”¨ã€‚</p></li><li><p>Dash To Dock å¦‚æœä½ ä¸å–œæ¬¢ubuntuçš„ä¾§è¾¹dockå¯ä»¥å°è¯•è¿™ä¸ªdockï¼Œæ¯”è¾ƒç¾è§‚çš„dockï¼Œå¯ä»¥è®¾ç½®åœ¨ä¾§è¾¹æˆ–è€…åœ¨åº•ä¸‹ã€‚</p></li><li><p>openWeather å¯ä»¥åœ¨é¡¶éƒ¨æ ä¸­æŸ¥çœ‹å¤©æ°”ï¼Œç‚¹å‡»å¯ä»¥æŸ¥çœ‹æœ€è¿‘å¤©æ°”ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ åœ°å€ã€‚</p></li><li><p>ClipBord Indicator æ˜¯å¯ä»¥è®°å½•ç²˜è´´æ¿çš„å†…å®¹ï¼Œæœ‰æ—¶å¯ä»¥é¿å…é‡å¤å¤åˆ¶çš„æ“ä½œã€‚</p></li></ol><p>æ¨èçš„æœ‰è¿™å‡ ä¸ªï¼Œä½†æ˜¯gnome-shellæ‹“å±•å¯è°“éå¸¸çš„å¤šï¼Œå¹¶ä¸”å¤§å¤šæ•°éƒ½éå¸¸å¥½ç”¨ï¼Œå¯ä»¥å» <a href="https://extensions.gnome.org/" target="_blank" rel="noopener">gnome extensions å®˜ç½‘</a> çœ‹ä¸€çœ‹ï¼Œçœ‹æœ‰æ²¡æœ‰æ›´é€‚åˆè‡ªå·±çš„ã€‚</p><h3 id="é…ç½®Vimå’Œç»ˆç«¯"><a href="#é…ç½®Vimå’Œç»ˆç«¯" class="headerlink" title="é…ç½®Vimå’Œç»ˆç«¯"></a>é…ç½®Vimå’Œç»ˆç«¯</h3><h4 id="é…ç½®vim"><a href="#é…ç½®vim" class="headerlink" title="é…ç½®vim"></a>é…ç½®vim</h4><p>æˆ‘vimä½¿ç”¨çš„æ˜¯vundleæ’ä»¶ç®¡ç†å™¨ï¼Œé¦–å…ˆè¦å®‰è£…vundle.</p><p>é¦–å…ˆè¦ä¸‹è½½git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…vundle</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vi</span><br></pre></td></tr></table></figure><p>å°†å¦‚ä¸‹é…ç½®æ›¿æ¢åˆ°.vimrc ä¸­ï¼Œé¦–å…ˆè¦è¿›è¡Œå¤‡ä»½å“¦ï¼ï¼ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible <span class="string">" be iMproved, required</span></span><br><span class="line"><span class="string">filetype off "</span> required</span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="built_in">let</span> mapleader=<span class="string">","</span></span><br><span class="line"><span class="built_in">set</span> rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">call vundle<span class="comment">#begin()</span></span><br><span class="line"></span><br><span class="line">Plugin <span class="string">'VundleVim/Vundle.vim'</span></span><br><span class="line">Plugin <span class="string">'scrooloose/nerdtree'</span></span><br><span class="line">Plugin <span class="string">'kien/ctrlp.vim'</span></span><br><span class="line">Plugin <span class="string">'junegunn/fzf'</span></span><br><span class="line">Plugin <span class="string">'Shougo/neocomplete.vim'</span></span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline'</span></span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline-themes'</span></span><br><span class="line">Plugin <span class="string">'terryma/vim-smooth-scroll'</span></span><br><span class="line">Plugin <span class="string">'terryma/vim-expand-region'</span></span><br><span class="line">Plugin <span class="string">'tpope/vim-commentary'</span></span><br><span class="line">Plugin <span class="string">'tpope/vim-surround'</span></span><br><span class="line">Plugin <span class="string">'godlygeek/tabular'</span></span><br><span class="line">Plugin <span class="string">'plasticboy/vim-markdown'</span></span><br><span class="line">Plugin <span class="string">'tpope/vim-fugitive'</span></span><br><span class="line">Plugin <span class="string">'airblade/vim-gitgutter'</span></span><br><span class="line">Plugin <span class="string">'justinmk/vim-sneak'</span></span><br><span class="line">Plugin <span class="string">'powerline/fonts'</span></span><br><span class="line">Plugin <span class="string">'scrooloose/nerdcommenter'</span> </span><br><span class="line">Plugin <span class="string">'suan/vim-instant-markdown'</span></span><br><span class="line">Plugin <span class="string">'mzlogin/vim-markdown-toc'</span></span><br><span class="line">call vundle<span class="comment">#end()            " required</span></span><br><span class="line">filetype plugin indent on</span><br><span class="line"><span class="string">" let g:airline_powerline_fonts = 1</span></span><br><span class="line"><span class="string">map &lt;C-n&gt; :NERDTreeToggle&lt;CR&gt;</span></span><br><span class="line"><span class="string">"</span> smooth-scroll</span><br><span class="line"><span class="keyword">function</span> SmoothScroll(up)</span><br><span class="line">    <span class="keyword">if</span> a:up</span><br><span class="line">        <span class="built_in">let</span> scrollaction=<span class="string">"^Y"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">let</span> scrollaction=<span class="string">"^E"</span></span><br><span class="line">    endif</span><br><span class="line">    <span class="built_in">exec</span> <span class="string">"normal "</span> . scrollaction</span><br><span class="line">    redraw</span><br><span class="line">    <span class="built_in">let</span> counter=1</span><br><span class="line">    <span class="keyword">while</span> counter&lt;&amp;scroll</span><br><span class="line">        <span class="built_in">let</span> counter+=1</span><br><span class="line">        sleep 10m</span><br><span class="line">        redraw</span><br><span class="line">        <span class="built_in">exec</span> <span class="string">"normal "</span> . scrollaction</span><br><span class="line">    endwhile</span><br><span class="line">endfunction</span><br><span class="line">noremap &lt;silent&gt; &lt;c-u&gt; :call smooth_scroll<span class="comment">#up(&amp;scroll, 15, 2)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c<span class="_">-d</span>&gt; :call smooth_scroll<span class="comment">#down(&amp;scroll, 15, 2)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c-b&gt; :call smooth_scroll<span class="comment">#up(&amp;scroll*2, 10, 4)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c<span class="_">-f</span>&gt; :call smooth_scroll<span class="comment">#down(&amp;scroll*2, 10, 4)&lt;CR&gt;</span></span><br><span class="line"><span class="built_in">set</span> mouse= </span><br><span class="line">map &lt;ScrollWheelUp&gt; &lt;C-Y&gt;</span><br><span class="line">map &lt;ScrollWheelDown&gt; &lt;C-E&gt;</span><br><span class="line"><span class="string">"é«˜äº®é”™è¯¯</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:syntastic_enable_highlighting=1</span><br><span class="line"><span class="string">" å¿«é€Ÿé€‰ä¸­</span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> g:expand_region_use_select_mode = 1</span><br><span class="line"><span class="string">" map w &lt;Plug&gt;(expand_region_expand)</span></span><br><span class="line"><span class="string">"</span> map W &lt;Plug&gt;(expand_region_shrink)</span><br><span class="line"><span class="string">" markdown setting</span></span><br><span class="line"><span class="string">let g:vim_markdown_toc_autofit = 1</span></span><br><span class="line"><span class="string">let g:vim_markdown_autowrite = 1</span></span><br><span class="line"><span class="string">let g:vim_markdown_folding_disabled = 1</span></span><br><span class="line"><span class="string">set updatetime=100</span></span><br><span class="line"><span class="string">let g:gitgutter_grep=''</span></span><br><span class="line"><span class="string">let g:gitgutter_terminal_reports_focus=0</span></span><br></pre></td></tr></table></figure><p>æœ€ååœ¨vimä¸­ä½¿ç”¨<code>:PluginInstall</code> å®‰è£…æ’ä»¶ã€‚å…·ä½“çš„æ’ä»¶çš„ä½œç”¨ä»¥åä¼šä¸“é—¨å†™ä¸€ç¯‡æ¥ä»‹ç»ã€‚ä¹Ÿå¯è‡ªè¡Œç™¾åº¦ã€‚</p><h4 id="é…ç½®ç»ˆç«¯"><a href="#é…ç½®ç»ˆç«¯" class="headerlink" title="é…ç½®ç»ˆç«¯"></a>é…ç½®ç»ˆç«¯</h4><p>æˆ‘ä½¿ç”¨çš„æ˜¯zshï¼Œé¦–å…ˆå®‰è£…zsh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install zsh</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½®å°†zshä¸ºé»˜è®¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chsh -s /bin/zsh</span><br></pre></td></tr></table></figure><p>æœ€åä½¿ç”¨è‘—åçš„oh-my-zsh æ¥è£…ç‚¹Bå§ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®gitç¯å¢ƒå’Œgithubè¿æ¥"><a href="#é…ç½®gitç¯å¢ƒå’Œgithubè¿æ¥" class="headerlink" title="é…ç½®gitç¯å¢ƒå’Œgithubè¿æ¥"></a>é…ç½®gitç¯å¢ƒå’Œgithubè¿æ¥</h3><p>å®‰è£…å¥½gitåï¼Œé…ç½®git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"ä½ çš„githubç”¨æˆ·å"</span></span><br><span class="line">git config --global user.email <span class="string">"ä½ çš„githubé‚®ç®±åœ°å€"</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¯†é’¥ï¼Œä¸€è·¯enterå°±å¯ä»¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"ä½ è‡ªå·±çš„githubå¯¹åº”çš„é‚®ç®±åœ°å€"</span></span><br></pre></td></tr></table></figure><p>å°†æ–‡ä»¶ä¸­ç”Ÿæˆçš„å¯†é’¥å¤åˆ¶åˆ°githubä¸Šçš„é…ç½®ä¸­å»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Javaå¼€å‘ç¯å¢ƒ"><a href="#é…ç½®Javaå¼€å‘ç¯å¢ƒ" class="headerlink" title="é…ç½®Javaå¼€å‘ç¯å¢ƒ"></a>é…ç½®Javaå¼€å‘ç¯å¢ƒ</h3><h4 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h4><ol><li>åœ¨<a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½jdkæºç ,å¹¶åœ¨è§£å‹å‰åˆ›å»º <code>/usr/local/java</code> æ–‡ä»¶å¤¹</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/<span class="built_in">local</span>/java</span><br></pre></td></tr></table></figure><ol start="2"><li>å°†æ–‡ä»¶è§£å‹åˆ°åˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯ä»¥è§£å‹åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åç§»åŠ¨åˆ°åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸‹ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf jdk1.8.0_191.tar.gz </span><br><span class="line"></span><br><span class="line">mv jdk1.8.0_191 /usr/<span class="built_in">local</span>/java/</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨vimç¼–è¾‘<code>/etc/profile</code> æ–‡ä»¶,åœ¨ç»“å°¾å¤„æ·»åŠ å¦‚ä¸‹å†…å®¹</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/java/jdk1.8.0_191 </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span> </span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br></pre></td></tr></table></figure><ol start="4"><li>æ‰§è¡Œ <code>source /etc/profile</code> åˆ·æ–°é…ç½®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ <code>java -version</code>æ¥æŸ¥çœ‹æ˜¯å¦æˆåŠŸã€‚</li></ol><p><img src="https://wx3.sinaimg.cn/large/006tNc79gy1g2dt166451j318s03waav.jpg" alt="java"></p><h4 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h4><ol><li><p>åœ¨<a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">å®˜ç½‘</a> ä¸‹è½½æºç åŒ…ï¼ŒåŒæ ·è§£å‹å‰åˆ›å»º <code>/usr/local/maven</code>æ–‡ä»¶å¤¹</p></li><li><p>å°†æ–‡ä»¶è§£å‹åˆ°<code>/usr/local/maven</code>ä¸­ã€‚</p></li><li><p>ä½¿ç”¨vimç¼–è¾‘ <code>/etc/profile</code>æ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MAVEN_HOME=/usr/<span class="built_in">local</span>/maven/apache-maven-3.6.0</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$MAVEN_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><ol start="4"><li><p>åŒæ ·ä½¿ç”¨<code>source /etc/profile</code> å‘½ä»¤åˆ·æ–°é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨<code>mvn -v</code> å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚ </p></li><li><p>é…ç½®é˜¿é‡Œmavené•œåƒ</p></li></ol><p>ç¼–è¾‘ <code>/usr/local/maven/apache-maven-3.6.0/conf/setting.xml</code>ï¼Œåœ¨<code>&lt;mirrors&gt;&lt;/mirrors&gt;</code>æ ‡ç­¾å†…æ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">      &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">      &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">  ã€€ã€€&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;        </span><br><span class="line">    &lt;/mirror&gt;</span><br></pre></td></tr></table></figure><p><img src="https://wx1.sinaimg.cn/large/006tNc79gy1g2dt176wswj319k068di3.jpg" alt="maven"></p><h3 id="Mysqlå®‰è£…å’Œæ•°æ®åº“ç®¡ç†è½¯ä»¶æ¨è"><a href="#Mysqlå®‰è£…å’Œæ•°æ®åº“ç®¡ç†è½¯ä»¶æ¨è" class="headerlink" title="Mysqlå®‰è£…å’Œæ•°æ®åº“ç®¡ç†è½¯ä»¶æ¨è"></a>Mysqlå®‰è£…å’Œæ•°æ®åº“ç®¡ç†è½¯ä»¶æ¨è</h3><ol><li>è¿›å…¥<a href="https://dev.mysql.com/downloads/repo/apt/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½ubuntuçš„debåŒ…ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤å®‰è£…</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i mysql-apt-config_0.8.11-1_all.deb</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ·æ–°æºåˆ—è¡¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…mysql</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server mysql-client</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä¼šè®©ä½ è¾“å…¥å¯†ç ï¼Œè¾“å…¥å°±è¡Œäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntuç³»çš„IBUSè¾“å…¥æ³•ä¸Šæ–¹panelçš„è¾“å…¥æ³•å›¾æ ‡æ¶ˆå¤±é—®é¢˜</title>
      <link href="/2018/12/29/2018-12-18-Pop!_Os%E7%9A%84Ibus%E8%BE%93%E5%85%A5%E6%B3%95%E4%B8%8A%E6%96%B9panel%E5%9B%BE%E6%A0%87%E6%B6%88%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2018/12/29/2018-12-18-Pop!_Os%E7%9A%84Ibus%E8%BE%93%E5%85%A5%E6%B3%95%E4%B8%8A%E6%96%B9panel%E5%9B%BE%E6%A0%87%E6%B6%88%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntuç³»çš„IBUSè¾“å…¥æ³•ä¸Šæ–¹panelçš„è¾“å…¥æ³•å›¾æ ‡æ¶ˆå¤±é—®é¢˜"><a href="#Ubuntuç³»çš„IBUSè¾“å…¥æ³•ä¸Šæ–¹panelçš„è¾“å…¥æ³•å›¾æ ‡æ¶ˆå¤±é—®é¢˜" class="headerlink" title="Ubuntuç³»çš„IBUSè¾“å…¥æ³•ä¸Šæ–¹panelçš„è¾“å…¥æ³•å›¾æ ‡æ¶ˆå¤±é—®é¢˜"></a>Ubuntuç³»çš„IBUSè¾“å…¥æ³•ä¸Šæ–¹panelçš„è¾“å…¥æ³•å›¾æ ‡æ¶ˆå¤±é—®é¢˜</h1><p>æœ€è¿‘è¿·ä¸Šäº†Pop!_Osï¼ŒåŸºäºUbuntuçš„å‘è¡Œç‰ˆï¼Œéå¸¸ç®€æ´ï¼Œå¼€ç®±å³ç”¨ã€‚å’Œubuntuç›¸åŒï¼Œibusçš„è¾“å…¥æ³•å›¾æ ‡æœ‰æ—¶æ¶ˆå¤±ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä»¥ä¸‹ï¼Œæ–¹ä¾¿åé¢å†å‡ºç°é—®é¢˜çš„æ—¶å€™æŸ¥é˜…ã€‚</p><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ibus-daemon -drx</span><br></pre></td></tr></table></figure><p>è§£å†³ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºSpringMvcå®ç°restFulæ—¶DELETEå’ŒPUTå‡ºç°é”™è¯¯</title>
      <link href="/2018/11/09/2018-12-18-%E5%85%B3%E4%BA%8ESpringMvc%E4%BD%BF%E7%94%A8DELETE%E5%92%8CPUT%E8%AF%B7%E6%B1%82%E6%97%B6405%E9%94%99%E8%AF%AF/"/>
      <url>/2018/11/09/2018-12-18-%E5%85%B3%E4%BA%8ESpringMvc%E4%BD%BF%E7%94%A8DELETE%E5%92%8CPUT%E8%AF%B7%E6%B1%82%E6%97%B6405%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³äºRESTful"><a href="#å…³äºRESTful" class="headerlink" title="å…³äºRESTful"></a>å…³äºRESTful</h1><p>æˆ‘ç†è§£çš„restfulæ˜¯ä¸€ç§é£æ ¼ï¼Œæ¯ä¸€ä¸ªurlè¡¨ç¤ºä¸€ä¸ªèµ„æºï¼Œä¸€ä¸ªèµ„æºä¸åŒçš„æ“ä½œäº«ç”¨åŒä¸€ä¸ªæ¥å£ï¼Œä½†æ˜¯ä¼ è¾“çš„çŠ¶æ€æ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚httpä¸­çš„POST,DELETE,PUT,GETã€‚</p><h1 id="å†springMVCä¸­å®ç°RESTful"><a href="#å†springMVCä¸­å®ç°RESTful" class="headerlink" title="å†springMVCä¸­å®ç°RESTful"></a>å†springMVCä¸­å®ç°RESTful</h1><ol><li>web.xmlä¸­é…ç½®</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-<span class="class"><span class="keyword">class</span>&gt;<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">web</span>.<span class="title">filter</span>.<span class="title">HiddenHttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">filter</span>-<span class="title">name</span>&gt;<span class="title">HiddenHttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/*&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">filter</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">filter</span>-<span class="title">name</span>&gt;<span class="title">HttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">filter</span>-<span class="title">class</span>&gt;<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">web</span>.<span class="title">filter</span>.<span class="title">HttpPutFormContentFilter</span>&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">filter</span>-<span class="title">name</span>&gt;<span class="title">HttpMethodFilter</span>&lt;/<span class="title">filter</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/*&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>springmvc controlå±‚ä½¿ç”¨ç›¸åº”çŠ¶æ€ç æ¥æ ‡è¯†ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/navbarCategory/&#123;id&#125;"</span>, method = RequestMethod.DELETE)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«å’Œå…³ç³»</title>
      <link href="/2018/11/09/2018-11-08-String%E5%92%8CStringBuffer%E5%92%8CStringBuilder%E7%9A%84%E8%81%94%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB/"/>
      <url>/2018/11/09/2018-11-08-String%E5%92%8CStringBuffer%E5%92%8CStringBuilder%E7%9A%84%E8%81%94%E7%B3%BB%E5%92%8C%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«å’Œå…³ç³»"><a href="#Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«å’Œå…³ç³»" class="headerlink" title="Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«å’Œå…³ç³»"></a>Stringã€StringBufferã€StringBuilderçš„åŒºåˆ«å’Œå…³ç³»</h1><p><code>String</code>å£°æ˜åæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œè€Œ<code>Stringbuffer</code>å’Œ<code>StringBuilder</code>æ˜¯æ•°æ®ç»“æ„æ˜¯å˜é‡ï¼Œæ‰€ä»¥æ¯”Stringåœ¨è¿æ¥å­—ç¬¦æ—¶æ•ˆç‡é«˜ã€‚</p><p>å¹¶ä¸”StringBufferå’ŒStringBuilderçš„åŒºåˆ«æ˜¯StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„(synchronized) ï¼Œè€ŒStringBuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥é€Ÿåº¦å¤§è‡´æ’è¡Œä¸ºï¼šStringBuilder&gt;StringBuffer&gt;String</p><p>ä»¥ä¸Šåªæ˜¯åŸºäºå°è±¡æˆ–è€…è¯´æ˜¯æ­»è®°ç¡¬èƒŒçš„ä¸œè¥¿ï¼Œæ²¡æœ‰çœ‹æºç æ˜¯å¦çœŸçš„æ˜¯è¿™æ ·çš„ã€‚ä¸‹é¢å°±æ¥çœ‹çœ‹String,StringBuilder,StringBufferçš„æºç æ¥çœŸæ­£çš„è®°ä½ã€‚</p><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>Stringä¸­çš„concatæ–¹æ³•å®ç°äº†å­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚</p><h3 id="å®ä¾‹å˜é‡"><a href="#å®ä¾‹å˜é‡" class="headerlink" title="å®ä¾‹å˜é‡"></a>å®ä¾‹å˜é‡</h3><p>Stringç±»ä¸­æœ‰ä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œåˆ†åˆ«ä¸ºvalueå’Œhash</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** The value is used for character storage. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></span><br></pre></td></tr></table></figure><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>Stringçš„æ„é€ æ–¹æ³•å¾ˆå¤šï¼Œä½†æ˜¯éƒ½æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢æ¥è¯´æ¯”è¾ƒå¸¸ç”¨çš„å‡ ç§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“æ–°å»ºä¸€ä¸ªStringå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šé»˜è®¤ä»˜ä¸€ä¸ªç©ºçš„å­—ç¬¦åºåˆ—,è¯·æ³¨æ„ï¼Œç”±äºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä¸å¿…ä½¿ç”¨æ­¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = <span class="string">""</span>.value;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ„é€ æ–¹æ³•,ä¼šé»˜è®¤æ–°å»ºä¸€ä¸ªå€¼ä¸ºoriginalçš„å­—ç¬¦ä¸²ã€‚åŒä¸Šï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸å¯å˜çš„ï¼Œå°±æ²¡å¿…è¦è¿™æ ·å£°æ˜ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(String original)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = original.value;</span><br><span class="line">        <span class="keyword">this</span>.hash = original.hash;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨copyofæ–¹æ³•ç”¨æ¥å¤åˆ¶ä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ï¼Œåç»­ä¿®æ”¹å­—ç¬¦æ•°ç»„ï¼Œä¸ä¼šå½±å“åˆ°æ–°å»ºçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">char</span> value[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.value = Arrays.copyOf(value, value.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="concatæ–¹æ³•"><a href="#concatæ–¹æ³•" class="headerlink" title="concatæ–¹æ³•"></a>concatæ–¹æ³•</h3><p>ä¸ºä»€ä¹ˆè¯´Stringçš„æ•ˆç‡ä½ï¼Œå°±ä½“ç°åœ¨concatæ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™æ¯æ¬¡éƒ½è¦è¿”å›ä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">concat</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> otherLen = str.length();</span><br><span class="line">        <span class="keyword">if</span> (otherLen == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> len = value.length;</span><br><span class="line">        <span class="keyword">char</span> buf[] = Arrays.copyOf(value, len + otherLen);</span><br><span class="line">        str.getChars(buf, len);</span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ–°å»ºçš„Stringå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(buf, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h2><p>StringBuilderç»§æ‰¿äº†AbstractStringBuilderï¼Œå…¶ä¸­çš„å®ä¾‹å˜é‡å’ŒStringä¸­çš„åŸºæœ¬ç›¸åŒï¼Œ</p><h3 id="æ„é€ æ–¹æ³•-1"><a href="#æ„é€ æ–¹æ³•-1" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuilder</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(capacity);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•</span></span><br><span class="line">AbstractStringBuilder(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        value = <span class="keyword">new</span> <span class="keyword">char</span>[capacity];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="appendæ–¹æ³•"><a href="#appendæ–¹æ³•" class="headerlink" title="appendæ–¹æ³•"></a>appendæ–¹æ³•</h3><p>å¯ä»¥çœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰æ–°å»ºå¯¹è±¡ï¼Œåªæ˜¯åœ¨æ”¹å˜å¯¹è±¡ä¸­çš„å†…å®¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> StringBuilder <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.append(str);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// appendè°ƒç”¨çš„è¿˜æ˜¯çˆ¶ç±»çš„appendæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> appendNull();</span><br><span class="line">        <span class="keyword">int</span> len = str.length();</span><br><span class="line">        ensureCapacityInternal(count + len);</span><br><span class="line">        str.getChars(<span class="number">0</span>, len, value, count);</span><br><span class="line"><span class="comment">//æŠŠvalueæ‰©å®¹åå†æŠŠstråŠ è¿›å»</span></span><br><span class="line">        count += len;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a>StringBuffer</h2><p>å’ŒStringBuilderä¸€æ ·ï¼Œä¹Ÿæ˜¯ç»§æ‰¿äº†AbstractStringBuilderç±»ï¼Œä½†æ˜¯çœ‹ä¸€ä¸ªappendè¿™ä¸ªæ–¹æ³•çš„æºç å°±èƒ½å¤ŸçŸ¥é“æœ‰ä»€ä¹ˆåŒºåˆ«äº†</p><h3 id="appendæ–¹æ³•-1"><a href="#appendæ–¹æ³•-1" class="headerlink" title="appendæ–¹æ³•"></a>appendæ–¹æ³•</h3><p>æ·»åŠ äº†synchronizedå…³é”®å­—ï¼Œä½¿å¾—å˜ä¸ºçº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä»£ä»·å°±æ˜¯æ•ˆç‡ä¸å¦‚StringBuilderé«˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> StringBuffer <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    toStringCache = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">super</span>.append(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒRPCæ¡†æ¶ï¼Œæ•°æ®åº“ä¸­é—´ä»¶çš„æ¦‚å¿µè®¤çŸ¥</title>
      <link href="/2018/10/30/2018-10-29-%E4%BB%80%E4%B9%88%E6%98%AF%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%8CRPC%E6%A1%86%E6%9E%B6%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/"/>
      <url>/2018/10/30/2018-10-29-%E4%BB%80%E4%B9%88%E6%98%AF%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%8CRPC%E6%A1%86%E6%9E%B6%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒRPCæ¡†æ¶ï¼Œæ•°æ®åº“ä¸­é—´ä»¶çš„æ¦‚å¿µè®¤çŸ¥"><a href="#æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒRPCæ¡†æ¶ï¼Œæ•°æ®åº“ä¸­é—´ä»¶çš„æ¦‚å¿µè®¤çŸ¥" class="headerlink" title="æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒRPCæ¡†æ¶ï¼Œæ•°æ®åº“ä¸­é—´ä»¶çš„æ¦‚å¿µè®¤çŸ¥"></a>æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒRPCæ¡†æ¶ï¼Œæ•°æ®åº“ä¸­é—´ä»¶çš„æ¦‚å¿µè®¤çŸ¥</h1><h2 id="æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="æ¶ˆæ¯ä¸­é—´ä»¶"></a>æ¶ˆæ¯ä¸­é—´ä»¶</h2><h3 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶"></a>ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶</h3><p>å¯¹ä¸­é—´ä»¶çš„ç†è§£å¤§æ¦‚å°±æ˜¯å…·ä½“ä¸šåŠ¡å’Œåº•å±‚é€»è¾‘è§£è€¦çš„ç»„ä»¶ã€‚ç›¸å½“äºå‰ç«¯ä¸šåŠ¡å’Œåº•å±‚é€»è¾‘çš„ä¸­é—´æ¡¥æ¢ã€‚</p><p>æ¶ˆæ¯ä¸­é—´ä»¶æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€å’Œæ¥å—æ¶ˆæ¯çš„åŸºç¡€æœåŠ¡è®¾æ–½ã€‚</p><h3 id="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ"><a href="#èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ" class="headerlink" title="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ"></a>èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ</h3><ul><li>ä¸šåŠ¡è§£è€¦ï¼šäº¤æ˜“ç³»ç»Ÿä¸éœ€è¦çŸ¥é“çŸ­ä¿¡é€šçŸ¥æœåŠ¡çš„å­˜åœ¨ï¼Œåªéœ€è¦å‘å¸ƒæ¶ˆæ¯</li><li>å‰Šå³°å¡«è°·ï¼šæ¯”å¦‚ä¸Šæ¸¸ç³»ç»Ÿçš„ååèƒ½åŠ›é«˜äºä¸‹æ¸¸ç³»ç»Ÿï¼Œåœ¨æµé‡æ´ªå³°æ—¶å¯èƒ½ä¼šå†²å®ä¸‹æ¸¸ç³»ç»Ÿï¼Œæ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥åœ¨å³°å€¼æ—¶å †ç§¯æ¶ˆæ¯ï¼Œè€Œåœ¨å³°å€¼è¿‡å»åä¸‹æ¸¸ç³»ç»Ÿæ…¢æ…¢æ¶ˆè´¹æ¶ˆæ¯è§£å†³æµé‡æ´ªå³°çš„é—®é¢˜</li><li>äº‹ä»¶é©±åŠ¨ï¼šç³»ç»Ÿä¸ç³»ç»Ÿä¹‹é—´å¯ä»¥é€šè¿‡æ¶ˆæ¯ä¼ é€’çš„å½¢å¼é©±åŠ¨ä¸šåŠ¡ï¼Œä»¥æµå¼çš„æ¨¡å‹å¤„ç†</li></ul><h2 id="RPCæ¡†æ¶"><a href="#RPCæ¡†æ¶" class="headerlink" title="RPCæ¡†æ¶"></a>RPCæ¡†æ¶</h2><h3 id="ä»€ä¹ˆæ˜¯RPCæ¡†æ¶"><a href="#ä»€ä¹ˆæ˜¯RPCæ¡†æ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯RPCæ¡†æ¶"></a>ä»€ä¹ˆæ˜¯RPCæ¡†æ¶</h3><p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®RPCï¼ˆRemote Procedure Call Protocol) ä¸¤å°æœåŠ¡å™¨Aï¼ŒBï¼Œä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨AæœåŠ¡å™¨ä¸Šï¼Œæƒ³è¦è°ƒç”¨BæœåŠ¡å™¨ä¸Šåº”ç”¨æä¾›çš„å‡½æ•°/æ–¹æ³•ï¼Œ<br>ç”±äºä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚</p><h3 id="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ-1"><a href="#èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ-1" class="headerlink" title="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ"></a>èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ</h3><ul><li>å»ºç«‹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„TCPé“¾æ¥ï¼Œä¸åŒçš„RPCåè®®ï¼Œæœ‰ä¸åŒçš„è¿æ¥å¯»å€æ–¹å¼ã€‚</li><li>åœ¨å‘èµ·è¿œç¨‹è°ƒç”¨æ—¶ï¼Œç”±äºç½‘ç»œåè®®æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæ‰€ä»¥åœ¨ä¼ è¾“å‰è¦è¿›è¡Œå¯¹ä¼ è¾“å®ä½“è¿›è¡Œè½¬æ¢äºŒè¿›åˆ¶çš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯å°±åºåˆ—åŒ–è¿‡ç¨‹ï¼ˆSerializeï¼‰ï¼Œé€šè¿‡å¯»å€å’ŒäºŒè¿›åˆ¶çš„æ•°æ®ä¼ è¾“åˆ°æœåŠ¡å™¨ç«¯</li><li>åœ¨æ¥å—åˆ°æ•°æ®åï¼Œéœ€è¦è¿›è¡Œååºåˆ—åŒ–è¿‡ç¨‹è§£æäºŒè¿›åˆ¶æ•°æ®ã€‚</li></ul><p>å…¶å®å°±æ˜¯è§£å†³åœ¨åˆ†å¸ƒå¼ä¸‹ï¼Œæ¨ªå‘æ‹“å±•çš„å‰æä¸‹ï¼Œä¸åŒæœåŠ¡å™¨ç›¸äº’è°ƒç”¨æ–¹æ³•çš„é—®é¢˜ã€‚</p><h2 id="æ•°æ®åº“ä¸­é—´ä»¶"><a href="#æ•°æ®åº“ä¸­é—´ä»¶" class="headerlink" title="æ•°æ®åº“ä¸­é—´ä»¶"></a>æ•°æ®åº“ä¸­é—´ä»¶</h2><h3 id="ä»€ä¹ˆæ˜¯æ•°æ®åº“ä¸­é—´ä»¶"><a href="#ä»€ä¹ˆæ˜¯æ•°æ®åº“ä¸­é—´ä»¶" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°æ®åº“ä¸­é—´ä»¶"></a>ä»€ä¹ˆæ˜¯æ•°æ®åº“ä¸­é—´ä»¶</h3><p>åŒæ ·åœ¨åˆ†å¸ƒå¼çš„æ¶æ„ä¸­ï¼Œæ•°æ®åº“ä¹Ÿæ”¾åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦é€šè¿‡ä¸­é—´çš„è·¯ç”±è¿›è¡Œè°ƒç”¨ã€‚è¿™ä¸ªè·¯ç”±å®é™…ä¸Šå°±æ˜¯æ•°æ®åº“ä¸­é—´ä»¶ã€‚</p><h3 id="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ-2"><a href="#èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ-2" class="headerlink" title="èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ"></a>èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿ</h3><ul><li>å®ç°è¯»å†™åˆ†ç¦»ï¼Œä½†æ˜¯æ¯ä¸ªæœåŠ¡å™¨ä¸Šéƒ½éœ€è¦æœ‰ä¸€ä»½å®Œæ•´çš„æ•°æ®åº“</li><li>å®ç°åˆ†åº“åˆ†è¡¨ï¼Œé€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶è¿›è¡ŒæŸ¥è¯¢åˆ†æ´¾åˆ°æŸä¸€ä¸ªç‰¹å®šçš„æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡è¿™ä¸ªæœåŠ¡å™¨æŸ¥è¯¢å‡ºå†…å®¹è¿”å›åˆ°æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå†é€šè¿‡ä¸­é—´ä»¶è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Junitçš„ä½¿ç”¨å’Œæºç åˆ†æ</title>
      <link href="/2018/10/29/2018-10-28-Junit4/"/>
      <url>/2018/10/29/2018-10-28-Junit4/</url>
      
        <content type="html"><![CDATA[<h1 id="Junitçš„ä½¿ç”¨å’Œæºç åˆ†æ"><a href="#Junitçš„ä½¿ç”¨å’Œæºç åˆ†æ" class="headerlink" title="Junitçš„ä½¿ç”¨å’Œæºç åˆ†æ"></a>Junitçš„ä½¿ç”¨å’Œæºç åˆ†æ</h1><p>Junitæ˜¯ä¸€ä¸ªç¼–å†™å¯é‡å¤æµ‹è¯•çš„Javaæµ‹è¯•æ¡†æ¶ï¼Œä»£ç ç¼–å†™éå¸¸æœ‰æŠ€å·§æ€§ï¼Œå€¼å¾—åå¤é˜…è¯»ã€‚</p><h2 id="è·Ÿç€å®˜æ–¹æ–‡æ¡£å­¦ä¹ Junit"><a href="#è·Ÿç€å®˜æ–¹æ–‡æ¡£å­¦ä¹ Junit" class="headerlink" title="è·Ÿç€å®˜æ–¹æ–‡æ¡£å­¦ä¹ Junit"></a>è·Ÿç€å®˜æ–¹æ–‡æ¡£å­¦ä¹ Junit</h2><p>å®˜æ–¹æ–‡æ¡£å¾€å¾€æ˜¯å­¦ä¹ æœ€å¥½çš„èµ„æ–™ã€‚</p><h3 id="ç®€å•æµ‹è¯•ä¾‹å­"><a href="#ç®€å•æµ‹è¯•ä¾‹å­" class="headerlink" title="ç®€å•æµ‹è¯•ä¾‹å­"></a>ç®€å•æµ‹è¯•ä¾‹å­</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FirstTest firstTest = <span class="keyword">new</span> FirstTest();</span><br><span class="line">        <span class="keyword">int</span> result = firstTest.add(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//  assertEquals(4,result); </span></span><br><span class="line">        assertEquals(<span class="number">3</span>,result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">       - å¦‚æœåˆ¤æ–­ä¸ç›¸ç­‰çš„æ—¶å€™ï¼Œåå°æŠ¥é”™ä¿¡æ¯</span><br><span class="line">       - java.lang.AssertionError: </span><br><span class="line">       - Expected :<span class="number">4</span></span><br><span class="line">       - Actual   :<span class="number">3</span></span><br><span class="line">       - &lt;Click to see difference&gt;</span><br><span class="line">     --&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™åªæ˜¯ç®€å•çš„ä¾‹å­ï¼Œå®é™…ä¸Šçš„å•å…ƒæµ‹è¯•è¦æ¯”è¿™ä¸ªå¤æ‚çš„å¤šï¼Œåœ¨å®é™…åº”ç”¨ä¸Šå•å…ƒæµ‹è¯•ååˆ†æœ‰å¿…è¦ï¼Œç¼–å†™åå°ä»£ç æ—¶èƒ½å¤Ÿå°½å¿«æ£€éªŒä»£ç çš„æ­£ç¡®æ€§ã€‚</p><h3 id="Assertions-æ–­è¨€"><a href="#Assertions-æ–­è¨€" class="headerlink" title="Assertions æ–­è¨€"></a>Assertions æ–­è¨€</h3><p>Junitæä¾›äº†æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒObjectç±»å’Œæ•°ç»„çš„æ–­è¨€ï¼Œå‚æ•°æ˜¯ é¢„æœŸå€¼åé¢æ˜¯å®é™…å€¼ï¼Œå¯é€‰é¡¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯æ–­è¨€å¤±è´¥æ—¶è¾“å‡ºçš„å†…å®¹ï¼Œä¸å…¶ä»–æ–­è¨€ç¨æœ‰ä¸åŒçš„æ˜¯ï¼ŒAssertThatçš„å‚æ•°æ˜¯ å¤±è´¥è¾“å‡ºçš„å†…å®¹ï¼Œå®é™…å€¼å’Œä¸€ä¸ªMatcher<br>Objectã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssertTests</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertArrayEquals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">byte</span>[] expected = <span class="string">"trial"</span>.getBytes();</span><br><span class="line">    <span class="keyword">byte</span>[] actual = <span class="string">"trial"</span>.getBytes();</span><br><span class="line">    assertArrayEquals(<span class="string">"failure - byte arrays not same"</span>, expected, actual);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertEquals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertEquals(<span class="string">"failure - strings are not equal"</span>, <span class="string">"text"</span>, <span class="string">"text"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertFalse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertFalse(<span class="string">"failure - should be false"</span>, <span class="keyword">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertNotNull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertNotNull(<span class="string">"should not be null"</span>, <span class="keyword">new</span> Object());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertNotSame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertNotSame(<span class="string">"should not be same Object"</span>, <span class="keyword">new</span> Object(), <span class="keyword">new</span> Object());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertNull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertNull(<span class="string">"should be null"</span>, <span class="keyword">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertSame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Integer aNumber = Integer.valueOf(<span class="number">768</span>);</span><br><span class="line">    assertSame(<span class="string">"should be same"</span>, aNumber, aNumber);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// JUnit Matchers assertThat</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertThatBothContainsString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThat(<span class="string">"albumen"</span>, both(containsString(<span class="string">"a"</span>)).and(containsString(<span class="string">"b"</span>)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertThatHasItems</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThat(Arrays.asList(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>), hasItems(<span class="string">"one"</span>, <span class="string">"three"</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertThatEveryItemContainsString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThat(Arrays.asList(<span class="keyword">new</span> String[] &#123; <span class="string">"fun"</span>, <span class="string">"ban"</span>, <span class="string">"net"</span> &#125;), everyItem(containsString(<span class="string">"n"</span>)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Core Hamcrest Matchers with assertThat</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertThatHamcrestCoreMatchers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThat(<span class="string">"good"</span>, allOf(equalTo(<span class="string">"good"</span>), startsWith(<span class="string">"good"</span>)));</span><br><span class="line">    assertThat(<span class="string">"good"</span>, not(allOf(equalTo(<span class="string">"bad"</span>), equalTo(<span class="string">"good"</span>))));</span><br><span class="line">    assertThat(<span class="string">"good"</span>, anyOf(equalTo(<span class="string">"bad"</span>), equalTo(<span class="string">"good"</span>)));</span><br><span class="line">    assertThat(<span class="number">7</span>, not(CombinableMatcher.&lt;Integer&gt; either(equalTo(<span class="number">3</span>)).or(equalTo(<span class="number">4</span>))));</span><br><span class="line">    assertThat(<span class="keyword">new</span> Object(), not(sameInstance(<span class="keyword">new</span> Object())));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAssertTrue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertTrue(<span class="string">"failure - should be true"</span>, <span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¼‚å¸¸æµ‹è¯•"><a href="#å¼‚å¸¸æµ‹è¯•" class="headerlink" title="å¼‚å¸¸æµ‹è¯•"></a>å¼‚å¸¸æµ‹è¯•</h3><p>ä¸‹é¢åˆ†ä¸ºä¸¤ç§æ–¹å¼æ¥å®Œæˆå¯¹å¼‚å¸¸çš„æµ‹è¯•</p><h4 id="æœŸå¾…çš„å¼‚å¸¸"><a href="#æœŸå¾…çš„å¼‚å¸¸" class="headerlink" title="æœŸå¾…çš„å¼‚å¸¸"></a>æœŸå¾…çš„å¼‚å¸¸</h4><p>å¦‚ä½•æ£€æµ‹ç¨‹åºæ˜¯å¦å¦‚æœŸçš„æŠ›å‡ºå¼‚å¸¸ï¼Œjunitå¯ä»¥ä½¿ç”¨æ³¨è§£çš„å‚æ•°æ¥å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>(expected = IndexOutOfBoundsException.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testException</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">new</span> ArrayList&lt;Integer&gt;().get(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·±å…¥çš„å¼‚å¸¸"><a href="#æ·±å…¥çš„å¼‚å¸¸" class="headerlink" title="æ·±å…¥çš„å¼‚å¸¸"></a>æ·±å…¥çš„å¼‚å¸¸</h4><p>ä¸Šè¿°æ–¹æ³•å¯¹äºç®€å•çš„æƒ…å†µå¾ˆæœ‰ç”¨ï¼Œä½†å®ƒæœ‰å…¶å±€é™æ€§ã€‚ä¾‹å¦‚ï¼Œæ‚¨æ— æ³•åœ¨å¼‚å¸¸ä¸­æµ‹è¯•æ¶ˆæ¯çš„å€¼ï¼Œä¹Ÿæ— æ³•åœ¨æŠ›å‡ºå¼‚å¸¸åæµ‹è¯•åŸŸå¯¹è±¡çš„çŠ¶æ€</p><ul><li>try/catch è¯­å¥</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTryCatch</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> ArrayList&lt;Integer&gt;().get(<span class="number">0</span>);</span><br><span class="line">        fail(<span class="string">"å¤±è´¥ä¿¡æ¯"</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IndexOutOfBoundsException indexOutOfBoundsExecption)&#123;</span><br><span class="line">          assertThat(indexOutOfBoundsExecption.getMessage(), is(<span class="string">"Index: 0, Size: 0"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>rule è§„åˆ™</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Rule</span></span><br><span class="line"><span class="keyword">public</span> ExpectedException thrown = ExpectedException.none();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testExpectException</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Object&gt; list = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">    thrown.expect(IndexOutOfBoundsException.class);</span><br><span class="line">    thrown.expectMessage(<span class="string">"Index: 0, Size: 0"</span>);</span><br><span class="line">    list.get(<span class="number">0</span>); <span class="comment">// execution will never get past this line</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Matchers-and-assertThat-åŒ¹é…å™¨å’ŒassertThat"><a href="#Matchers-and-assertThat-åŒ¹é…å™¨å’ŒassertThat" class="headerlink" title="Matchers and assertThat [ åŒ¹é…å™¨å’ŒassertThat ]"></a>Matchers and assertThat [ åŒ¹é…å™¨å’ŒassertThat ]</h3><p>æ–°åŠ å…¥äº†<code>assertThat</code>æ–­è¨€æœºåˆ¶ assertThat([value], [matcher statement]);</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assertThat(x, is(<span class="number">3</span>));</span><br><span class="line">assertThat(x, is(not(<span class="number">4</span>)));</span><br><span class="line">assertThat(responseString, either(containsString(<span class="string">"color"</span>)).or(containsString(<span class="string">"colour"</span>)));</span><br><span class="line">assertThat(myList, hasItem(<span class="string">"3"</span>));</span><br></pre></td></tr></table></figure><p><code>assertThat</code> æ›´å…·æœ‰å¯è¯»æ€§å’Œå¯è¾“å…¥æ€§ï¼Œå¹¶ä¸”æœ‰ç»„åˆæ€§ï¼Œå°±åƒ <code>is(not(4))</code> ä»»ä½•Macherséƒ½å¯ä»¥ç»„åˆèµ·æ¥ä½¿ç”¨</p><p>ä»¥å‰çš„assertEqualsç­‰ä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œ<code>assertThat</code> åœ¨ä½¿ç”¨Matchersçš„æ—¶å€™éœ€è¦ä½¿ç”¨ <code>import static org.hamcrest.CoreMatchers.*;</code>æ¥å¼•ç”¨ã€‚é‡Œé¢çš„æ–¹æ³•éå¸¸å¤šã€‚ã€‚</p><h2 id="junitæºç è·Ÿè¯»"><a href="#junitæºç è·Ÿè¯»" class="headerlink" title="junitæºç è·Ÿè¯»"></a>junitæºç è·Ÿè¯»</h2><h3 id="ä½¿ç”¨junitæµç¨‹"><a href="#ä½¿ç”¨junitæµç¨‹" class="headerlink" title="ä½¿ç”¨junitæµç¨‹"></a>ä½¿ç”¨junitæµç¨‹</h3><h4 id="ä½¿ç”¨ç»§æ‰¿è‡ªTestCaseç±»"><a href="#ä½¿ç”¨ç»§æ‰¿è‡ªTestCaseç±»" class="headerlink" title="ä½¿ç”¨ç»§æ‰¿è‡ªTestCaseç±»"></a>ä½¿ç”¨ç»§æ‰¿è‡ªTestCaseç±»</h4><p>ä¸‹é¢é€šè¿‡è¿è¡Œjunitçš„è‡ªå¸¦çš„testï¼Œæºç¨‹åºä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Some simple tests.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleTest</span> <span class="keyword">extends</span> <span class="title">TestCase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> fValue1;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> fValue2;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        fValue1 = <span class="number">2</span>;</span><br><span class="line">        fValue2 = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Test <span class="title">suite</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           * the type safe way</span></span><br><span class="line"><span class="comment">           *</span></span><br><span class="line"><span class="comment">          TestSuite suite= new TestSuite();</span></span><br><span class="line"><span class="comment">          suite.addTest(</span></span><br><span class="line"><span class="comment">              new SimpleTest("add") &#123;</span></span><br><span class="line"><span class="comment">                   protected void runTest() &#123; testAdd(); &#125;</span></span><br><span class="line"><span class="comment">              &#125;</span></span><br><span class="line"><span class="comment">          );</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          suite.addTest(</span></span><br><span class="line"><span class="comment">              new SimpleTest("testDivideByZero") &#123;</span></span><br><span class="line"><span class="comment">                   protected void runTest() &#123; testDivideByZero(); &#125;</span></span><br><span class="line"><span class="comment">              &#125;</span></span><br><span class="line"><span class="comment">          );</span></span><br><span class="line"><span class="comment">          return suite;</span></span><br><span class="line"><span class="comment">          */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * the dynamic way</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TestSuite(SimpleTest.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> result = fValue1 + fValue2;</span><br><span class="line">        <span class="comment">// forced failure result == 5</span></span><br><span class="line">        assertTrue(result == <span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> unused;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDivideByZero</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> zero = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">8</span> / zero;</span><br><span class="line">        unused = result; <span class="comment">// avoid warning for not using result</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testEquals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assertEquals(<span class="number">12</span>, <span class="number">12</span>);</span><br><span class="line">        assertEquals(<span class="number">12L</span>, <span class="number">12L</span>);</span><br><span class="line">        assertEquals(<span class="keyword">new</span> Long(<span class="number">12</span>), <span class="keyword">new</span> Long(<span class="number">12</span>));</span><br><span class="line"></span><br><span class="line">        assertEquals(<span class="string">"Size"</span>, <span class="number">12</span>, <span class="number">13</span>);</span><br><span class="line">        assertEquals(<span class="string">"Capacity"</span>, <span class="number">12.0</span>, <span class="number">11.99</span>, <span class="number">0.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        junit.textui.TestRunner.run(suite());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥çœ‹mainæ–¹æ³•ï¼Œä½¿ç”¨ <code>junit.textui.TestRunner.run(suite());</code> ä½¿ç”¨TestRunnerè¿è¡Œtestã€‚é¦–å…ˆå…ˆæ¥çœ‹suiteæ–¹æ³•ï¼Œæœ‰ä¸¤ç§æ–¹æ³•</p><ol><li>é™æ€çš„,éœ€è¦æ‰‹åŠ¨åœ¨testSuiteä¸­æ·»åŠ testã€‚</li><li>åŠ¨æ€çš„ï¼Œé™æ€éœ€è¦å®ç°TestCaseçš„runTestæ–¹æ³•ã€‚è€ŒåŠ¨æ€çš„åªéœ€è¦è¿”å› TestSuite(SimpleTest.class);ï¼Œä¸‹é¢æ¥çœ‹è¿™ä¸ªTestSuiteç±»</li></ol><p>testSuiteå®é™…ä¸Šå°±æ˜¯è¿è¡Œtestçš„é›†åˆï¼Œä½¿ç”¨vectoræ¥å­˜å‚¨test,å…¶ä¸­è¿™é‡Œä½¿ç”¨åˆ°çš„TestSuiteæ„é€ æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TestSuite</span><span class="params">(<span class="keyword">final</span> Class&lt;?&gt; theClass)</span> </span>&#123;</span><br><span class="line">        addTestsFromTestCase(theClass);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addTestsFromTestCase</span><span class="params">(<span class="keyword">final</span> Class&lt;?&gt; theClass)</span> </span>&#123;</span><br><span class="line">        fName = theClass.getName();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            getTestConstructor(theClass); <span class="comment">// Avoid generating multiple error messages</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            addTest(warning(<span class="string">"Class "</span> + theClass.getName() + <span class="string">" has no public constructor TestCase(String name) or TestCase()"</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// è¿™ä¸ªç±»æ˜¯å¦æ˜¯publicçš„ å¦‚æœä¸æ˜¯ å‘å‡ºwarning ï¼Œå¹¶ä¸”fail(message)</span></span><br><span class="line">        <span class="keyword">if</span> (!Modifier.isPublic(theClass.getModifiers())) &#123;</span><br><span class="line">            addTest(warning(<span class="string">"Class "</span> + theClass.getName() + <span class="string">" is not public"</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Class&lt;?&gt; superClass = theClass;</span><br><span class="line">        List&lt;String&gt; names = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"><span class="comment">//        è¿™å¥è¯è¯´æ˜çš„æ˜¯å¦‚æœè¿™ä¸ªç±»æ˜¯superClassçš„è¶…ç±»ï¼Œæˆ–è€…æ¥å£å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line">        <span class="keyword">while</span> (Test.class.isAssignableFrom(superClass)) &#123;</span><br><span class="line"><span class="comment">//            å¦‚æœæ˜¯true  æœ‰é¡ºåºçš„è¿”å›å£°æ˜çš„æ–¹æ³•</span></span><br><span class="line">            <span class="keyword">for</span> (Method each : MethodSorter.getDeclaredMethods(superClass)) &#123;</span><br><span class="line">                addTestMethod(each, names, theClass);</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//            è·å¾—superclassç±»ï¼Œé€’å½’çš„æŸ¥æ‰¾testæ–¹æ³•</span></span><br><span class="line">            superClass = superClass.getSuperclass();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fTests.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            addTest(warning(<span class="string">"No tests found in "</span> + theClass.getName()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æœ€åæåˆ°çš„ <code>fTests.size() == 0</code> è¿™é‡Œä¼šå‘ç”Ÿwarning ç„¶åfailã€‚è¿™ä¸ªfTests å·²ç»å†å‰é¢å£°æ˜<br>äº†ï¼Œå£°æ˜æ–¹æ³•æ˜¯ï¼š<code>private Vector&lt;Test&gt; fTests = new Vector&lt;Test&gt;(10);</code> </p><p>åœ¨å¯¹æ¯ä¸ªå£°æ˜çš„æ–¹æ³•å¾ªç¯çš„æ—¶å€™ï¼Œä½¿ç”¨åˆ° <code>addTestMethod</code> æ–¹æ³•ï¼Œæ¥å¯¹æ¯ä¸ªæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addTestMethod</span><span class="params">(Method m, List&lt;String&gt; names, Class&lt;?&gt; theClass)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è·å¾—æ–¹æ³•åå¦‚æœlistæ•°ç»„ä¸­å·²ç»åŒ…å«è¿™ä¸ªæ–¹æ³•åï¼Œå°±ç›´æ¥é€€å‡º</span></span><br><span class="line">        String name = m.getName();</span><br><span class="line">        <span class="keyword">if</span> (names.contains(name)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!isPublicTestMethod(m)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isTestMethod(m)) &#123;</span><br><span class="line">                addTest(warning(<span class="string">"Test method isn't public: "</span> + m.getName() + <span class="string">"("</span> + theClass.getCanonicalName() + <span class="string">")"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// æŠŠè¿™ä¸ªæ–¹æ³•ååŠ å…¥åˆ°names Listä¸­</span></span><br><span class="line">        names.add(name);</span><br><span class="line">        addTest(createTest(theClass, name));</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å†æ¥çœ‹å¤–å±‚çš„addTestæ–¹æ³• æŠŠæ‹¥æœ‰çš„testæ–¹æ³•æ”¾åˆ°fTestsä¸­ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTest</span><span class="params">(Test test)</span> </span>&#123;</span><br><span class="line">        fTests.add(test);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨createTestæ¥é’ˆå¯¹testæ–¹æ³•åˆ›å»ºä¸€ä¸ªTestç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">public</span> Test <span class="title">createTest</span><span class="params">(Class&lt;?&gt; theClass, String name)</span> </span>&#123;</span><br><span class="line">        Constructor&lt;?&gt; constructor;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            constructor = getTestConstructor(theClass);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> warning(<span class="string">"Class "</span> + theClass.getName() + <span class="string">" has no public constructor TestCase(String name) or TestCase()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Object test;</span><br><span class="line"><span class="comment">// é€šè¿‡åå°„æ–¹å¼è·å¾—æ–¹æ³•çš„testå®ä¾‹</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (constructor.getParameterTypes().length == <span class="number">0</span>) &#123;</span><br><span class="line">                test = constructor.newInstance(<span class="keyword">new</span> Object[<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">if</span> (test <span class="keyword">instanceof</span> TestCase) &#123;</span><br><span class="line">                    ((TestCase) test).setName(name);<span class="comment">//å¦‚æœç»§æ‰¿TestCase</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                test = constructor.newInstance(<span class="keyword">new</span> Object[]&#123;name&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> (warning(<span class="string">"Cannot instantiate test case: "</span> + name + <span class="string">" ("</span> + Throwables.getStacktrace(e) + <span class="string">")"</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> (warning(<span class="string">"Exception in constructor: "</span> + name + <span class="string">" ("</span> + Throwables.getStacktrace(e.getTargetException()) + <span class="string">")"</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> (warning(<span class="string">"Cannot access test case: "</span> + name + <span class="string">" ("</span> + Throwables.getStacktrace(e) + <span class="string">")"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (Test) test;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä»¥ä¸Šçš„æ­¥éª¤è·å¾—äº†è¿™ä¸ªç±»ä¸­åŠå…¶çˆ¶ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•çš„Testã€‚</p><p>ä½¿ç”¨testRunner.runè¿è¡Œtest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        junit.textui.TestRunner.run(suite());</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨TestRunnerçš„runçš„é™æ€æ–¹æ³• è¿”å›ä¸€ä¸ªTestResultç”¨æ¥è¿”å›ç»“æœã€‚   </span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">public</span> TestResult <span class="title">run</span><span class="params">(Test test)</span> </span>&#123;</span><br><span class="line">        TestRunner runner = <span class="keyword">new</span> TestRunner();</span><br><span class="line">        <span class="keyword">return</span> runner.doRun(test);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨runnerçš„doRunæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TestResult <span class="title">doRun</span><span class="params">(Test test)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> doRun(test, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> TestResult <span class="title">doRun</span><span class="params">(Test suite, <span class="keyword">boolean</span> wait)</span> </span>&#123;</span><br><span class="line"><span class="comment">//      ç”¨æ¥è¿”å›ç»“æœçš„TestResult</span></span><br><span class="line">        TestResult result = createTestResult();</span><br><span class="line"><span class="comment">// æ³¨å†Œä¸€ä¸ªTestListener</span></span><br><span class="line">        result.addListener(fPrinter);</span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line"><span class="comment">//      test.runæ–¹æ³•</span></span><br><span class="line">        suite.run(result);</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> runTime = endTime - startTime;</span><br><span class="line">        fPrinter.print(result, runTime);</span><br><span class="line">        pause(wait);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒTestçš„æ ¸å¿ƒæ–¹æ³• è¿”å›TestResultè¿”å›ç»“æœã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates the TestResult to be used for the test run.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> TestResult <span class="title">createTestResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> TestResult();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">(TestListener listener)</span> </span>&#123;</span><br><span class="line"><span class="comment">// protected List&lt;TestListener&gt; fListeners;</span></span><br><span class="line">        fListeners.add(listener);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// suite.run() fTestsä¸­çš„æ¯ä¸€ä¸ªtest </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(TestResult result)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Test each : fTests) &#123;</span><br><span class="line">            <span class="keyword">if</span> (result.shouldStop()) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            runTest(each, result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Runs the test case and collects the results in TestResult.</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨testResultçš„runæ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(TestResult result)</span> </span>&#123;</span><br><span class="line">    result.run(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿è¡Œtest</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(<span class="keyword">final</span> TestCase test)</span> </span>&#123;</span><br><span class="line">        startTest(test);</span><br><span class="line">        Protectable p = <span class="keyword">new</span> Protectable() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">protect</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                test.runBare();<span class="comment">//æ‰§è¡ŒrunBareæ–¹æ³•æ‰§è¡Œtestç”¨ä¾‹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        runProtected(test, p);</span><br><span class="line"></span><br><span class="line">        endTest(test);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startTest</span><span class="params">(Test test)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> count = test.countTestCases();</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            fRunTests += count;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (TestListener each : cloneListeners()) &#123;</span><br><span class="line">            each.startTest(test);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åœ¨resultPriterä¸­ä½¿ç”¨ç»§æ‰¿TestListenerä¸­çš„startTestæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startTest</span><span class="params">(Test test)</span> </span>&#123;</span><br><span class="line">        getWriter().print(<span class="string">"."</span>);<span class="comment">//è¿è¡Œä¸€ä¸ªåˆ™åŠ ä¸€ä¸ªç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (fColumn++ &gt;= <span class="number">40</span>) &#123;</span><br><span class="line">            getWriter().println();</span><br><span class="line">            fColumn = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œä¸€ä¸ªç©ºçš„æµ‹è¯•åºåˆ—</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runBare</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Throwable exception = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®è£…ç½®ã€‚æ¯”å¦‚æ‰“å¼€ç½‘ç»œè¿æ¥ç­‰ï¼Œåœ¨æ‰§è¡Œæµ‹è¯•ä¹‹å‰è°ƒç”¨æ–¹æ³•ã€‚</span></span><br><span class="line">        setUp();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// çœ‹ä¸‹é¢çš„runTestæ–¹æ³• </span></span><br><span class="line">            runTest();<span class="comment">//æ‰§è¡Œtest</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable running) &#123;</span><br><span class="line">            exception = running;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                tearDown();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable tearingDown) &#123;</span><br><span class="line">                <span class="keyword">if</span> (exception == <span class="keyword">null</span>) exception = tearingDown;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (exception != <span class="keyword">null</span>) <span class="keyword">throw</span> exception;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">runTest</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        assertNotNull(<span class="string">"TestCase.fName cannot be null"</span>, fName); <span class="comment">// Some VMs crash when calling getMethod(null,null);</span></span><br><span class="line">        Method runMethod = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            runMethod = getClass().getMethod(fName, (Class[]) <span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            fail(<span class="string">"Method \""</span> + fName + <span class="string">"\" not found"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">// .......... runMethod.invoke(this); æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">            runMethod.invoke(<span class="keyword">this</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ–¹æ³•æ‰§è¡Œé”™è¯¯ï¼Œä¼šè§¦å‘è¿™ä¸ªå¼‚å¸¸ ä¼šè¿ç»­è¢«ä¸Šå±‚æ•æ‰åˆ°</span></span><br><span class="line">            e.fillInStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> e.getTargetException();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.fillInStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåˆ™æœ€ç»ˆå°†è¢«runProtectedä¸­çš„try/catchæ•æ‰åˆ°åè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runProtected</span><span class="params">(<span class="keyword">final</span> Test test, Protectable p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        p.protect();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (AssertionFailedError e) &#123;</span><br><span class="line">    <span class="comment">// éªŒè¯å¤±è´¥ï¼Œæ·»åŠ ä¸€æ¡å¤±è´¥ä¿¡æ¯</span></span><br><span class="line">        addFailure(test, e);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ThreadDeath e) &#123; <span class="comment">// don't catch ThreadDeath by accident</span></span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">        addError(test, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä»¥ä¸Šçš„æ­¥éª¤æ‰§è¡Œå®Œä¸€ä¸ªtestã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­Dequeå’ŒArrayDeque</title>
      <link href="/2018/10/26/2018-10-24-Java%E4%B8%ADDeque%E5%8F%8A%E5%85%B6%E5%AD%90%E7%B1%BB/"/>
      <url>/2018/10/26/2018-10-24-Java%E4%B8%ADDeque%E5%8F%8A%E5%85%B6%E5%AD%90%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaä¸­Dequeå’ŒArrayDeque"><a href="#Javaä¸­Dequeå’ŒArrayDeque" class="headerlink" title="Javaä¸­Dequeå’ŒArrayDeque"></a>Javaä¸­Dequeå’ŒArrayDeque</h1><h2 id="Dequeç±»"><a href="#Dequeç±»" class="headerlink" title="Dequeç±»"></a>Dequeç±»</h2><p>ä¸€ä¸ªçº¿æ€§çš„å¯åœ¨åŒç«¯æ’å…¥ã€åˆ é™¤èŠ‚ç‚¹çš„ç»“æ„ã€‚ä»–åå­—æ—¶Dequeï¼Œå®é™…ä¸Šæ—¶â€œdouble ended queueâ€çš„ç®€å†™ï¼›</p><h2 id="ArrayDequeç±»"><a href="#ArrayDequeç±»" class="headerlink" title="ArrayDequeç±»"></a>ArrayDequeç±»</h2><p>å¯¹äºArrayDequeä¸­çš„æ•°ç»„ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„å¾ªç¯æ•°ç»„ï¼Œæ‰€è°“å¾ªç¯æ˜¯æŒ‡å…ƒç´ åˆ°æ•°ç»„å°¾ä¹‹åå¯ä»¥æ¥ç€ä»æ•°ç»„å¤´å¼€å§‹ï¼Œæ•°ç»„çš„é•¿åº¦ã€ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ éƒ½ä¸headå’Œtailè¿™ä¸¤ä¸ªå˜é‡æœ‰å…³</p><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>ArrayDequeå°±åƒä»–çš„åå­—ä¸€æ ·ï¼Œä½¿ç”¨Arrayæ•°ç»„æ¥å®ç°Dequeç»“æ„ã€‚æ„é€ æ–¹æ³•å’Œä»¥å‰æåˆ°çš„ArrayListç›¸ä¼¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayDeque</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–çš„æ•°ç»„å¤§å°æ˜¯16</span></span><br><span class="line">        elements = <span class="keyword">new</span> Object[<span class="number">16</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayDeque</span><span class="params">(<span class="keyword">int</span> numElements)</span> </span>&#123;</span><br><span class="line">        allocateElements(numElements);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayDeque</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        allocateElements(c.size());</span><br><span class="line">        <span class="comment">// addAllæ–¹æ³•å°±æ˜¯ä¸ºc è¿›è¡Œforå¾ªç¯æ·»åŠ </span></span><br><span class="line">        addAll(c);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å’Œç§»é™¤æ–¹æ³•"><a href="#æ·»åŠ å’Œç§»é™¤æ–¹æ³•" class="headerlink" title="æ·»åŠ å’Œç§»é™¤æ–¹æ³•"></a>æ·»åŠ å’Œç§»é™¤æ–¹æ³•</h3><ul><li>addæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å‰é¢æ·»åŠ å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ä¸ŠåŠ å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">            <span class="comment">// åœ¨å‰é¢æ·»åŠ çš„æ—¶å€™ï¼Œhead-1 çš„ä½ç½®ä¸Šæ’å…¥ e</span></span><br><span class="line">        elements[head = (head - <span class="number">1</span>) &amp; (elements.length - <span class="number">1</span>)] = e;</span><br><span class="line">        <span class="keyword">if</span> (head == tail)</span><br><span class="line">            doubleCapacity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">            æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªä½ç½®</span><br><span class="line">        elements[tail] = e;</span><br><span class="line">        <span class="comment">/* </span></span><br><span class="line"><span class="comment">         * å¦‚æœå½“å‰æ·»åŠ ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½® ä¸ä¸Š é•¿åº¦-1 </span></span><br><span class="line"><span class="comment">         *ï¼ˆå› ä¸ºé•¿åº¦éƒ½æ˜¯2çš„å€æ•°ï¼Œæ‰€ä»¥-1ä¹‹åï¼Œ2è¿›åˆ¶åå‡ ä½éƒ½æ˜¯1ï¼Œä¿è¯è´Ÿæ•°çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿæ‰¾åˆ°æ­£ç¡®çš„ç´¢å¼•ï¼‰</span></span><br><span class="line"><span class="comment">         * å¦‚æœtailå’Œheadç›¸ç­‰è¯´æ˜æ•°ç»„æ»¡äº†ï¼Œéœ€è¦æ‰©å®¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> ( (tail = (tail + <span class="number">1</span>) &amp; (elements.length - <span class="number">1</span>)) == head)</span><br><span class="line">            doubleCapacity();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸¤ç§æ–¹æ³•ï¼Œé˜Ÿåˆ—æˆ–è€…æ ˆçš„æ–¹æ³•éƒ½å¯ä»¥è½»æ¾å®ç°äº†ã€‚</p><p>åœ¨è¿›è¡Œå¢åŠ å…ƒç´ çš„æ—¶å€™æ¶‰åŠåˆ° <code>doubleCapacity</code> è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨æ¥æ‰©å……æ•°ç»„çš„å®¹é‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doubleCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">assert</span> head == tail;</span><br><span class="line">        <span class="keyword">int</span> p = head;</span><br><span class="line">        <span class="keyword">int</span> n = elements.length;</span><br><span class="line">        <span class="keyword">int</span> r = n - p; <span class="comment">// headå³è¾¹å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> newCapacity = n &lt;&lt; <span class="number">1</span>; <span class="comment">// æ‰©å……ä¸ºåŸæ¥çš„2å€</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Sorry, deque too big"</span>);</span><br><span class="line">        Object[] a = <span class="keyword">new</span> Object[newCapacity]; <span class="comment">//åˆ›å»ºæ–°æ•°ç»„</span></span><br><span class="line">        Systkkem.arraycopy(elements, p, a, <span class="number">0</span>, r); </span><br><span class="line">        System.arraycopy(elements, <span class="number">0</span>, a, r, p);<span class="comment">// ä¸¤éƒ¨copyæ•°ç»„ç›¸å½“äºä» head -&gt; tail é‡æ–°æ’åºäº†</span></span><br><span class="line">        elements = a;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        tail = n;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>removeæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> removeFirst();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        E x = pollFirst();</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">pollFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = head;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">        E result = (E) elements[h];</span><br><span class="line">        <span class="comment">// Element is null if deque empty</span></span><br><span class="line">        <span class="keyword">if</span> (result == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        elements[h] = <span class="keyword">null</span>;     <span class="comment">// Must null out slot</span></span><br><span class="line">        <span class="comment">// æŠŠelementçš„å¤´éƒ¨ä½ç½®ç½®ç©ºåï¼Œå°†headå‘å‰ç§»</span></span><br><span class="line">        head = (h + <span class="number">1</span>) &amp; (elements.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>toArrayæ–¹æ³•</li></ul><p>toArrayæ–¹æ³•ä¸»è¦æ˜¯æ–¹ä¾¿è¾“å‡ºã€‚ç”¨æ¥çœŸæ­£çš„æŒ‰ç…§é€»è¾‘é¡ºåºï¼Œè¿›è¡Œç‰©ç†é‡æ’ï¼Œå®ç°æ–¹æ³•å’ŒdoubleCapacityå®ç°ç›¸åŒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">        <span class="keyword">return</span> copyElements(<span class="keyword">new</span> Object[size()]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> &lt;T&gt; T[] copyElements(T[] a) &#123;</span><br><span class="line">        <span class="keyword">if</span> (head &lt; tail) &#123;</span><br><span class="line">         <span class="comment">// å¦‚æœé¡ºåºæ­£å¸¸</span></span><br><span class="line">            System.arraycopy(elements, head, a, <span class="number">0</span>, size());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (head &gt; tail) &#123;</span><br><span class="line">         <span class="comment">// å¦åˆ™å°†headå³ä¾§çš„å…ˆcopyåˆ°æ•°ç»„ä¸­ï¼Œåœ¨copyå‰©ä¸‹çš„</span></span><br><span class="line">            <span class="keyword">int</span> headPortionLen = elements.length - head;</span><br><span class="line">            System.arraycopy(elements, head, a, <span class="number">0</span>, headPortionLen);</span><br><span class="line">            System.arraycopy(elements, <span class="number">0</span>, a, headPortionLen, tail);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ul><li>sizeæ–¹æ³•</li></ul><p>å’Œå¾ˆå¤šæ•°æ®ç»“æ„ç±»ä¸åŒçš„æ˜¯ï¼Œä»–çš„sizeå¹¶ä¸æ˜¯ä¾é æœ¬èº«çš„å˜é‡å­—æ®µè¿›è¡Œç»´æŠ¤ï¼Œè€Œæ˜¯é€šè¿‡sizeæ–¹æ³•è®¡ç®—è€Œæ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> (tail - head) &amp; (elements.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹ï¼ŒArrayDequeå®ç°äº†åŒç«¯é˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼Œèƒ½å¤Ÿå®Œæˆæ ˆå’Œé˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œæ•ˆç‡æ¯”åŒæ ·ç»§æ‰¿Dequeçš„LinkedListæ•ˆç‡é«˜ï¼Œå› ä¸ºåœ¨ArrayDequeä¸­çš„è®¡ç®—å¤§éƒ¨åˆ†ä¸ºä½è¿ç®—ã€‚ArrayDequeé€»è¾‘ä¸Šå¾ªç¯çš„æ•°ç»„ï¼Œä½†å®é™…ä¸Šå¹¶ä¸æ˜¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—</title>
      <link href="/2018/10/18/2018-10-17-Java%E4%B8%AD%E7%9A%84%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
      <url>/2018/10/18/2018-10-17-Java%E4%B8%AD%E7%9A%84%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<!-- vim-markdown-toc GFM --><ul><li><a href="#javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—">javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—</a><ul><li><a href="#stack-æ ˆ">Stack æ ˆ</a><ul><li><a href="#pushæ–¹æ³•å’Œpopæ–¹æ³•">pushæ–¹æ³•å’Œpopæ–¹æ³•</a></li><li><a href="#peekæ–¹æ³•">peekæ–¹æ³•</a></li></ul></li><li><a href="#queue-é˜Ÿåˆ—">Queue é˜Ÿåˆ—</a><ul><li><a href="#offer-æ–¹æ³•å’Œ-pullæ–¹æ³•">offer æ–¹æ³•å’Œ pullæ–¹æ³•</a></li><li><a href="#addæ–¹æ³•å’Œremoveæ–¹æ³•">addæ–¹æ³•å’Œremoveæ–¹æ³•</a></li></ul></li></ul></li></ul><!-- vim-markdown-toc --><h1 id="javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—"><a href="#javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—" class="headerlink" title="javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—"></a>javaä¸­çš„æ ˆå’Œé˜Ÿåˆ—</h1><h2 id="Stack-æ ˆ"><a href="#Stack-æ ˆ" class="headerlink" title="Stack æ ˆ"></a>Stack æ ˆ</h2><p>æ ˆæ˜¯ä¸€ä¸ªåè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæœ‰è¿™æ ·çš„æ•°æ®ç»“æ„åŠŸèƒ½çš„è¿˜æœ‰Dequç±»ï¼Œæ¨èä½¿ç”¨Dequ</p><h3 id="pushæ–¹æ³•å’Œpopæ–¹æ³•"><a href="#pushæ–¹æ³•å’Œpopæ–¹æ³•" class="headerlink" title="pushæ–¹æ³•å’Œpopæ–¹æ³•"></a>pushæ–¹æ³•å’Œpopæ–¹æ³•</h3><p>pushæ–¹æ³•æ˜¯å‘æ ˆé¡¶æ”¾å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">push</span><span class="params">(E item)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è¿™é‡Œè°ƒç”¨çˆ¶ç±»Vectorçš„addElementæ–¹æ³•</span></span><br><span class="line">        addElement(item);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// addElementæ–¹æ³•æ˜¯åŠ é”çš„æ–¹æ³• è°ƒç”¨elementå®é™…ä¸Šå°±æ˜¯æ•°ç»„é•¿åº¦åŠ ä¸€å¹¶ä¸”åœ¨è¯¥é—®ä¹‹ä¸Šä»˜å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">addElement</span><span class="params">(E obj)</span> </span>&#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">        elementData[elementCount++] = obj;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>popæ–¹æ³•æ˜¯åœ¨å°†æ ˆé¡¶çš„å€¼å‡ºæ ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ ·åŠ é”çš„æ–¹æ³• è°ƒç”¨æ–¹æ³• ç§»é™¤åœ¨æ•°ç»„æœ€åä½ç½®çš„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        E       obj;</span><br><span class="line">        <span class="keyword">int</span>     len = size();</span><br><span class="line"></span><br><span class="line">        obj = peek();</span><br><span class="line">        removeElementAt(len - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="peekæ–¹æ³•"><a href="#peekæ–¹æ³•" class="headerlink" title="peekæ–¹æ³•"></a>peekæ–¹æ³•</h3><p>peekæ–¹æ³•æ˜¯çœ‹ä¸€ä¸‹æ ˆé¡¶å…ƒç´ çš„å€¼ï¼Œä½†ä¸åšä»»ä½•æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>     len = size();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> EmptyStackException();</span><br><span class="line">        <span class="keyword">return</span> elementAt(len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™å‡ ä¸ªæ–¹æ³•å’ŒlinkedListç±»ä¸­çš„å¯¹åº”çš„æ–¹æ³•éå¸¸åƒï¼Œæ‰€ä»¥å…¶å®LindedListä¹Ÿå¯ä»¥å½“ä½œæ ˆç”¨ã€‚</p><h2 id="Queue-é˜Ÿåˆ—"><a href="#Queue-é˜Ÿåˆ—" class="headerlink" title="Queue é˜Ÿåˆ—"></a>Queue é˜Ÿåˆ—</h2><p>é˜Ÿåˆ—å’Œæ ˆç›¸åï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ï¼Œæƒ³æˆç°å®ä¸­çš„æ’é˜Ÿå†æ˜ç™½ä¸è¿‡äº†ã€‚</p><h3 id="offer-æ–¹æ³•å’Œ-pullæ–¹æ³•"><a href="#offer-æ–¹æ³•å’Œ-pullæ–¹æ³•" class="headerlink" title="offer æ–¹æ³•å’Œ pullæ–¹æ³•"></a>offer æ–¹æ³•å’Œ pullæ–¹æ³•</h3><p>offeræ–¹æ³•å¯ä»¥å°†å…ƒç´ æ”¾å…¥é˜Ÿåˆ—å½“ä¸­ï¼Œpullå¯ä»¥å°†å…ƒç´ ä»å¤´éƒ¨ç§»é™¤ã€‚</p><h3 id="addæ–¹æ³•å’Œremoveæ–¹æ³•"><a href="#addæ–¹æ³•å’Œremoveæ–¹æ³•" class="headerlink" title="addæ–¹æ³•å’Œremoveæ–¹æ³•"></a>addæ–¹æ³•å’Œremoveæ–¹æ³•</h3><p>addå’Œremoveæ–¹æ³•åˆ†åˆ«è°ƒç”¨offerå’Œpullæ–¹æ³•ï¼Œä¸åŒçš„æ˜¯ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œaddæ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œofferæ–¹æ³•ä¼šè¿”å›nullã€‚å¦‚æœé˜Ÿåˆ—ç©ºäº†ï¼Œremoveæ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œpullæ–¹æ³•ä¼šè¿”å›nullã€‚</p><p>ä»¥åä¼šæåŠé˜Ÿåˆ—çš„å®ç°ç±»ä»¥åŠDequç›¸å…³ç±»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Enumæšä¸¾ç±»åˆ†æå’Œç›¸å…³æ‹“å±•</title>
      <link href="/2018/10/16/2018-10-15-Enum%E7%B1%BB%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8B%93%E5%B1%95/"/>
      <url>/2018/10/16/2018-10-15-Enum%E7%B1%BB%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8B%93%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Enumæšä¸¾ç±»åˆ†æå’Œç›¸å…³æ‹“å±•"><a href="#Enumæšä¸¾ç±»åˆ†æå’Œç›¸å…³æ‹“å±•" class="headerlink" title="Enumæšä¸¾ç±»åˆ†æå’Œç›¸å…³æ‹“å±•"></a>Enumæšä¸¾ç±»åˆ†æå’Œç›¸å…³æ‹“å±•</h1><p>å…¶å®æˆ‘è®¤ä¸ºä½¿ç”¨æšä¸¾ç±»å°±æ˜¯å¯¹ä½¿ç”¨å¸¸é‡çš„æ‰©å……ï¼Œä¾‹å¦‚ç±»ä¸­ä½¿ç”¨ç±»å‹ï¼Œåˆ†ç±»ç›¸åŒçš„ç±»å˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æšä¸¾ç±»æ¥æ›¿æ¢æ‰ã€‚</p><p>å‚è€ƒäº†ç½‘ä¸Šçš„æ–‡ç« ï¼Œå¤§è‡´æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œç¬¬ä¸€æ˜¯ç¡®å®šä¼ å…¥çš„å‚æ•°ç±»å‹ã€‚è€Œä¸æ˜¯å½¢å‚æ˜¯intç±»å‹ï¼Œéšä¾¿ä¸€ä¸ªintç±»å‹å°±èƒ½å¤Ÿæ»¡è¶³ã€‚ç¬¬äºŒæ˜¯å¯¹æ¯”staticé™æ€å˜é‡æ›´èƒ½å¤Ÿç¡®å®šå˜é‡çš„æ„ä¹‰ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­æ¥çœ‹ã€‚</p><h2 id="Enumç±»å®ä¾‹"><a href="#Enumç±»å®ä¾‹" class="headerlink" title="Enumç±»å®ä¾‹"></a>Enumç±»å®ä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åˆ—ä¸¾ç®€å•çš„è¡Œé©¶å·¥å…· */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> trafficTool &#123;</span><br><span class="line">    BIKE,CAR,BUS,TRAIN,AIRPLANE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrafficToolTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">chooseTool</span><span class="params">(TrafficTool trafficTool)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (trafficTool)&#123;</span><br><span class="line">            <span class="keyword">case</span> BIKE:</span><br><span class="line">                System.out.println(<span class="string">"è‡ªè¡Œè½¦"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> CAR:</span><br><span class="line">                System.out.println(<span class="string">"æ±½è½¦"</span>);<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TrafficToolTest trafficToolTest = <span class="keyword">new</span> TrafficToolTest();</span><br><span class="line">        trafficToolTest.chooseTool(TrafficTool.BIKE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å’Œæ™®é€šçš„ç±»ä¸€æ ·ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æ·»åŠ æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SPRING(<span class="string">"æ˜¥å¤©"</span>),SUMMER(<span class="string">"å¤å¤©"</span>),FALL(<span class="string">"ç§‹å¤©"</span>),WINTER(<span class="string">"å†¬å¤©"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">SeasonEnum(String name)&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç»§æ‰¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SeasonEnum &#123;</span><br><span class="line">    SPRING(<span class="string">"æ˜¥å¤©"</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">comm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"è¿™æ˜¯æ˜¥å¤©"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,SUMMER(<span class="string">"å¤å¤©"</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">comm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"è¿™æ˜¯å¤å¤©"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,FALL(<span class="string">"ç§‹å¤©"</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">comm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"è¿™æ˜¯å†¬å¤©"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,WINTER(<span class="string">"å†¬å¤©"</span>) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">comm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"è¿™æ˜¯å†¬å¤©"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">    SeasonEnum(String name)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">comm</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯æšä¸¾ç±»çš„åŸºæœ¬ä½¿ç”¨ã€‚</p><h2 id="EnumMap-å’Œ-EnumSet"><a href="#EnumMap-å’Œ-EnumSet" class="headerlink" title="EnumMap å’Œ EnumSet"></a><code>EnumMap</code> å’Œ <code>EnumSet</code></h2><p><code>public class EnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends AbstractMap&lt;K, V&gt;</code> è¿™æ˜¯å…³äºEnumMapçš„ç»§æ‰¿å…³ç³»ã€‚<br>å¯ä»¥å‘ç°è¿™æ˜¯keyä¸ºæšä¸¾ç±»çš„ä¸€ä¸ªMapã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç®€å•åˆ›å»ºï¼Œä»¥åå°±å¯ä»¥å®ç°æšä¸¾ç±»çš„å¤šç§å¤ç”¨ */</span></span><br><span class="line">EnumMap&lt;SeasonEnum,Integer&gt; enumIntegerEnumMap = <span class="keyword">new</span> EnumMap&lt;SeasonEnum, Integer&gt;(SeasonEnum.class);</span><br><span class="line">Set&lt;SeasonEnum&gt; set = enumIntegerEnumMap.keySet();</span><br><span class="line">enumIntegerEnumMap.put(SeasonEnum.SPRING,<span class="number">1</span>);</span><br><span class="line">System.out.println(enumIntegerEnumMap.get(SeasonEnum.SPRING));</span><br></pre></td></tr></table></figure><p><code>EnumSet</code> ç›¸å¯¹äº <code>EnumMap</code> ç­‰åŒäº <code>hashSet</code> ç›¸å¯¹äº <code>HashMap</code> çš„å­˜åœ¨ï¼Œå¾ˆå¥½ç†è§£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashSetå’ŒHashTableçš„çš„æºç åˆ†æ</title>
      <link href="/2018/10/16/2018-10-15-HashSet%E5%92%8CHashTable%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
      <url>/2018/10/16/2018-10-15-HashSet%E5%92%8CHashTable%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --><ul><li><a href="#hashsetå’Œhashtableçš„çš„æºç åˆ†æ">HashSetå’ŒHashTableçš„çš„æºç åˆ†æ</a><ul><li><a href="#hashset">HashSet</a><ul><li><a href="#hashsetç»“æ„æºç ">HashSetç»“æ„æºç </a></li><li><a href="#hashsetçš„åŸºæœ¬æ–¹æ³•">HashSetçš„åŸºæœ¬æ–¹æ³•</a></li><li><a href="#hashsetçš„iteratorå’Œcontainsæ–¹æ³•">HashSetçš„Iteratorå’Œcontainsæ–¹æ³•</a></li></ul></li><li><a href="#hashtable">HashTable</a></li></ul></li></ul><!-- /TOC --><h1 id="HashSetå’ŒHashTableçš„çš„æºç åˆ†æ"><a href="#HashSetå’ŒHashTableçš„çš„æºç åˆ†æ" class="headerlink" title="HashSetå’ŒHashTableçš„çš„æºç åˆ†æ"></a>HashSetå’ŒHashTableçš„çš„æºç åˆ†æ</h1><h2 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h2><p>HashSetå…¶å®å°±æ˜¯ä½¿ç”¨HashMapæ¥å®ç°çš„ï¼Œæ–¹æ³•éƒ½æ˜¯ä¾é Hash Mapçš„æ–¹æ³•ã€‚å¦‚hashSetæ„é€ ï¼ŒhashSetçš„æ·»åŠ ç­‰æ“ä½œã€‚è¿™æ ·èƒ½å¤Ÿå®ç°hashsetå»é‡ã€‚å› ä¸ºhashMapçš„keyä¸èƒ½é‡å¤ã€‚è¿™æ ·å°±èƒ½çœ‹ä¸Šç¯‡ï¼Œå½“hashMapé‡åˆ°keyå€¼é‡å¤çš„å¤„ç†ã€‚</p><h3 id="HashSetç»“æ„æºç "><a href="#HashSetç»“æ„æºç " class="headerlink" title="HashSetç»“æ„æºç "></a>HashSetç»“æ„æºç </h3><p>HashSetçš„ç»“æ„å°±ç›¸å½“äºHashMapåªå°†keyå€¼putè¿›å»ï¼Œä½†æ˜¯Valueå€¼å´ä¸ºç©ºçš„new Objectã€‚å¯ä»¥çœ‹ä½œä¸ºåªæœ‰keyçš„HashMap.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¯ä»¥çœ‹åˆ°hashSetçš„è¿™å‡ ä¸ªæ„é€ æ–¹æ³•å’ŒHashMapæ¯æ¯ç›¸å…³ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HashSetçš„åŸºæœ¬æ–¹æ³•"><a href="#HashSetçš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="HashSetçš„åŸºæœ¬æ–¹æ³•"></a>HashSetçš„åŸºæœ¬æ–¹æ³•</h3><p>addå’Œremoveå’Œsizeç­‰åŸºæœ¬æ–¹æ³•éƒ½æ˜¯è°ƒç”¨HashMapçš„</p><p>å¦‚addæ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* è¿™é‡Œçš„PRESENTç­‰äºnew Object() */</span></span><br><span class="line">       <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="HashSetçš„Iteratorå’Œcontainsæ–¹æ³•"><a href="#HashSetçš„Iteratorå’Œcontainsæ–¹æ³•" class="headerlink" title="HashSetçš„Iteratorå’Œcontainsæ–¹æ³•"></a>HashSetçš„Iteratorå’Œcontainsæ–¹æ³•</h3><p>åŒæ ·çš„ä¹Ÿæ˜¯è°ƒç”¨çš„HashMapçš„åŸºæœ¬æ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦å…ˆå¾—åˆ°Mapçš„keySeté›†åˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.containsKey(o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="HashTable"><a href="#HashTable" class="headerlink" title="HashTable"></a>HashTable</h2><p>é¦–å…ˆHashTableå’ŒHashMapçš„ç»“æ„ç±»ä¼¼ã€‚ä½†æ˜¯æœ‰æœ€é‡è¦çš„åŒºåˆ«å°±æ˜¯HashTableæ˜¯synchronizedçš„ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åœ¨ä»–çš„åŸºæœ¬æ–¹æ³•å‰éƒ½æœ‰synchronizedé”æ‰€é™åˆ¶ã€‚</p><p>ç»“æ„å°±ä¸çœ‹äº†ï¼Œåªçœ‹ä¸€ä¸ªPutæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* å…¶å®å¤§è‡´å’ŒHashMapæ˜¯ç±»ä¼¼çš„ä¹Ÿæ˜¯ä½¿ç”¨Entryä½œä¸ºåŸºæœ¬ç»“æ„ */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// Make sure the value is not null</span></span><br><span class="line">     <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// Makes sure the key is not already in the hashtable.</span></span><br><span class="line">     Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">     <span class="keyword">int</span> hash = key.hashCode();</span><br><span class="line">     <span class="comment">/* è¿™é‡Œçš„0x7FFFFFFF æ˜¯32-bitçš„intçš„æœ€å¤§å€¼ */</span></span><br><span class="line">     <span class="keyword">int</span> index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">     <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">     Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="line">     <span class="comment">/* å¦‚æœè¿™ä¸ªentryå­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯é”®å€¼é‡å¤ */</span></span><br><span class="line">     <span class="keyword">for</span>(; entry != <span class="keyword">null</span> ; entry = entry.next) &#123;</span><br><span class="line">         <span class="keyword">if</span> ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123;</span><br><span class="line">             V old = entry.value;</span><br><span class="line">             entry.value = value;</span><br><span class="line">             <span class="keyword">return</span> old;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">/* å¦åˆ™æ·»åŠ EntryèŠ‚ç‚¹ */</span></span><br><span class="line">     addEntry(hash, key, value, index);</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">    <span class="keyword">if</span> (count &gt;= threshold) &#123;</span><br><span class="line">      <span class="comment">/* å¦‚æœå½“å‰countå¤§äºé˜ˆå€¼çš„å¤§å° é‡æ–°ç”Ÿæˆtable sizeå’Œhashå€¼ */</span></span><br><span class="line">        <span class="comment">// Rehash the table if the threshold is exceeded</span></span><br><span class="line">        rehash();</span><br><span class="line"></span><br><span class="line">        tab = table;</span><br><span class="line">        hash = key.hashCode();</span><br><span class="line">        index = (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Creates the new entry.</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index];</span><br><span class="line">    tab[index] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºHashTableå’ŒHashMapçš„ç»“æ„è¿˜æ˜¯æœ‰å·®å¼‚çš„ï¼ŒHashMapæ˜¯çºµå‘çš„åˆ—è¡¨å½“å‡ºç°ç›¸åŒçš„hashå€¼çš„æ—¶å€™ï¼Œæ‰©å±•å‡ºæ¨ªå‘åˆ—è¡¨ï¼Œå½“æ¨ªå‘çš„åˆ—è¡¨åˆ°è¾¾ä¸€å®šçš„é•¿åº¦çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨ªå‘çš„é“¾è¡¨å°±ä¼šè‡ªåŠ¨æ•´ç†æˆçº¢é»‘æ ‘çš„å½¢å¼ï¼Œè€ŒhashTableä¸å­˜åœ¨æ¨ªå‘çš„è¿™ç§ç»“æ„çš„ï¼Œå½“count&gt;=é˜ˆå€¼çš„æ—¶å€™å°±ä¼šæŠŠHashé‡ç½®ï¼Œä½¿ä¹‹ä¸ä¼šå‡ºç°hashå€¼é‡å¤çš„æƒ…å†µã€‚å¯ä»¥è¯´hashTableæ¯”è¾ƒhashMapçš„ç»“æ„æ›´ç®€å•ï¼Œä½†æ˜¯æ•ˆç‡ä¼šæ¯”HashMapçš„ä½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapçš„æºç æŸ¥çœ‹</title>
      <link href="/2018/10/11/2018-10-10-hashmap%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/"/>
      <url>/2018/10/11/2018-10-10-hashmap%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/</url>
      
        <content type="html"><![CDATA[<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --><ul><li><a href="#hashmapçš„æºç æŸ¥çœ‹">HashMapçš„æºç æŸ¥çœ‹</a><ul><li><a href="#hashmapç»“æ„æºç ">HashMapç»“æ„æºç </a><ul><li><a href="#åŸºæœ¬å±æ€§">åŸºæœ¬å±æ€§</a></li><li><a href="#ä¾èµ–çš„æ•°æ®ç»“æ„">ä¾èµ–çš„æ•°æ®ç»“æ„</a><ul><li><a href="#nodeèŠ‚ç‚¹">NodeèŠ‚ç‚¹</a></li></ul></li><li><a href="#hashmapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•">hashMapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•</a></li></ul></li><li><a href="#hashmapçš„æ–¹æ³•æºç ">hashMapçš„æ–¹æ³•æºç </a><ul><li><a href="#putæ–¹æ³•">putæ–¹æ³•</a><ul><li><a href="#åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•">åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•</a></li></ul></li><li><a href="#getæ–¹æ³•">getæ–¹æ³•</a></li><li><a href="#removeæ–¹æ³•">removeæ–¹æ³•</a></li><li><a href="#keysetæ–¹æ³•">keySetæ–¹æ³•</a></li></ul></li></ul></li></ul><!-- /TOC --><h1 id="HashMapçš„æºç æŸ¥çœ‹"><a href="#HashMapçš„æºç æŸ¥çœ‹" class="headerlink" title="HashMapçš„æºç æŸ¥çœ‹"></a>HashMapçš„æºç æŸ¥çœ‹</h1><h2 id="HashMapç»“æ„æºç "><a href="#HashMapç»“æ„æºç " class="headerlink" title="HashMapç»“æ„æºç "></a>HashMapç»“æ„æºç </h2><h3 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* å®é™…ä¸Šç»“æ„å°±æ˜¯ä¸€ä¸ªnodeæ•°ç»„ */</span></span><br><span class="line"> <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Holds cached entrySet(). Note that AbstractMap fields are used</span></span><br><span class="line"><span class="comment">  * for keySet() and values().</span></span><br><span class="line"><span class="comment">  * å¾—åˆ°entryset</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The number of key-value mappings contained in this map.</span></span><br><span class="line"><span class="comment">    mapçš„å¤§å°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ“ä½œæ¬¡æ•° */</span></span><br><span class="line"> <span class="keyword">transient</span> <span class="keyword">int</span> modCount;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/* ä¸´ç•Œå€¼ï¼Œå¦‚æœè¶…è¿‡ä¸´ç•Œå€¼å°±ä¼šè‡ªåŠ¨æ‰©å……æ•°ç»„ */</span></span><br><span class="line"> <span class="keyword">int</span> threshold;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/* åŠ è½½å› å­  */</span></span><br><span class="line"> <span class="keyword">final</span> <span class="keyword">float</span> loadFactor;</span><br></pre></td></tr></table></figure><h3 id="ä¾èµ–çš„æ•°æ®ç»“æ„"><a href="#ä¾èµ–çš„æ•°æ®ç»“æ„" class="headerlink" title="ä¾èµ–çš„æ•°æ®ç»“æ„"></a>ä¾èµ–çš„æ•°æ®ç»“æ„</h3><h4 id="NodeèŠ‚ç‚¹"><a href="#NodeèŠ‚ç‚¹" class="headerlink" title="NodeèŠ‚ç‚¹"></a>NodeèŠ‚ç‚¹</h4><p>é¦–å…ˆçœ‹åˆ°hashmapä¸­çš„nodeç±»ç»§æ‰¿äº†map.Entry&lt;k,v&gt;ç»“æ„ï¼Œæœ‰ç±»å‹ä¸ºKçš„keyå’Œç±»å‹ä¸ºVçš„valueï¼›å…¶æ¬¡nodeæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line"><span class="comment">/* nodeçš„æ„é€ æ–¹æ³• */</span></span><br><span class="line">        Node(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.hash = hash;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">getKey</span><span class="params">()</span>        </span>&#123; <span class="keyword">return</span> key; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">getValue</span><span class="params">()</span>      </span>&#123; <span class="keyword">return</span> value; &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> key + <span class="string">"="</span> + value; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V newValue)</span> </span>&#123;</span><br><span class="line">            V oldValue = value;</span><br><span class="line">            value = newValue;</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (o == <span class="keyword">this</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Map.Entry) &#123;</span><br><span class="line">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">                <span class="keyword">if</span> (Objects.equals(key, e.getKey()) &amp;&amp;</span><br><span class="line">                    Objects.equals(value, e.getValue()))</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="hashMapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•"><a href="#hashMapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•" class="headerlink" title="hashMapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•"></a>hashMapçš„ä¸‰ä¸ªæ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç¬¬ä¸€ä¸ªå‚æ•° æ˜¯é»˜è®¤çš„åˆå§‹åŒ–é˜ˆå€¼å¤§å°ï¼Œç¬¬äºŒä¸ªæ˜¯åŠ è½½å› å­å¤§å° */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="comment">/* å¦‚æœåˆ¶å®šçš„åˆå§‹åŒ–é˜ˆå€¼å°äº0 */</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal initial capacity: "</span> +</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal load factor: "</span> +</span><br><span class="line">                                           loadFactor);</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨thisè°ƒç”¨ä¸Šé¢çš„æ–¹æ³• */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨é»˜è®¤çš„é˜ˆå€¼å’Œå› å­ï¼Œå¤§å°åˆ†åˆ«ä¸º16å’Œ0.75</span></span><br><span class="line"><span class="comment"> * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity</span></span><br><span class="line"><span class="comment"> * (16) and the default load factor (0.75).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="hashMapçš„æ–¹æ³•æºç "><a href="#hashMapçš„æ–¹æ³•æºç " class="headerlink" title="hashMapçš„æ–¹æ³•æºç "></a>hashMapçš„æ–¹æ³•æºç </h2><p>hashMapä¸­æœ€é‡è¦çš„å½“ç„¶æ˜¯putå’Œgetæ–¹æ³•äº†ï¼Œå°±è¦å…ˆä»è¿™ä¸¤ä¸ªæœ€é‡è¦çš„æ–¹æ³•å…¥æ‰‹ã€‚</p><h3 id="putæ–¹æ³•"><a href="#putæ–¹æ³•" class="headerlink" title="putæ–¹æ³•"></a>putæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* è°ƒç”¨putValæ–¹æ³• */</span></span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Implements Map.put and related methods</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> hash hash for key keyçš„hashç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key the key keyå€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to put valueå€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> onlyIfAbsent if true, don't change existing value å¦‚æœæ˜¯true ä¸æ”¹å˜å½“å‰å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> evict if false, the table is in creation mode. å¦‚æœæ˜¯falseï¼Œé‚£ä¹ˆtableå°±å±äºåˆ›å»ºæ¨¡å¼ ï¼ˆï¼Ÿï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">    <span class="comment">/* å½“Mapä¸ºç©ºçš„æ—¶å€™  è¿™æ—¶å€™tabä¸º16ä¹Ÿå°±æ˜¯nä¸º16*/</span></span><br><span class="line">    <span class="comment">/* è¿™æ˜¯å½“mapä¸­çš„å†…å®¹ä¸ºç©ºçš„æ—¶å€™</span></span><br><span class="line"><span class="comment">     * newCap = DEFAULT_INITIAL_CAPACITY;</span></span><br><span class="line"><span class="comment">     * newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">        <span class="comment">/* å¦‚æœå½“å‰tabçš„length&amp;hashå€¼å†tabåˆ—è¡¨ä¸­ä¸é‡å¤ */</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">    <span class="comment">/* æ–°å»ºä¸€ä¸ªnoede å†tab[i]çš„ä½ç½®ä¸Š */</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">/* å½“æ·»åŠ é‡å¤çš„keyçš„æ—¶å€™ è¿™æ—¶å€™hashå’Œkeyçš„å€¼éƒ½ç›¸ç­‰ï¼Œå°±ç›¸å½“äºä¸æ·»åŠ  */</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">        <span class="comment">/* å¦‚æœeæ˜¯treeNodeçš„æ—¶å€™  */</span></span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                    <span class="comment">/* å¦‚æœå½“å‰åˆ—è¡¨ä¸­çš„é•¿åº¦å¤§äºç­‰äº 8-1 çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªåˆ—è¡¨æ•´ç†æˆæ ‘å½¢ç»“æ„ */</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">/* å¦‚æœå½“å‰sizeå¤§äºthresholdçš„æ—¶å€™æ‰©å……table */</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•"><a href="#åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•" class="headerlink" title="åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•"></a>åœ¨çœ‹getæ–¹æ³•ä¹‹å‰å…ˆçœ‹å’Œputæ–¹æ³•æ¯æ¯ç›¸å…³çš„resizeæ–¹æ³•</h4><p>æˆ‘ç†è§£çš„ <code>hashMap</code> å¤§è‡´å½¢çŠ¶ï¼Œæ€»ä½“ä¸ºçºµå‘æ‹“å±•ï¼Œå¦‚æœ <code>hash&amp;length-1</code> çš„å€¼é‡å¤çš„è¯ï¼Œè¯´æ˜ä½ç½®å†²çªï¼Œé¦–å…ˆä¼šåŠ åœ¨è¿™ä¸ªä½ç½®å…ƒç´ åé¢ï¼Œå¦‚æœå¤§å°è¶…è¿‡ <code>TREEIFY_THRESHOLD - 1</code> çš„æ—¶å€™è‡ªåŠ¨ä¸ºè¿™åˆ—æ•´ç†æˆæ ‘å½¢çŠ¶ã€‚è¿™æ ·å°±ä¼šå˜ä¸ºçºµå‘åˆ—è¡¨ï¼Œæ¨ªå‘åˆ—è¡¨æˆ–æ ‘çš„ç»“æ„ã€‚</p><p>åœ¨æœªé‡å¤hashçš„å‰æä¸‹ï¼Œå¦‚æœtableçš„å¤§å°è¶…è¿‡è®¾ç½®çš„ <code>threshold</code> çš„å¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ <code>resize</code> æ–¹æ³•ã€‚ä¸‹é¢å°±æ¥çœ‹çœ‹resizeæ–¹æ³•çš„ä»£ç ç»“æ„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">        <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">        <span class="keyword">int</span> oldThr = threshold;</span><br><span class="line">        <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">                threshold = Integer.MAX_VALUE;</span><br><span class="line">                <span class="keyword">return</span> oldTab;</span><br><span class="line">            &#125; <span class="comment">//newcapæ˜¯oldcapçš„2å€</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                     oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">                newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">            newCap = oldThr;</span><br><span class="line">        <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">            newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">            newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">            newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                      (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">        &#125;</span><br><span class="line">        threshold = newThr;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"rawtypes"</span>,<span class="string">"unchecked"</span>&#125;)</span><br><span class="line">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newCap];</span><br><span class="line">        table = newTab;</span><br><span class="line">        <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123; <span class="comment">//å¾ªç¯åŸtableæ•°ç»„ ï¼Ÿå› ä¸ºåœ¨æ‰©å®¹å hash &amp; (size-1) çš„ä½ç½®å‘ç”Ÿäº†å˜åŒ– ï¼Œæ‰€ä»¥åº”å½“è¿›è¡Œé‡æ’</span></span><br><span class="line">                Node&lt;K,V&gt; e;</span><br><span class="line">                <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    oldTab[j] = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (e.next == <span class="keyword">null</span>)<span class="comment">//è¯´æ˜eä¸å­˜åœ¨hashå†²çª</span></span><br><span class="line">                        newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                        ((TreeNode&lt;K,V&gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                    <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                        Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                        Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                        Node&lt;K,V&gt; next;</span><br><span class="line">                        <span class="keyword">do</span> &#123; <span class="comment">//å†å»å¾ªç¯bin</span></span><br><span class="line">                            next = e.next;</span><br><span class="line">                            <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123; <span class="comment">//å¦‚æœåœ¨ä½ä½ ï¼ˆè€ï¼‰æ•°ç»„ä¸­ä¹Ÿå°±æ˜¯å…ƒç´ hastå’Œå°±æ•°ç»„å–æ¨¡ä¸º0æ—¶ï¼Œè¯´æ˜é‡æ’åä»åœ¨è€æ•°ç»„å†…</span></span><br><span class="line">                                <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                    loHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    loTail.next = e;</span><br><span class="line">                                loTail = e;<span class="comment">//é€’å½’å‘ä¸‹ç»§ç»­æ’</span></span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span> &#123;<span class="comment">//å¦åˆ™åœ¨é«˜ä½æ•°ç»„ä¸­ ï¼Œä¹Ÿå°±æ˜¯åœ¨æ‰©å®¹å‡ºæ¥çš„æ•°ç»„ä¸­</span></span><br><span class="line">                                <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                    hiHead = e;</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    hiTail.next = e;</span><br><span class="line">                                hiTail = e;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j] = loHead; <span class="comment">//ä½ä½æ•°ç»„è¿˜æ˜¯åœ¨åŸæ¥çš„ä½ç½®ä¸Š</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                            newTab[j + oldCap] = hiHead; <span class="comment">//é«˜ä½æ•°ç»„åœ¨æ—§æ•°ç»„+jçš„ä½ç½®ä¸Š</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newTab;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="getæ–¹æ³•"><a href="#getæ–¹æ³•" class="headerlink" title="getæ–¹æ³•"></a>getæ–¹æ³•</h3><p>getæ–¹æ³•æ˜¯æ ¹æ®hashå’Œkeyå€¼è¿›è¡ŒæŸ¥æ‰¾,åŒç†containKeyæ–¹æ³•ä¹Ÿæ˜¯è°ƒç”¨getNodeæ–¹æ³•è¿›è¡Œåˆ¤æ–­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// å…ˆå›æ£€æŸ¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">              <span class="comment">/* ä»ç¬¬äºŒä¸ªèŠ‚ç‚¹å¼€å§‹å¾ªç¯ æŸ¥æ‰¾hashå’Œkeyåˆ†åˆ«ç›¸åŒ  */</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="removeæ–¹æ³•"><a href="#removeæ–¹æ³•" class="headerlink" title="removeæ–¹æ³•"></a>removeæ–¹æ³•</h3><p>ä½¿ç”¨removeæ–¹æ³•æ ¹æ®keyç§»é™¤èŠ‚ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="keyword">return</span> (e = removeNode(hash(key), key, <span class="keyword">null</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)) == <span class="keyword">null</span> ?</span><br><span class="line">        <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Implements Map.remove and related methods</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> hash keyçš„hashå€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key é”®å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value å¦‚æœæƒ³åŒ¹é…çš„è¯å°±æ˜¯valueï¼Œå¦åˆ™ç©º</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> matchValue å¦‚æœæ˜¯tureé‚£ä¹ˆå°±ç§»é™¤å’Œvalue equalçš„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> movable å¦‚æœæ˜¯falseçš„è¯ï¼Œç§»é™¤è¿™ä¸ªèŠ‚ç‚¹ä¸è¦ç§»åŠ¨å…¶ä»–èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the node, or null if none</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">removeNode</span><span class="params">(<span class="keyword">int</span> hash, Object key, Object value,</span></span></span><br><span class="line"><span class="function"><span class="params">                           <span class="keyword">boolean</span> matchValue, <span class="keyword">boolean</span> movable)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, index;</span><br><span class="line">    <span class="comment">/* ç¡®å®šèŠ‚ç‚¹ */</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (p = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        Node&lt;K,V&gt; node = <span class="keyword">null</span>, e; K k; V v;</span><br><span class="line">        <span class="comment">/* å¦‚æœhashå€¼ç›¸åŒ keyå€¼ä¹Ÿç›¸åŒ è¯´æ˜å°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹ */</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            node = p;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((e = p.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="comment">/* å¦åˆ™æ¨ªå‘æŸ¥æ‰¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ */</span></span><br><span class="line">            <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="comment">/* çœç•¥-------- */</span></span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="keyword">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                             (value != <span class="keyword">null</span> &amp;&amp; value.equals(v)))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class="keyword">this</span>, tab, movable);</span><br><span class="line">                <span class="comment">/* æ¥ä¸‹æ¥æŠŠtabä¸­å¯¹åº”çš„index removeæ‰ */</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (node == p)</span><br><span class="line">                tab[index] = node.next;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                p.next = node.next;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="keySetæ–¹æ³•"><a href="#keySetæ–¹æ³•" class="headerlink" title="keySetæ–¹æ³•"></a>keySetæ–¹æ³•</h3><p>ketSetæ–¹æ³•ä¹Ÿæ˜¯ç»å¸¸ç”¨åˆ°çš„æ–¹æ³•ï¼ŒkeySetæ–¹æ³•å®é™…ä¸Šå°±æ˜¯è¿”å›æ–°å»ºçš„keysetç»“æ„ã€‚å…·ä½“ç»“æ„å¯ä»¥çœ‹å¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰ä½¿ç”¨forEachå’ŒIteratoræ–¹æ³•çš„æ—¶å€™æ‰ä¼šå¾ªç¯tabæ¥æ‰¾keyçš„setæ•°æ®ã€‚æ•°æ®ç»“æ„ä¸­éƒ½æ˜¯è°ƒç”¨å¤–éƒ¨æ–¹æ³•çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">KeySet</span> <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span>                 </span>&#123; <span class="keyword">return</span> size; &#125; <span class="comment">//è¿”å›å½“å‰size</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span>               </span>&#123; HashMap.<span class="keyword">this</span>.clear(); &#125; <span class="comment">//ç›´æ¥è°ƒç”¨hashMapçš„clearæ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Iterator&lt;K&gt; <span class="title">iterator</span><span class="params">()</span>     </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> KeyIterator(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123; <span class="keyword">return</span> containsKey(o); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> removeNode(hash(key), key, <span class="keyword">null</span>, <span class="keyword">false</span>, <span class="keyword">true</span>) != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Spliterator&lt;K&gt; <span class="title">spliterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> KeySpliterator&lt;&gt;(HashMap.<span class="keyword">this</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> K&gt; action)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab;</span><br><span class="line">        <span class="keyword">if</span> (action == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="keyword">if</span> (size &gt; <span class="number">0</span> &amp;&amp; (tab = table) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> mc = modCount;</span><br><span class="line">            <span class="comment">/* æŠŠå½“å‰æ“ä½œæ•°è®°ä¸‹æ¥  */</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tab.length; ++i) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Node&lt;K,V&gt; e = tab[i]; e != <span class="keyword">null</span>; e = e.next)</span><br><span class="line">                    action.accept(e.key);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (modCount != mc)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å‡ ä¸ªéå¸¸å¸¸ç”¨çš„hashMapçš„æ–¹æ³•å’ŒåŸºæœ¬çš„æ•°æ®ç»“æ„æºç çš„åˆ†ææŸ¥çœ‹ã€‚å°±å½“åšç¬”è®°è®°å½•ä¸€ä¸‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedListçš„æºç æŸ¥çœ‹</title>
      <link href="/2018/10/08/2018-10-08-LinkedList%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/"/>
      <url>/2018/10/08/2018-10-08-LinkedList%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/</url>
      
        <content type="html"><![CDATA[<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --><ul><li><a href="#linkedlistçš„æºç æŸ¥çœ‹">LinkedListçš„æºç æŸ¥çœ‹</a><ul><li><a href="#ç»“æ„æºç ">ç»“æ„æºç </a><ul><li><a href="#ä¾é ç»“æ„">ä¾é ç»“æ„</a></li><li><a href="#linkedlistæ„é€ å‡½æ•°">LinkedListæ„é€ å‡½æ•°</a></li></ul></li><li><a href="#åŸºæœ¬æ–¹æ³•">åŸºæœ¬æ–¹æ³•</a><ul><li><a href="#æ·»åŠ ">æ·»åŠ </a></li><li><a href="#ç§»é™¤">ç§»é™¤</a><ul><li><a href="#removeæ–¹æ³•">removeæ–¹æ³•</a></li><li><a href="#removefirst">removeFirst</a></li><li><a href="#removelast-å’ŒremovefirståŒç†">removeLast å’ŒremoveFirståŒç†</a></li></ul></li><li><a href="#èµ‹å€¼å–å€¼æ“ä½œ">èµ‹å€¼å–å€¼æ“ä½œ</a><ul><li><a href="#getæ–¹æ³•">getæ–¹æ³•</a></li><li><a href="#setæ–¹æ³•">setæ–¹æ³•</a></li></ul></li><li><a href="#linkedlistä¸­çš„æ ˆæ“ä½œ">LinkedListä¸­çš„æ ˆæ“ä½œ</a><ul><li><a href="#peekæ–¹æ³•">peekæ–¹æ³•</a></li><li><a href="#pollæ–¹æ³•">pollæ–¹æ³•</a></li><li><a href="#pushæ–¹æ³•">pushæ–¹æ³•</a></li><li><a href="#popæ–¹æ³•">popæ–¹æ³•</a></li><li><a href="#offeræ–¹æ³•">offeræ–¹æ³•</a></li></ul></li></ul></li></ul></li></ul><!-- /TOC --><h1 id="LinkedListçš„æºç æŸ¥çœ‹"><a href="#LinkedListçš„æºç æŸ¥çœ‹" class="headerlink" title="LinkedListçš„æºç æŸ¥çœ‹"></a>LinkedListçš„æºç æŸ¥çœ‹</h1><h2 id="ç»“æ„æºç "><a href="#ç»“æ„æºç " class="headerlink" title="ç»“æ„æºç "></a>ç»“æ„æºç </h2><h3 id="ä¾é ç»“æ„"><a href="#ä¾é ç»“æ„" class="headerlink" title="ä¾é ç»“æ„"></a>ä¾é ç»“æ„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* LinkedListçš„å†…éƒ¨å˜é‡ å¯ä»¥çœ‹å‡ºLinkedListå…¶å®å°±æ˜¯ä¸€ä¸ªé“¾è¡¨ */</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‡å‘é¦–èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (first.prev == null &amp;&amp; first.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‡å‘å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (last.next == null &amp;&amp; last.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å†…éƒ¨nodeå®ç° */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"><span class="comment">/* åŒå‘é“¾è¡¨ */</span></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.item = element;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">        <span class="keyword">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LinkedListæ„é€ å‡½æ•°"><a href="#LinkedListæ„é€ å‡½æ•°" class="headerlink" title="LinkedListæ„é€ å‡½æ•°"></a>LinkedListæ„é€ å‡½æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç©ºæ„é€ å‡½æ•° æ¯”è¾ƒå¸¸ç”¨ */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æœ‰collectionå‚æ•°çš„æ„é€ å‡½æ•° */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>();</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> addAll(size, c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å‚æ•°ï¼šå½“å‰æ•°é‡ä¹Ÿå°±æ˜¯è¦å¾—åˆ°å½“å‰é“¾è¡¨çš„ä½ç½® */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line"></span><br><span class="line">    Object[] a = c.toArray();</span><br><span class="line">    <span class="keyword">int</span> numNew = a.length;</span><br><span class="line">    <span class="keyword">if</span> (numNew == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    Node&lt;E&gt; pred, succ;</span><br><span class="line">    <span class="comment">// å¯¹æ’å…¥å‰æƒ…å†µçš„åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line"><span class="comment">//          å¦‚æœåœ¨å°¾éƒ¨æ’å…¥ pred=æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        succ = <span class="keyword">null</span>;</span><br><span class="line">        pred = last;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//          å¦åˆ™åœ¨ä¸­éƒ¨æ’å…¥ succ=å½“å‰èŠ‚ç‚¹ pred=å‰ä¸€èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">/* - - - - - - - - -  */</span></span><br><span class="line"><span class="comment">/*     ^ ^ */</span></span><br><span class="line"><span class="comment">/*     1 2  å¦‚æœæƒ³åœ¨2ä½ç½®æ’å…¥å…ƒç´ ï¼Œå‰ä¸€ä¸ªå…ƒç´ ä¸åŠ¨ï¼Œå°†åé¢çš„å…ƒç´ åç§»*/</span></span><br><span class="line">        succ = node(index);</span><br><span class="line">        pred = succ.prev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (Object o : a) &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>) E e = (E) o;</span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³• å‰èŠ‚ç‚¹/å†…å®¹/åèŠ‚ç‚¹ å§‹ç»ˆpredæ˜¯å‰ç½®èŠ‚ç‚¹</span></span><br><span class="line">        Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line"><span class="comment">//å¦‚æœpred==null è¯´æ˜ æœ¬èº«åˆ—è¡¨å¼€å§‹å°±æ˜¯ç©ºçš„æˆ–è€…åœ¨å¼€å¤´æ’å…¥å…ƒç´ </span></span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line"><span class="comment">//å¦åˆ™åœ¨åé¢æ’å…¥newNode</span></span><br><span class="line">            pred.next = newNode;</span><br><span class="line"><span class="comment">//å‘åå¾ªç¯èŠ‚ç‚¹</span></span><br><span class="line">        pred = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å¦‚æœsucc==null è¯´æ˜åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹åä½ç½® å°†æœ€åçš„å…ƒç´ predèµ‹å€¼ç»™last</span></span><br><span class="line">    <span class="keyword">if</span> (succ == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = pred;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">/* å¦åˆ™æ’å…¥åœ¨succå‰ */</span></span><br><span class="line">        pred.next = succ;</span><br><span class="line">        succ.prev = pred;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    size += numNew;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ–¹æ³•"><a href="#åŸºæœ¬æ–¹æ³•" class="headerlink" title="åŸºæœ¬æ–¹æ³•"></a>åŸºæœ¬æ–¹æ³•</h2><h3 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* addæ–¹æ³•é»˜è®¤è°ƒç”¨linklastæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å‘åæ·»åŠ å…ƒç´  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åŒæ ·æœ‰addLast è¾¾åˆ°ç›¸åŒçš„ç›®çš„ï¼Œå°±æ˜¯ä¸è¿”å›ä»»ä½•ä¸œè¥¿ */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        linkLast(e);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Links e as last element.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="comment">/* è·å¾—æœ€åä¸€ä¸ªå…ƒç´ å½“ä½œè¯¥èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹ */</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);</span><br><span class="line">    <span class="comment">/* æŠŠå½“å‰èŠ‚ç‚¹ä»˜ç»™last */</span></span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥è°ƒç”¨æ–¹æ³•åœ¨æœ€å‰é¢æ·»åŠ å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkFirst(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">linkFirst</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(<span class="keyword">null</span>, e, f);</span><br><span class="line">    first = newNode;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">        last = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç§»é™¤"><a href="#ç§»é™¤" class="headerlink" title="ç§»é™¤"></a>ç§»é™¤</h3><h4 id="removeæ–¹æ³•"><a href="#removeæ–¹æ³•" class="headerlink" title="removeæ–¹æ³•"></a>removeæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* å…ˆåˆ¤æ–­æ˜¯å¦è¶Šç•Œ */</span></span><br><span class="line">      checkElementIndex(index);</span><br><span class="line">      <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">E <span class="title">unlink</span><span class="params">(Node&lt;E&gt; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert x != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line"><span class="comment">/* å¦‚æœprevæ˜¯ç©º è¯´æ˜å½“å‰å…ƒç´ æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´  */</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">/* å½“å‰èŠ‚ç‚¹ä¸å‰åèŠ‚ç‚¹æ–­ç»é“¾æ¥ */</span></span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/* å¦‚æœæ˜¯æœ€åä¸€ä¸ªå…ƒç´  */</span></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">/* å½“å‰èŠ‚ç‚¹ä¸å‰åèŠ‚ç‚¹æ–­ç»é“¾æ¥ å› ä¸ºLinkedListæ˜¯åŒå‘é“¾è¡¨ */</span></span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/* ç½®ç©º */</span></span><br><span class="line">    x.item = <span class="keyword">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="removeFirst"><a href="#removeFirst" class="headerlink" title="removeFirst"></a>removeFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    <span class="keyword">return</span> unlinkFirst(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> E <span class="title">unlinkFirst</span><span class="params">(Node&lt;E&gt; f)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert f == first &amp;&amp; f != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = f.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = f.next;</span><br><span class="line">    f.item = <span class="keyword">null</span>;</span><br><span class="line">    f.next = <span class="keyword">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    first = next;</span><br><span class="line">    <span class="keyword">if</span> (next == <span class="keyword">null</span>)</span><br><span class="line">        last = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        next.prev = <span class="keyword">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="removeLast-å’ŒremoveFirståŒç†"><a href="#removeLast-å’ŒremoveFirståŒç†" class="headerlink" title="removeLast å’ŒremoveFirståŒç†"></a>removeLast å’ŒremoveFirståŒç†</h4><h3 id="èµ‹å€¼å–å€¼æ“ä½œ"><a href="#èµ‹å€¼å–å€¼æ“ä½œ" class="headerlink" title="èµ‹å€¼å–å€¼æ“ä½œ"></a>èµ‹å€¼å–å€¼æ“ä½œ</h3><h4 id="getæ–¹æ³•"><a href="#getæ–¹æ³•" class="headerlink" title="getæ–¹æ³•"></a>getæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="comment">/* å¾—åˆ°indexå¤„èŠ‚ç‚¹çš„itemä¿¡æ¯ */</span></span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="setæ–¹æ³•"><a href="#setæ–¹æ³•" class="headerlink" title="setæ–¹æ³•"></a>setæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    Node&lt;E&gt; x = node(index);</span><br><span class="line">    E oldVal = x.item;</span><br><span class="line">    x.item = element;</span><br><span class="line">    <span class="comment">/* setæ–¹æ³•ä¼šè¿”å›åŸæ¥çš„å€¼ */</span></span><br><span class="line">    <span class="keyword">return</span> oldVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LinkedListä¸­çš„æ ˆæ“ä½œ"><a href="#LinkedListä¸­çš„æ ˆæ“ä½œ" class="headerlink" title="LinkedListä¸­çš„æ ˆæ“ä½œ"></a>LinkedListä¸­çš„æ ˆæ“ä½œ</h3><h4 id="peekæ–¹æ³•"><a href="#peekæ–¹æ³•" class="headerlink" title="peekæ–¹æ³•"></a>peekæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Retrieves, but does not remove, the head (first element) of this list.</span></span><br><span class="line"><span class="comment"> * åªæ˜¯æ£€ç´¢æ ˆé¦–å…ƒç´ ï¼Œä½†å¹¶ä¸å¼¹å‡º</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the head of this list, or &#123;<span class="doctag">@code</span> null&#125; if this list is empty</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : f.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒç† <code>peekFirst</code> å’Œ <code>peekLast</code></p><h4 id="pollæ–¹æ³•"><a href="#pollæ–¹æ³•" class="headerlink" title="pollæ–¹æ³•"></a>pollæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Retrieves and removes the head (first element) of this list.</span></span><br><span class="line"><span class="comment"> * æ£€ç´¢å¹¶ä¸”ç§»é™¤æ ˆé¦–å…ƒç´  unlinkFirstæ˜¯å¯ä»¥è¿”å›ç§»é™¤å…ƒç´ çš„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the head of this list, or &#123;<span class="doctag">@code</span> null&#125; if this list is empty</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="keyword">null</span>) ? <span class="keyword">null</span> : unlinkFirst(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒç†  <code>pollFirst</code> å’Œ <code>pollLast</code></p><h4 id="pushæ–¹æ³•"><a href="#pushæ–¹æ³•" class="headerlink" title="pushæ–¹æ³•"></a>pushæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Pushes an element onto the stack represented by this list.  In other</span></span><br><span class="line"><span class="comment"> * words, inserts the element at the front of this list.</span></span><br><span class="line"><span class="comment"> * åœ¨æ ˆé¦–å †ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This method is equivalent to &#123;<span class="doctag">@link</span> #addFirst&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e the element to push</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    addFirst(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="popæ–¹æ³•"><a href="#popæ–¹æ³•" class="headerlink" title="popæ–¹æ³•"></a>popæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Pops an element from the stack represented by this list.  In other</span></span><br><span class="line"><span class="comment"> * words, removes and returns the first element of this list.</span></span><br><span class="line"><span class="comment"> * å‡ºæ ˆ</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This method is equivalent to &#123;<span class="doctag">@link</span> #removeFirst()&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the element at the front of this list (which is the top</span></span><br><span class="line"><span class="comment"> *         of the stack represented by this list)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NoSuchElementException if this list is empty</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> removeFirst();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="offeræ–¹æ³•"><a href="#offeræ–¹æ³•" class="headerlink" title="offeræ–¹æ³•"></a>offeræ–¹æ³•</h4><p>å®é™…ä¸Š <code>offer</code> æ˜¯è°ƒç”¨çš„ <code>add</code> æ–¹æ³•ï¼Œä½†æ˜¯åŒºåˆ«å°±åœ¨ <code>linkedlist</code> ç»§æ‰¿äº† <code>Dequ</code> å’Œ <code>List</code> çˆ¶ç±»ã€‚ä¸€èˆ¬å½“ <code>queue</code> ç”¨çš„æ—¶å€™è¦ç”¨ <code>offer/push/pop</code>  è€Œå½“ä½¿ç”¨ <code>list</code> çš„æ—¶å€™ç”¨ <code>add/remove</code> ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayListçš„æºç æŸ¥çœ‹</title>
      <link href="/2018/10/04/2018-10-04-ArrayList%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/"/>
      <url>/2018/10/04/2018-10-04-ArrayList%E7%9A%84%E6%BA%90%E7%A0%81%E6%9F%A5%E7%9C%8B/</url>
      
        <content type="html"><![CDATA[<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --><ul><li><a href="#arraylistçš„æºç æŸ¥çœ‹">ArrayListçš„æºç æŸ¥çœ‹</a><ul><li><a href="#ç»“æ„æºç ">ç»“æ„æºç </a></li><li><a href="#å¸¸ç”¨æ–¹æ³•æºç ">å¸¸ç”¨æ–¹æ³•æºç </a></li></ul></li></ul><!-- /TOC --><h1 id="ArrayListçš„æºç æŸ¥çœ‹"><a href="#ArrayListçš„æºç æŸ¥çœ‹" class="headerlink" title="ArrayListçš„æºç æŸ¥çœ‹"></a>ArrayListçš„æºç æŸ¥çœ‹</h1><h2 id="ç»“æ„æºç "><a href="#ç»“æ„æºç " class="headerlink" title="ç»“æ„æºç "></a>ç»“æ„æºç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹ */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* é»˜è®¤æ˜¯æ‹¥æœ‰é»˜è®¤å®¹é‡ï¼ˆ10ï¼‰çš„ç©ºçš„ array list */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="comment">/* è¿™ä¸ªé»˜è®¤çš„å®¹é‡æ˜¯å®šä¹‰å¥½çš„10  */</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å½“å‚æ•°æ˜¯å®¹é‡çš„å¤§å°çš„æ—¶å€™  */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">/* å¦‚æœè‡ªå®šä¹‰åˆå§‹å®¹é‡å¤§å°*/</span></span><br><span class="line">        <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">/* å¦‚æœå‚æ•°å°äº0 æŠ¥å‚æ•°å¼‚å¸¸çš„é”™è¯¯ï¼ˆIllegalArgumentExceptionï¼‰ */</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å½“å‚æ•°æ˜¯ä¸€ä¸ªCollectionç»“æ„çš„æ—¶å€™ */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">     elementData = c.toArray();</span><br><span class="line">     <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class="line">         <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">         <span class="comment">/* å¦‚æœä¸æ˜¯objectç±»å‹çš„è¯ è½¬æ¢æˆobjectç±»å‹ */</span></span><br><span class="line">             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">// replace with empty array.</span></span><br><span class="line">         <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨æ–¹æ³•æºç "><a href="#å¸¸ç”¨æ–¹æ³•æºç " class="headerlink" title="å¸¸ç”¨æ–¹æ³•æºç "></a>å¸¸ç”¨æ–¹æ³•æºç </h2><ul><li>add æ·»åŠ æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ·»åŠ  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* æ‰©å……å®¹é‡ */</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">/* ArrayListå…¶å®å°±æ˜¯ä¸ªæ•°ç»„ å°†æ–°addçš„å€¼æ”¾åˆ°æ•°ç»„çš„æœ€åé¢ */</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">      ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* å¦‚æœæ˜¯ç©ºçš„è¯è¿”å› é»˜è®¤æˆ–å½“å‰ */</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* The number of times this list has been &lt;i&gt;structurally modified&lt;/i&gt;. */</span></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">    <span class="comment">/* å¦‚æœå½“å‰çš„å®¹é‡å¤§äºç»™å®šçš„é•¿åº¦çš„æ—¶å€™ éœ€è¦æ‰©å…… */</span></span><br><span class="line">        grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length; <span class="comment">// åŸé•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>); <span class="comment">//æ–°é•¿åº¦ å³ç§»è¿ç®—ã€‚é•¿åº¦ä¸º1.5å€çš„åŸé•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">   <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>remove ç§»é™¤å…ƒç´ æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index); <span class="comment">//å¦‚æœè¶…å‡º IndexOutOfBoundsException</span></span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    E oldValue = elementData(index);</span><br><span class="line">    <span class="comment">/* æƒ³è¦ç§»é™¤å…ƒç´ çš„ä½ç½® */</span></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">    <span class="comment">/* arraycopyæ˜¯ä¸ªnativeæ–¹æ³• ç›¸å½“äºæŠŠindex+1ä½ç½®ä¸Šçš„å…ƒç´ æŒªåˆ°indexä½ç½®ä¸Š */</span></span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);</span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åªä¼šç§»é™¤ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ¡ç›® */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">              <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">/* è¿™ä¸ªfastRemoveæ–¹æ³•å’Œä¸Šé¢çš„æ–¹æ³•å¤§ç›¸å¾„åº­  */</span></span><br><span class="line">                  fastRemove(index);</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">              &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">              <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                  fastRemove(index);</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">              &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>contain æ˜¯å¦åŒ…å«</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> indexOf(o) &gt;= <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">               <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</span><br><span class="line">                   <span class="keyword">return</span> i;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">/* å†…éƒ¨å°±æ˜¯forå¾ªç¯ä¸€ä¸ªä¸€ä¸ªåˆ¤æ–­çš„ */</span></span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">               <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                   <span class="keyword">return</span> i;</span><br><span class="line">                         &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li>get æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> elementData(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æœ¬è´¨å°±æ˜¯è¿”å›æ•°ç»„ä½ç½®çš„å…ƒç´  */</span></span><br><span class="line"><span class="function">E <span class="title">elementData</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•´ç†å¹¶å­¦ä¹ stackOverFlowä¸Šçš„çƒ­é—¨å›ç­”</title>
      <link href="/2018/07/25/2018-07-25-stackOverFlow%E4%B8%8A%E7%9A%84%E7%83%AD%E9%97%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2018/07/25/2018-07-25-stackOverFlow%E4%B8%8A%E7%9A%84%E7%83%AD%E9%97%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€JavaçŸ¥è¯†"><a href="#åŸºç¡€JavaçŸ¥è¯†" class="headerlink" title="åŸºç¡€JavaçŸ¥è¯†"></a>åŸºç¡€JavaçŸ¥è¯†</h1><p>å¹³å¸¸æ²¡äº‹çš„æ—¶å€™ä¼šé€›é€›stackOverFlow,ä¸Šé¢æœ‰å¾ˆå¤šéå¸¸åŸºç¡€çš„é—®é¢˜ï¼Œå¹¶ä¸”å›ç­”è€…è®²è§£çš„éå¸¸çš„é€å½»ï¼Œæˆ‘æƒ³é€šè¿‡æ•´ç†ä¸Šé¢çš„çƒ­é—¨å›ç­”æ¥æ¢³ç†ä¸€ä¸‹è‡ªå·±çš„JavaåŸºç¡€çŸ¥è¯†ã€‚</p><h2 id="çƒ­é—¨"><a href="#çƒ­é—¨" class="headerlink" title="çƒ­é—¨"></a>çƒ­é—¨</h2><h3 id="ä»€ä¹ˆæ˜¯NullPointerExpection-å¦‚ä½•å»å°½å¯èƒ½çš„é¿å…"><a href="#ä»€ä¹ˆæ˜¯NullPointerExpection-å¦‚ä½•å»å°½å¯èƒ½çš„é¿å…" class="headerlink" title="ä»€ä¹ˆæ˜¯NullPointerExpection,å¦‚ä½•å»å°½å¯èƒ½çš„é¿å…"></a>ä»€ä¹ˆæ˜¯NullPointerExpection,å¦‚ä½•å»å°½å¯èƒ½çš„é¿å…</h3><p>å½“ä½ å£°æ˜ä¸€ä¸ªå¼•ç”¨å˜é‡(å¯¹è±¡)çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆã€‚å‚è€ƒå¦‚ä¸‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x ;</span><br><span class="line">x = <span class="number">10</span> ;</span><br></pre></td></tr></table></figure><p>åœ¨ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†å˜é‡ <code>x</code> ã€‚å› ä¸ºæ˜¯åŸå§‹ç±»å‹ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä»˜ç»™å˜é‡<code>x</code>åˆå§‹å€¼æ˜¯0ã€‚ä½†æ˜¯ç¬¬äºŒè¡Œä½¿ç”¨<code>x=10</code>ï¼Œå°†æ•°å€¼10ä»˜ç»™å˜é‡xï¼Œå®é™…è¿‡ç¨‹æ˜¯å°†10å†™å…¥å˜é‡xæ‰€æŒ‡å‘çš„å†…å­˜ä½ç½®ã€‚<br>ç„¶è€Œï¼Œå½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå¯¹äºintæ¥è¯´ä¹Ÿå°±æ˜¯å…¶åŒ…è£…ç±»å‹ã€‚ä¼šå‡ºç°ä¸ä¸€æ ·çš„æƒ…å½¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer num;</span><br><span class="line">num = <span class="keyword">new</span> Integer(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>å½“ä½ åˆ›å»ºnumçš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œå› ä¸ºä»–å¼•ç”¨å¯¹è±¡ï¼Œç„¶è€Œï¼Œä»–ä¼šåŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆè™½ç„¶å­˜åœ¨ï¼Œä½†æ˜¯ä»–æ²¡æœ‰åˆå§‹å€¼ï¼Œæ‰€ä»¥javaä¼šå°†å˜é‡çš„æŒ‡é’ˆæŒ‡å‘ç©º(null)ã€‚<br>åœ¨ç¬¬äºŒè¡Œä½¿ç”¨newå…³é”®å­—å®ä¾‹åŒ–äº†numï¼Œè¿™æ—¶ï¼Œä¼šå°†å˜é‡numæŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><p>åœ¨å½“ç”¨åˆ°è¿™ä¸ªå˜é‡ä¹‹å‰æœªç»™å˜é‡åšå®ä¾‹åŒ–æ—¶ï¼Œä¹Ÿå°±æ˜¯å˜é‡çš„æŒ‡é’ˆè¿˜æŒ‡å‘ç©ºæ—¶ï¼Œè¿è¡Œåä¼šå‡ºç°NullPointerExpection è¿™ä¸ªé—®é¢˜ã€‚</p><p>å¯èƒ½è§‰å¾—åœ¨å®é™…codeingçš„æ—¶å€™ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæ¯ä¸ªæ–¹æ³•çš„å¼•ç”¨å¯¹è±¡å¦‚æœä¸åˆ¤æ–­ä¼ è¿›æ¥çš„å€¼æ˜¯å¦éç©ºï¼Œéƒ½å¯èƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜</p><p>é”™è¯¯çš„ç¤ºèŒƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(SomeObject obj)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//do something to obj</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨çš„æ—¶å€™ ä¼ é€’nullå€¼æ—¶,ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line">doSomething(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„ç¤ºèŒƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(SomeObject obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj != <span class="keyword">null</span>) &#123;</span><br><span class="line">       <span class="comment">//do something</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">//do something else</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°½é‡åœ¨æ¯æ¬¡å¼€å‘çš„è¿‡ç¨‹å½“ä¸­ï¼Œä»”ç»†æ–Ÿé…Œå˜é‡æ˜¯å¦å¯èƒ½ä¸ºç©ºï¼Œå½“å¯èƒ½ä¸ºç©ºæ—¶ä¸€å®šè¦åšè¿™ç§åˆ¤æ–­æ¥é¢„é˜²ç©ºæŒ‡é’ˆã€‚ä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚</p><h3 id="å¦‚ä½•æ¯”è¾ƒå­—ç¬¦ä¸²"><a href="#å¦‚ä½•æ¯”è¾ƒå­—ç¬¦ä¸²" class="headerlink" title="å¦‚ä½•æ¯”è¾ƒå­—ç¬¦ä¸²"></a>å¦‚ä½•æ¯”è¾ƒå­—ç¬¦ä¸²</h3><p>åœ¨å½“ä½¿ç”¨ <code>==</code> æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¯èƒ½ä¼šå‡ºç°bugï¼Œè¿™æ—¶å¯ä»¥ç”¨equalsè§£å†³ã€‚æ‰€ä»¥å¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ <code>==</code> ä»€ä¹ˆæ—¶å€™ä½¿ç”¨equals</p><p>ä¸»è¦æœ‰ä¸¤æ–¹é¢çš„å·®å¼‚ï¼š</p><ol><li><p><code>==</code> æ˜¯æ¯”è¾ƒå¯¹è±¡å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æˆ–è€…å˜é‡çš„åœ°å€æ˜¯å¦æ˜¯ç›¸åŒçš„ã€‚è€Œequalsæ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ã€‚</p></li><li><p><code>==</code> æ²¡æœ‰éç©ºçš„åˆ¤æ–­ï¼Œè€Œequalså¦‚æœæ¯”è¾ƒçš„å¯¹è±¡å¦‚æœæ˜¯ç©ºåˆ™ä¼šå‡ºç°å¼‚å¸¸ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨equalsçš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨å·²çŸ¥çš„éç©ºå¯¹è±¡.equals(Object) å¦‚ <code>&quot;hello&quot;.equals(x)</code></p></li></ol><p>equalsæ˜¯Objectçš„æ–¹æ³•ï¼Œå¤§éƒ¨åˆ†ç±»ä¸­ä¹Ÿé‡å†™äº†equalsæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æ¯”è¾ƒå¯¹è±¡çš„æ—¶å€™åº”è¯¥ä½¿ç”¨equals,è€Œå½“æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹å¦‚intçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>==</code></p><h3 id="Javaæ˜¯ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨"><a href="#Javaæ˜¯ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨" class="headerlink" title="Javaæ˜¯ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨"></a>Javaæ˜¯ä¼ å€¼è¿˜æ˜¯ä¼ å¼•ç”¨</h3><p><strong>Javaæ˜¯ä¼ å€¼çš„</strong> ã€‚ä½†æ˜¯ï¼Œé€šå¸¸æˆ‘ä»¬å®šä½å€¼çš„æ—¶å€™ç§°ä»–ä¸º â€œå¼•ç”¨â€ ã€‚å…·ä¸€ä¸ªéå¸¸å…¸å‹çš„ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Dog aDog = <span class="keyword">new</span> Dog(<span class="string">"Max"</span>);</span><br><span class="line">    <span class="comment">// we pass the object to foo</span></span><br><span class="line">    foo(aDog);</span><br><span class="line">    <span class="comment">// aDog variable is still pointing to the "Max" dog when foo(...) returns</span></span><br><span class="line">    aDog.getName().equals(<span class="string">"Max"</span>); <span class="comment">// true</span></span><br><span class="line">    aDog.getName().equals(<span class="string">"Fifi"</span>); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Dog d)</span> </span>&#123;</span><br><span class="line">    d.getName().equals(<span class="string">"Max"</span>); <span class="comment">// true</span></span><br><span class="line">    <span class="comment">// change d inside of foo() to point to a new Dog instance "Fifi"</span></span><br><span class="line">    d = <span class="keyword">new</span> Dog(<span class="string">"Fifi"</span>);</span><br><span class="line">    d.getName().equals(<span class="string">"Fifi"</span>); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶fooæ–¹æ³•å†…æ”¹å˜äº†ä¼ è¿›æ¥çš„aDogçš„å€¼ï¼Œæ³¨æ„è¿™é‡Œæ˜¯ <code>å€¼</code>ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨å®Œfooæ–¹æ³•ä¹‹åå†å»åˆ¤æ–­å˜é‡aDogçš„æ—¶å€™ä»–çš„å¼•ç”¨åˆ°çš„å€¼æ²¡æœ‰å˜ï¼Œå˜çš„åªæ˜¯å½“æ—¶ä¼ è¿›å»çš„å€¼è€Œä¸æ˜¯å˜é‡çš„åº”ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è¯´ï¼Œå¯¹è±¡çš„å¼•ç”¨æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚å¦‚æœè¿™æ ·è¿˜æ˜¯è¿·ç³Šçš„è¯ï¼Œ<br>è¿˜å¯ä»¥é€†å‘æ¥æƒ³ï¼Œå¦‚æœæ˜¯ä¼ å¼•ç”¨çš„è¯ï¼Œåœ¨å½“fooæ–¹æ³•æ”¹å˜äº†aDogçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜æ”¹å˜äº†aDogæ‰€å¼•ç”¨åˆ°çš„çœŸæ­£çš„è¿™ä¸ªå€¼ã€‚è¿™æ ·æ˜¯ä¸èƒ½æˆç«‹ã€‚</p><p>æ‰€ä»¥ä¸ç®¡æ€ä¹ˆæƒ³ï¼šJavaæ˜¯ä¼ å€¼çš„ï¼ï¼</p><h3 id="æ€æ ·å¿«é€Ÿæ‰“å°å‡ºarrayæ•°ç»„å†…çš„å€¼"><a href="#æ€æ ·å¿«é€Ÿæ‰“å°å‡ºarrayæ•°ç»„å†…çš„å€¼" class="headerlink" title="æ€æ ·å¿«é€Ÿæ‰“å°å‡ºarrayæ•°ç»„å†…çš„å€¼"></a>æ€æ ·å¿«é€Ÿæ‰“å°å‡ºarrayæ•°ç»„å†…çš„å€¼</h3><p>å› ä¸ºarrayå¹¶æ²¡æœ‰å®ç°toString()æ–¹æ³•ï¼Œæ‰€ä»¥å½“ä½¿ç”¨array.toString()çš„æ—¶å€™ä¼šæ‰“å°å‡ºç±»ä¼¼ <code>[I@17f052a3</code> çš„åœ°å€ä¿¡æ¯ï¼Œåœ¨jdk1.5ä¹‹åå¯ä»¥ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] x = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">String arrayString = Arrays.toString(x);</span><br><span class="line">System.out.println(arrayString);</span><br><span class="line"><span class="comment">//ç»“æœï¼š [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æ–¹å¼å¯ä»¥éå¸¸æ–¹ä¾¿çš„æ‰“å°å‡ºæ•°ç»„å†…æ‰€æœ‰å…ƒç´ ,åµŒå¥—æ•°ç»„å¯ä»¥ä½¿ç”¨deepToStringæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Arrays.toString(deepArray));</span><br><span class="line"><span class="comment">//output: [[Ljava.lang.String;@106d69c, [Ljava.lang.String;@52e922]</span></span><br><span class="line">System.out.println(Arrays.deepToString(deepArray));</span><br><span class="line">ç»“æœï¼š[[John, Mary], [Alice, Bob]]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashç›¸å…³é—®é¢˜æ€»ç»“</title>
      <link href="/2018/07/13/2018-07-12-bash%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"/>
      <url>/2018/07/13/2018-07-12-bash%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="bashç›¸å…³é—®é¢˜æ€»ç»“"><a href="#bashç›¸å…³é—®é¢˜æ€»ç»“" class="headerlink" title="bashç›¸å…³é—®é¢˜æ€»ç»“"></a>bashç›¸å…³é—®é¢˜æ€»ç»“</h1><h2 id="ä¸ƒæœˆä¸“é¢˜"><a href="#ä¸ƒæœˆä¸“é¢˜" class="headerlink" title="ä¸ƒæœˆä¸“é¢˜ - -"></a>ä¸ƒæœˆä¸“é¢˜ - -</h2><h3 id="å…³äºbashä¸­çš„-lt-lt-lt-çš„å«ä¹‰"><a href="#å…³äºbashä¸­çš„-lt-lt-lt-çš„å«ä¹‰" class="headerlink" title="å…³äºbashä¸­çš„ &lt;&lt;&lt; çš„å«ä¹‰"></a>å…³äºbashä¸­çš„ <code>&lt;&lt;&lt;</code> çš„å«ä¹‰</h3><p>åœ¨StackOverflowä¸­æœ‰ä¸ªä¾‹å­éå¸¸çš„è¯¦ç»†ã€‚ã€‚å…ˆè´´è¿æ¥ <a href="https://unix.stackexchange.com/questions/80362/what-does-mean" target="_blank" rel="noopener">What does &lt;&lt;&lt; mean? </a>ä»¥ä¸‹æ˜¯æˆ‘çš„æ¸£ç¿»è¯‘ï¼Œå¯èƒ½ä¼šç¿»è¯‘é”™ã€‚ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·å¯¹å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$string</span>"</span> | <span class="built_in">command</span></span><br></pre></td></tr></table></figure><p>ç„¶è€Œåœ¨bashä¸­ï¼Œè¿™æ ·å†™ï¼ˆä½¿ç”¨ç®¡é“ï¼‰å°±ç›¸å½“äºæŠŠå‘½ä»¤åˆ†åˆ°å­shellä¸­è¿›è¡Œå¤„ç†ï¼Œè€ƒè™‘è¿™ç§æƒ…å†µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"hello world"</span> | <span class="built_in">read</span> first second</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$second</span> <span class="variable">$first</span></span><br></pre></td></tr></table></figure><p>å®ƒä¼šè¾“å‡ºä¸€ä¸ªç©ºè¡Œï¼Œå­shellæˆåŠŸçš„è¯»åˆ°äº†ä¸¤ä¸ªå˜é‡ï¼Œä½†æ˜¯éšåå­shellé€€å‡ºï¼Œä¸¤ä¸ªå˜é‡å°±æ¶ˆå¤±æ‰äº†ã€‚æ‰€ä»¥è¾“å‡ºæ˜¯æ²¡æœ‰ç»“æœçš„ã€‚åº”å½“è¿™æ ·å†™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"hello world"</span> | &#123;</span><br><span class="line">    <span class="built_in">read</span> first second</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$second</span> <span class="variable">$first</span></span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯è¿™æ ·è¿˜æ˜¯æ²¡æœ‰è§£å†³è¿™ç§åˆ†æˆå­shellå»æ‰§è¡Œçš„å°´å°¬ã€‚è¿™æ—¶å€™å°±èƒ½å¤Ÿä½¿ç”¨ `&lt;&lt;&lt;` äº†</span><br><span class="line"></span><br><span class="line">````bash</span><br><span class="line"><span class="built_in">read</span> first second &lt;&lt;&lt; <span class="built_in">echo</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure><h3 id="å…³äº-var-varæ˜¯å˜é‡å"><a href="#å…³äº-var-varæ˜¯å˜é‡å" class="headerlink" title="å…³äº${!var} varæ˜¯å˜é‡å"></a>å…³äº${!var} varæ˜¯å˜é‡å</h3><p>ä½¿ç”¨${!var}çš„ä½œç”¨æ˜¯å½“verä¸å­˜åœ¨çš„æ—¶å€™ä¼šåŸæ ·è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤º${var}</p><h3 id="å…³äºbashä¸­çš„trapå‘½ä»¤çš„ä½¿ç”¨"><a href="#å…³äºbashä¸­çš„trapå‘½ä»¤çš„ä½¿ç”¨" class="headerlink" title="å…³äºbashä¸­çš„trapå‘½ä»¤çš„ä½¿ç”¨"></a>å…³äºbashä¸­çš„trapå‘½ä»¤çš„ä½¿ç”¨</h3><p>trapå¯ä»¥å¼ºåŒ–bashè„šæœ¬ï¼Œè®©è„šæœ¬æ›´åŠ ç¨³å®šã€‚</p><h4 id="trapçš„ä½¿ç”¨æ–¹å¼"><a href="#trapçš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="trapçš„ä½¿ç”¨æ–¹å¼"></a>trapçš„ä½¿ç”¨æ–¹å¼</h4><p>trapæœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼Œå¯¹åº”è¿™ä¸åŒçš„å¯¹ä¿¡å·çš„å›åº”æ–¹å¼ã€‚</p><ol><li>trap â€somethingâ€œ signal</li></ol><p>å…¶ä¸­â€somethingâ€œ æ˜¯åœ¨æ¥å—signalä¿¡å·ä¹‹åä½œå‡ºçš„å‘½ä»¤</p><ol start="2"><li>trap signal </li></ol><p>trapä¸æŒ‡å®šä»»ä½•å‘½ä»¤ï¼Œæ¥å—ä¿¡å·çš„é»˜è®¤æ“ä½œï¼Œé»˜è®¤æ“ä½œæ˜¯ç»“æŸè¿›ç¨‹çš„è¿è¡Œ</p><ol start="3"><li>trap â€œâ€ signal</li></ol><p>trapå‘½ä»¤æŒ‡å®šä¸€ä¸ªç©ºå‘½ä»¤ä¸²ï¼Œå…è®¸å¿½è§†ä¿¡å·</p><h4 id="å¸¸ç”¨ä¿¡å·"><a href="#å¸¸ç”¨ä¿¡å·" class="headerlink" title="å¸¸ç”¨ä¿¡å·"></a>å¸¸ç”¨ä¿¡å·</h4><ul><li><p>HUB(1) æŒ‚èµ·ï¼Œé€šå¸¸å› ç»ˆç«¯æ‰çº¿æˆ–ç”¨æˆ·é€€å‡ºè€Œå¼•å‘</p></li><li><p>INT(2) ä¸­æ–­ï¼Œé€šå¸¸å› æŒ‰ä¸‹Ctrl+Cç»„åˆé”®è€Œå¼•å‘</p></li><li><p>QUIT(3) é€€å‡ºï¼Œé€šå¸¸å› æŒ‰ä¸‹Ctrl+/ç»„åˆé”®è€Œå¼•å‘</p></li><li><p>ABRT(6) ä¸­æ­¢ï¼Œé€šå¸¸å› æŸäº›ä¸¥é‡çš„æ‰§è¡Œé”™è¯¯è€Œå¼•å‘</p></li><li><p>ALRM(14) æŠ¥è­¦ï¼Œé€šå¸¸ç”¨æ¥å¤„ç†è¶…æ—¶</p></li><li><p>TERM(15) ç»ˆæ­¢ï¼Œé€šå¸¸åœ¨ç³»ç»Ÿå…³æœºæ—¶å‘é€</p></li><li><p>KILL(9) æ€æ­»è¿›ç¨‹</p></li><li><p>STOP åœæ­¢è¿›ç¨‹æ‰§è¡Œ</p></li></ul><p>æ›´è¿‡çš„ä¿¡å· å¯ä»¥ä½¿ç”¨ trap -l å‘½ä»¤æ¥æŸ¥çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA ä¸­çš„å¿«æ·é”®</title>
      <link href="/2018/07/13/2018-07-15-idea%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
      <url>/2018/07/13/2018-07-15-idea%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="IDEA-ä¸­çš„å¿«æ·é”®"><a href="#IDEA-ä¸­çš„å¿«æ·é”®" class="headerlink" title="IDEA ä¸­çš„å¿«æ·é”®"></a>IDEA ä¸­çš„å¿«æ·é”®</h1><p>ä»¥å‰ç»å¸¸ç”¨ideaå¼€å‘ï¼Œä½†æ˜¯ç«Ÿç„¶æ²¡æœ‰æ€ä¹ˆä½¿ç”¨åˆ°ideaçš„å¿«æ·é”®ã€‚ã€‚æ²¡æœ‰çœŸæ­£çš„ä½¿ç”¨åˆ°ideaä¸­éå¸¸é‡è¦çš„ç‰¹æ€§ã€‚ä»Šå¤©æ­£å¥½çœ‹åˆ°äº†æœ‰ä¸€ç¯‡å¾®ä¿¡å…¬ä¼—å·é‡Œæ–‡ç« æ€»ç»“äº†å…³äºå¸¸ç”¨çš„ideaå¿«æ·é”®ã€‚<br>é‚è€Œä¹Ÿæƒ³å°å°æ€»ç»“ä¸€ä¸‹ï¼Œå¸Œæœ›åœ¨ä»¥åçš„å¼€å‘ä¸­å¤šç”¨å¿«æ·é”®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><ol><li><p>ctrl+alt+o = ä¼˜åŒ–å¯¼å…¥çš„åŒ…</p></li><li><p>alt+insert = åŠ å…¥ä»£ç </p></li><li><p>ctrl+alt+T = ç”Ÿæˆtryâ€“catchç»“æ„</p></li><li><p>alt+å›è½¦   = å¯¼å…¥åŒ…</p></li><li><p>ctrl+alt+l = æ ¼å¼åŒ–ä»£ç </p></li><li><p>ctrl+e     = æœ€è¿‘æ›´æ”¹çš„ä»£ç </p></li><li><p>Shift+F6   = é‡æ„-é‡å‘½å åŒ…ã€ç±»ã€æ–¹æ³•ã€å˜é‡ã€ç”šè‡³æ³¨é‡Šç­‰</p></li></ol><h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><ol><li><p>ctrl+Shift+backspace =å›åˆ°ä¸Šæ¬¡ç¼–è¾‘çš„åœ°æ–¹</p></li><li><p>ctrl+alt+left/right = å›åˆ°å‰åç¼–è¾‘çš„åœ°æ–¹</p></li><li><p>Shift+Shift åœ¨ç›®å½•ä¸­æŸ¥æ‰¾ç±»</p></li><li><p>ctrl+n æŸ¥æ‰¾ç±»</p></li><li><p>ctrl+Shift+n æŸ¥æ‰¾æ–‡ä»¶</p></li><li><p>ctrl+e æ‰“å¼€æœ€è¿‘æ–‡ä»¶</p></li><li><p>ctrl+f æ–‡ä»¶å†…å®¹æŸ¥æ‰¾</p></li><li><p>ctrl+shift+f å…¨å±€å†…å®¹æŸ¥æ‰¾</p></li><li><p>ctrl+w å¿«é€Ÿé€‰ä¸­</p></li><li><p>ctrl+b/ctrl+alt+b å¯¹åº”è¿™å›æº¯åˆ°çˆ¶ç±»å’Œåˆ°å­ç±»çš„å¿«æ·é”®</p></li></ol><h2 id="å¯¹è¡Œçš„åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´æ“ä½œå¯ä»¥ä½¿ç”¨vimæ’ä»¶æ¥å®ç°"><a href="#å¯¹è¡Œçš„åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´æ“ä½œå¯ä»¥ä½¿ç”¨vimæ’ä»¶æ¥å®ç°" class="headerlink" title="å¯¹è¡Œçš„åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´æ“ä½œå¯ä»¥ä½¿ç”¨vimæ’ä»¶æ¥å®ç°"></a>å¯¹è¡Œçš„åˆ é™¤ï¼Œå¤åˆ¶ï¼Œç²˜è´´æ“ä½œå¯ä»¥ä½¿ç”¨vimæ’ä»¶æ¥å®ç°</h2><h2 id="æœ€åvimçš„åå¤§å¿«æ·é”®ï¼ˆcopyçš„ï¼‰"><a href="#æœ€åvimçš„åå¤§å¿«æ·é”®ï¼ˆcopyçš„ï¼‰" class="headerlink" title="æœ€åvimçš„åå¤§å¿«æ·é”®ï¼ˆcopyçš„ï¼‰"></a>æœ€åvimçš„åå¤§å¿«æ·é”®ï¼ˆcopyçš„ï¼‰</h2><p>Ã˜  Top #10åˆ‡æ¥åˆ‡å»ï¼šCtrl+Tab</p><p>Ã˜  Top #9é€‰ä½ æ‰€æƒ³ï¼šCtrl+W</p><p>Ã˜  Top #8ä»£ç ç”Ÿæˆï¼šTemplate/Postfix +Tab</p><p>Ã˜  Top #7å‘å·æ–½ä»¤ï¼šCtrl+Shift+A</p><p>Ã˜  Top #6æ— å¤„è—èº«ï¼šShift+Shift</p><p>Ã˜  Top #5è‡ªåŠ¨å®Œæˆï¼šCtrl+Shift+Enter</p><p>Ã˜  Top #4åˆ›é€ ä¸‡ç‰©ï¼šAlt+Insert</p><p>å¤ªéš¾å‰²èˆï¼Œå‰ä¸‰åå¹¶åˆ—å§ï¼</p><p>Ã˜  Top #1æ™ºèƒ½è¡¥å…¨ï¼šCtrl+Shift+Space</p><p>Ã˜  Top #1è‡ªæˆ‘ä¿®å¤ï¼šAlt+Enter</p><p>Ã˜  Top #1é‡æ„ä¸€åˆ‡ï¼šCtrl+Shift+Alt+T</p><h2 id="å¦å¤–è¡¥å……"><a href="#å¦å¤–è¡¥å……" class="headerlink" title="å¦å¤–è¡¥å……"></a>å¦å¤–è¡¥å……</h2><ol><li><p>alt+1 projectè§†å›¾</p></li><li><p>alt+7 ç±»æ–¹æ³•ç»“æ„</p></li><li><p>alt+home æ˜¾ç¤ºå¯¼èˆªæ </p></li><li><p>shift+f6 é‡å‘½å</p></li><li><p>ctrl+shift+åŠ å· æŠ˜å ä»£ç </p></li></ol><p>å…³é—­tabé¡µå…¶å®æ˜¯æœ‰å¿…è¦çš„</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåå…­ï¼‰ bashå­¦ä¹ ç»ˆç« </title>
      <link href="/2018/07/08/2018-07-06-bash_15_%E7%BB%88%E7%AB%A0/"/>
      <url>/2018/07/08/2018-07-06-bash_15_%E7%BB%88%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå­¦ä¹ ç»ˆç« "><a href="#bashå­¦ä¹ ç»ˆç« " class="headerlink" title="bashå­¦ä¹ ç»ˆç« "></a>bashå­¦ä¹ ç»ˆç« </h1><p>å­¦ä¹ bashæœ‰å¾ˆé•¿æ—¶é—´äº†ï¼Œå¾ˆå¤šæ—¶é—´èŠ±è´¹åœ¨å­¦ä¹ åŸºç¡€è¯­æ³•ä¸Šï¼Œæ²¡æœ‰çœŸæ­£çš„ä¸Šæ‰‹å®è·µç¼–å†™ä¸€äº›ä½¿ç”¨çš„bashè„šæœ¬ï¼Œæ¥ä¸‹æ¥æˆ‘æŠŠå‰©ä½™çš„æ¯”è¾ƒå¸¸è§çš„bashè¯­æ³•å­¦ä¹ å®Œï¼Œæ‰¾ä¸€äº›githubä¸Šçš„çš„å¤§ç‰›å†™è¿‡çš„bashè„šæœ¬å»å…ˆ<br>åˆ†æï¼Œç„¶åè‡ªå·±è¾¹ç†è§£è¾¹å®è·µå§ï¼Œæˆ‘çš„ç›®æ ‡å°±æ˜¯èƒ½å¤ŸåŸºæœ¬ç†Ÿç»ƒçš„ä½¿ç”¨bashè„šæœ¬ã€‚</p><h2 id="bashçš„listç»“æ„"><a href="#bashçš„listç»“æ„" class="headerlink" title="bashçš„listç»“æ„"></a>bashçš„listç»“æ„</h2><p>è¿™é‡Œæ‰€è¯´åˆ°çš„listç»“æ„ä¸æ˜¯Javaè¯­è¨€ä¸­çš„listç»“æ„ï¼Œè€Œæ˜¯åœ¨åšæ¡ä»¶çš„æ—¶å€™çš„ä¸€ç§é“¾å¼æœºæ„ï¼Œå¯ä»¥ä½¿ç”¨ <code>&amp;&amp;</code> æˆ–è€… <code>||</code> æ¥å¤„ç†å¤šä¸ªå‘½ä»¤çš„æ–¹æ³•ã€‚</p><p>å…¶ä¸­åˆ†ä¸ºä¸¤ç§ç®€å•çš„ç»“æ„</p><ul><li>å’Œç»“æ„ ï¼ˆand listï¼‰</li></ul><p>è¿™ç§ç»“æ„ä¼šåŒæ—¶æ¯”è¾ƒå¤šä¸ªå‘½ä»¤ï¼Œå¦‚æœå‰ä¸€ä¸ªå‘½ä»¤è¿”å›trueï¼Œåˆ™ä¸‹ä¸€ä¸ªå‘½ä»¤ä¸€æ¬¡å»æ‰§è¡Œã€‚ä½†æ˜¯å¦‚æœå‰ä¸€ä¸ªå‘½ä»¤è¿”å›falseï¼Œé‚£ä¹ˆåé¢éƒ½ä¸å»æ‰§è¡Œï¼ˆå‘½ä»¤é“¾ç»ˆæ­¢ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># command-1 &amp;&amp; command-2 &amp;&amp; command-3 &amp;&amp; ... command-n</span></span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">"<span class="variable">$1</span>"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"Argument #1 = <span class="variable">$1</span>"</span> &amp;&amp; [ ! -z <span class="string">"<span class="variable">$2</span>"</span> ] &amp;&amp;</span><br></pre></td></tr></table></figure><ul><li>ä¸ç»“æ„ ï¼ˆor listï¼‰</li></ul><p>è¿™ä¸ªç»“æ„å’Œ and listæ­£å¥½ç›¸åï¼Œå¦‚æœå‰ä¸€ä¸ªå‘½ä»¤è¿”å›falseï¼Œåˆ™ä¸‹ä¸€ä¸ªå‘½ä»¤ä¾æ¬¡å»æ‰§è¡Œã€‚å¦‚æœå‰ä¸€ä¸ªå‘½ä»¤æ—¶tureï¼Œé‚£ä¹ˆç»ˆæ­¢å‘½ä»¤é“¾ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># command-1 || command-2 || command-3 || ... command-n</span></span><br><span class="line">[ ! -f <span class="string">"<span class="variable">$file</span>"</span> ] || (rm -f <span class="variable">$file</span>; <span class="built_in">echo</span> <span class="string">"File \"<span class="variable">$file</span>\" deleted."</span>)</span><br></pre></td></tr></table></figure><h2 id="bashä¸­çš„æ•°ç»„"><a href="#bashä¸­çš„æ•°ç»„" class="headerlink" title="bashä¸­çš„æ•°ç»„"></a>bashä¸­çš„æ•°ç»„</h2><p>æ•°ç»„ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆåœ¨bashä¸­å¦‚ä½•åˆå§‹åŒ–å’Œä½¿ç”¨æ•°ç»„å‘¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§æ–¹å¼ä¸ºæ•°ç»„èµ‹å€¼</span></span><br><span class="line">area[11]=23</span><br><span class="line">area[13]=37</span><br><span class="line">area[51]=UFOs</span><br><span class="line"><span class="comment"># ç¬¬äºŒç§æ–¹å¼</span></span><br><span class="line">area2=( zero one two three four )</span><br><span class="line"><span class="comment"># ç¬¬ä¸‰ç§æ–¹å¼</span></span><br><span class="line">area3=([17]=seventeen [24]=twenty-four)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å°æ‹¬å·è¿›è¡Œæ•°ç»„çš„åˆå§‹åŒ–ï¼Œä»¥åä¼šæ¥è§¦åˆ°æ›´å¤šå…³äºbashæ•°ç»„çš„å®ä¾‹ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªä½¿ç”¨bashçš„å†’æ³¡æ’åºã€‚</p><h2 id="Linuxä¸­çš„-devå’Œ-proc"><a href="#Linuxä¸­çš„-devå’Œ-proc" class="headerlink" title="Linuxä¸­çš„ /devå’Œ /proc"></a>Linuxä¸­çš„ <code>/dev</code>å’Œ <code>/proc</code></h2><ul><li><code>/dev</code> æ˜¯è®¾å¤‡æ–‡ä»¶çš„ç›®å½•ï¼Œå¯ä»¥çœ‹å‡ºæ¥devæ—¶deviceè®¾å¤‡çš„ç¼©å†™ã€‚å¦‚æœæƒ³æŸ¥çœ‹æŸäº›ç‰¹å®šè®¾å¤‡çš„æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å»å¯¹åº”çš„ <code>/dev/*</code>çš„ç›®å½•ä¸‹é¢å»æ‰¾å¯¹åº”çš„ç›®å½•å°±è¡Œäº†ã€‚</li></ul><p>ä½œä¸ºå‚è€ƒ</p><pre><code>/dev/hd[a-t]ï¼šIDEè®¾å¤‡/dev/sd[a-z]ï¼šSCSIè®¾å¤‡/dev/fd[0-7]ï¼šæ ‡å‡†è½¯é©±/dev/md[0-31]ï¼šè½¯raidè®¾å¤‡/dev/loop[0-7]ï¼šæœ¬åœ°å›ç¯è®¾å¤‡/dev/ram[0-15]ï¼šå†…å­˜/dev/nullï¼šæ— é™æ•°æ®æ¥æ”¶è®¾å¤‡ ,ç›¸å½“äºå›æ”¶ç«™/dev/zeroï¼šæ— é™é›¶èµ„æº/dev/tty[0-63]ï¼šè™šæ‹Ÿç»ˆç«¯/dev/ttyS[0-3]ï¼šä¸²å£/dev/lp[0-3]ï¼šå¹¶å£/dev/consoleï¼šæ§åˆ¶å°/dev/fb[0-31]ï¼šframebuffer/dev/cdrom =&gt; /dev/hdc/dev/modem =&gt; /dev/ttyS[0-9]/dev/pilot =&gt; /dev/ttyS[0-9]</code></pre><ul><li><code>/proc</code> å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯æ˜¯ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå› ä¸ºä»–ä¹‹å­˜å‚¨ä¸€äº›å½“å‰å†…æ ¸çŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ã€‚ä»¥ä¸‹å°±ä¸è¯¦ç»†ä¸¾ä¾‹äº†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ã€‚ä½¿ç”¨ catå‘½ä»¤æˆ–è€…lessä¹‹ç±»çš„æŸ¥çœ‹ã€‚</li></ul><h2 id="bashä¸­çš„nullå’Œ0"><a href="#bashä¸­çš„nullå’Œ0" class="headerlink" title="bashä¸­çš„nullå’Œ0"></a>bashä¸­çš„nullå’Œ0</h2><p>bashä¸­çš„nullå’Œzeroæ˜¯é€šè¿‡è®¾å¤‡èµ„æºæ–‡ä»¶ <code>/dev/null</code> , <code>/dev/zero</code> æ¥å®ç°çš„</p><ul><li>null ä½¿ç”¨ <code>dev/null</code> è¿™ä¸ªè®¾å¤‡æ–‡ä»¶æ˜¯ä¸€ä¸ªâ€é»‘æ´â€ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåªèƒ½å¤Ÿå†™æ–‡ä»¶ã€‚å†™è¿›å»çš„ä¸œè¥¿éƒ½ä¼šè¢«æ¸…ç©ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä» <code>/dev/null</code> å†™å…¥åˆ°æ–‡ä»¶æ¥å®ç°æ¸…ç©ºæ–‡ä»¶å†…å®¹çš„ç›®çš„ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat newfile1 &gt; /dev/null <span class="comment">#ä¼šä»€ä¹ˆä¹Ÿä¸è¾“å‡º</span></span><br><span class="line">cat /dev/null &gt; /var/<span class="built_in">log</span>/wtmp <span class="comment"># æ¸…ç©ºè¯¥æ–‡ä»¶å†…å®¹</span></span><br></pre></td></tr></table></figure><ul><li>zero ä¸ºæŒ‡å®šç›®çš„çš„æ–‡ä»¶æ¥æ¸…é›¶ï¼ˆæŒ‡å®šå¤§å°çš„æ–‡ä»¶ï¼‰</li></ul><h3 id="ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨bashå­¦ä¹ ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶ä¼šåœ¨ä»¥åå†™ä¸€äº›å®é™…çš„bashè„šæœ¬ã€‚è¿™ä¸ªbashå­¦ä¹ ç³»åˆ—å°±å†™åˆ°è¿™ã€‚"><a href="#ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨bashå­¦ä¹ ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶ä¼šåœ¨ä»¥åå†™ä¸€äº›å®é™…çš„bashè„šæœ¬ã€‚è¿™ä¸ªbashå­¦ä¹ ç³»åˆ—å°±å†™åˆ°è¿™ã€‚" class="headerlink" title="ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨bashå­¦ä¹ ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶ä¼šåœ¨ä»¥åå†™ä¸€äº›å®é™…çš„bashè„šæœ¬ã€‚è¿™ä¸ªbashå­¦ä¹ ç³»åˆ—å°±å†™åˆ°è¿™ã€‚"></a>ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨bashå­¦ä¹ ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶ä¼šåœ¨ä»¥åå†™ä¸€äº›å®é™…çš„bashè„šæœ¬ã€‚è¿™ä¸ªbashå­¦ä¹ ç³»åˆ—å°±å†™åˆ°è¿™ã€‚</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåäº”ï¼‰bashä¸­çš„å‡½æ•°å®šä¹‰ä¸ä½¿ç”¨</title>
      <link href="/2018/07/03/2018-07-03-bash_14_bash%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/"/>
      <url>/2018/07/03/2018-07-03-bash_14_bash%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="bashä¸­çš„å‡½æ•°"><a href="#bashä¸­çš„å‡½æ•°" class="headerlink" title="bashä¸­çš„å‡½æ•°"></a>bashä¸­çš„å‡½æ•°</h1><p>å…¶å®bashå‡½æ•°å’Œbashè„šæœ¬æ—¶ä¸€æ ·çš„ï¼Œå‡½æ•°çš„ä½¿ç”¨å¦‚åŒä½¿ç”¨ä¸€æ®µbashè„šæœ¬å—ä¸€æ ·ã€‚ä½†æ˜¯å®šä¹‰ä¸ºbashå‡½æ•°æ‰§è¡Œæ›´å¿«ã€‚</p><h2 id="å‡½æ•°å®šä¹‰ä¸è°ƒç”¨"><a href="#å‡½æ•°å®šä¹‰ä¸è°ƒç”¨" class="headerlink" title="å‡½æ•°å®šä¹‰ä¸è°ƒç”¨"></a>å‡½æ•°å®šä¹‰ä¸è°ƒç”¨</h2><p>ä¸å¾ˆå¤šè„šæœ¬è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨ <code>function</code> ä½œä¸ºå…³é”®è¯æ¥å£°æ˜å‡½æ•°ã€‚ä¸‹é¢æ¥ä½¿ç”¨ä¸€æ®µä¾‹å­ä»£ç æ¥è¯´æ˜å‡½æ•°çš„å®šä¹‰çš„æ ¼å¼ã€‚ä¹ä¸€çœ‹æ˜¯ä¸æ˜¯å’Œjsæœ‰ç‚¹åƒå‘¢ã€‚ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">hello</span></span>()&#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ä½¿ç”¨å‡½æ•°ä¼šè¾“å‡ºè¿™å¥è¯"</span></span><br><span class="line"><span class="built_in">return</span> 1</span><br><span class="line">&#125;</span><br><span class="line">hello <span class="comment">#ä½¿ç”¨å‡½æ•°</span></span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°çš„å‚æ•°ä¼ é€’"><a href="#å‡½æ•°çš„å‚æ•°ä¼ é€’" class="headerlink" title="å‡½æ•°çš„å‚æ•°ä¼ é€’"></a>å‡½æ•°çš„å‚æ•°ä¼ é€’</h2><p>ä¸ç¼–å†™bashç›¸ä¼¼ï¼Œå‚æ•°ä½¿ç”¨ <code>$+ä½ç½®çš„å½¢å¼è·å–</code> å¦‚$1è·å–ç´§è·Ÿåœ¨è°ƒç”¨å‡½æ•°åçš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">hello</span></span>()&#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ä½¿ç”¨å‡½æ•°ä¼šè¾“å‡ºè¿™å¥è¯"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"è¾“å‡ºç¬¬ä¸€ä¸ªå‚æ•° <span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">return</span> 1</span><br><span class="line">&#125;</span><br><span class="line">hello world</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ â€˜ è¾“å‡ºç¬¬ä¸€ä¸ªå‚æ•° world â€™</span></span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°çš„è¿”å›å€¼"><a href="#å‡½æ•°çš„è¿”å›å€¼" class="headerlink" title="å‡½æ•°çš„è¿”å›å€¼"></a>å‡½æ•°çš„è¿”å›å€¼</h2><p>ä½¿ç”¨returnæ¥è¿”å›ç‰¹å®šå€¼ å¦‚ä¸Šé¢çš„å‡½æ•°ä¸­ä½¿ç”¨åˆ°äº† <code>return 1</code> ,åœ¨returnåå‘ç”Ÿçš„è¯­å¥éƒ½ä¸èƒ½è¢«æ‰§è¡Œã€‚å¹¶ä¸”returnçš„çš„å€¼åªèƒ½åœ¨1~256ä¹‹é—´çš„æ•°ã€‚ä½¿ç”¨$?æ¥è·å–è¿”å›åˆ°å€¼ã€‚</p><h2 id="å‡½æ•°çš„åµŒå¥—"><a href="#å‡½æ•°çš„åµŒå¥—" class="headerlink" title="å‡½æ•°çš„åµŒå¥—"></a>å‡½æ•°çš„åµŒå¥—</h2><p>å¦‚åŒåœ¨Java jsä¸­ä½¿ç”¨å‡½æ•°ç±»ä¼¼ï¼Œbashä¸­çš„å‡½æ•°ä¹Ÿå…è®¸ä½¿ç”¨åµŒå¥—ç»“æ„ã€‚ä½†æ˜¯éœ€è¦åœ¨å¤–å±‚å‡½æ•°è°ƒç”¨å†…å®¹å‡½æ•°ã€‚è¿™æ˜¯å½“ç„¶çš„äº†ï¼Œå› ä¸ºåœ¨å†…éƒ¨å£°æ˜å‡½æ•°ï¼Œå´æ²¡æœ‰è°ƒç”¨ï¼Œè¿™å½“ç„¶æ—¶ä¸èµ·ä½œç”¨çš„äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">x1</span></span>()&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"åœ¨å‡½æ•°x1ä¸­ï¼"</span></span><br><span class="line">        <span class="keyword">function</span> <span class="function"><span class="title">x2</span></span>()&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"åœ¨å‡½æ•°x2ä¸­ï¼"</span></span><br><span class="line">        &#125;</span><br><span class="line">        x2 <span class="comment"># è¿™é‡Œéœ€è¦è°ƒç”¨å†…å±‚å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line">x1</span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#åœ¨å‡½æ•°x1ä¸­ï¼</span></span><br><span class="line"><span class="comment">#åœ¨å‡½æ•°x2ä¸­ï¼</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåå››ï¼‰linuxä¸­çš„IO</title>
      <link href="/2018/07/01/2018-07-01-bash_13_bash%E4%B8%AD%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/"/>
      <url>/2018/07/01/2018-07-01-bash_13_bash%E4%B8%AD%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="linuxä¸­çš„IO"><a href="#linuxä¸­çš„IO" class="headerlink" title="linuxä¸­çš„IO"></a>linuxä¸­çš„IO</h1><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>linuxä¸­æ€»æœ‰ä¸‰ç§æ–‡ä»¶ï¼Œä¸€ç§æ—¶stdinï¼ˆæ ‡å‡†è¾“å…¥ï¼‰ï¼Œstdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ï¼Œstderrï¼ˆæ ‡å‡†é”™è¯¯ï¼‰ï¼Œå¯ä»¥é‡å®šå‘è¿™äº›å’Œå…¶ä»–ä»»æ„æ–‡ä»¶ï¼Œé‡å®šå‘çš„ç›®çš„å°±æ˜¯å¯ä»¥å°†æ–‡ä»¶ä¸­çš„ä»»æ„å†…å®¹ä½œä¸ºè¾“å‡ºæˆ–è€…è¾“å‡ºæºã€‚</p><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>ç³»ç»Ÿä¸ºæ¯ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶åˆ†é…ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆFDï¼‰ï¼Œä¸ºæ ‡å‡†è¾“å…¥stdinï¼Œæ ‡å‡†è¾“å‡ºstdout,æ ‡å‡†é”™è¯¯stderråˆ†åˆ«åˆ†é…ç»™0ï¼Œ1ï¼Œ2</p><p>ç®€å•è¾“å…¥è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"helloworld"</span>  &gt; newfile1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"helloworld"</span> 1 &gt; newfile1 <span class="comment">#ç­‰åŒäºç¬¬ä¸€å¥</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"helloworld"</span> 1 &gt;&gt; newfile1 <span class="comment">#è¿½åŠ å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">command</span> &lt; newfile1 <span class="comment">#æ ‡å‡†è¾“å…¥ åŒç†ç­‰åŒäºcat 0 &lt; newfile1</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls 2&gt; newfile <span class="comment">#å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ°newfileä¸­</span></span><br><span class="line">ls &gt; newfile 2&gt;1&amp; <span class="comment">#å°†æ ‡å‡†è¾“å…¥å’Œæ ‡å‡†è¾“å‡ºä¸€èµ·è¾“å‡ºåˆ°newfileä¸­</span></span><br><span class="line"><span class="comment"># å…¶ä¸­&amp;è¡¨ç¤ºå’Œçš„å…³ç³»</span></span><br></pre></td></tr></table></figure><p>ç»‘å®šé‡å®šå‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls &gt;&amp; m <span class="comment">#æŠŠæ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶æè¿°ç¬¦mä¸­</span></span><br><span class="line">ls &lt; &amp;- <span class="comment">#å…³é—­æ ‡å‡†è¾“å…¥</span></span><br><span class="line">n &lt; &amp;- <span class="comment">#å…³é—­è¾“å…¥æ–‡ä»¶æè¿°ç¬¦n</span></span><br><span class="line">n &gt; &amp;- <span class="comment">#å…³é—­è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦n</span></span><br><span class="line">1&gt;&amp;-, &gt;&amp;- <span class="comment"># å…³é—­æ ‡å‡†è¾“å‡º</span></span><br></pre></td></tr></table></figure><h3 id="å…¶å®åœ¨linux-ä¸‹ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ã€‚æŠŠæ‰€æœ‰éƒ½æƒ³æˆæ–‡ä»¶å°±å¥½ç†è§£çš„å¤šäº†ã€‚"><a href="#å…¶å®åœ¨linux-ä¸‹ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ã€‚æŠŠæ‰€æœ‰éƒ½æƒ³æˆæ–‡ä»¶å°±å¥½ç†è§£çš„å¤šäº†ã€‚" class="headerlink" title="å…¶å®åœ¨linux ä¸‹ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ã€‚æŠŠæ‰€æœ‰éƒ½æƒ³æˆæ–‡ä»¶å°±å¥½ç†è§£çš„å¤šäº†ã€‚"></a>å…¶å®åœ¨linux ä¸‹ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ã€‚æŠŠæ‰€æœ‰éƒ½æƒ³æˆæ–‡ä»¶å°±å¥½ç†è§£çš„å¤šäº†ã€‚</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåä¸€ï¼‰å‘½ä»¤ç¯‡ï¼ˆ2ï¼‰</title>
      <link href="/2018/06/24/2018-06-24-bash_10_bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2018/06/24/2018-06-24-bash_10_bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå‘½ä»¤ä»¤ç¯‡ï¼ˆäºŒï¼‰"><a href="#bashå‘½ä»¤ä»¤ç¯‡ï¼ˆäºŒï¼‰" class="headerlink" title="bashå‘½ä»¤ä»¤ç¯‡ï¼ˆäºŒï¼‰"></a>bashå‘½ä»¤ä»¤ç¯‡ï¼ˆäºŒï¼‰</h1><h2 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h2><p>åŸºæœ¬å‘½ä»¤å°±æ˜¯éå¸¸éœ€è¦åˆå­¦è€…æŒæ¡çš„é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œåªæœ‰æŒæ¡è¿™ç§åŸºæœ¬çš„å‘½ä»¤æ‰èƒ½ç¨å¾®ç†Ÿç»ƒçš„æ“ä½œlinuxã€‚å…·ä½“çš„åŸºæœ¬å‘½ä»¤ä¹Ÿä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œå¯¹äºè¿™ç§åŸºæœ¬å‘½ä»¤ç”¨å‡ éå°±èƒ½å¤ŸæŒæ¡äº†ã€‚è€Œä¸”ç½‘ä¸Šçš„æ•™ç¨‹ä¸€å¤§å †ã€‚</p><h2 id="æ—¶é—´æ—¥æœŸå‘½ä»¤"><a href="#æ—¶é—´æ—¥æœŸå‘½ä»¤" class="headerlink" title="æ—¶é—´æ—¥æœŸå‘½ä»¤"></a>æ—¶é—´æ—¥æœŸå‘½ä»¤</h2><ul><li><p>date: æ‰“å°æˆ–è€…æ˜¯è®¾ç½®æœ¬åœ°æ—¶é—´ã€‚ä¸»è¦è¯­æ³•å¯ä»¥ <code>man date</code>  ä¸»è¦æœ‰date -u æ‰“å° UTCæ—¶é—´ã€‚åœ¨åé¢å¯ä»¥ä½¿ç”¨ +å‚æ•°çš„å½¢å¼æ ¼å¼åŒ–ä¸ºå…·ä½“çš„æ—¶é—´æ ¼å¼ã€‚</p></li><li><p>zdump: è¾“å‡ºç‰¹æ®Šæ—¶åŒºçš„æ—¶é—´ã€‚å¦‚ <code>zdump EMP</code></p></li><li><p>timeï¼š è¾“å‡ºè¯¦ç»†çš„æ—¶é—´ä¿¡æ¯æ¯”å¦‚ <code>time ls -l</code></p></li><li><p>at: atå‘½ä»¤ä¸€èˆ¬ä½¿ç”¨åœ¨ç‰¹å®šæ—¶é—´æ‰§è¡Œçš„æ—¶å€™ã€‚</p></li><li><p>batchï¼šbatchå‘½ä»¤å’Œatå‘½ä»¤ç›¸ä¼¼ã€‚ä¸åŒåœ¨äºbatchå‘½ä»¤èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šæ¡å‘½ä»¤ã€‚</p></li><li><p>calï¼šcalå‘½ä»¤å¯ä»¥æ•´æ´çš„æ‰“å°å‡ºæ¥æ—¥å†</p></li><li><p>sleepï¼šsleepå¯ä»¥ä½¿shellæš‚åœå›ºå®šæ—¶é—´é•¿åº¦</p></li><li><p>hwclockï¼šè®¿é—®ç¡¬ä»¶ç³»ç»Ÿæ—¶é—´ã€‚éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚</p></li></ul><h2 id="æ–‡æœ¬å’Œæ–‡ä»¶å¤„ç†å‘½ä»¤"><a href="#æ–‡æœ¬å’Œæ–‡ä»¶å¤„ç†å‘½ä»¤" class="headerlink" title="æ–‡æœ¬å’Œæ–‡ä»¶å¤„ç†å‘½ä»¤"></a>æ–‡æœ¬å’Œæ–‡ä»¶å¤„ç†å‘½ä»¤</h2><ul><li><p>sortï¼šæ–‡ä»¶æ’åºçš„å®ç”¨æ€§å·¥å…·ï¼ŒåŒæ—¶å‡ºç°åœ¨ç®¡é“å½“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨-mé€‰é¡¹åˆå¹¶é¢„åˆ†ç±»çš„è¾“å…¥æ–‡ä»¶ã€‚</p></li><li><p>uniqï¼šä½¿ç”¨uniqå‘½ä»¤èƒ½å¤Ÿå»é™¤é‡å¤çš„è¡Œï¼Œé€šå¸¸å’Œsortä½¿ç”¨åœ¨ç®¡é“å½“ä¸­ã€‚</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat list_1.txt|uniq -c|sort -nr</span><br><span class="line">     5 this is the second line</span><br><span class="line">     3 this is the first line</span><br><span class="line">     1 this is the third line</span><br></pre></td></tr></table></figure><ul><li>expand:å¯ä»¥å°†tabè½¬æ¢æˆæ™®é€šç©ºæ ¼ï¼Œunexpandå¯ä»¥å°†ç©ºæ ¼è½¬æ¢æˆtabï¼ŒåŒæ ·æ¯”è¾ƒå¸¸è§åœ¨ç®¡é“å‘½ä»¤å½“ä¸­ã€‚</li></ul><p>cutï¼šä»æ–‡ä»¶ä¸­æå–å­—æ®µçš„å·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cut -d <span class="string">' '</span> -f 1,2 list_1.txt</span><br></pre></td></tr></table></figure><ul><li><p>paste:åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ˜¯æ¯è¡Œéƒ½å¯¹åº”åˆå¹¶ã€‚è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶åˆå¹¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶çš„ä¸‹é¢ã€‚</p></li><li><p>joinï¼šå’Œpasteå‘½ä»¤ç›¸ä¼¼ï¼Œä½†æ˜¯joinå‘½ä»¤åªç²˜è´´ä¸¤æ–‡ä»¶æœ‰å…±åŒæ ‡è®°çš„è¡Œï¼Œä¸€èˆ¬è¿™ä¸ªæ ‡è®°æ˜¯æ•°å­—ã€‚</p></li><li><p>headï¼šè¾“å‡ºæ–‡ä»¶çš„å‰10è¡Œï¼Œä¹Ÿå¯ä»¥æ›´æ”¹è¾“å‡ºçš„è¡Œæ•°ã€‚</p></li><li><p>tailï¼šè¾“å‡ºæ–‡ä»¶çš„æœ«å°¾10è¡Œï¼ŒåŒæ ·çš„å¯ä»¥æ›´æ”¹è¾“å‡ºçš„è¡Œæ•°ã€‚</p></li><li><p>grepï¼šæ­£åˆ™åŒ¹é…å‡ºæ–‡ä»¶çš„å†…å®¹ï¼Œä¸€èˆ¬ä½¿ç”¨åœ¨ç®¡é“ä¸­ï¼Œç”¨æ¥åŒ¹é…ä¸Šä¸€ä¸ªè¾“å…¥æˆ–è€…æ–‡ä»¶çš„åŒ¹é…åˆ°çš„å†…å®¹</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat list_1.txt| grep <span class="string">"third"</span>  </span><br><span class="line">this is the third line</span><br><span class="line">              ^ è¿™é‡Œçš„thirdæ˜¯çº¢è‰²çš„è¡¨ç¤ºåŒ¹é…åˆ°çš„å†…å®¹</span><br></pre></td></tr></table></figure><ul><li>wcï¼šè¾“å‡ºæ–‡ä»¶çš„è¡Œæ•°å­—æ•°ç­‰ä¿¡æ¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wc /usr/share/doc/sed-4.1.2/README</span><br><span class="line">13  70  447 README</span><br><span class="line">[13 lines  70 words  447 characters]</span><br></pre></td></tr></table></figure><ul><li>tr å­—ç¬¦ç¿»è¯‘çš„è¿‡æ»¤å™¨ï¼Œå°†ç‰¹å®šå­—ç¬¦æ›¿æ¢æˆå…¶ä»–å­—ç¬¦</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tr <span class="string">"is"</span> <span class="string">"*"</span> &lt; list_1.txt  </span><br><span class="line">th** ** the f*r*t l*ne</span><br><span class="line">th** ** the *econd l*ne</span><br><span class="line">th** ** the th*rd l*ne</span><br></pre></td></tr></table></figure><ul><li><p>nl nlå’Œcat -bæœ‰ç€ç›¸ä¼¼çš„æ„ä¹‰ï¼Œéƒ½èƒ½å¤Ÿè¿åŒè¡Œå·æ‰“å°å‡ºæ¥ï¼Œä¸åŒçš„æ˜¯ï¼Œnlå¯ä»¥å°†ç©ºè¡Œå»é™¤æ‰ã€‚</p></li><li><p>iconv è¿™ä¸ªå‘½ä»¤èƒ½å¤Ÿå°†æ–‡ä»¶è½¬æ¢ç¼–ç ï¼Œå¦‚utf-8è½¬æ¢æˆutf-16è¿™ç±»çš„è½¬åŒ–ã€‚</p></li></ul><h3 id="è¿™ç±»å‘½ä»¤çœŸçš„å¾ˆå¤šï¼Œéœ€è¦ç§¯ç´¯çš„ä¸œè¥¿ä¹Ÿå¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±åšä¸ªç®€å•çš„è¯´æ˜ï¼Œå…·ä½“çš„ä½¿ç”¨å¯ä»¥-man-å‘½ä»¤-æŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¹Ÿæ˜¯å­¦ä¹ çš„ä¸€ç§æ–¹å¼ï¼ï¼"><a href="#è¿™ç±»å‘½ä»¤çœŸçš„å¾ˆå¤šï¼Œéœ€è¦ç§¯ç´¯çš„ä¸œè¥¿ä¹Ÿå¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±åšä¸ªç®€å•çš„è¯´æ˜ï¼Œå…·ä½“çš„ä½¿ç”¨å¯ä»¥-man-å‘½ä»¤-æŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¹Ÿæ˜¯å­¦ä¹ çš„ä¸€ç§æ–¹å¼ï¼ï¼" class="headerlink" title="è¿™ç±»å‘½ä»¤çœŸçš„å¾ˆå¤šï¼Œéœ€è¦ç§¯ç´¯çš„ä¸œè¥¿ä¹Ÿå¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±åšä¸ªç®€å•çš„è¯´æ˜ï¼Œå…·ä½“çš„ä½¿ç”¨å¯ä»¥ man å‘½ä»¤ æŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¹Ÿæ˜¯å­¦ä¹ çš„ä¸€ç§æ–¹å¼ï¼ï¼"></a>è¿™ç±»å‘½ä»¤çœŸçš„å¾ˆå¤šï¼Œéœ€è¦ç§¯ç´¯çš„ä¸œè¥¿ä¹Ÿå¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±åšä¸ªç®€å•çš„è¯´æ˜ï¼Œå…·ä½“çš„ä½¿ç”¨å¯ä»¥ man å‘½ä»¤ æŸ¥çœ‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¹Ÿæ˜¯å­¦ä¹ çš„ä¸€ç§æ–¹å¼ï¼ï¼</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåä¸‰ï¼‰å‘½ä»¤ç¯‡ï¼ˆ4ï¼‰</title>
      <link href="/2018/06/24/2018-06-28-bash_12_bash%E7%AE%A1%E7%90%86%E5%91%98%E5%91%BD%E4%BB%A4/"/>
      <url>/2018/06/24/2018-06-28-bash_12_bash%E7%AE%A1%E7%90%86%E5%91%98%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="ç³»ç»Ÿå‘½ä»¤"><a href="#ç³»ç»Ÿå‘½ä»¤" class="headerlink" title="ç³»ç»Ÿå‘½ä»¤"></a>ç³»ç»Ÿå‘½ä»¤</h1><p>linuxä¸Šæä¾›éå¸¸å¤šçš„æœ‰å…³äºç³»ç»Ÿçš„å‘½ä»¤ï¼Œæˆ‘åªèƒ½æŒ‘å‡ºæˆ‘æ¯”è¾ƒå¸¸è§çš„å‘½ä»¤æ¥è®°å½•ä¸‹æ¥ã€‚</p><h2 id="ç”¨æˆ·ä¸ç”¨æˆ·ç»„"><a href="#ç”¨æˆ·ä¸ç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·ä¸ç”¨æˆ·ç»„"></a>ç”¨æˆ·ä¸ç”¨æˆ·ç»„</h2><ul><li><p>users æ˜¾ç¤ºæ‰€æœ‰ç™»å½•ç”¨æˆ·</p></li><li><p>groups åˆ—å‡ºå½“å‰ç”¨æˆ·å’Œä»–æ‰€åœ¨çš„ç”¨æˆ·ç»„</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ groups</span><br><span class="line">nanyin adm cdrom sudo dip plugdev input lpadmin sambashare</span><br></pre></td></tr></table></figure><ul><li><p>chown å‘½ä»¤å¯ä»¥æ”¹å˜æ–‡ä»¶æ‰€å±çš„ç”¨æˆ·æˆ–è€…ç”¨æˆ·ç»„ã€‚ä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£ç»™ç”¨æˆ·æŸäº›æ–‡ä»¶çš„æƒé™ã€‚</p></li><li><p>chgrp å‘½ä»¤å¯ä»¥æ”¹å˜ç”¨æˆ·æ‰€å±ç»„ã€‚</p></li><li><p>useradd å¯ä»¥ä¸ºç³»ç»Ÿæ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºè¯¥ç”¨æˆ·çš„homeæ–‡ä»¶å¤¹ã€‚åˆ é™¤ç”¨æˆ·å¯ä»¥ä½¿ç”¨userdelå‘½ä»¤è¿›è¡Œåˆ é™¤ã€‚</p></li><li><p>usermod å‘½ä»¤å¯ä»¥æ”¹å˜ç”¨æˆ·å±æ€§ï¼Œå¯ä»¥æ˜¯å¯†ç ä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·ç»„ä¹‹ç±»çš„</p></li><li><p>id å‘½ä»¤å¯ä»¥æ‰“å°å‡ºç”¨æˆ·åŠæ‰€åœ¨ç”¨æˆ·ç»„çš„ç”¨æˆ·åå’Œç»„åä»¥åŠå¯¹åº”çš„idå€¼</p></li><li><p>whoami æ‰“å°å‡ºå½“å‰ç”¨æˆ·çš„ç”¨æˆ·åç§°</p></li><li><p>passwd è®¾ç½®ï¼Œæ›´æ”¹å’Œç®¡ç†ç”¨æˆ·çš„å¯†ç </p></li></ul><h2 id="åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€"><a href="#åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€" class="headerlink" title="åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€"></a>åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€</h2><ul><li><p>uname å¯ä»¥è¾“å‡ºç³»ç»Ÿçš„å…·ä½“å‚æ•°å¦‚å†…æ ¸ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚</p></li><li><p>arch å¯ä»¥è¾“å‡ºç³»ç»ŸåŸºäºå¤šå°‘ä½</p></li><li><p>nc ï¼ˆnetcatï¼‰æ˜¯ç”¨äºè¿æ¥å’Œä¾¦å¬TCPå’ŒUDPç«¯å£çš„å®Œæ•´å·¥å…·åŒ…ã€‚</p></li><li><p>lsdev è¾“å‡ºè®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯ç¡¬ä»¶ä¿¡æ¯</p></li><li><p>df æ ¼å¼åŒ–è¾“å‡ºæ–‡ä»¶ç³»ç»Ÿå ç”¨æ¯” ä¸€èˆ¬ä½¿ç”¨df -h</p></li><li><p>stat è¾“å‡ºæ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ã€‚</p></li></ul><h2 id="ç³»ç»Ÿå·¥ä½œæµ"><a href="#ç³»ç»Ÿå·¥ä½œæµ" class="headerlink" title="ç³»ç»Ÿå·¥ä½œæµ"></a>ç³»ç»Ÿå·¥ä½œæµ</h2><ul><li><p>ps æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ é€šå¸¸åé¢åŠ  <code>ax</code> æˆ–è€… <code>aux</code> ä½¿ç”¨ã€‚</p></li><li><p>pstree ä»¥æ ‘å½¢ç»“æ„å±•ç¤ºè¿›ç¨‹ä¿¡æ¯ã€‚</p></li><li><p>top è¾“å‡ºcpuçš„ä¿¡æ¯ä½¿ç”¨ -bå‚æ•°ä»¥textçš„å½¢å¼è¾“å‡ºã€‚èƒ½å¤Ÿä»¥é™æ€çš„æ–¹å¼æŸ¥çœ‹ã€‚</p></li><li><p>niceç”¨äºæŒ‡å®šè¿›ç¨‹è°ƒèŠ‚ä¼˜å…ˆçº§çš„å‘½ä»¤ã€‚</p></li><li><p>pidof å¯ä»¥è¾“å‡ºå…·ä½“è¿›ç¨‹çš„id å¦‚ï¼š<code>pidof xclock</code> ä¼šè¾“å‡º xclockçš„è¿›ç¨‹idå·ã€‚</p></li></ul><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><ul><li><p>nmap ç½‘ç»œæ˜ å°„å’Œç«¯å£æ‰«æï¼ˆç°åœ¨åªè®°å¾—å¤§å­¦æ—¶ç½‘ç»œæ”»é˜²é‡Œç”¨è¿‡windowsé‡Œæœ‰ä¸ªå·¥å…·å«nmapä»€ä¹ˆçš„ã€‚ã€‚ï¼‰å‚æ•°æœ‰å¾ˆå¤šã€‚ã€‚</p></li><li><p>ifconfig æœ€ç†Ÿçš„æŸ¥çœ‹ç½‘ç»œæ¥å£è®¾ç½®ã€‚</p></li><li><p>netstat è¾“å‡ºç½‘ç»œçŠ¶æ€å’Œä¿¡æ¯ï¼Œå¦‚è·¯ç”±è¡¨å’Œè¿æ¥çŠ¶æ€ç­‰ã€‚</p></li><li><p>ip å¯ä»¥æŸ¥è¯¢å’Œè®¾ç½®ipå’Œè®¿é—®ç½‘å¡è®¾åˆ«ä¿¡æ¯</p></li></ul><h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><ul><li><p>mount æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</p></li><li><p>umount å¸è½½è®¾å¤‡</p></li><li><p>sync å¼ºåˆ¶ç«‹å³ä»ç¼“å†²åŒºå†™å…¥æ•°æ®ä»¥æ¥è¾¾åˆ°ç«‹å³æ›´æ–°æ•°æ®çš„ç›®çš„ã€‚</p></li><li><p>mkswap swapon swapoff åˆ†åˆ«å¯¹åº”æ ¼å¼åŒ–ä¸ºäº¤æ¢åˆ†åŒºï¼Œå¯åŠ¨äº¤æ¢åˆ†åŒºï¼Œå…³é—­äº¤æ¢åˆ†åŒºã€‚</p></li><li><p>fdisk åˆ›å»ºæˆ–æ›´æ”¹åˆ†åŒºè¡¨ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥åˆ†åŒºçš„å·¥å…·ã€‚éå¸¸å¸¸è§ã€‚å½“æ—¶æˆ‘è¿˜æ˜¯é€‰æ‹©cfdisk</p></li><li><p>lspci è¾“å‡ºæ€»çº¿ä¿¡æ¯ï¼Œå’Œè¿æ¥æ€»çº¿çš„è®¾å¤‡ä¿¡æ¯ã€‚</p></li></ul><h3 id="å…¶å®è¿˜æœ‰å¾ˆå¤šå‘½ä»¤æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œå¦‚æœæƒ³ç»ƒä¹ è¿™äº›åŸºæœ¬çš„ç³»ç»Ÿå‘½ä»¤çš„è¯ï¼Œå¯ä»¥è·Ÿç€arch-wiki-è£…ä¸€éarchï¼Œè£…å®Œåè¿™é‡Œçš„å‘½ä»¤å°±éƒ½èƒ½è®°ä½äº†ã€‚"><a href="#å…¶å®è¿˜æœ‰å¾ˆå¤šå‘½ä»¤æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œå¦‚æœæƒ³ç»ƒä¹ è¿™äº›åŸºæœ¬çš„ç³»ç»Ÿå‘½ä»¤çš„è¯ï¼Œå¯ä»¥è·Ÿç€arch-wiki-è£…ä¸€éarchï¼Œè£…å®Œåè¿™é‡Œçš„å‘½ä»¤å°±éƒ½èƒ½è®°ä½äº†ã€‚" class="headerlink" title="å…¶å®è¿˜æœ‰å¾ˆå¤šå‘½ä»¤æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œå¦‚æœæƒ³ç»ƒä¹ è¿™äº›åŸºæœ¬çš„ç³»ç»Ÿå‘½ä»¤çš„è¯ï¼Œå¯ä»¥è·Ÿç€arch wiki è£…ä¸€éarchï¼Œè£…å®Œåè¿™é‡Œçš„å‘½ä»¤å°±éƒ½èƒ½è®°ä½äº†ã€‚"></a>å…¶å®è¿˜æœ‰å¾ˆå¤šå‘½ä»¤æ²¡æœ‰æ¶‰åŠåˆ°ï¼Œå¦‚æœæƒ³ç»ƒä¹ è¿™äº›åŸºæœ¬çš„ç³»ç»Ÿå‘½ä»¤çš„è¯ï¼Œå¯ä»¥è·Ÿç€arch wiki è£…ä¸€éarchï¼Œè£…å®Œåè¿™é‡Œçš„å‘½ä»¤å°±éƒ½èƒ½è®°ä½äº†ã€‚</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåäºŒï¼‰å‘½ä»¤ç¯‡ï¼ˆ3ï¼‰</title>
      <link href="/2018/06/24/2018-06-27-bash_11_bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2018/06/24/2018-06-27-bash_11_bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå‘½ä»¤ç¯‡ï¼ˆä¸‰ï¼‰"><a href="#bashå‘½ä»¤ç¯‡ï¼ˆä¸‰ï¼‰" class="headerlink" title="bashå‘½ä»¤ç¯‡ï¼ˆä¸‰ï¼‰"></a>bashå‘½ä»¤ç¯‡ï¼ˆä¸‰ï¼‰</h1><h2 id="bashä¸­çš„å…³äºé€šä¿¡çš„å‘½ä»¤"><a href="#bashä¸­çš„å…³äºé€šä¿¡çš„å‘½ä»¤" class="headerlink" title="bashä¸­çš„å…³äºé€šä¿¡çš„å‘½ä»¤"></a>bashä¸­çš„å…³äºé€šä¿¡çš„å‘½ä»¤</h2><ol><li>host é€šè¿‡ipæˆ–è€…åŸŸåæœç´¢äº’è”ç½‘çš„ä¸»æœºåœ°å€ï¼ˆä½¿ç”¨DNSï¼‰</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ host www.baidu.com</span><br><span class="line">www.baidu.com has address 61.135.169.125</span><br><span class="line">www.baidu.com has address 61.135.169.121</span><br><span class="line">www.baidu.com is an <span class="built_in">alias</span> <span class="keyword">for</span> www.a.shifen.com.</span><br><span class="line">www.baidu.com is an <span class="built_in">alias</span> <span class="keyword">for</span> www.a.shifen.com.</span><br></pre></td></tr></table></figure><ol start="2"><li>nslookup å‘ä¸Šå¯»æ‰¾name server</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ nslookup  -sil 66.97.104.180 </span><br><span class="line">Server:127.0.1.1</span><br><span class="line">Address:127.0.1.1<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">180.104.97.66.in-addr.arpaname = 66-97-104-180.dynamic.bugtusselwireless.com.</span><br><span class="line"></span><br><span class="line">Authoritative answers can be found from:</span><br><span class="line">104.97.66.in-addr.arpanameserver = ns2.bugnet.net.</span><br><span class="line">104.97.66.in-addr.arpanameserver = ns1.bugnet.net.</span><br><span class="line">ns1.bugnet.netinternet address = 204.11.133.241</span><br><span class="line">ns2.bugnet.netinternet address = 204.11.133.244</span><br></pre></td></tr></table></figure><ol start="3"><li><p>ping ç†ŸçŸ¥çš„pingå‘½ä»¤ï¼Œå¸¸ç”¨æ¥æ¢æµ‹ä¸å¦ä¸€ä¸ªä¸»æœºæ˜¯å¦æœ‰ç½‘ç»œé“¾æ¥</p></li><li><p>ftp ä»è¿œç¨‹ä¸»æœºä¸‹è½½æˆ–è€…ä¸Šä¼ ç»™è¿œç¨‹ä¸»æœºçš„åè®®ã€‚</p></li><li><p>telnt é“¾æ¥è¿œç¨‹ä¸»æœºçš„åè®®</p></li><li><p>wget ä½¿ç”¨éäº¤äº’å¼çš„ä»ç½‘ç«™webæˆ–è€…ftpç«™ç‚¹ä¸‹è½½æ–‡ä»¶ã€‚</p></li><li><p>rcp è¿œç¨‹æ‹·è´ï¼Œåœ¨ä¸¤å°ä¸åŒçš„æœºå™¨é—´æ‹·è´ã€‚</p></li><li><p>ssh <code>secure shell</code> ä»–ä»£æ›¿äº†telnt rcpç­‰å‘½ä»¤ã€‚</p></li><li><p>scp <code>secure cp</code> ä»–ç”¨æ¥ä»£æ›¿rcpå‘½ä»¤ï¼Œéœ€è¦ç™»å½•æˆæƒçš„è¿œç¨‹æ‹·è´æ–‡ä»¶çš„å‘½ä»¤ã€‚</p><p> è¿™é‡Œåªæ˜¯ç®€ç•¥çš„è°ˆè°ˆå¸¸è§çš„å…³äºæœºå™¨äº¤äº’çš„å‘½ä»¤ï¼Œè¿™äº›éƒ½æ˜¯ç†Ÿèƒ½ç”Ÿå·§çš„ä¸œè¥¿ï¼Œæœ€é‡è¦çš„æ˜¯è¦ä¸Šæ‰‹ç»ƒä¹ ã€‚</p></li></ol><h2 id="æ•°å­¦è¿ç®—ç¬¦"><a href="#æ•°å­¦è¿ç®—ç¬¦" class="headerlink" title="æ•°å­¦è¿ç®—ç¬¦"></a>æ•°å­¦è¿ç®—ç¬¦</h2><ol><li><p>dcï¼šdcæ˜¯ä½¿ç”¨é€†æ³¢å…°è¡¨ç¤ºæ³•è¿›è¡Œè®¡ç®—ï¼Œå¦‚ 11 +   ï¼Œ3 6 *</p></li><li><p>bcï¼šbcæ˜¯ç°ä»£linuxä¸‹æ¯”è¾ƒå¸¸è§å¤„ç†å¤æ‚è¿ç®—çš„å‘½ä»¤é‚£ä¸ªï¼Œå¯ä»¥è®¡ç®—æµ®ç‚¹æ•°ã€‚</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$bc</span> -l -q</span><br><span class="line">4/3                   /*æœªæŒ‡å®šç²¾åº¦é»˜è®¤ä¿ç•™æ•´æ•°*/</span><br><span class="line">scale=5               /*æŒ‡å®šç²¾åº¦ä¸º5*/</span><br><span class="line">4/3</span><br><span class="line">1.33333</span><br><span class="line">ibase=2               /*æŒ‡å®šè¿›åˆ¶è½¬æ¢çš„è¾“å…¥æœºåˆ¶ä¸ºäºŒè¿›åˆ¶ï¼Œè¾“å‡ºé»˜è®¤ä¸ºæ˜¯åè¿›åˆ¶*/</span><br><span class="line">10</span><br><span class="line">4^2                   /*æŒ‡æ•°è¿ç®—ï¼Œæ³¨ï¼šæŒ‡æ•°ä¸èƒ½ä¸ºæµ®ç‚¹æ•°*/</span><br><span class="line">4*a(1)                /*è®¡ç®—Ï€å€¼ï¼Œa()æ˜¯ä¸ªå‡½æ•°ï¼šarctan()ï¼Œå¥½å§ï¼Œè€å¸ˆæ•™çš„éƒ½è¢«ç‹—åƒäº†ï¼ŒÏ€å€¼æ˜¯ç­‰äºå››å€çš„arctan(1)ä¹ˆï¼Ÿ*/</span><br><span class="line">3.14159265358979323844</span><br><span class="line">quit                  /*é€€å‡º*/</span><br></pre></td></tr></table></figure><ol start="3"><li>let: è¡¨è¾¾å¼å¯ä»¥åº”ç”¨åœ¨letå‘½ä»¤å½“ä¸­ã€‚</li></ol><h3 id="å…¶å®åœ¨æˆ‘ä½¿ç”¨linuxç³»ç»Ÿçš„å‡ å¹´é‡Œï¼Œæ„Ÿè§‰å‘½ä»¤ä¸èƒ½æ­»è®°ç¡¬èƒŒï¼Œå¤šç”¨è‡ªç„¶å°±ä¼šæŒæ¡äº†ã€‚ä½†æ˜¯æœ‰äº›æ¯”è¾ƒå†·é—¨çš„å‘½ä»¤è¿˜æ˜¯èƒŒä¸‹æ¥æ¯”è¾ƒå¥½-ã€‚"><a href="#å…¶å®åœ¨æˆ‘ä½¿ç”¨linuxç³»ç»Ÿçš„å‡ å¹´é‡Œï¼Œæ„Ÿè§‰å‘½ä»¤ä¸èƒ½æ­»è®°ç¡¬èƒŒï¼Œå¤šç”¨è‡ªç„¶å°±ä¼šæŒæ¡äº†ã€‚ä½†æ˜¯æœ‰äº›æ¯”è¾ƒå†·é—¨çš„å‘½ä»¤è¿˜æ˜¯èƒŒä¸‹æ¥æ¯”è¾ƒå¥½-ã€‚" class="headerlink" title="å…¶å®åœ¨æˆ‘ä½¿ç”¨linuxç³»ç»Ÿçš„å‡ å¹´é‡Œï¼Œæ„Ÿè§‰å‘½ä»¤ä¸èƒ½æ­»è®°ç¡¬èƒŒï¼Œå¤šç”¨è‡ªç„¶å°±ä¼šæŒæ¡äº†ã€‚ä½†æ˜¯æœ‰äº›æ¯”è¾ƒå†·é—¨çš„å‘½ä»¤è¿˜æ˜¯èƒŒä¸‹æ¥æ¯”è¾ƒå¥½ - -ã€‚"></a>å…¶å®åœ¨æˆ‘ä½¿ç”¨linuxç³»ç»Ÿçš„å‡ å¹´é‡Œï¼Œæ„Ÿè§‰å‘½ä»¤ä¸èƒ½æ­»è®°ç¡¬èƒŒï¼Œå¤šç”¨è‡ªç„¶å°±ä¼šæŒæ¡äº†ã€‚ä½†æ˜¯æœ‰äº›æ¯”è¾ƒå†·é—¨çš„å‘½ä»¤è¿˜æ˜¯èƒŒä¸‹æ¥æ¯”è¾ƒå¥½ - -ã€‚</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºElementryOSå›¾å½¢ç•Œé¢æŒ‚èµ·ä¹‹åå”¤é†’åå‡ºç°é»‘å±é—®é¢˜</title>
      <link href="/2018/06/23/2018-06-23-%E5%85%B3%E4%BA%8EelementryOS%E6%8C%82%E8%B5%B7%E4%B9%8B%E5%90%8E%E5%94%A4%E9%86%92%E6%97%B6%E9%BB%91%E5%B1%8F%E9%97%AE%E9%A2%98/"/>
      <url>/2018/06/23/2018-06-23-%E5%85%B3%E4%BA%8EelementryOS%E6%8C%82%E8%B5%B7%E4%B9%8B%E5%90%8E%E5%94%A4%E9%86%92%E6%97%B6%E9%BB%91%E5%B1%8F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³äºElementryOSå›¾å½¢ç•Œé¢æŒ‚èµ·ä¹‹åå”¤é†’åå‡ºç°é»‘å±é—®é¢˜"><a href="#å…³äºElementryOSå›¾å½¢ç•Œé¢æŒ‚èµ·ä¹‹åå”¤é†’åå‡ºç°é»‘å±é—®é¢˜" class="headerlink" title="å…³äºElementryOSå›¾å½¢ç•Œé¢æŒ‚èµ·ä¹‹åå”¤é†’åå‡ºç°é»‘å±é—®é¢˜"></a>å…³äºElementryOSå›¾å½¢ç•Œé¢æŒ‚èµ·ä¹‹åå”¤é†’åå‡ºç°é»‘å±é—®é¢˜</h1><p>è¿™ä¸¤å¤©åœ¨ElementryOsä¸Šè¸©åˆ°äº†å‘ï¼Œä¸ºäº†ä»¥åå°‘è¸©ç‚¹è¿™ç§å‘ï¼Œæ‰“ç®—ä»¥åå°†è¿™ç§å°é—®é¢˜ä¹Ÿå†™ä¸‹æ¥ã€‚</p><p>å¦‚ä½•è§£å†³ï¼šå®‰è£…  <code>xserver-xorg</code></p><p>åœ¨ElementryOSçš„ç»ˆç«¯ä¸­ä½¿ç”¨ <code>$ sudo apt-get install xserver-xorg</code>  æˆ‘ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥è§£å†³é—®é¢˜</p><p>è§£å†³æ—¶é—´ï¼š2018-6-23 ç‰ˆæœ¬ï¼šElementryOS Loki 0.4</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆåï¼‰å‘½ä»¤ç¯‡ï¼ˆ1ï¼‰</title>
      <link href="/2018/06/19/2018-06-19-bash_09-bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2018/06/19/2018-06-19-bash_09-bash%E5%91%BD%E4%BB%A4%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Bashä¸­çš„å‘½ä»¤"><a href="#Bashä¸­çš„å‘½ä»¤" class="headerlink" title="Bashä¸­çš„å‘½ä»¤"></a>Bashä¸­çš„å‘½ä»¤</h1><h2 id="å†…å»ºå‘½ä»¤"><a href="#å†…å»ºå‘½ä»¤" class="headerlink" title="å†…å»ºå‘½ä»¤"></a>å†…å»ºå‘½ä»¤</h2><p>å†…å»ºå‘½ä»¤æ˜¯bashå·¥å…·é›†ä¸­è‡ªå¸¦çš„å‘½ä»¤ï¼Œå¥½å¤„æ˜¯æ‰§è¡Œé€Ÿåº¦æ¯”å¤–éƒ¨å‘½ä»¤è¦å¿«ï¼Œå› ä¸ºå†…å»ºå‘½ä»¤ä¸€èˆ¬ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œè€Œå¤–éƒ¨å‘½ä»¤ä¸€èˆ¬è¦åˆ†æ”¯å‡ºä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><h3 id="I-Oæ“ä½œ"><a href="#I-Oæ“ä½œ" class="headerlink" title="I/Oæ“ä½œ"></a>I/Oæ“ä½œ</h3><ul><li><code>echo</code> å½“ç„¶æ˜¯æœ€ç†Ÿæ‚‰çš„echoå‘½ä»¤è¿›è¡Œè¾“å‡ºäº†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ä½¿ç”¨ echo `command ` çš„æ—¶å€™echoä¼šé»˜è®¤å°†å–æ¶ˆè¾“å‡ºçš„æ‰€æœ‰æ¢è¡Œã€‚</li></ul><p>å†å½“ä½¿ç”¨ echo â€œ`command`â€œçš„æ—¶å€™å¯ä»¥é¿å…æ¢è¡Œç¬¦çš„ç¼ºå¤±ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"`ll`"</span></span><br><span class="line">total 12K</span><br><span class="line">drwxr-xr-x 2 nanyin nanyin 4.0K Jun 19 21:18 bash</span><br><span class="line">drwxr-xr-x 3 nanyin nanyin 4.0K Jun 18 21:16 git</span><br><span class="line">-rw-r--r-- 1 nanyin nanyin 1.1K Jun 19 21:31 æ€»ç»“.txt</span><br></pre></td></tr></table></figure><ul><li><code>printf</code> åœ¨Cä¸­ä½¿ç”¨çš„printf èƒ½å¤Ÿæ ¼å¼åŒ–è¾“å‡ºå†…å®¹ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">printf</span> format-string... parameter...</span><br><span class="line"><span class="comment"># ä¾‹å­</span></span><br><span class="line"><span class="built_in">declare</span> -r PI=3.1415926535</span><br><span class="line"><span class="built_in">printf</span> <span class="string">"pi to 2 decimal is  %1.2f"</span> <span class="variable">$PI</span> <span class="comment"># pi to 2 decimal is  3.14%</span></span><br></pre></td></tr></table></figure><ul><li><code>read</code> è¯»å–å‚æ•°çš„å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¯»å–è¾“å…¥å‚æ•°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨è¾“å…¥readæ•°æ®æœŸé—´è¾“å…¥\ä¼šæŠ‘åˆ¶æ¢è¡Œç¬¦ã€‚ -ré€‰é¡¹ä¼šå¯¼è‡´è¾“å…¥çš„\è¢«å­—é¢è§£é‡Šã€‚åŒæ ·readå‘½ä»¤æœ‰å¾ˆå¤šå‚æ•°å¯ä»¥ä½¿ç”¨</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"please input a value:"</span></span><br><span class="line"><span class="built_in">read</span> var1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"input var1 is <span class="variable">$var1</span>"</span></span><br></pre></td></tr></table></figure><p>å½“read åé¢ä¸è·Ÿä»»ä½•å€¼çš„è¯ä»–é»˜è®¤ç»™ $REPLY èµ‹å€¼ï¼Œä¹‹åå¯ä»¥å–è¿™ä¸ªå€¼ä½œä¸ºreadè¿›æ¥çš„å€¼ã€‚</p><p>åœ¨å½“è¾“å…¥å†…å®¹åé¢åŠ ä¸Š <code>/</code> çš„è¯ä¼šèµ·åˆ°è¾“å…¥æ—¶å€™çš„æ¢è¡Œçš„ä½œç”¨ï¼Œè€Œä½¿ç”¨ -r å‚æ•°ä¼šå°† <code>/</code>æŒ‰ç…§åŸæ ·è¾“å‡ºå‡ºæ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"input var1 is <span class="variable">$var1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Enter a string terminated by a \\, then press &lt;ENTER&gt;."</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Then, enter a second string (no \\ this time), and again press &lt;ENTER&gt;."</span></span><br><span class="line"><span class="built_in">read</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"the default value is <span class="variable">$REPLY</span>"</span></span><br><span class="line"><span class="comment"># å½“readåé¢ä¸å†™å…·ä½“å€¼çš„æ—¶å€™ä¼šæŠŠå€¼ä»˜ç»™ REPLY</span></span><br></pre></td></tr></table></figure><p>readæœ‰å¾ˆå¤šæœ‰ç”¨çš„å‚æ•°å¯ä»¥è°ƒç”¨ï¼Œå®ç°å¤æ‚çš„è¾“å…¥åŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -s -n1 -p <span class="string">"Hit a key "</span> keypress</span><br><span class="line"><span class="comment"># read æœ‰å¾ˆå¤šéå¸¸æœ‰æ„æ€çš„å‚æ•°ï¼Œæ¯”å¦‚ -sçš„æ„æ€å°±æ˜¯ä¸è¦å›æ˜¾è¾“å…¥</span></span><br><span class="line"><span class="comment"># -n1 çš„æ„æ€æ˜¯è¾“å…¥æŒ‡å®šæ•°é‡çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment"># -p æ˜¯å…ˆè¾“å‡ºå‰é¢çš„æç¤ºã€‚</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span> <span class="string">"Keypress was "</span>\<span class="string">"<span class="variable">$keypress</span>\""</span>.<span class="string">"</span></span><br></pre></td></tr></table></figure><p>readä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶ä½œä¸ºè¾“å…¥çš„æº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"æ–‡ä»¶temp_fileä¸­å†…å®¹æœ‰ä¸¤è¡Œ ä¸€è¡Œæ˜¯hello world ç¬¬äºŒè¡Œæ˜¯ Hello World"</span></span><br><span class="line"><span class="built_in">read</span> var1 var2 &lt; temp_file</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var1 is <span class="variable">$var1</span> var2 is <span class="variable">$var2</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"è¿™é‡Œæ˜¾ç„¶è¾“å‡ºçš„ç¬¬ä¸€è¡Œçš„å†…å®¹"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"---------------------------"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"å…¶å®è¿˜èƒ½è‡ªå®šä¹‰IFSåˆ†å‰²ç¬¦ç„¶åæ ¹æ®è§„åˆ™è‡ªå®šä¹‰æ–‡ä»¶è¾“å…¥"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"all users in the list:"</span></span><br><span class="line">OIFS=<span class="variable">$IFS</span> ; IFS=:</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> name passwd uid gid fullname ignore</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$name</span> (<span class="variable">$fullname</span>)"</span></span><br><span class="line"><span class="keyword">done</span> &lt; /etc/passwd</span><br><span class="line">IFS=<span class="variable">$OIFS</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"><a href="#æ–‡ä»¶ç³»ç»Ÿæ“ä½œ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"></a>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</h3><p>æ“ä½œæ–‡ä»¶ç³»ç»Ÿçš„å‘½ä»¤æœ‰å¾ˆå¤šä½†æ˜¯éƒ½éå¸¸çš„å¸¸ç”¨ä¹Ÿéå¸¸çš„ç®€å•ã€‚è¿™é‡Œä¸åšå…·ä½“çš„è¯´æ˜å…¶ä¸­ä¸¾ä¸€ä¸¤ä¸ªéå¸¸å¸¸è§çš„ã€‚</p><p>cd : åˆ‡æ¢ç›®å½•</p><p>pwd ï¼š æŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•</p><h3 id="å˜é‡æ“ä½œ"><a href="#å˜é‡æ“ä½œ" class="headerlink" title="å˜é‡æ“ä½œ"></a>å˜é‡æ“ä½œ</h3><p>let æ˜¯èƒ½å¤Ÿè¿›è¡Œç®€å•å˜é‡è¿ç®—çš„å‘½ä»¤ æ¯”å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> a=1+2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="built_in">let</span> b=<span class="string">"2+3"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span></span><br></pre></td></tr></table></figure><p>eval å‘½ä»¤æ˜¯èƒ½å¤Ÿå°†å­—ç¬¦ä¸²è½¬æ¢æˆæˆå‘½ä»¤ã€‚å¹¶ä¸”å¯ä»¥å¤šæ¬¡è°ƒç”¨ä»¥å»è¯„ä¼°æ˜¯å¦æ˜¯å‘½ä»¤å»æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> command_string=<span class="string">"ps ax"</span></span><br><span class="line"> process=<span class="string">"ps ax"</span></span><br><span class="line"> <span class="built_in">eval</span> <span class="string">"<span class="variable">$command_string</span>"</span> | grep <span class="string">"<span class="variable">$process</span>"</span></span><br><span class="line"><span class="comment"># 26973 pts/3    R+     0:00 grep --color ps ax</span></span><br><span class="line"><span class="comment"># 26974 pts/3    R+     0:00 ps ax</span></span><br><span class="line"></span><br><span class="line">a=<span class="string">'$b'</span></span><br><span class="line">b=<span class="string">'$c'</span></span><br><span class="line">c=d</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>             <span class="comment"># $b</span></span><br><span class="line">                    <span class="comment"># First level.</span></span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">echo</span> <span class="variable">$a</span>        <span class="comment"># $c</span></span><br><span class="line">                    <span class="comment"># Second level.</span></span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">eval</span> <span class="built_in">echo</span> <span class="variable">$a</span>   <span class="comment"># d</span></span><br><span class="line">                    <span class="comment"># Third level.</span></span><br></pre></td></tr></table></figure><p>setå’Œunsetå‘½ä»¤ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯è®¾ç½®å’Œå–æ¶ˆå˜é‡çš„æ„æ€ã€‚</p><p>export å‘½ä»¤ä¸€èˆ¬ä½¿ç”¨åœ¨è®¾ç½®ç¯å¢ƒå˜é‡ä¸Šï¼Œå¦‚åœ¨/etc/profileæ–‡ä»¶ä¸­è®¾ç½®JAVA_HOME</p><p>declareå’Œtypesetå‘½ä»¤æŒ‡å®šå’Œ/æˆ–é™åˆ¶å˜é‡çš„å±æ€§ã€‚</p><p>getopts æ˜¯èƒ½å¤Ÿå®šä¹‰å±æ€§çš„ æ¯”å¦‚ åœ¨è§£å‹taråŒ…çš„æ—¶å€™ä½¿ç”¨<code>-xvf</code><br>ä¹‹ç±»çš„å‘½ä»¤çš„æ—¶å€™å°±æ˜¯ä½¿ç”¨getoptsæ¥è¾¾åˆ°ä¸åŒçš„ -a -b ä¹‹ç±»çš„å®ç°ã€‚è¿™ä¸ªå‘½ä»¤ä¸€èˆ¬å‡ºç°åœ¨case æˆ–è€…whileå¾ªç¯ä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">getopts</span> <span class="string">":abcde:fg"</span> Option</span><br><span class="line"><span class="comment"># Initial declaration.</span></span><br><span class="line"><span class="comment"># a, b, c, d, e, f, and g are the options (flags) expected.</span></span><br><span class="line"><span class="comment"># The : after option 'e' shows it will have an argument passed with it.</span></span><br><span class="line"><span class="comment"># eå‚æ•°åé¢çš„çš„è¡¨ç¤ºä¼šæœ‰å‚æ•°ä¼ é€’ç»™ä»–</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="keyword">case</span> <span class="variable">$Option</span> <span class="keyword">in</span></span><br><span class="line">    a ) <span class="comment"># Do something with variable 'a'.</span></span><br><span class="line">    b ) <span class="comment"># Do something with variable 'b'.</span></span><br><span class="line">    ...</span><br><span class="line">    e)  <span class="comment"># Do something with 'e', and also with $OPTARG,</span></span><br><span class="line">        <span class="comment"># which is the associated argument passed with option 'e'.</span></span><br><span class="line">    ...</span><br><span class="line">    g ) <span class="comment"># Do something with variable 'g'.</span></span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">shift</span> $((<span class="variable">$OPTIND</span> - 1))</span><br><span class="line"><span class="comment"># Move argument pointer to next.</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆä¸ƒï¼‰å¾ªç¯å’Œåˆ†æ”¯ï¼ˆ1ï¼‰</title>
      <link href="/2018/06/12/2018-06-11-bash_07_bash%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%88%86%E6%94%AF/"/>
      <url>/2018/06/12/2018-06-11-bash_07_bash%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%88%86%E6%94%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾ªç¯å’Œåˆ†æ”¯"><a href="#å¾ªç¯å’Œåˆ†æ”¯" class="headerlink" title="å¾ªç¯å’Œåˆ†æ”¯"></a>å¾ªç¯å’Œåˆ†æ”¯</h1><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><p>å¾ªç¯å°±æ˜¯ä¸€å—å½“æ¡ä»¶ä¸ºçœŸçš„è¿­ä»£çš„ä»£ç å—ã€‚</p><h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><p>for arg in [list] è¿™æ˜¯æœ€åŸºç¡€çš„å¾ªç¯å½¢å¼ã€‚å¦‚æœdoå’Œforåœ¨ä¸€è¡Œé‡Œï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨doå‰é¢åŠ åˆ†å·å¦‚ï¼š<code>for arg in list ;do</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> list</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">.. commend(s)</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>forå¾ªç¯æœ‰å¾ˆå¤šç”¨æ³•ï¼Œä¸¾å‡ ä¸ªä¾‹å­æ¥äº†è§£ä¸€ä¸‹forå¾ªç¯éƒ½èƒ½å¤Ÿå¹²äº›ä»€ä¹ˆå§ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for i in "hello world !" # è¿™æ ·å½“ä½œæ•´ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span>  hello world !</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># ä¸å‘½ä»¤ç»“åˆ</span></span><br><span class="line"><span class="keyword">if</span> [ -e <span class="string">"/bin/bash"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"is exist"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå½“å‰ç›®å½•ä¸‹åŒ¹é…æ–‡ä»¶çš„å†…å®¹ ç±»ä¼¼ä½¿ç”¨findå‘½ä»¤</span></span><br><span class="line">FILE=<span class="string">"*txt"</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$FILE</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Contents of <span class="variable">$file</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"------------------"</span></span><br><span class="line">cat <span class="string">"<span class="variable">$file</span>"</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœin listå†…å®¹ç¼ºå¤±å°±è¡¨ç¤ºä½¿ç”¨ in $@ ä¹Ÿå°±æ˜¯æ‰€æœ‰ä¼ è¿›æ¥çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">for</span> a</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span>  <span class="string">"<span class="variable">$a</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#é€šè¿‡ä½¿ç”¨å‘½ä»¤æ¥æ„é€ forå¾ªç¯çš„list</span></span><br><span class="line"><span class="keyword">for</span> b <span class="keyword">in</span> `ls`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨forå¾ªç¯è¾“å‡ºç”¨æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">PASSWORD_FILE=/etc/passwd</span><br><span class="line">n=1</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> $(awk <span class="string">'BEGIN&#123;FS=":";&#125;&#123;print $1&#125;'</span>&lt; <span class="string">"<span class="variable">$PASSWORD_FILE</span>"</span>)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"USER #<span class="variable">$n</span>=<span class="variable">$name</span>"</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"n+=1"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨å‡½æ•°ç»™forå¾ªç¯ä½œå€¼</span></span><br><span class="line"><span class="function"><span class="title">give_parm</span></span>()&#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1 2 3 5 6"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> $(give_parm)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$c</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»Cè¯­è¨€çš„forå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (( ai=1;ai&lt;5;ai++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$ai</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h3><p>whileå¾ªç¯ç”¨æ¥æµ‹è¯•ä¸€ä¸ªæ¡ä»¶,å¹¶ä¸”ä¸€ç›´å¾ªç¯ç›´åˆ°æ¡ä»¶ä¸ºtrueä¹Ÿå°±æ˜¯é€€å‡ºç ä¸º0çš„æ—¶å€™é€€å‡ºå¾ªç¯ã€‚ä¸€èˆ¬whileå¾ªç¯ç”¨åœ¨æå‰ä¸çŸ¥é“å¾ªç¯æ¬¡æ•°çš„æ—¶å€™ã€‚whileå¾ªç¯ä½¿ç”¨ä¸­æ‹¬å·æŠŠæ¡ä»¶æ‹¬èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸­æ‹¬å·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [condition]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">Â·Â·Â·Â·commends</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>å½“whileæœ‰å¤šä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œåªæœ‰æœ€åä¸€ä¸ªå‚æ•°ä¼šå†³å®šå¾ªç¯æ¬¡æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">echo</span> <span class="string">"previous-variable = <span class="variable">$previous</span>"</span></span><br><span class="line">      <span class="built_in">echo</span></span><br><span class="line">      previous=<span class="variable">$var1</span></span><br><span class="line">      [ <span class="string">"<span class="variable">$var1</span>"</span> != end ] <span class="comment"># Keeps track of what $var1 was previously.</span></span><br><span class="line">      <span class="comment"># Four conditions on *while*, but only the final one controls loop.</span></span><br><span class="line">      <span class="comment"># The *last* exit status is the one that counts.</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Input variable #1 (end to exit) "</span></span><br><span class="line">  <span class="built_in">read</span> var1</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"variable #1 = <span class="variable">$var1</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿæœ‰ç±»ä¼¼Cè¯­è¨€çš„whileæ¡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (( a &lt;= LIMIT ))   <span class="comment">#  Double parentheses,</span></span><br><span class="line"><span class="keyword">do</span>                       <span class="comment"># + and no "$" preceding variables.</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">"<span class="variable">$a</span> "</span></span><br><span class="line">  ((a += 1))             <span class="comment"># let "a+=1" ç®—æ•°è¿ç®—</span></span><br><span class="line">  <span class="comment"># Yes, indeed.</span></span><br><span class="line">  <span class="comment"># Double parentheses permit incrementing a variable with C-like syntax.</span></span><br><span class="line">  <span class="comment"># åŒå°æ‹¬å·å…è®¸é€’å¢ä¸€ä¸ªå˜é‡ä½¿ç”¨ç±»Cçš„è¿ç®—æ–¹å¼</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>åŒæ ·çš„whileåçš„æ¡ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">condition ()</span><br><span class="line">&#123;</span><br><span class="line">  ((t++))</span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$t</span> -lt 5 ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">return</span> 0  <span class="comment"># true</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">return</span> 1  <span class="comment"># false</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="comment">#     ^^^^^^^^^</span></span><br><span class="line"><span class="comment">#     Function call -- four loop iterations.</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Still going: t = <span class="variable">$t</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>whileå¯ä»¥å’Œreadå‘½ä»¤è¿›è¡Œç»“åˆï¼Œå½¢æˆ <code>while read</code> ç»“æ„ä½“ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„è¯»å’Œå¤„ç†æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$line</span> <span class="comment">#è¯»å–1.txtä¸­çš„æ¯ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">done</span> &lt; 1.txt</span><br></pre></td></tr></table></figure><h3 id="untilå¾ªç¯"><a href="#untilå¾ªç¯" class="headerlink" title="untilå¾ªç¯"></a>untilå¾ªç¯</h3><p>untilå¾ªç¯æ˜¯å’Œwhileå¾ªç¯æ­£å¥½ç›¸åï¼Œuntilä¼šä¸€ç›´è¿›è¡Œå¾ªç¯ï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºfalseï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until [ condition-is-true ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">command</span>(s)...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆä¹ï¼‰å‘½ä»¤ç½®æ¢å’Œç®—æ•°æ‰©å±•</title>
      <link href="/2018/06/12/2018-06-16-bash_09_%E5%91%BD%E4%BB%A4%E7%BD%AE%E6%8D%A2/"/>
      <url>/2018/06/12/2018-06-16-bash_09_%E5%91%BD%E4%BB%A4%E7%BD%AE%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="å‘½ä»¤ç½®æ¢"><a href="#å‘½ä»¤ç½®æ¢" class="headerlink" title="å‘½ä»¤ç½®æ¢"></a>å‘½ä»¤ç½®æ¢</h1><p>å‘½ä»¤ç½®æ¢å¯ä»¥è¾“å‡ºä¸€æ¡æˆ–è€…å¤šæ¡å‘½ä»¤çš„è¾“å‡ºã€‚å¯ä»¥è®©å‘½ä»¤åœ¨ä¸åŒè¯­å¢ƒä¸‹èµ·ä½œç”¨ï¼Œæœ€å¸¸è§çš„æ˜¯ä½¿ç”¨  <code>\</code>`` ç¬¦å·è¿›è¡Œå¯¹å‘½ä»¤çš„åŒ…è£¹ï¼Œè¿™æ ·å°±èƒ½å¤Ÿè¾“å‡ºä½¿ç”¨å‘½ä»¤å¾—å‡ºçš„ç»“æœã€‚å¯ä»¥æˆä¸ºå¦å¤–ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥æˆä¸ºå¾ªç¯çš„å‚æ•°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> `hostname`</span><br><span class="line"><span class="built_in">echo</span> $(<span class="string">"hostname"</span>)</span><br><span class="line"><span class="comment"># ä¸¤ç§ä½¿ç”¨éƒ½å¯ä»¥ï¼Œéƒ½èƒ½å¤Ÿè¾¾åˆ°å‘½ä»¤ç½®æ¢çš„ç›®çš„</span></span><br></pre></td></tr></table></figure><h1 id="ç®—æ•°è¿ç®—"><a href="#ç®—æ•°è¿ç®—" class="headerlink" title="ç®—æ•°è¿ç®—"></a>ç®—æ•°è¿ç®—</h1><p>ä½¿ç”¨åå¼•å·ï¼ŒåŒæ‹¬å·ï¼Œå’Œletè¿›è¡Œç›¸å¯¹æ¥è¯´ç®€å•</p><h2 id="ä½¿ç”¨åå¼•å·"><a href="#ä½¿ç”¨åå¼•å·" class="headerlink" title="ä½¿ç”¨åå¼•å·"></a>ä½¿ç”¨åå¼•å·</h2><p>ä½¿ç”¨åå¼•å·å†…ç”¨exprå‘½ä»¤è¿›è¡Œæ•´å‹æ•°çš„è¿ç®—ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">z=`expr <span class="variable">$z</span>+1`</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨åŒæ‹¬å·å’Œletè¿›è¡Œè¿ç®—"><a href="#ä½¿ç”¨åŒæ‹¬å·å’Œletè¿›è¡Œè¿ç®—" class="headerlink" title="ä½¿ç”¨åŒæ‹¬å·å’Œletè¿›è¡Œè¿ç®—"></a>ä½¿ç”¨åŒæ‹¬å·å’Œletè¿›è¡Œè¿ç®—</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">z=$((z+3))</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> z=z+3</span><br><span class="line"><span class="built_in">let</span> <span class="string">"z += 3"</span>  <span class="comment">#  Quotes permit the use of spaces in variable assignment.</span></span><br></pre></td></tr></table></figure><p>ä»Šå¤©çš„å†…å®¹æœ‰ç‚¹å°‘ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆå…«ï¼‰å¾ªç¯å’Œåˆ†æ”¯ï¼ˆ2ï¼‰</title>
      <link href="/2018/06/12/2018-06-12-bash_08_bash%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%88%86%E6%94%AF%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2018/06/12/2018-06-12-bash_08_bash%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%88%86%E6%94%AF%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾ªç¯å’Œåˆ†æ”¯-äºŒ"><a href="#å¾ªç¯å’Œåˆ†æ”¯-äºŒ" class="headerlink" title="å¾ªç¯å’Œåˆ†æ”¯(äºŒ)"></a>å¾ªç¯å’Œåˆ†æ”¯(äºŒ)</h1><h2 id="å¤šé‡å¾ªç¯"><a href="#å¤šé‡å¾ªç¯" class="headerlink" title="å¤šé‡å¾ªç¯"></a>å¤šé‡å¾ªç¯</h2><p>å°±åƒCï¼ŒJavaä¸€æ ·ï¼ŒbashåŒæ ·å¯ä»¥å®ç°å¤šé‡å¾ªç¯,ä¸‹é¢çš„ä¾‹å­ç®€å•çš„å®ç°åŒé‡å¾ªç¯ï¼Œå¦‚æœåŠ ä¸Šå¾ªç¯æ§åˆ¶å¯èƒ½å°±æ›´éš¾ä¸€äº›äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((i=0;i&lt;5;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> bin <span class="keyword">in</span> 1 2 4</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$bin</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯æ§åˆ¶"><a href="#å¾ªç¯æ§åˆ¶" class="headerlink" title="å¾ªç¯æ§åˆ¶"></a>å¾ªç¯æ§åˆ¶</h2><p>å½±å“å¾ªç¯è¡Œä¸ºçš„è¯­å¥ã€‚æœ‰ <code>break</code> å’Œ <code>continue</code> ä¸¤ä¸ªå¾ªç¯æ§åˆ¶å‘½ä»¤,break å‘½ä»¤å¯ä»¥ç»ˆæ­¢å¾ªç¯ï¼Œè€Œcontinueå¯ä»¥è·³è¿‡å½“å‰å¾ªç¯æå‰è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œè¿™é‡Œå’ŒCè¯­è¨€å®šä¹‰çš„ç±»ä¼¼ã€‚</p><p>ä¸‹é¢ä¸¾ä¸€ä¸ªç®€å•çš„breakå’Œcontinueçš„ä¾‹å­ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">LIMIT=9</span><br><span class="line">a=0</span><br><span class="line"><span class="comment">#while [[ $a -le $LIMIT ]]</span></span><br><span class="line"><span class="comment">#do</span></span><br><span class="line"><span class="comment">#let "a=a+1"</span></span><br><span class="line"><span class="comment">#if [ $a -eq 3 ] || [ $a -eq 11 ]</span></span><br><span class="line"><span class="comment">#then</span></span><br><span class="line"><span class="comment">#continue</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"><span class="comment">#echo $a</span></span><br><span class="line"><span class="comment"># done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$a</span> -le <span class="variable">$LIMIT</span> ]]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">let</span> <span class="string">"a=a+1"</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$a</span> -gt 2 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ç®€å•çš„breakå¾ªç¯åªèƒ½è·³å‡ºæœ€å†…å®¹çš„å¾ªç¯ï¼Œè€Œä¸èƒ½è·³å‡ºå¤šå±‚çš„å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>break N</code> æ¥è·³å‡ºå¤šå±‚å¾ªç¯ã€‚nä¸ºæƒ³è¦è·³å‡ºå¾ªç¯çš„å±‚æ•°ã€‚</p><p>å’Œbreakåƒä¼¼çš„continueï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ <code>continue N</code> æ¥å®ç°ã€‚è¿™é‡Œä½¿ç”¨åˆ°äº†ä¸€ä¸ªéå¸¸ç®€å•æ˜äº†çš„ä¾‹å­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> outer <span class="keyword">in</span> I II III IV V           <span class="comment"># outer loop</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span>; <span class="built_in">echo</span> -n <span class="string">"Group <span class="variable">$outer</span>: "</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># --------------------------------------------------------------------</span></span><br><span class="line">  <span class="keyword">for</span> inner <span class="keyword">in</span> 1 2 3 4 5 6 7 8 9 10  <span class="comment"># inner loop</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$inner</span>"</span> -eq 7 &amp;&amp; <span class="string">"<span class="variable">$outer</span>"</span> = <span class="string">"III"</span> ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">continue</span> 2  <span class="comment"># Continue at loop on 2nd level, that is "outer loop".</span></span><br><span class="line">                  <span class="comment"># Replace above line with a simple "continue"</span></span><br><span class="line">                  <span class="comment"># to see normal loop behavior.</span></span><br><span class="line">    <span class="keyword">fi</span>  </span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"<span class="variable">$inner</span> "</span>  <span class="comment"># 7 8 9 10 will not echo on "Group III."</span></span><br><span class="line">  <span class="keyword">done</span>  </span><br><span class="line">  <span class="comment"># --------------------------------------------------------------------</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span>; <span class="built_in">echo</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•å’Œåˆ†æ”¯"><a href="#æµ‹è¯•å’Œåˆ†æ”¯" class="headerlink" title="æµ‹è¯•å’Œåˆ†æ”¯"></a>æµ‹è¯•å’Œåˆ†æ”¯</h2><p>ä½¿ç”¨ <code>case</code> å’Œ <code>select</code> ç»“æ„ä½“ï¼Œä¸åƒä¸€ä¸ªå¾ªç¯ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€ä¸ªè¿­ä»£çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å®ƒä»¬èƒ½å¤Ÿé€šè¿‡æ¡ä»¶æŒ‡å¯¼ç¨‹åºçš„æµå‘ã€‚</p><h3 id="é€šè¿‡ç¨‹åºå—æ§åˆ¶ç¨‹åºæµå‘"><a href="#é€šè¿‡ç¨‹åºå—æ§åˆ¶ç¨‹åºæµå‘" class="headerlink" title="é€šè¿‡ç¨‹åºå—æ§åˆ¶ç¨‹åºæµå‘"></a>é€šè¿‡ç¨‹åºå—æ§åˆ¶ç¨‹åºæµå‘</h3><h4 id="Case-in-esac"><a href="#Case-in-esac" class="headerlink" title="Case (in) /esac"></a>Case (in) /esac</h4><p>åœ¨bashä¸­çš„caseç»“æ„ç±»ä¼¼Cä¸­çš„switchç»“æ„ï¼Œæ˜¯åœ¨æ‹¥æœ‰å¤šç§æ¡ä»¶ä¸‹å¯ä»¥ä½¿ç”¨åˆ°çš„ä»£ç å—ã€‚caseç»“æ„å¯ä»¥å‚è§ä¸‹é¢ä»£ç ã€‚ (å…¶å®æ˜¯å¯ä»¥æœ‰conditionçš„å·¦è¾¹çš„æ‹¬å·çš„ï¼Œå—¯ï¼Œå¯ä»¥åŠ ä¸Šçš„)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$variable</span>"</span> <span class="keyword">in</span> </span><br><span class="line"></span><br><span class="line"> <span class="string">"<span class="variable">$condition1</span>"</span> ) </span><br><span class="line"> <span class="built_in">command</span>... </span><br><span class="line"> ;; </span><br><span class="line"></span><br><span class="line"> <span class="string">"<span class="variable">$condition2</span>"</span> ) </span><br><span class="line"> <span class="built_in">command</span>... </span><br><span class="line"> ;;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä»¥åä¼šéå¸¸æœ‰ç”¨å¤„çš„ä¾‹å­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">  <span class="string">""</span>) <span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$&#123;0##*/&#125;</span> &lt;filename&gt;"</span>; <span class="built_in">exit</span> <span class="variable">$E_PARAM</span>;;</span><br><span class="line">                      <span class="comment"># No command-line parameters,</span></span><br><span class="line">                      <span class="comment"># or first parameter empty.</span></span><br><span class="line"><span class="comment"># Note that $&#123;0##*/&#125; is $&#123;var##pattern&#125; param substitution. </span></span><br><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡ä½¿ç”¨##parternæŠŠå‰é¢çš„./å»æ‰</span></span><br><span class="line"></span><br><span class="line">  -*) FILENAME=./<span class="variable">$1</span>;;   <span class="comment">#  If filename passed as argument ($1)</span></span><br><span class="line">                      <span class="comment">#+ starts with a dash,</span></span><br><span class="line">                      <span class="comment">#+ replace it with ./$1</span></span><br><span class="line">                      <span class="comment">#+ so further commands don't interpret it</span></span><br><span class="line">                      <span class="comment">#+ as an option.</span></span><br><span class="line"></span><br><span class="line">  * ) FILENAME=<span class="variable">$1</span>;;     <span class="comment"># Otherwise, $1.</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><p>selectæ˜¯å’Œcaseç»“æ„æ„ä¹‰ç›¸åŒçš„ç»“æ„ä½“ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„PS3ä¹Ÿå°±æ˜¯é€‰æ‹©æç¤ºç¬¦ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select variable [<span class="keyword">in</span> list]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">command</span>...</span><br><span class="line"> <span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure><p>ç®€å•å®ä¾‹ï¼Œè¿™ä¸ªä¾‹å­ä¸å®Œæ•´éœ€è¦å†å»è€ƒè™‘å¾ˆå¤šä¸œè¥¿ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PS3=<span class="string">"Choose your favorite vegetable:"</span></span><br><span class="line">select vegetable <span class="keyword">in</span> <span class="string">"beans"</span> <span class="string">"carrots"</span> <span class="string">"potatoes"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$vegetable</span> = <span class="string">"beans"</span> ]] || [[ <span class="variable">$vegetable</span> = <span class="string">"carrots"</span> ]] || [[<span class="variable">$vegetable</span> = <span class="string">"potatoes"</span> ]]</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line"><span class="built_in">echo</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"your favorite veggie is <span class="variable">$vegetable</span>"</span></span><br><span class="line"><span class="built_in">echo</span> </span><br><span class="line"><span class="built_in">continue</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"your vegetable not on this list"</span></span><br><span class="line"><span class="built_in">break</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼çš„å…¥é—¨</title>
      <link href="/2018/06/07/2018-06-06-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2018/06/07/2018-06-06-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><p>æœ€è¿‘ä¼šæ—¶å¸¸é‡åˆ°ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ç°åœ¨å†™ä¸€ç¯‡æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡ç« æ¥ç®€å•è®°å½•ä¸€ä¸‹å­¦ä¹ æ­£åˆ™çš„è¿‡ç¨‹ã€‚</p><p>åœ¨è¿™ä¸ªç½‘ç«™æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„ä¸­æ–‡æ–‡æ¡£ -ã€‹ <a href="http://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼æ‰‹å†Œ</a></p><h2 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h2><p>ä¸€èˆ¬ä½¿ç”¨åæ–œæ  \ æ¥è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ å¦‚åœ¨æ­£åˆ™ä¸­æœ‰ç‰¹æ®Šæ„ä¹‰çš„* æˆ–è€…. å¦‚æœè¦ä½¿ç”¨åŸæ„åˆ™éœ€è¦ä½¿ç”¨\æ¥è¿›è¡Œè½¬ä¹‰ å¦‚ \*ã€‚ä¸‹é¢ä»‹ç»å‡ ä¸ªå…·ä½“çš„å®ä¾‹ã€‚</p><ol><li>^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®</li><li>$ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</li><li>. åŒ¹é…é™¤å»æ¢è¡Œç¬¦ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦</li><li>* åŒ¹é…å‰é¢å­—ç¬¦0æ¬¡æˆ–è€…å¤šæ¬¡</li><li>? åŒ¹é…å‰é¢å¤§çš„å­—ç¬¦0æ¬¡æˆ–è€…1æ¬¡</li><li>+ åŒ¹é…å‰é¢å­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡</li><li>\w åŒ¹é…å­—æ¯æˆ–è€…æ•°å­—</li><li>\s åŒ¹é…ä»»æ„ç©ºç™½</li><li>\d åŒ¹é…æ•°å­—</li><li>\b åŒ¹é…å•è¯çš„å¼€å§‹æˆ–è€…ç»“æŸ</li></ol><p>ä¸€èˆ¬ä½¿ç”¨ ^ å¼€å¤´å¹¶ä¸”ä»¥ $ ç»“æŸï¼Œå¦‚éªŒè¯5-12ä½æ•°å­—çš„æ—¶å€™å¯ä»¥è¿™æ ·å†™ <code>^\d{5,12}$</code> å½“å­—ç¬¦ä¸²ä¸º <code>&quot;hello world</code> æ˜¯ï¼Œä½¿ç”¨$æ—¶åŒ¹é…åˆ°ä¸€å¤„ï¼Œè€Œä½¿ç”¨\bæ—¶ä¼šåŒ¹é…åˆ°å››å¤„ï¼Œåˆ†åˆ«ä¸ºæ¯ä¸ªå•è¯çš„å¼€å¤´å’Œç»“å°¾ã€‚</p><p>ç‰¹æ®Šå­—ç¬¦éå¸¸é‡è¦ï¼Œæ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ä½¿ç”¨åˆ°äº†é‡å¤ï¼Œä¹Ÿå°±æ˜¯{m,n} må’Œnæ˜¯é‡å¤çš„æ¬¡æ•°ï¼Œå¦‚æœnå­˜åœ¨ï¼Œé‚£ä¹ˆå°±é‡å¤måˆ°næ¬¡å¦‚æœä¸å­˜åœ¨ï¼Œå°±é‡å¤mæ¬¡ã€‚</p><h2 id="å­—ç¬¦åŒ¹é…"><a href="#å­—ç¬¦åŒ¹é…" class="headerlink" title="å­—ç¬¦åŒ¹é…"></a>å­—ç¬¦åŒ¹é…</h2><p><strong>å½“ä½¿ç”¨åˆ°éç‰¹æ®Šå­—ç¬¦çš„æ—¶å€™</strong>ï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·ï¼Œå¦‚ [aeiou]ç”¨æ¥è¡¨ç¤ºå…¶ä¸­çš„å­—ç¬¦éƒ½å¯ä»¥åŒ¹é…åˆ°ã€‚æ¯”å¦‚ å­—ç¬¦ä¸² <code>â€˜how helloâ€™</code> ä½¿ç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ <code>h[oe]</code> è¿™æ ·å¯ä»¥æç¤ºåŒ¹é…åˆ°ä¸¤å¤„</p><p><strong>å½“éœ€è¦ä½¿ç”¨ä¸ç‰¹æ®Šå­—ç¬¦ç›¸åçš„å«ä¹‰çš„æ—¶å€™</strong> ä½¿ç”¨åæ–œæ +å¤§å†™å­—ç¬¦çš„æ ¼å¼æ¥è¿›è¡ŒåŒ¹é…ã€‚æ¯”å¦‚åŒ¹é…éå­—æ¯å’Œæ•°å­—çš„å­—ç¬¦å°±åº”è¯¥ä½¿ç”¨<code>\W</code>(å› ä¸ºä½¿ç”¨åŒ¹é…å­—æ¯å’Œæ•°å­—çš„ç‰¹æ®Šå­—ç¬¦æ˜¯\w)ã€‚éç‰¹æ®Šå­—ç¬¦çš„åä¹‰ä½¿ç”¨^å·ã€‚å¦‚[^aeiou]è¡¨ç¤ºåŸå› å­—ç¬¦æ„å¤–çš„ä»»æ„å­—ç¬¦ã€‚</p><p><strong>å½“æƒ³åŒ¹é…å¤šç§æƒ…å†µçš„æ—¶å€™</strong>ï¼Œæ¯”å¦‚æˆ‘æƒ³åŒ¹é…xæˆ–è€…yå­—ç¬¦ä¸²é‚£ä¹ˆå°±ä½¿ç”¨ x|y æ¥è¡¨ç¤ºåŒ¹é…xæˆ–è€…yã€‚è¿™æ ·å¯ä»¥è§£å†³å¾ˆå¤šäºŒä¹‰æ€§çš„åŒ¹é…ä¸²ã€‚</p><h2 id="åˆ†ç»„çš„åŒ¹é…"><a href="#åˆ†ç»„çš„åŒ¹é…" class="headerlink" title="åˆ†ç»„çš„åŒ¹é…"></a>åˆ†ç»„çš„åŒ¹é…</h2><p>å½“æƒ³å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œé‡å¤ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨åˆ†ç»„çš„åŠŸèƒ½ã€‚ä½¿ç”¨å°æ‹¬å·æ¥å®ç°ã€‚å…¸å‹çš„ipåœ°å€çš„åŒ¹é…å°±å¯ä»¥è¿™æ ·ä½¿ç”¨(\d{1,3}.){3}\d{1,3}</p><p>ä½¿ç”¨ <code>\\+æ•°å­—</code> çš„å½¢å¼ æ¥å®ç°é‡å¤é‚£ä¸ªåˆ†ç»„çš„æ“ä½œ<br>å¦‚ <code>\b(\w+)\b\s+\1\b</code> å°±å¯ä»¥åŒ¹é…ç›¸åŒçš„å­—ç¬¦ä¸²ã€‚</p><h2 id="è´ªå©ªæ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼"></a>è´ªå©ªæ¨¡å¼</h2><p>å½“ä½¿ç”¨?ç´§è·Ÿå…¶ä»–ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ä¹‹åæ¯”å¦‚. * ä¹‹åï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„ï¼Œå°½å¯èƒ½å°‘çš„åŒ¹é…æœç´ çš„æ‰€æœ‰å­—ç¬¦ä¸²ã€‚æ¯”å¦‚æœå¤špppppppå­—ç¬¦ä¸²ï¼Œä½¿ç”¨â€˜o+?â€™ä¼šåŒ¹é…åˆ°å•ä¸ªo</p><h2 id="å…³äº-çš„åç»­"><a href="#å…³äº-çš„åç»­" class="headerlink" title="å…³äº çš„åç»­"></a>å…³äº çš„åç»­</h2><ul><li><p>(?:pattern) åŒ¹é…patternä½†ä¸è·å–ç»“æœã€‚è¿™åœ¨ä½¿ç”¨|æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å¸¸è§„åŒ¹é…ä¸¤ç§å­—ç¬¦ä¸²â€œusername|userMannerâ€å¯ä»¥ä½¿ç”¨user(?:name|Manner)æ¥ç®€å†™ã€‚</p></li><li><p>(?=pattern) æ­£å‘è‚¯å®šé¢„æŸ¥ã€‚æ¯”å¦‚windows(?=95|03|NT)èƒ½å¤ŸåŒ¹é…åˆ°windows95ä¸­çš„windowsè€Œä¸èƒ½åŒ¹é…åˆ°windowsxpä¸­çš„windows</p></li><li><p>(?!pattern) æ­£å‘å¦å®šé¢„æŸ¥ã€‚ä¸ä¸Šé¢çš„æ„æ€ç›¸ä¼¼ï¼Œå°±æ˜¯èƒ½å¤ŸåŒ¹é…åˆ°éçš„æŒ‡å®šæ¡ä»¶ã€‚æ¯”å¦‚windows(?!95|03|NT`èƒ½å¤ŸåŒ¹é…åˆ°windowsxpä¸­çš„windowsè€Œä¸èƒ½åŒ¹é…åˆ°windows95ä¸­çš„windows</p></li><li><p>(?&lt;=pattern) åå‘è‚¯å®šé¢„æŸ¥ã€‚å’Œç¬¬ä¸€ä¸ªå¾ˆç›¸è¿‘ï¼Œåªä¸è¿‡æ–¹å‘ä¸åŒã€‚</p></li><li><p>(?&lt;!) åå‘å¦å®šé¢„æŸ¥ ã€‚</p></li></ul><p>è¿™æ¬¡çš„æ­£åˆ™è¡¨è¾¾å¼å°±å…ˆæ€»ç»“åˆ°è¿™é‡Œï¼Œä»¥åè‚¯å®šä¼šé‡åˆ°æ›´å¤šçš„å…³äºæ­£åˆ™çš„é—®é¢˜ã€‚æœ‰æ—¶é—´ä¸€å®šè¿˜è¦è¯»è¯»<a href="https://www.regular-expressions.info/" target="_blank" rel="noopener">è‹±æ–‡çš„æ­£åˆ™æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆäº”ï¼‰ bashä¸­å…³äºå˜é‡çš„æ›´å¤šçš„çŸ¥è¯†</title>
      <link href="/2018/05/02/2018-05-05-bash_05_%E6%93%8D%E4%BD%9C%E5%8F%98%E9%87%8F/"/>
      <url>/2018/05/02/2018-05-05-bash_05_%E6%93%8D%E4%BD%9C%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h1><p>bashæ”¯æŒå¾ˆå¤šå…³äºå­—ç¬¦ä¸²çš„æ“ä½œï¼Œä¸è¿‡å¯æƒœçš„æ˜¯ï¼Œè¿™äº›æ“ä½œç¼ºä¹ç»Ÿä¸€æ€§ï¼Œæœ‰ä¸€äº›æ˜¯ä½¿ç”¨å‚æ•°ç­‰ï¼Œå¦å¤–ä¸€äº›æ˜¯é€šè¿‡å†…å»ºå‘½ä»¤<code>expr</code>å‘½ä»¤æ¥å®ç°ï¼Œè¿™ä¼šå¯¼è‡´ä¸åŒçš„è¯­æ³•åŠŸèƒ½çš„é‡å ï¼Œä¼šæ¯”è¾ƒæ··ä¹±ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨å‚æ•°å’Œå‘½ä»¤çš„å®ç°å­—ç¬¦ä¸²çš„æ“ä½œã€‚</p><ul><li><p>å­—ç¬¦ä¸²é•¿åº¦ï¼ˆString Lengthï¼‰</p><ol><li><p>$(#string) è¿™é‡Œæ˜¯å’ŒCè¯­è¨€ä¸­çš„strlen()æ˜¯ç›¸åŒçš„ã€‚</p></li><li><p>expr length $string åŒæ ·è¡¨ç¤ºstringä¸²çš„é•¿åº¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line">string=abcdefgHIGKL</span><br><span class="line"><span class="comment">#ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•$(#string)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"stringçš„é•¿åº¦æ˜¯ï¼š<span class="variable">$&#123;#string&#125;</span>"</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨exprå†…å»ºå‘½ä»¤ ä¼˜ç‚¹ç®€å•æ˜“æ‡‚</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"stringçš„é•¿åº¦æ˜¯ï¼š`expr length <span class="variable">$string</span>`"</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure></li></ol></li><li><p>å­—ç¬¦ä¸²ä»å¼€å¤´åŒ¹é…å­å­—ä¸²çš„é•¿åº¦</p><p>  æ–¹æ³•å¦‚ä¸‹ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stringZ=abcABC123ABCab </span><br><span class="line"><span class="built_in">echo</span> `expr match <span class="string">"<span class="variable">$stringZ</span>"</span> <span class="string">'abc[A-Z]*.2'</span>`</span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$stringZ</span> : <span class="string">'abc[A-Z]*.2'</span>`</span><br></pre></td></tr></table></figure></li><li><p>åŒ¹é…åˆ°å­ä¸²çš„ä½ç½® (index)</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> `expr index <span class="variable">$stringZ</span> <span class="string">'abc[A-Z]*.2'</span>`</span><br></pre></td></tr></table></figure></li><li><p>å­å­—ç¬¦ä¸²çš„æˆªå–</p><ol><li><p>${string:position} ä»positonä½ç½®æˆªå–å­—ç¬¦ä¸²stringã€‚</p></li><li><p>${string:positong:length} ä»positonä½ç½®æˆªå–å­—ç¬¦ä¸²stringï¼Œå¹¶ä¸”é™å®šæˆªå–é•¿åº¦ä¸ºlengthã€‚</p></li><li><p>expr substr $string $positon $length æ„æ€åŒä¸Šã€‚</p></li><li><p>expr match $string â€˜\(substring \)â€™ è¿™é‡Œçš„substringæ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ:5&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ:5:4&#125;</span></span><br><span class="line"><span class="built_in">echo</span> `expr substr <span class="variable">$stringZ</span> 5 4`</span><br><span class="line"><span class="built_in">echo</span> `expr match <span class="variable">$stringZ</span> <span class="string">'\(abc[A-Z]*.2\)'</span>`</span><br></pre></td></tr></table></figure></li></ol></li><li><p>ä»å­—ç¬¦ä¸²ä¸­ç§»é™¤å­å­—ç¬¦ä¸²</p><ol><li><p>${string#substring} substringæ˜¯å­å­—ç¬¦ä¸²ã€‚å¹¶ä¸”éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>è¯¥æ–¹æ³•è¡¨ç¤ºçš„æ˜¯å‘åç§»é™¤è¯¥å­å­—ç¬¦ä¸²æœ€çŸ­åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚</strong></p></li><li><p>${string##substring} ä¸ä¸Šé¢çš„æ­£å¥½ç›¸åã€‚<strong>è¯¥æ–¹æ³•è¡¨ç¤ºçš„æ˜¯å‘åç§»é™¤è¯¥å­—ç¬¦ä¸²æœ€é•¿åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚</strong></p></li><li><p>${string%substring} <strong>è¯¥æ–¹æ³•è¡¨ç¤ºçš„æ˜¯ç”±åå‘å‰ç§»é™¤è¯¥å­å­—ç¬¦ä¸²æœ€çŸ­åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚</strong></p></li><li><p>${string%%substring} <strong>è¯¥æ–¹æ³•è¡¨ç¤ºçš„æ˜¯ç”±åå‘å‰ç§»é™¤è¯¥å­—ç¬¦ä¸²æœ€é•¿åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"ç§»é™¤å­—ç¬¦ä¸²"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ#a*b&#125;</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ##a*b&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ%a*c&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ%%a*c&#125;</span></span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#ABC123ABCabc</span></span><br><span class="line"><span class="comment">#c</span></span><br><span class="line"><span class="comment">#abcABC123ABC</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>å­å­—ç¬¦ä¸²æ›¿æ¢</p><ol><li><p>${string/substring/replacement}  æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°substringçš„å­—ç¬¦ä¸²ï¼Œæ›¿æ¢ä¸ºreplacementã€‚</p></li><li><p>${string//substring/replacement} æ›¿æ¢æ‰€æœ‰åŒ¹é…åˆ°çš„å­—ç¬¦ã€‚</p></li><li><p>${string/#substring/replacement} æ›¿æ¢ç”±å‰å‘ååŒ¹é…åˆ°çš„å­—ç¬¦ã€‚</p></li><li><p>${string/%substring/replacement} æ›¿æ¢ç”±åå‘å‰åŒ¹é…åˆ°çš„å­—ç¬¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"---------å­—ç¬¦ä¸²æ›¿æ¢---------"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ/abc/xyz&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ//abc/xyz&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ/#abc/xyz&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;stringZ/%abc/xyz&#125;</span></span><br><span class="line"><span class="comment">#ç»“æœï¼š</span></span><br><span class="line"><span class="comment">#xyzABC123ABCabc</span></span><br><span class="line"><span class="comment">#xyzABC123ABCxyz</span></span><br><span class="line"><span class="comment">#xyzABC123ABCabc</span></span><br><span class="line"><span class="comment">#abcABC123ABCxyz</span></span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="ä½¿ç”¨awkæ“ä½œå­—ç¬¦ä¸²"><a href="#ä½¿ç”¨awkæ“ä½œå­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨awkæ“ä½œå­—ç¬¦ä¸²"></a>ä½¿ç”¨awkæ“ä½œå­—ç¬¦ä¸²</h2><p>ç°å­¦å…ˆå–ï¼Œ<a href="http://blog.jobbole.com/109089/" target="_blank" rel="noopener">ä¸‰ååˆ†é’Ÿå­¦ä¼šAWK</a>,å¿«é€Ÿäº†è§£å’Œåº”ç”¨awkã€‚</p><p>åŸºäºä»¥ä¸Šï¼Œä½¿ç”¨awkç»ƒä¹ ã€‚</p><p>å·¥ä½œæµåˆ†ä¸ºå¤§è‡´ä¸‰éƒ¨åˆ†ï¼Œ read-&gt;excute-&gt;repeat,å®ç°å¯¹æ–‡æœ¬çš„å¤„ç†ã€‚</p><h3 id="ç¨‹åºæœºæ„"><a href="#ç¨‹åºæœºæ„" class="headerlink" title="ç¨‹åºæœºæ„"></a>ç¨‹åºæœºæ„</h3><ul><li><p>BEGIN è¯­æ³•ï¼š<code>BEGIN {awk-commands}</code> æ˜¯å¯ä»¥çœç•¥çš„éƒ¨åˆ†å—ï¼Œä¸»è¦ä½œç”¨æ˜¯å£°æ˜å˜é‡ï¼Œåˆå§‹åŒ–å˜é‡ï¼Œ</p></li><li><p>BODYå— ï¼š<code>{commonds}</code>ï¼Œæ˜¯å¿…é¡»å¡«å†™çš„éƒ¨åˆ†ï¼Œä¸»è¦ä½œç”¨æ˜¯å¤„ç†æ–‡æœ¬ï¼Œä¼šå¯¹è¾“å…¥çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œbodyå—ä¸­çš„å‘½ä»¤ï¼Œå¹¶ä¸”bodyæ˜¯æ²¡æœ‰å…³é”®å­—çš„ã€‚</p></li></ul><p>-END ï¼š<code>END {commands}</code>,åŒBEGINï¼Œæ˜¯å¯ä»¥çœç•¥çš„éƒ¨åˆ†</p><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><ul><li><p>awkå‘½ä»¤è¡Œï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œ<code>awk [-option] files</code>æ¥å®ç°å¯¹filesæ–‡ä»¶çš„å¤„ç†ã€‚ å¦‚ <code>awk {print} mark.txt</code> è¿™é‡Œå°±ä¸å…·ä½“ä¸¾ä¾‹äº†ï¼Œå¼€å¤´çš„é“¾æ¥é‡Œè®²çš„éå¸¸è¯¦ç»†ï¼Œè¿™é‡Œåªåšç®€å•çš„è®°å½•å’ŒæŸ¥çœ‹ã€‚</p></li><li><p>ä½¿ç”¨å‘½ä»¤æ–‡ä»¶æ–¹å¼ <code>awk -f command.awk marks.txt</code> ä½¿ç”¨-få‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚</p></li><li><p>awkåŸºæœ¬é€‰é¡¹ ï¼š è¿™é‡Œä¸å…·ä½“æ€»ç»“ï¼Œlinuxç¯å¢ƒä¸‹ç»ˆç«¯ <code>man awk</code>å¯ä»¥çœ‹åˆ°éå¸¸å¤šçš„é€‰é¡¹ã€‚</p></li></ul><h3 id="åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹"><a href="#åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹"></a>åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</h3><ol><li><p>åŸºæœ¬æ‰“å°æ–‡ä»¶å†…å®¹</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'&#123;print&#125;'</span> mark.txt </span><br><span class="line">1)  Amit    Physics  80</span><br><span class="line">2)  Rahul   Maths    90</span><br><span class="line">3)  Shyam   Biology  87</span><br><span class="line">4)  Kedar   English  85</span><br><span class="line">5)  Hari    History  89</span><br></pre></td></tr></table></figure></li><li><p>æ‰“å°å…·ä½“é¡¹å†…å®¹</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'&#123;print $1 "\t" $2 &#125;'</span> mark.txt</span><br><span class="line">1)      Amit</span><br><span class="line">2)      Rahul</span><br><span class="line">3)      Shyam</span><br><span class="line">4)      Kedar</span><br><span class="line">5)      Hari</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ é™å®šæ¡ä»¶çš„æ‰“å°å†…å®¹</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk  <span class="string">'/a/  &#123;print $1 "\t" $2 &#125;'</span> mark.txt</span><br><span class="line">2)      Rahul</span><br><span class="line">3)      Shyam</span><br><span class="line">4)      Kedar</span><br><span class="line">5)      Hari</span><br></pre></td></tr></table></figure><p> ç»“æœåªæ˜¾ç¤ºåŒ¹é…åˆ°açš„è¡Œ</p></li><li><p>æ‰“å°åŒ¹é…åˆ°çš„è¡Œæ•°</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;count=0&#125; /a/ &#123; count++&#125; END&#123;print count&#125;'</span> mark.txt</span><br><span class="line">4</span><br></pre></td></tr></table></figure></li><li><p>æ‰“å°å­—ç¬¦æ•°é‡è¶…è¿‡16çš„è¡Œ</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'length($0) &gt; 18'</span> marks.txt</span><br><span class="line">3) Shyam   Biology   87</span><br><span class="line">4) Kedar   English   85</span><br></pre></td></tr></table></figure></li></ol><p>NOTE:åœ¨è¿™é‡Œçš„å‚æ•°å’Œbashä¸­çš„å‚æ•°ç±»ä¼¼ã€‚$0å½“å‰è¡Œï¼Œ$1ä¹‹åè¡¨ç¤ºå¯¹åº”æ–‡ä»¶çš„è¡Œçš„åˆ—ã€‚</p><h3 id="å†…å»ºå˜é‡"><a href="#å†…å»ºå˜é‡" class="headerlink" title="å†…å»ºå˜é‡"></a>å†…å»ºå˜é‡</h3><p>AWKæä¾›äº†å¾ˆå¤šå†…å»ºå˜é‡æä¾›ä½¿ç”¨ï¼Œèƒ½å¤Ÿèµ·åˆ°å¾ˆå¤§çš„ä½œç”¨ã€‚</p><h4 id="æ ‡å‡†awkå˜é‡"><a href="#æ ‡å‡†awkå˜é‡" class="headerlink" title="æ ‡å‡†awkå˜é‡"></a>æ ‡å‡†awkå˜é‡</h4><ul><li><p>ARGC å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;print "argument=",ARGC&#125;'</span> one two three</span><br><span class="line">argument= 4</span><br></pre></td></tr></table></figure></li><li><p>ARGV  å‘½ä»¤è¡Œå‚æ•°æ•°ç»„ å¦‚ <code>ARGV[1]=...</code></p></li><li><p>CONVFMT  æ•°å­—çš„çº¦å®šæ ¼å¼ï¼Œé»˜è®¤å€¼æ˜¯%.6g</p></li><li><p>ENVIRON ç¯å¢ƒå˜é‡ </p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN &#123;print "User is",ENVIRON["USER"]&#125;'</span></span><br><span class="line">User is nanyin</span><br></pre></td></tr></table></figure></li><li><p>FILENAME å½“å‰æ–‡ä»¶çš„åç§°</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'END&#123;print "this file name is", FILENAME&#125;'</span> mark.txt</span><br><span class="line">this file name is mark.txt</span><br></pre></td></tr></table></figure></li><li><p>FS åˆ†å‰²ç¬¦ é»˜è®¤æ˜¯ç©ºæ ¼ä¹Ÿå¯ä»¥ä½¿ç”¨-Fè®¾ç½®åˆ†å‰²ç¬¦</p></li><li><p>NF å½“å‰è¡Œçš„å­—æ®µæ•°ç›®</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'END&#123;print NF&#125;'</span> mark.txt</span><br><span class="line">4</span><br></pre></td></tr></table></figure></li><li><p>NR è¡Œå· </p></li><li><p>FNR å½“å‰æ–‡ä»¶çš„è¡Œå·</p></li><li><p>OFS è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦</p></li><li><p>ORS è¾“å‡ºè¡Œåˆ†å‰²ç¬¦</p></li><li><p>RLENGTH è¡¨ç¤ºmatchå‡½æ•°åŒ¹é…å­—ç¬¦åºŠçš„é•¿åº¦</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN &#123;if(match("One  Three","ree")) &#123;print RLENGTH&#125;&#125;'</span></span><br><span class="line">3</span><br></pre></td></tr></table></figure></li><li><p>RSTART è¡¨ç¤ºmatchå‡½æ•°ç¬¬ä¸€æ¬¡åŒ¹é…åˆ°çš„ä½ç½®</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN &#123;if(match("One  Three","ree")) &#123;print RSTART&#125;&#125;'</span> </span><br><span class="line">8</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h3><p>ä¸Cè¯­è¨€çš„æ“ä½œç¬¦åŸºæœ¬ç›¸åŒï¼Œå¦‚æ•°å­—çš„ä¸€å…ƒäºŒå…ƒä¸‰å…ƒæ“ä½œç­‰ï¼Œå­—ç¬¦ä¸²çš„é“¾æ¥ï¼Œæ•°ç»„å…ƒç´ ç­‰</p><h3 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><p>AWKå¯¹æ­£åˆ™çš„å¤„ç†éå¸¸å¼ºå¤§ï¼Œé€šå¸¸ä½ ä¸€ä¸ªå°å°çš„æ­£åˆ™è¡¨è¾¾å¼èƒ½å¤Ÿå¤„ç†å¾ˆå¤æ‚çš„é—®é¢˜ã€‚å…³äºæ­£åˆ™ï¼Œæœ‰æ—¶é—´æ•´ç†ä¸€ç¯‡ä¸“é—¨å…³äºæ­£åˆ™çš„æ–‡ç« ã€‚</p><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>AWKæ”¯æŒå…³è”æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä»…å¯ä»¥ä½¿ç”¨æ•°å­—ç´¢å¼•çš„æ•°ç»„ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºç´¢å¼•ã€‚åˆ é™¤æ•°ç»„å…ƒç´ ä½¿ç”¨deleteè¯­å¥</p><h3 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><p>æµç¨‹æ§åˆ¶if while for ä¸Cç›¸åŒ</p><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>æŸ¥æ‰‹å†Œå§ã€‚ã€‚ä¸€æ¬¡æ€§çœ‹ä¸å®Œã€‚ã€‚ã€‚ã€‚<a href="https://www.gnu.org/software/gawk/manual/gawk.html#Built_002din" target="_blank" rel="noopener">å†…å»ºå‡½æ•°æ‰‹å†Œ</a>ï¼Œè¿™é‡Œæœ‰åœ¨è¿™ç« æ¯”è¾ƒé‡è¦çš„å­—ç¬¦ä¸²å‡½æ•°ã€‚æ¥ä¸‹æ¥å°±æ¥çœ‹çœ‹æœ‰å“ªäº›å‡½æ•°æ¯”è¾ƒé‡è¦ã€‚</p><h4 id="AWKå¯¹å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°"><a href="#AWKå¯¹å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°" class="headerlink" title="AWKå¯¹å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°"></a>AWKå¯¹å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°</h4><p> æ•´ç†å‡ºawkå¯¹å­—ç¬¦ä¸²çš„å‡ ä¸ªå…·ä½“å‡½æ•°æ“ä½œã€‚</p><ol><li><p>asort(source,dest,how) </p></li><li><p>asorti(source,dest,how)</p><p>ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°çš„howå…ˆä¸è§£é‡Šï¼Œå‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºsourceæ•°ç»„å’Œæ’åºæ–¹å¼ï¼Œç¬¬äºŒä¸ªå¯ä»¥ä¸å†™ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä½çš„è¿›è¡Œæ’ä½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'BEGIN&#123;a[0]="xiaohong";a[1]="aiaolan";asort(a);for(i=2;i&gt;=0;i--) &#123;print a[i]&#125;&#125;'</span></span><br><span class="line">    xiaohong</span><br><span class="line">    aiaolan</span><br><span class="line">`</span><br></pre></td></tr></table></figure><p>asorti()å‡½æ•°ä¼šå°†é¡ºåºæ›¿æ¢åˆ°æ•°ç»„çš„valueå¤„å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'BEGIN&#123;a[0]="xiaohong";a[1]="aiaolan";asorti(a);for(i=2;i&gt;=0;i--) &#123;print a[i]&#125;&#125;'</span></span><br><span class="line">    1</span><br><span class="line">    0</span><br></pre></td></tr></table></figure></li><li><p>gensub(regexp,replacement,how[,target]) ç±»ä¼¼gsubå’Œsub</p><p>æ›¿æ¢åŒ¹é…åˆ°çš„æ­£åˆ™<em>regexp</em>ä¸ºreplacement.å¦‚æœhowæ˜¯gæˆ–è€…G(globalçš„ç®€å†™),åˆ™è¡¨ç¤ºæ›¿æ¢æ‰€æœ‰ä½¿ç”¨regexpåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²,targetæ˜¯ç›®æ ‡å­—ç¬¦ä¸²</p><p>å¦‚æœä½¿ç”¨regexpæœªåŒ¹é…åˆ°ï¼Œåˆ™è¿”å›åŸå§‹targetçš„å€¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="built_in">echo</span> a b c a d | gawk <span class="string">'&#123;print gensub(/a/,"AA",2)&#125;'</span> </span><br><span class="line">a b c AA d</span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ª</span></span><br><span class="line">awk <span class="string">'</span></span><br><span class="line"><span class="string">BEGIN&#123;</span></span><br><span class="line"><span class="string">a="abc def"</span></span><br><span class="line"><span class="string">b = gensub(/(.+) (.+)/,"\\2 \\1","g",a)</span></span><br><span class="line"><span class="string">print b</span></span><br><span class="line"><span class="string">&#125;'</span></span><br><span class="line">def abc</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>gsub(regexp,replacement[,target]) </p><p> gsubä¸­çš„â€˜gâ€™å…¶å®æ˜¯è¡¨ç¤ºçš„æ˜¯global,å¯»æ‰¾ç›®æ ‡çš„åŒ¹é…åˆ°ä»å·¦æœ€é•¿çš„ï¼Œä¸é‡å çš„,æ‰¾åˆ°å¹¶ä¸”æ›¿æ¢æ‰ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; gsub(/Britain/, <span class="string">"United Kingdom"</span>); <span class="built_in">print</span> &#125;</span><br></pre></td></tr></table></figure><p> è¿”å›çš„å€¼ä¸ºåŒ¹é…åˆ°çš„æ¬¡æ•°</p></li><li><p>index(in,find)</p><p> å¯»æ‰¾inä¸²å†…ç¬¦åˆfindåŒ¹é…åˆ°çš„å­—ç¬¦çš„indexä½ç½®</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;</span></span><br><span class="line"><span class="string">quote&gt; print index("hello","lo")&#125;'</span></span><br><span class="line">4</span><br></pre></td></tr></table></figure></li><li><p>length([string]) é¡¾åæ€ä¹‰ï¼Œä¸è§£é‡Šäº†</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;print length("hello")&#125;'</span></span><br><span class="line">5</span><br></pre></td></tr></table></figure><p> NOTE: If no argument is supplied, length() returns the length of $0. </p></li><li><p>match(string,regexp,[,array]) </p><p> ä½¿ç”¨æ­£åˆ™åŒ¹é…å­—ç¬¦ä¸²ï¼Œè¿”å›åŒ¹é…åˆ°çš„ä½ç½®ï¼Œè‹¥æœªåŒ¹é…åˆ°è¿”å›0</p></li><li><p>split(string,array[,fieldsep[,seps]])</p><p> åˆ†å‰²stringå­—ç¬¦ä¸²ï¼Œä½¿ç”¨arrayå­˜æ”¾åˆ†å‰²åäº§ç”Ÿçš„å­—ç¬¦ç»„ï¼Œä½¿ç”¨fieldsepç»„ä¸ºåˆ†å‰²ç¬¦ï¼Œsepså­˜æ”¾æ¯æ¬¡åˆ†å‰²äº§ç”Ÿçš„åˆ†å‰²ç¬¦ã€‚ä¸€ä¸ªåˆ†å‰²å‡ºæ¥çš„å­˜æ”¾åˆ°array[1]ä¸­ï¼Œç¬¬äºŒä¸ªå­˜æ”¾åˆ°array[2]ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœåˆ†å‰²ç¬¦fieldsepä¸å†™ï¼Œåˆ™é»˜è®¤åˆ†å‰²ç¬¦ä¸ºç©ºæ ¼ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ awk <span class="string">'BEGIN&#123;print split("cul-de-sac",a,"-",seps);for(i=1;i&lt;4;i++)&#123;print a[i]&#125;&#125;'</span> </span><br><span class="line">3</span><br><span class="line">cul</span><br><span class="line">de</span><br><span class="line">sac</span><br></pre></td></tr></table></figure></li><li><p>sprintf(format,expression1,..)</p><p> æ˜¯printfçš„åŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¿”å›å­—ç¬¦ä¸²</p></li><li><p>strtonum (str)</p><p>ç±»ä¼¼javaçš„parseInt()å‡½æ•°ï¼Œç”±Stringå­—ç¬¦ä¸²è½¬æˆæ•°å­—</p></li><li><p>subï¼ˆregexp,replacement[,target]ï¼‰</p><p>æœ€å·¦æœ€é•¿åŒ¹é…åŸåˆ™è¿›è¡ŒåŒ¹é…ï¼Œsubä¸ªgsubçš„ä½œç”¨ç›¸åŒï¼Œåˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¹¶è¿›è¡Œæ›¿æ¢</p></li><li><p>substr(string,start[,end])</p><p>åˆ†å‰²å­—ç¬¦ä¸²</p></li><li><p>tolower(string) &amp; toupper(string)</p><p>å¤§å°å†™è½¬æ¢</p></li></ol><p>å…³äºawkçš„å°±æ€»ç»“åˆ°è¿™äº†ã€‚ã€‚ååˆ†åŸºç¡€çš„æ€»ç»“ã€‚ã€‚æ¨èæ–‡æ¡£ï¼Œæ¸…æ™°æ˜äº†ã€‚ä¸‹ä¸€ç¯‡æ‰“ç®—å…ˆæ•´ç†æ•´ç†æ­£åˆ™è¡¨è¾¾å¼ã€‚ç°åœ¨å“ªé‡Œéƒ½ä¼šç”¨åˆ°æ­£åˆ™ï¼Œè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çœ‹çœ‹æ­£åˆ™çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè®¾è®¡æ¨¡å¼å­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰</title>
      <link href="/2018/04/17/2018-04-17-Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC%E4%B8%80%E7%AF%87/"/>
      <url>/2018/04/17/2018-04-17-Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC%E4%B8%80%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰"><a href="#Javaè®¾è®¡æ¨¡å¼å­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰" class="headerlink" title="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰"></a>Javaè®¾è®¡æ¨¡å¼å­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰</h1><p>æ¯æ¬¡å­¦ä¹ å®Œè®¾è®¡æ¨¡å¼ï¼Œè¿‡ä¸€é˜µå°±å¿˜äº†ï¼Œæ‰€ä»¥å†™å‡ ç¯‡åšå®¢è®°å½•ä¸‹ï¼Œè®©è‡ªå·±çš„è®°å¿†æ›´æ·±åˆ»ä¸€ä¸‹ã€‚</p><p>æ¨è <a href="https://www.cnblogs.com/malihe/p/6891920.html" target="_blank" rel="noopener">Javaä¸­23ç§è®¾è®¡æ¨¡å¼â€“è¶…å¿«é€Ÿå…¥é—¨åŠä¸¾ä¾‹ä»£ç </a> è¿™ç¯‡åšå®¢ã€‚èƒ½å¿«é€Ÿäº†è§£è®¾è®¡æ¨¡å¼ã€‚</p><p>æ¨ègithubä¸Šçš„é¡¹ç›®<a href="https://github.com/iluwatar/java-design-patterns" target="_blank" rel="noopener">java-design-patterns</a> æœ‰ä¾‹å­æºç ï¼Œå¯ä»¥é€šè¿‡å…·ä½“ä¾‹å­äº†è§£è®¾è®¡æ¨¡å¼ã€‚</p><h2 id="Javaè®¾è®¡æ¨¡å¼çš„åŸºæœ¬åˆ†ç±»"><a href="#Javaè®¾è®¡æ¨¡å¼çš„åŸºæœ¬åˆ†ç±»" class="headerlink" title="Javaè®¾è®¡æ¨¡å¼çš„åŸºæœ¬åˆ†ç±»"></a>Javaè®¾è®¡æ¨¡å¼çš„åŸºæœ¬åˆ†ç±»</h2><p>javaçš„è®¾è®¡æ¨¡å¼å¤§ä½“ä¸Šåˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p><ul><li><p>åˆ›å»ºå‹æ¨¡å¼ï¼ˆ5ç§ï¼‰ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå•ä¾‹æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ã€‚</p></li><li><p>ç»“æ„å‹æ¨¡å¼ï¼ˆ7ç§ï¼‰ï¼šé€‚é…å™¨æ¨¡å¼ï¼Œè£…é¥°å™¨æ¨¡å¼ï¼Œä»£ç†æ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œç»„åˆæ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ã€‚</p></li><li><p>è¡Œä¸ºå‹æ¨¡å¼ï¼ˆ11ç§ï¼‰ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼</p></li></ul><h2 id="è®¾è®¡æ¨¡å¼éµå¾ªçš„åŸåˆ™æœ‰å…­ä¸ª"><a href="#è®¾è®¡æ¨¡å¼éµå¾ªçš„åŸåˆ™æœ‰å…­ä¸ª" class="headerlink" title="è®¾è®¡æ¨¡å¼éµå¾ªçš„åŸåˆ™æœ‰å…­ä¸ª"></a>è®¾è®¡æ¨¡å¼éµå¾ªçš„åŸåˆ™æœ‰å…­ä¸ª</h2><ul><li><p><strong>å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰</strong></p><p>  ã€€å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p></li><li><p><strong>é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰</strong></p><p>  åªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚</p></li><li><p><strong>ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰</strong></p><p>  ã€€ã€€è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚</p></li><li><p><strong>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰</strong></p><p>  ä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£æ¥é™ä½è€¦åˆåº¦ã€‚</p></li><li><p><strong>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰</strong></p><p>  ä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚</p></li><li><p><strong>åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰</strong></p><p>  ã€€åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ç»§æ‰¿å®é™…ä¸Šç ´åäº†ç±»çš„å°è£…æ€§ï¼Œè¶…ç±»çš„æ–¹æ³•å¯èƒ½ä¼šè¢«å­ç±»ä¿®æ”¹ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆå››ï¼‰ bashä¸­çš„æ“ä½œåŠç›¸å…³è¯é¢˜</title>
      <link href="/2018/04/12/2018-04-16-bash_operationAndRelatedTopics/"/>
      <url>/2018/04/12/2018-04-16-bash_operationAndRelatedTopics/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå­¦ä¹ è®°å½•ï¼ˆå››ï¼‰-bashä¸­çš„æ“ä½œåŠç›¸å…³è¯é¢˜"><a href="#bashå­¦ä¹ è®°å½•ï¼ˆå››ï¼‰-bashä¸­çš„æ“ä½œåŠç›¸å…³è¯é¢˜" class="headerlink" title="bashå­¦ä¹ è®°å½•ï¼ˆå››ï¼‰ bashä¸­çš„æ“ä½œåŠç›¸å…³è¯é¢˜"></a>bashå­¦ä¹ è®°å½•ï¼ˆå››ï¼‰ bashä¸­çš„æ“ä½œåŠç›¸å…³è¯é¢˜</h1><h2 id="è®¡ç®—ç¬¦-Operators"><a href="#è®¡ç®—ç¬¦-Operators" class="headerlink" title="è®¡ç®—ç¬¦ Operators"></a>è®¡ç®—ç¬¦ Operators</h2><h3 id="ä¸€-èµ‹å€¼ï¼ˆassignmentï¼‰"><a href="#ä¸€-èµ‹å€¼ï¼ˆassignmentï¼‰" class="headerlink" title="ä¸€.èµ‹å€¼ï¼ˆassignmentï¼‰"></a>ä¸€.èµ‹å€¼ï¼ˆassignmentï¼‰</h3><p><em>å˜é‡èµ‹å€¼</em>ï¼šåˆå§‹åŒ–å˜é‡æˆ–è€…æ”¹å˜å˜é‡çš„å€¼</p><p>åœ¨æ‰€æœ‰çš„èµ‹å€¼æ“ä½œä¸­ï¼Œè®¡ç®—èµ‹å€¼å’Œå­—ç¬¦ä¸²å¤åˆ¶éƒ½æ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸å­˜åœ¨å·®å¼‚ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=27</span><br><span class="line">category=minerals  </span><br><span class="line"><span class="comment"># No spaces allowed after the "=".</span></span><br></pre></td></tr></table></figure><h3 id="äºŒ-è®¡ç®—æ“ä½œç¬¦"><a href="#äºŒ-è®¡ç®—æ“ä½œç¬¦" class="headerlink" title="äºŒ.è®¡ç®—æ“ä½œç¬¦"></a>äºŒ.è®¡ç®—æ“ä½œç¬¦</h3><p><code>+</code>ï¼Œ<code>-</code>ï¼Œ<code>*</code>ï¼Œ<code>/</code>,<code>%</code>ï¼ˆå–æ¨¡è¿ç®—ï¼‰ï¼Œ<code>+=</code>ï¼Œ<code>-=</code>ï¼Œ<code>*=</code>,<code>/=</code>,<code>%=</code>è¿™äº›æ“ä½œç¬¦å’Œå…¶ä»–è¯­è¨€ï¼ˆæ¯”å¦‚javaï¼‰è¯­ä¹‰ç›¸åŒã€‚å”¯ä¸€æœ‰ä¸ªå·®å¼‚çš„æ˜¯ <code>**</code> æ˜¯ä¹˜æ–¹æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸€èˆ¬èµ‹å€¼</span></span><br><span class="line">i=1</span><br><span class="line">bash=<span class="string">"/bin/bash"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸€èˆ¬æ“ä½œç¬¦</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"z=i+1"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$z</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="string">"i+=2"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="string">"z=i**2"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$z</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>bashä¸èƒ½ç†è§£æµ®ç‚¹æ•°ï¼Œä»–ä¼šé»˜è®¤æŠŠæµ®ç‚¹æ•°å½“ä½œå­—ç¬¦ä¸²æ¥å¤„ç†ã€‚</p></blockquote><blockquote><p>éœ€è¦åœ¨è„šæœ¬ä¸­ä½¿ç”¨ <code>bc</code>æ¥è®¡ç®—æµ®ç‚¹æ•°</p></blockquote><h3 id="ä¸‰-å…¶ä»–æ“ä½œç¬¦"><a href="#ä¸‰-å…¶ä»–æ“ä½œç¬¦" class="headerlink" title="ä¸‰.å…¶ä»–æ“ä½œç¬¦"></a>ä¸‰.å…¶ä»–æ“ä½œç¬¦</h3><ul><li><p>æŒ‰ä½æ“ä½œï¼š</p><p>  <code>&lt;&lt;</code> : bitwise left shift (multiplies by 2 for each shift position)</p><p>  <code>&gt;&gt;</code>: bitwise right shift (divides by 2 for each shift position)</p><p>  <code>&amp;,|ï¼Œï½ï¼Œ^</code> : åˆ†åˆ«å¯¹åº” ä½ä¸ï¼Œä½æˆ–ï¼Œä½å¦,å¼‚æˆ–</p></li><li><p>é€»è¾‘æ“ä½œ</p><p>  <code>ï¼</code> ï¼šé</p><p>  <code>&amp;&amp;</code> ï¼š AND</p><p>  <code>||</code>  ï¼š OR</p></li><li><p>æ‚é¡¹</p><p>  <code>ï¼Œ</code> ï¼šé€—å·æ“ä½œç¬¦ï¼Œè¿æ¥å¤šä¸ªè®¡ç®—è¡¨è¾¾å¼ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ ·åªèƒ½è¿”å›æœ€åä¸€ä¸ªç®—å¼çš„å€¼</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="string">"t1 = ((5 + 3, 7 - 1, 15 - 4))"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"t1 = <span class="variable">$t1</span>"</span>            <span class="comment"># t1 = 11</span></span><br><span class="line"><span class="comment"># Here t1 is set to the result of the last operation. Why?</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t2 = ((a = 9, 15 / 3))"</span>      <span class="comment"># Set "a" and calculate "t2".</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"t2 = <span class="variable">$t2</span>    a = <span class="variable">$a</span>"</span>         <span class="comment"># t2 = 5    a = 9</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆä¸‰ï¼‰ bashä¸­çš„é€€å‡ºç å’Œæµ‹è¯•ï¼ˆTestï¼‰</title>
      <link href="/2018/04/12/2018-04-12-bash_exitCode/"/>
      <url>/2018/04/12/2018-04-12-bash_exitCode/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå­¦ä¹ è®°å½•ï¼ˆä¸‰ï¼‰-bashé€€å‡ºç å’Œæµ‹è¯•"><a href="#bashå­¦ä¹ è®°å½•ï¼ˆä¸‰ï¼‰-bashé€€å‡ºç å’Œæµ‹è¯•" class="headerlink" title="bashå­¦ä¹ è®°å½•ï¼ˆä¸‰ï¼‰ bashé€€å‡ºç å’Œæµ‹è¯•"></a>bashå­¦ä¹ è®°å½•ï¼ˆä¸‰ï¼‰ bashé€€å‡ºç å’Œæµ‹è¯•</h1><h2 id="1-Bashé€€å‡ºç "><a href="#1-Bashé€€å‡ºç " class="headerlink" title="1. Bashé€€å‡ºç "></a>1. Bashé€€å‡ºç </h2><ul><li><p>è„šæœ¬çš„é€€å‡ºå‘½ä»¤ï¼Œç±»ä¼¼Cè¯­è¨€ä¸­çš„ <code>return value</code> ï¼Œå¯ä»¥ä¾›è„šæœ¬çš„çˆ¶è¿›ç¨‹è°ƒç”¨ã€‚</p></li><li><p>æ¯æ¡å‘½ä»¤è¿”å›ä¸€æ¡çŠ¶æ€çŠ¶æ€ï¼Œå‘½ä»¤æ‰§è¡ŒæˆåŠŸè¿”å›<code>0</code>ï¼Œæ‰§è¡Œå¤±è´¥è¿”å›<code>é0</code>çŠ¶æ€ç å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé”™è¯¯ç ï¼ˆ<code>error code</code>ï¼‰ã€‚</p></li><li><p>æœ€åçš„å‘½ä»¤è¿”å›çš„çŠ¶æ€æˆ–è€… exit nnnï¼ˆè¿™é‡Œçš„nnnå¿…é¡»æ˜¯1ï½255ä¹‹é—´çš„æ•´æ•°ï¼‰ä¼ é€’ç»™shellã€‚</p></li></ul><p><code>exit nnn</code> <code>exit</code> <code>exit $?</code> æˆ–è€…<code>ç©º</code>ã€‚éƒ½å¯ä»¥ï¼Œæ˜¯bash <code>Return value</code>çš„æ–¹å¼ã€‚</p><ul><li>å¯ä»¥ä½¿ç”¨ <code>ï¼</code>æ¥åè½¬çŠ¶æ€ã€‚</li></ul><h2 id="2-Bashä¸­çš„test"><a href="#2-Bashä¸­çš„test" class="headerlink" title="2. Bashä¸­çš„test"></a>2. Bashä¸­çš„test</h2><p>æ¯ä¸ªç¼–ç¨‹è¯­è¨€éƒ½ä¼šæœ‰å¯¹ä¸€ä¸ªæƒ…å†µä¸‹æµ‹è¯•çš„åŠŸèƒ½ï¼ŒBashä¹Ÿä¸ä¾‹å¤–ï¼Œbashæä¾›testå‘½ä»¤ï¼Œå¤šç§çš„æ‹¬å·æ“ä½œï¼Œæœ€ç»ˆè¦çš„If/elseç»“æ„è¯­å¥æ¥å®ç°teståŠŸèƒ½ã€‚</p><h3 id="æµ‹è¯•ç»“æ„ä½“-Test-Constructs"><a href="#æµ‹è¯•ç»“æ„ä½“-Test-Constructs" class="headerlink" title="æµ‹è¯•ç»“æ„ä½“(Test Constructs)"></a>æµ‹è¯•ç»“æ„ä½“(Test Constructs)</h3><ul><li><p>ä¸€ä¸ªif/elseç»“æ„ä½“ä¼šæµ‹è¯•ä¸€ç³»åˆ—å‘½ä»¤çš„è¿”å›å€¼æ˜¯å¦æ˜¯0ä¹Ÿå°±æ˜¯å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚å¦‚æœæˆåŠŸæ‰§è¡Œå¦å¤–ä¸€ç³»åˆ—æ“ä½œã€‚</p></li><li><p>bashä½¿ç”¨ <code>[</code> æ¥è¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯åœ¨åæ¥çš„ç‰ˆæœ¬é‡Œï¼Œbashå¼•è¿›äº† <code>[[</code> æ¥æ‹“å±•testå‘½ä»¤ï¼ŒbashæŠŠ<code>[[$a -lt $b]]</code>çœ‹ä½œä¸€ä¸ªå…ƒç´ ï¼Œä»–ä¼šè¿”å›ä¸€ä¸ªçŠ¶æ€ç ï¼ˆæˆåŠŸ0ï¼Œä¸æˆåŠŸæ˜¯é0ï¼‰</p></li><li><p>å½“ä½¿ç”¨<code>let</code> å’Œ <code>(())</code> çš„æ—¶å€™ï¼Œå¯¹è®¡ç®—è¡¨è¾¾å¼è¿›è¡Œè¿ç®—çš„æ—¶å€™ä¹Ÿä¼šè¿”å›exit codeï¼Œç”¨äºå¯¹ç®—å¼çš„æµ‹è¯•</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">(( 0 &amp;&amp; 1 ))                 <span class="comment"># Logical AND</span></span><br><span class="line"><span class="built_in">echo</span> $?     <span class="comment"># 1     ***</span></span><br><span class="line"><span class="comment"># And so ...</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 0 &amp;&amp; 1 ))"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$num</span>   <span class="comment"># 0</span></span><br><span class="line"><span class="comment"># But ...</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 0 &amp;&amp; 1 ))"</span></span><br><span class="line"><span class="built_in">echo</span> $?     <span class="comment"># 1     ***</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(( 200 || 11 ))              <span class="comment"># Logical OR</span></span><br><span class="line"><span class="built_in">echo</span> $?     <span class="comment"># 0     ***</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 200 || 11 ))"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$num</span>   <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 200 || 11 ))"</span></span><br><span class="line"><span class="built_in">echo</span> $?     <span class="comment"># 0     ***</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(( 200 | 11 ))               <span class="comment"># Bitwise OR</span></span><br><span class="line"><span class="built_in">echo</span> $?                      <span class="comment"># 0     ***</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 200 | 11 ))"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$num</span>                    <span class="comment"># 203</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"num = (( 200 | 11 ))"</span></span><br><span class="line"><span class="built_in">echo</span> $?                      <span class="comment"># 0     ***</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The "let" construct returns the same exit status</span></span><br><span class="line"><span class="comment">#+ as the double-parentheses arithmetic expansion.</span></span><br></pre></td></tr></table></figure><ul><li><p>ifå¯ä»¥æµ‹è¯•ä»»ä½•æ¡ä»¶ ä¸ä»…ä»…æ˜¯åŒ…åœ¨æ‹¬å·é‡Œé¢çš„æ¡ä»¶ã€‚</p></li><li><p><strong>Else if and elif</strong></p><blockquote><p>elifç›¸å½“ä¸ else ifï¼Œè¦è¯·æ±‚åˆ†æ”¯éœ€è¦ç”¨åˆ°elif</p></blockquote>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">command1</span><br><span class="line">command2</span><br><span class="line">command3</span><br><span class="line"><span class="keyword">elif</span> [ condition2 ]</span><br><span class="line"><span class="comment"># Same as else if</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">command4</span><br><span class="line">command5</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">default-command</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p>Equivalence of test, <code>/usr/bin/test</code>,<code>[ ]</code>, and <code>/usr/bin/[</code> ä½¿ç”¨è¿™å‡ ä¸ªåšåˆ¤æ–­éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ›´å¤æ‚çš„è¡¨è¾¾å¼è¦ä½¿ç”¨<code>[[]]</code>æ¥ä»£æ›¿<code>[]</code>ã€‚</p><blockquote><p>Using the [[ â€¦ ]] test construct, rather than [ â€¦ ] can prevent many logic errors in scripts. è¿™æ˜¯Advanced Bash-Scripting Guideç»™å‡ºçš„å»ºè®®ã€‚</p></blockquote></li></ul><h3 id="æ–‡ä»¶æµ‹è¯•æ“ä½œï¼ˆFileï¼‰"><a href="#æ–‡ä»¶æµ‹è¯•æ“ä½œï¼ˆFileï¼‰" class="headerlink" title="æ–‡ä»¶æµ‹è¯•æ“ä½œï¼ˆFileï¼‰"></a>æ–‡ä»¶æµ‹è¯•æ“ä½œï¼ˆFileï¼‰</h3><ul><li><p>-e æ–‡ä»¶æ˜¯å¦å­˜åœ¨</p></li><li><p>-a æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆä»¥å¼ƒç”¨ï¼‰</p></li><li><p>-f æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶(ä¸æ˜¯ç›®å½•æ–‡ä»¶æˆ–è€…è®¾å¤‡æ–‡ä»¶)</p></li><li><p>-s æ˜¯å¦æ˜¯ç©ºæ–‡ä»¶</p></li><li><p>-d æ˜¯å¦æ˜¯ç›®å½•</p></li><li><p>-b æ˜¯å¦æ˜¯å—è®¾å¤‡(block device)</p></li><li><p>-c æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡(character device)</p></li><li><p>-h æ˜¯å¦æ˜¯é“¾æ¥æ–‡ä»¶(symbolic link)</p></li><li><p>-S file is socket</p></li><li><p>-r -w -x åˆ†åˆ«å¯¹åº”æ–‡ä»¶çš„ è¯»å†™æ‰§è¡Œæƒé™</p></li><li><p>-O æ˜¯å¦æ˜¯æ–‡ä»¶çš„æ‹¥æœ‰è€…</p></li><li><p>-G group-idæ˜¯å¦å’Œä½ è‡ªå·±çš„ç›¸åŒ</p></li><li><p>-N åœ¨æœ€åä¸€æ¬¡è¢«è¯»ä¹‹åæ–‡ä»¶å·²ç»æ›´æ”¹</p></li><li><p>f1 <code>-nt</code> f2 f1æ¯”f2æ–° </p></li><li><p><code>-ot</code> f1æ¯”f2æ—§ </p></li><li><p><code>-ef</code> f1å’Œf2 å¼•ç”¨åŒä¸€ä¸ªæ–‡ä»¶</p></li><li><p>ä¾‹å­</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> directory <span class="keyword">in</span> <span class="variable">$directorys</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="variable">$directory</span> ]</span><br><span class="line">    <span class="keyword">then</span> linkchk <span class="variable">$directory</span></span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$directory</span> is not a directory"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage: <span class="variable">$0</span> dir1 dir2 ..."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="å…¶ä»–æ¯”è¾ƒæ“ä½œï¼ˆIntegerï¼ŒStringï¼‰"><a href="#å…¶ä»–æ¯”è¾ƒæ“ä½œï¼ˆIntegerï¼ŒStringï¼‰" class="headerlink" title="å…¶ä»–æ¯”è¾ƒæ“ä½œï¼ˆIntegerï¼ŒStringï¼‰"></a>å…¶ä»–æ¯”è¾ƒæ“ä½œï¼ˆIntegerï¼ŒStringï¼‰</h3><p>æ•´å‹å’Œå­—ç¬¦ä¸²ç±»å‹ä½¿ç”¨ä¸¤ç»„ä¸åŒçš„æ“ä½œ</p><h4 id="æ•´å½¢"><a href="#æ•´å½¢" class="headerlink" title="æ•´å½¢"></a>æ•´å½¢</h4><ul><li><p>-eq ç›¸ç­‰æ¯”è¾ƒ <code>if [ &quot;$a&quot; -eq &quot;$b&quot; ]</code></p></li><li><p>-ne æ¯”è¾ƒä¸ç›¸ç­‰ <code>if [ &quot;$a&quot; -ne &quot;$b&quot; ]</code></p></li><li><p>-gt å¤§äºç­‰äº(is greater than or equal to) <code>if [ &quot;$a&quot; -ge &quot;$b&quot; ]</code></p></li><li><p>-lt å°äº(is less than) <code>if [ &quot;$a&quot; -lt &quot;$b&quot; ]</code></p></li><li><p>-le å°äºç­‰äº(is less than or equal to) `if [ â€œ$aâ€ -le â€œ$bâ€ ]</p></li><li><p><code>&lt;</code> <code>&gt;</code> <code>&lt;=</code> <code>&gt;=</code> å¯¹åº”å¤§äºï¼Œå°äºï¼Œå°äºç­‰äºï¼Œå¤§äºç­‰äºè¿™äº›ç›¸åº”çš„æ“ä½œ</p></li></ul><h4 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h4><ul><li><p>= åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰</p></li><li><p>== å’Œ = ç›¸åŒï¼ŒåŒæ ·æ˜¯åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ ä½† == åœ¨ [] å’Œ [[]] ä¸­å®šä¹‰ä¸åŒï¼Œä¸‹é¢ä¸¾ä¾‹ï¼š</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="variable">$a</span> == z* ]]   <span class="comment"># True if $a starts with an "z" (pattern matching).</span></span><br><span class="line">[[ <span class="variable">$a</span> == <span class="string">"z*"</span> ]] <span class="comment"># True if $a is equal to z* (literal matching).</span></span><br><span class="line"></span><br><span class="line">[ <span class="variable">$a</span> == z* ]     <span class="comment"># File globbing and word splitting take place.</span></span><br><span class="line">[ <span class="string">"<span class="variable">$a</span>"</span> == <span class="string">"z*"</span> ] <span class="comment"># True if $a is equal to z* (literal matching).</span></span><br></pre></td></tr></table></figure><ul><li><p>!= ä¸ç­‰äº</p></li><li><p>&lt; and &gt; å¤§äºå°äº æŒ‰ç…§ASCII ç æ¯”è¾ƒ</p></li><li><p>-z ç©ºå­—ç¬¦ä¸²,å› æ­¤ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸º0</p></li><li><p>-n å­—ç¬¦ä¸²ä¸ä¸ºç©º</p></li></ul><h4 id="é€»è¾‘æ¯”è¾ƒ"><a href="#é€»è¾‘æ¯”è¾ƒ" class="headerlink" title="é€»è¾‘æ¯”è¾ƒ"></a>é€»è¾‘æ¯”è¾ƒ</h4><ul><li><p>-a è¡¨ç¤ºé€»è¾‘ä¸</p></li><li><p>-o è¡¨ç¤ºé€»è¾‘æˆ–</p><p>  -a -o è¦ä½¿ç”¨åœ¨å•ä¸ªä¸­æ‹¬å·ä¸­<code>if [ &quot;$expr1&quot; -a &quot;$expr2&quot; ]</code></p><p>  &amp;&amp; and || ä½†æ˜¯è¦åœ¨åŒä¸­æ‹¬å·ä¸­ä½¿ç”¨<code>[[ condition1 &amp;&amp; condition2 ]]</code> </p></li></ul><h3 id="åµŒå¥—-if-else"><a href="#åµŒå¥—-if-else" class="headerlink" title="åµŒå¥— if else"></a>åµŒå¥— <code>if else</code></h3><p>å¦‚å…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼,if elseç»“æ„èƒ½å¤ŸåµŒå¥—ï¼Œä½†æ˜¯åµŒå¥—ç»“æ„å’Œä½¿ç”¨ <code>&amp;&amp;</code> æ¯”è¾ƒç¬¦ç»“æœç›¸åŒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a=3</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$a</span>"</span> -gt 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">"<span class="variable">$a</span>"</span> -lt 5 ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The value of \"a\" lies somewhere between 0 and 5."</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Same result as:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$a</span>"</span> -gt 0 ] &amp;&amp; [ <span class="string">"<span class="variable">$a</span>"</span> -lt 5 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"The value of \"a\" lies somewhere between 0 and 5."</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆäºŒï¼‰ bashä¸­çš„å˜é‡å’Œå‚æ•°</title>
      <link href="/2018/04/11/2018-4-11-bash_%E5%8F%98%E9%87%8F/"/>
      <url>/2018/04/11/2018-4-11-bash_%E5%8F%98%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå­¦ä¹ è®°å½•ï¼ˆäºŒï¼‰-bashä¸­çš„å˜é‡å’Œå‚æ•°"><a href="#bashå­¦ä¹ è®°å½•ï¼ˆäºŒï¼‰-bashä¸­çš„å˜é‡å’Œå‚æ•°" class="headerlink" title="bashå­¦ä¹ è®°å½•ï¼ˆäºŒï¼‰ bashä¸­çš„å˜é‡å’Œå‚æ•°"></a>bashå­¦ä¹ è®°å½•ï¼ˆäºŒï¼‰ bashä¸­çš„å˜é‡å’Œå‚æ•°</h1><p>å˜é‡å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾åœ¨è„šæœ¬ä¸­ä»£è¡¨æ•°æ®ï¼Œä¸è¿‡æ˜¯ç»™åˆ†é…åœ¨ç”µè„‘å†…å­˜ä¸­çš„æ•°æ®ä¸€ä¸ªåå­—ï¼Œç»å¸¸ä¼šå‡ºç°åœ¨æ•°å­¦è®¡ç®—å’Œå¤§é‡æ“ä½œ(manipulation of quantities)å’Œå­—ç¬¦ä¸²è§£æ(string parsing)ä¸­ã€‚</p><h2 id="å˜é‡ç½®æ¢-Variable-Substitution"><a href="#å˜é‡ç½®æ¢-Variable-Substitution" class="headerlink" title="å˜é‡ç½®æ¢ (Variable Substitution) $"></a>å˜é‡ç½®æ¢ (Variable Substitution) $</h2><p>The name of a variable is a placeholder for its value, the data it holds. Referencing (retrieving) its value is called variable substitution. å¤§è‡´æ„æ€å°±æ˜¯å˜é‡å¼•ç”¨å…·ä½“çš„å€¼ã€‚ä½¿ç”¨$æ¥å¼•ç”¨å˜é‡ å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bash$ variable1=23</span><br><span class="line"></span><br><span class="line">bash$ <span class="built_in">echo</span> variable1</span><br><span class="line">//variable1</span><br><span class="line"></span><br><span class="line">bash$ <span class="built_in">echo</span> <span class="variable">$variable1</span></span><br><span class="line">//23</span><br></pre></td></tr></table></figure><p>åœ¨(â€œ..â€)é‡Œå¼•ç”¨ä¸ä¼šå¹²æ¶‰å˜é‡çš„å¼•ç”¨ï¼Œè¿™å«åšå±€éƒ¨å¼•ç”¨(<code>partial quoting</code>),ä¹Ÿå«å¼±å¼•ç”¨.ä½†ä½¿ç”¨(â€˜..â€™)å•å¼•å·ä¼šç›´æ¥æŠŠå˜é‡åæ‰“å°å‡ºæ¥ï¼Œä¸ä¼šå¼•ç”¨å˜é‡ï¼Œå«åšå…¨å¼•ç”¨(<code>full quoting</code>),ä¹Ÿå«åšå¼ºå¼•ç”¨ã€‚</p><blockquote><p>æ³¨æ„ï¼šå…¶å®ä½¿ç”¨$variable1å’Œä½¿ç”¨${variable1}æ˜¯ä¸€æ ·çš„ä½†æ˜¯æŸäº›è¯­å¢ƒä¸‹å‰è€…å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚</p></blockquote><blockquote><p>æœªåˆå§‹åŒ–çš„å˜é‡æœ‰ä¸€ä¸ªé»˜è®¤çš„çš„å€¼ä¸ºâ€nullâ€œè€Œä¸æ˜¯â€˜0â€™ï¼Œå¹¶ä¸”bashä¸­çš„å˜é‡ä¸åˆ†ç±»å‹ã€‚</p></blockquote><h2 id="å˜é‡åˆ†é…-Variable-Assignment"><a href="#å˜é‡åˆ†é…-Variable-Assignment" class="headerlink" title="å˜é‡åˆ†é…(Variable Assignment) ="></a>å˜é‡åˆ†é…(Variable Assignment) =</h2><p>ç­‰å·-&gt; the assignment operator (no space before and after) å‰åä¸èƒ½æœ‰ç©ºæ ¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸¾ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„å°ä¾‹å­ï¼Œä¹‹å‰ä¸çŸ¥é“åŒºåˆ«ã€‚ã€‚</span></span><br><span class="line">a=`ls -l`         <span class="comment"># Assigns result of 'ls -l' command to 'a'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>           <span class="comment"># Unquoted, however, it removes tabs and newlines.</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>"</span>         <span class="comment"># The quoted variable preserves whitespace.</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŒå¼•å·æ‰©èµ·æ¥çš„$aæœ‰ç©ºæ ¼ï¼Œè€Œæ²¡æœ‰åŒå¼•å·çš„æ˜¯å»æ‰ç©ºæ ¼çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">R=$(cat /etc/redhat-release)</span><br><span class="line">arch=$(uname -m)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºä½¿ç”¨$()çš„ä½œç”¨å’Œä½¿ç”¨``çš„ä½œç”¨ç›¸åŒï¼Œéƒ½å¯ä»¥å¯¹å‘½ä»¤è¿›è¡ŒåŒ…è£¹ã€‚</p><h2 id="bashå˜é‡æ²¡æœ‰ç±»å‹"><a href="#bashå˜é‡æ²¡æœ‰ç±»å‹" class="headerlink" title="bashå˜é‡æ²¡æœ‰ç±»å‹"></a>bashå˜é‡æ²¡æœ‰ç±»å‹</h2><p>ä¸åƒå…¶ä»–çš„å¾ˆå¤šç¼–ç¨‹è¯­è¨€ï¼Œbashè„šæœ¬ä¸­çš„å˜é‡æ˜¯æ²¡æœ‰ç±»å‹çš„ã€‚æ— ç±»å‹çš„å˜é‡æ˜¯æŠŠåŒåˆƒå‰‘ï¼Œä¸€æ–¹é¢æ›´åŠ çµæ´»ï¼Œå¦ä¸€æ–¹é¢ä¼šæ¸—é€ä¸€äº›å°çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥bashæä¾›å£°æ˜å˜é‡ï¼Œä¼šåœ¨åé¢çš„ç« èŠ‚å¯¹å£°æ˜å˜é‡çš„å‚æ•°ç­‰ä¿¡æ¯è¯¦ç»†åˆ—å‡ºæ¥ã€‚</p><h2 id="ç‰¹æ®Šçš„å˜é‡ç±»å‹-Special-Variable-Types"><a href="#ç‰¹æ®Šçš„å˜é‡ç±»å‹-Special-Variable-Types" class="headerlink" title="ç‰¹æ®Šçš„å˜é‡ç±»å‹(Special Variable Types)"></a>ç‰¹æ®Šçš„å˜é‡ç±»å‹(Special Variable Types)</h2><ul><li><p>æœ¬åœ°å˜é‡ï¼šå˜é‡åªèƒ½åœ¨ä»£ç å—å’Œå‡½æ•°ä¸­å¯è§</p></li><li><p>ç³»ç»Ÿå˜é‡ï¼šå˜é‡å½±å“shellçš„è¡Œä¸ºå’Œç”¨æˆ·çš„æ¥å£ï¼ˆæ¯”å¦‚è®¾ç½®Javaç¯å¢ƒå˜é‡ï¼‰</p><p>  å¦‚æœè„šæœ¬éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡é‚£ä¹ˆå°±å» <code>export ..</code></p></li><li><p>ä½ç½®å‚æ•°ï¼š</p><p>  $0æ˜¯è„šæœ¬åç§°ï¼Œ1-9ç­‰å¯¹åº”å…¶ä½ç½®ï¼Œ10ä¹‹åè¦ä½¿ç”¨å¤§æ‹¬å·æ‰©èµ·æ¥ã€‚$#å¯¹åº”æœ€åä¸€ä¸ªå…ƒç´ </p><p>  ä½¿ç”¨shiftå‘½ä»¤å¯ä»¥å°†ä½ç½®å‚æ•°é‡æ–°æ’åˆ—ï¼Œå®é™…ä¸Šå°±æ˜¯å‘å·¦ç§»åŠ¨ä¸€çº§ã€‚</p></li></ul><h3 id="è¿™æ¬¡ç¯‡å¹…è¾ƒå°ï¼Œä¸»è¦è®²äº†è®²bashä¸­çš„å˜é‡å’Œä½ç½®å‚æ•°çš„å«ä¹‰å’Œä½¿ç”¨ï¼Œå±äºéå¸¸åŸºç¡€ï¼Œéå¸¸å®¹æ˜“ç†è§£çš„éƒ¨åˆ†ã€‚"><a href="#è¿™æ¬¡ç¯‡å¹…è¾ƒå°ï¼Œä¸»è¦è®²äº†è®²bashä¸­çš„å˜é‡å’Œä½ç½®å‚æ•°çš„å«ä¹‰å’Œä½¿ç”¨ï¼Œå±äºéå¸¸åŸºç¡€ï¼Œéå¸¸å®¹æ˜“ç†è§£çš„éƒ¨åˆ†ã€‚" class="headerlink" title="è¿™æ¬¡ç¯‡å¹…è¾ƒå°ï¼Œä¸»è¦è®²äº†è®²bashä¸­çš„å˜é‡å’Œä½ç½®å‚æ•°çš„å«ä¹‰å’Œä½¿ç”¨ï¼Œå±äºéå¸¸åŸºç¡€ï¼Œéå¸¸å®¹æ˜“ç†è§£çš„éƒ¨åˆ†ã€‚"></a>è¿™æ¬¡ç¯‡å¹…è¾ƒå°ï¼Œä¸»è¦è®²äº†è®²bashä¸­çš„å˜é‡å’Œä½ç½®å‚æ•°çš„å«ä¹‰å’Œä½¿ç”¨ï¼Œå±äºéå¸¸åŸºç¡€ï¼Œéå¸¸å®¹æ˜“ç†è§£çš„éƒ¨åˆ†ã€‚</h3>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashå­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰ åˆè¯†å’Œbashä¸­çš„ç‰¹æ®Šå­—ç¬¦</title>
      <link href="/2018/04/10/2018-04-10-bash%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2018/04/10/2018-04-10-bash%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="bashå­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰åˆè¯†bashå’Œç‰¹æ®Šå­—ç¬¦"><a href="#bashå­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰åˆè¯†bashå’Œç‰¹æ®Šå­—ç¬¦" class="headerlink" title="bashå­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰åˆè¯†bashå’Œç‰¹æ®Šå­—ç¬¦"></a>bashå­¦ä¹ è®°å½•ï¼ˆä¸€ï¼‰åˆè¯†bashå’Œç‰¹æ®Šå­—ç¬¦</h1><h2 id="åˆè¯†Bash"><a href="#åˆè¯†Bash" class="headerlink" title="åˆè¯†Bash"></a>åˆè¯†Bash</h2><p>é‰´äºæœ¬äººçš„è¡¨è¾¾èƒ½åŠ›ï¼Œä¸é€‚åˆæƒ³è¦å»ç³»ç»Ÿå­¦ä¹ bashçš„äººæ¥æŸ¥çœ‹ï¼Œæå‰åˆ†äº«ä¸¤ä¸ªä¸åŒé˜¶æ®µï¼Œä¸åŒäººç¾¤å­¦ä¹ çš„èµ„æ–™ã€‚</p><ol><li><p>æƒ³è¦å­¦ä¹ bashä½†æ˜¯ä¸æƒ³å­¦ä¹ å¤ªæ·±çš„äºº:       <a href="https://github.com/denysdovhan/bash-handbook/blob/master/translations/zh-CN/README.md#%E5%89%8D%E8%A8%80" target="_blank" rel="noopener">bash-handbook</a></p></li><li><p>æƒ³è¦ç³»ç»Ÿå­¦ä¹ bashçš„äººï¼š<a href="http://tldp.org/LDP/abs/html/index.html" target="_blank" rel="noopener">Advanced Bash-Scripting Guide</a></p></li></ol><p>å…¶å®bashå¾ˆéš¾ï¼Œè¦è€ƒè™‘çš„ä¸œè¥¿å¾ˆå¤šï¼Œä½†ç°åœ¨å­¦åˆ°çš„åªæ˜¯çš®æ¯›ï¼Œå¸Œæœ›èƒ½å¤Ÿå¤šçœ‹å¤šå®è·µï¼Œæ‰èƒ½æ›´è¿›ä¸€æ­¥ã€‚</p><h3 id="Starting-Off-With-a-Sha-Bang"><a href="#Starting-Off-With-a-Sha-Bang" class="headerlink" title="Starting Off With a Sha-Bang"></a>Starting Off With a Sha-Bang</h3><p>sha-bang(#!)åœ¨èµ·å§‹çš„ä½ç½®æ¥å‘Šè¯‰ä½ çš„ç³»ç»Ÿè¿™ä¸ªæ–‡ä»¶æ˜¯å‘½ä»¤çš„é›†åˆï¼Œèƒ½å¤Ÿä½¿ç”¨å“ªä¸ªå‘½ä»¤è§£é‡Šå™¨æ¥æ‰§è¡Œï¼ˆ/bin/bashï¼‰-&gt;path,è¿™ä¸ªå‘½ä»¤è·¯å¾„å¿…é¡»æ­£ç¡®</p><p>å¦‚æœç³»ç»Ÿé»˜è®¤è§£é‡Šå™¨æ˜¯/bin/bash æˆ–è€…å…¶ä»– åˆ™ä¸ç”¨ä½¿ç”¨ #! /bin/bash æ¥æ”¾åˆ°å¼€å¤´</p><h2 id="Special-Characters"><a href="#Special-Characters" class="headerlink" title="Special Characters"></a>Special Characters</h2><p>ä¸‹é¢æ¥ç®€å•æ€»ç»“ä¸€ä¸‹æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦</p><ol><li><p><strong>â€˜#â€˜</strong>  è·Ÿåœ¨#å·åé¢çš„ç›¸å½“ä¸æ˜¯æ³¨é‡Šï¼Œä¸ä¼šè¢«è§£é‡Šå™¨æ‰§è¡Œ,å¯ä»¥å‡ºç°å•è¡Œï¼Œä¹Ÿå¯ä»¥å‡ºç°åœ¨å‘½ä»¤åä½œæ³¨é‡Šç”¨</p></li><li><p><strong>; åˆ†å·</strong> å…è®¸å°†å¤šæ¡å‘½ä»¤æ”¾åˆ°å•è¡Œç”¨</p></li><li><p><strong>;;  ä¸¤ä¸ªåˆ†å·</strong>ï¼Œåœ¨<code>case</code>çš„åœºæ™¯ä¸‹ä½¿ç”¨ å¦‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$variable</span>"</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">abc)  <span class="built_in">echo</span> <span class="string">"\$variable = abc"</span> ;;</span><br><span class="line"></span><br><span class="line">xyz)  <span class="built_in">echo</span> <span class="string">"\$variable = xyz"</span> ;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></li><li><p><strong>. dot</strong></p><p>  ç›¸å½“ä¸linuxçš„å†…å»ºå‘½ä»¤source</p><p>  ä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ† å¦‚ .vimrcç­‰</p><p>  ä½œä¸ºç›®å½•å¯¼å‘ å¦‚ ./è¡¨ç¤ºå½“å‰ç›®å½• ../ç›¸å½“ä¸çˆ¶ç›®å½•</p><p>  æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥è¡¨ç¤ºä¸º1ä¸ªå­—ç¬¦</p></li><li><p><strong>â€œ åŒå¼•å·</strong> éƒ¨åˆ†å¼•ç”¨å­—ç¬¦ä¸²ï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯èƒ½å¤Ÿå¼•ç”¨å˜é‡ â€˜$valueâ€™ï¼Œå¹¶ä¸”ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰</p></li><li><p><strong>â€˜ å•å¼•å·</strong> å¯ä»¥ä¿å­˜å…¨éƒ¨ç‰¹æ®Šå­—ç¬¦ï¼Œä¸èƒ½å¼•ç”¨å˜é‡</p></li><li><p><strong>, é€—å·</strong> è¡¨ç¤ºè¿æ¥å¤šä¸ªè®¡ç®—è¡¨è¾¾å¼,å¤šä¸ªè¡¨è¾¾å¼éƒ½ä¼šæ‰§è¡Œï¼Œä½†æ˜¯åªæœ‰æœ€åä¸€ä¸ªè®¡ç®—å¼ä¼šè¿”å›å€¼ ã€‚ä¹Ÿåšé“¾æ¥å­—ç¬¦ä¸²</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="string">"t2 = ((a = 9, 15 / 3))"</span></span><br><span class="line"><span class="comment"># Set "a = 9" and "t2 = 15 / 3"</span></span><br></pre></td></tr></table></figure></li><li><p><strong>\ åæ–œæ </strong> <code>escape [backslash]</code> å¯æ˜¯å®ç°å¯¹å•ä¸ªå­—ç¬¦çš„è½¬ä¹‰</p></li><li><p><strong>/ æ–œæ </strong> <code>Filename path separator [forward slash]</code>æœ¬èº«å°±å«åšæ–‡ä»¶åˆ†å‰²ç¬¦å¯ä»¥æ˜äº†åšä»€ä¹ˆç”¨çš„äº†</p></li><li><p><strong>` <code>command substitution</code></strong> å‘½ä»¤æ›¿æ¢ å¦‚ a=`echo â€œhello worldâ€ `;echo $a ç­‰ æˆ–è€… a=`date` ; echo $a</p></li><li><p><strong>: å†’å·</strong> ç©ºå‘½ä»¤ç­‰ä»·ä¸â€˜NOPâ€™ <code>do-nothing operation</code> ä¹Ÿæ˜¯æœ‰çŠ¶æ€çš„ç›¸å½“ä¸å†…å»ºå‡½æ•° <code>true</code> æ¯”å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">operation-1</span><br><span class="line">operation-2</span><br><span class="line">...</span><br><span class="line">operation-n</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Same as:</span></span><br><span class="line"><span class="comment">#    while true</span></span><br><span class="line"><span class="comment">#    do</span></span><br><span class="line"><span class="comment">#      ...</span></span><br><span class="line"><span class="comment">#    done</span></span><br></pre></td></tr></table></figure><p>ä½œifåˆ¤æ–­çš„åˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition</span><br><span class="line"><span class="keyword">then</span> :   <span class="comment"># Do nothing and branch ahead</span></span><br><span class="line"><span class="keyword">else</span>     <span class="comment"># Or else ...</span></span><br><span class="line">take-some-action</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>æ”¾åœ¨å¿…é¡»è¦æœ‰ä¸¤å…ƒæ“ä½œçš„åœ°æ–¹ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¦‚ï¼š: ${username=`whoami`}</p><p>é…åˆç®¡é“å‘½ä»¤ <code>:&gt;</code> <code>:&gt;&gt;</code>å¦‚æœæ–‡ä»¶æ²¡æœ‰å­˜åœ¨åˆ™åˆ›å»º</p><p>åšåˆ†å‰²ç¬¦ å¦‚ echo $PATH ä¼šå‡ºç°å¾ˆå¤šä»¥ï¼šä½œä¸ºåˆ†å‰²ç¬¦çš„å­—ç¬¦ä¸²</p><p>åœ¨å‡½æ•°é‡Œå¯ä»¥ä½œä¸ºç«™ä½ç¬¦é˜²æ­¢å‡½æ•°æä¸ºç©º</p></li><li><p><strong>!å¹å·</strong>  ä½œä¸º <code>é</code>å‡ºç° å¦‚ ï¼null æˆ–è€…é€€å‡ºç  exit codeã€‚åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹å¯ä»¥ä½œä¸ºé—´æ¥å˜é‡å¼•ç”¨ã€‚</p></li><li><p><strong>* æ˜Ÿå·</strong> å¯ä»¥ä½œä¸ºå…¨åŒ¹é…æ¥ä½¿ç”¨ å¦‚ echo * ã€‚ è¡¨ç¤ºä¹˜æ³• 1*2</p></li><li><p><strong>? é—®å·</strong> <code>test operator</code>. Within certain expressions, the ? indicates a test for a condition. è¿˜å¯ä»¥ä½œä¸ºåŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚</p></li><li><p><strong>$</strong> å˜é‡å¼•ç”¨  æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºè¡Œå°¾</p></li><li><p><strong>${}</strong> å˜é‡å¼•ç”¨</p></li><li><p><strong>$(â€¦)</strong> å¤šä¸ªå˜é‡åŒæ—¶å¼•ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file1=<span class="string">"file"</span></span><br><span class="line">file2=<span class="string">"nofile"</span></span><br><span class="line"><span class="built_in">echo</span> $<span class="string">'file1,file2'</span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºå†…å®¹ï¼šfile1,file2</p></li><li><p><strong><code>$* $@</code></strong>  ä½ç½®å‚æ•° $*æ˜¯å°†æ‰€æœ‰å‚æ•°ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿”å›ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œè€Œ$@æ˜¯å°†æ¯ä¸ªå‚æ•°ä½œä¸ºå•å…ƒè¿”å›ä¸€ä¸ªå‚æ•°åˆ—è¡¨</p></li><li><p><strong>() å°æ‹¬å·</strong></p></li></ol><ul><li>æ“ä½œç»„<code>(a=hello; echo $a)</code></li><li>æ•°ç»„åˆå§‹åŒ–</li></ul><ol start="20"><li><p><strong>{} èŠ±æ‹¬å·æ‰©å±•</strong> ç”¨æ¥æ‰©å±•å‚æ•° å¦‚ abou{t,y,u}</p></li><li><p><strong>[] ä¸­æ‹¬å·</strong></p></li></ol><ul><li>shellå†…å»ºæµ‹è¯•çš„ä¸€éƒ¨åˆ†</li><li>è¡¨è¾¾æ•°ç»„çš„éƒ¨åˆ†å¦‚array[1]</li><li>è¡¨ç¤ºå­—ç¬¦é›†çš„èŒƒå›´ï¼Œåœ¨æ­£è¡¨è¾¾å¼ä¸­ï¼Œæ–¹æ‹¬å·è¡¨ç¤ºè¯¥ä½ç½®å¯ä»¥åŒ¹é…çš„å­—ç¬¦é›†èŒƒå›´ã€‚</li></ul><ol start="22"><li><p><strong>[[]] åŒä¸­æ‹¬å·</strong>(double brackets)ã€‚</p><blockquote><p>è¿™ä¸ªç»“æ„ä¹Ÿæ˜¯æµ‹è¯•ï¼Œæµ‹è¯•[[]]ä¹‹ä¸­çš„è¡¨è¾¾å¼(Shellçš„å…³é”®å­—)ã€‚è¿™ä¸ªæ¯”å•ä¸­æ‹¬å·æ›´èƒ½é˜²æ­¢è„šæœ¬é‡Œé¢çš„é€»è¾‘é”™è¯¯</p></blockquote></li><li><p>$[ â€¦ ] and (()) éƒ½è¡¨ç¤ºIntegerè®¡ç®— integer expansion.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a=3</span><br><span class="line">b=7</span><br><span class="line"><span class="built_in">echo</span> $[<span class="variable">$a</span>+<span class="variable">$b</span>]</span><br><span class="line"><span class="built_in">echo</span> ((<span class="variable">$a</span>+<span class="variable">$b</span>))</span><br></pre></td></tr></table></figure></li><li><p><strong>| ç®¡é“</strong> éå¸¸åŸºç¡€çš„æ¦‚å¿µ å¦‚ ls|grep .. ã€‚</p></li><li><p>&amp;ï¼šåå°æ‰§è¡Œ  &amp;&amp; å’Œ || ï¼šé€»è¾‘æ“ä½œç¬¦</p></li><li><p>+ - * % å„è‡ªæ„ä¹‰å°±ä¸è¯¦ç»†è§£é‡Šäº†</p></li></ol><p>èµ„æ–™å¼•ç”¨ <a href="http://tldp.org/LDP/abs/html/index.html" target="_blank" rel="noopener">Advanced Bash-Scripting Guide</a> æ–‡ç« ç‰¹åˆ«è¯¦å°½ï¼Œæœ‰å…´è¶£éå¸¸é¼“åŠ±çœ‹åŸæ–‡ã€‚è¿™é‡Œæˆ‘åªåšäº†éƒ¨åˆ†æ¯”è¾ƒå¸¸ç”¨çš„æ¯”è¾ƒå®¹æ˜“ç†è§£çš„éƒ¨åˆ†åšäº†ç²¾ç®€ï¼ˆåŸè°…æˆ‘è‹±æ–‡ä¸å¥½ :) ç ´äº§ç‰ˆæ€»ç»“ - - ï¼‰ã€‚</p><p>ä½œä¸ºbashå­¦ä¹ æ€»ç»“çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œç¯‡å¹…ä¸å¤§ï¼Œå°½é‡åšåˆ°ç®€å•ï¼Œè¯¦å°½æ˜“æ‡‚ã€‚å½“é‡åˆ°é—®é¢˜èƒ½å¤Ÿå›å¤´çœ‹ä¸€çœ‹ï¼Œå¸Œæœ›èƒ½å¤Ÿèµ·åˆ°å¥½çš„ä½œç”¨ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Bash </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bash </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDownåŸºæœ¬è¯­æ³•</title>
      <link href="/2018/04/04/2018-04-08-markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2018/04/04/2018-04-08-markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Markdownè¯­æ³•æ€»ç»“"><a href="#Markdownè¯­æ³•æ€»ç»“" class="headerlink" title="Markdownè¯­æ³•æ€»ç»“"></a>Markdownè¯­æ³•æ€»ç»“</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>å…¶å®markdownè¯­æ³•å¾ˆç®€æ´ï¼Œå¹¶ä¸”ç›¸å½“å¤šçš„åšå®¢ï¼Œè¿˜æœ‰é‡è¦çš„githubä¸Šçš„readmeä¹Ÿæ˜¯ç”¨markdownè¿›è¡Œç¼–è¾‘ã€‚æ‰€ä»¥æœ‰å¿…è¦æ•´ç†ä¸€ä¸‹ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œè¿›å…¥æ­£æ–‡</p><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>ä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œã€‚æ¯”æ–¹è¯´ï¼Œè‹¥æŸä¸€è¡ŒåªåŒ…å«ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œåˆ™è¯¥è¡Œä¹Ÿä¼šè¢«è§†ä¸ºç©ºè¡Œï¼‰ã€‚æ™®é€šæ®µè½ä¸è¯¥ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦æ¥ç¼©è¿›ã€‚</p><p>åœ¨ç¼–è¾‘çš„è¿‡ç¨‹å½“ä¸­æ¯ç¼–è¾‘ä¸€å—çš„å†…å®¹ï¼Œå°±è¦ç©ºä¸€è¡Œï¼Œå¦åˆ™ä¼šå‡ºé—®é¢˜ã€‚ã€‚ã€‚</p><h3 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a><strong>æ ‡é¢˜</strong></h3><p>markdownæ”¯æŒä¸¤ç§æ ‡é¢˜çš„è¯­æ³•ï¼Œç±» Setext å’Œç±» atx å½¢å¼ã€‚<br>ç±» Setext å½¢å¼æ˜¯ç”¨åº•çº¿çš„å½¢å¼ï¼Œåˆ©ç”¨ = ï¼ˆæœ€é«˜é˜¶æ ‡é¢˜ï¼‰å’Œ - ï¼ˆç¬¬äºŒé˜¶æ ‡é¢˜ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><blockquote><p>This is an H1</p><p>=============</p><p>This is an H2</p><p>-â€”â€”â€”â€”</p></blockquote><p>æ•ˆæœ</p><blockquote><h1 id="This-is-an-H1"><a href="#This-is-an-H1" class="headerlink" title="This is an H1"></a>This is an H1</h1><h2 id="This-is-an-H2"><a href="#This-is-an-H2" class="headerlink" title="This is an H2"></a>This is an H2</h2></blockquote><p>ä¹Ÿèƒ½ä½¿ç”¨atx ä½¿ç”¨ # æ¥è¿›è¡Œ1-6é˜¶çš„åˆ’åˆ† å¦‚ï¼š</p><blockquote><p># This is an H1</p><p>## This is an H2</p></blockquote><p>æ•ˆæœ</p><blockquote><h1 id="This-is-an-H1-1"><a href="#This-is-an-H1-1" class="headerlink" title="This is an H1"></a>This is an H1</h1><h2 id="This-is-an-H2-1"><a href="#This-is-an-H2-1" class="headerlink" title="This is an H2"></a>This is an H2</h2></blockquote><h3 id="åŒºå—å¼•ç”¨"><a href="#åŒºå—å¼•ç”¨" class="headerlink" title="åŒºå—å¼•ç”¨"></a><strong>åŒºå—å¼•ç”¨</strong></h3><blockquote><p>åŒºå—åº”ç”¨ ä½¿ç”¨ &gt; ç¬¦å·è¿›è¡Œæ ‡è¯† ã€‚<br>èƒ½æ¯è¡Œéƒ½ä½¿ç”¨ &gt; è¿›è¡Œæ ‡è¯†ï¼Œä¹Ÿèƒ½åªåœ¨ç¬¬ä¸€è¡Œæ ‡è¯†æ•ˆæœç›¸åŒ</p></blockquote><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a><strong>åˆ—è¡¨</strong></h3><ol><li>æ— åºåˆ—è¡¨ å¯ä»¥ä½¿ç”¨*å·æˆ–è€…+å·æˆ–è€…-å·éƒ½æ˜¯ä¸€æ ·çš„</li><li>æœ‰åºåˆ—è¡¨ å¯ä»¥ä½¿ç”¨æ•°å­—åŠ è‹±æ–‡.åŠ ç©ºæ ¼ä½¿ç”¨æœ‰åºåˆ—è¡¨</li></ol><h3 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h3><p>ä¸‰ä¸ªä»¥ä¸Šçš„* å°±æ˜¯åˆ†å‰²çº¿</p><hr><h3 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h3><p>Markdown æ”¯æŒä¸¤ç§å½¢å¼çš„é“¾æ¥è¯­æ³•ï¼š è¡Œå†…å¼å’Œå‚è€ƒå¼ä¸¤ç§å½¢å¼ã€‚</p><p>ä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œé“¾æ¥æ–‡å­—éƒ½æ˜¯ç”¨ [æ–¹æ‹¬å·] æ¥æ ‡è®°ã€‚</p><p>è¦å»ºç«‹ä¸€ä¸ªè¡Œå†…å¼çš„é“¾æ¥ï¼Œåªè¦åœ¨æ–¹å—æ‹¬å·åé¢ç´§æ¥ç€åœ†æ‹¬å·å¹¶æ’å…¥ç½‘å€é“¾æ¥å³å¯ï¼Œå¦‚æœä½ è¿˜æƒ³è¦åŠ ä¸Šé“¾æ¥çš„ title æ–‡å­—ï¼Œåªè¦åœ¨ç½‘å€åé¢ï¼Œç”¨åŒå¼•å·æŠŠ title æ–‡å­—åŒ…èµ·æ¥å³å¯ï¼Œä¾‹å¦‚ï¼š</p><blockquote><p>This is [an example](<a href="http://example.com/" target="_blank" rel="noopener">http://example.com/</a> â€œTitleâ€) inline link.</p></blockquote><blockquote><p>[This link](<a href="http://example.net/" target="_blank" rel="noopener">http://example.net/</a>) has no title attribute.</p></blockquote><p> æ•ˆæœ</p><p> This is <a href="http://example.com/" title="Title" target="_blank" rel="noopener">an example</a> inline link.</p><p><a href="http://example.net/" target="_blank" rel="noopener">This link</a> has no title attribute.</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå‚è€ƒå¼é“¾æ¥çš„èŒƒä¾‹ï¼š</p><p>I get 10 times more traffic from [Google] [1] than from<br>[Yahoo] [2] or [MSN] [3].</p><p>[1]: <a href="http://google.com/" target="_blank" rel="noopener">http://google.com/</a>        â€œGoogleâ€</p><p>[2]: <a href="http://search.yahoo.com/" target="_blank" rel="noopener">http://search.yahoo.com/</a>  â€œYahoo Searchâ€</p><p>[3]: <a href="http://search.msn.com/" target="_blank" rel="noopener">http://search.msn.com/</a>    â€œMSN Searchâ€</p><p>I get 10 times more traffic from <a href="http://google.com/" title="Google" target="_blank" rel="noopener">Google</a> than from<br><a href="http://search.yahoo.com/" title="Yahoo Search" target="_blank" rel="noopener">Yahoo</a> or <a href="http://search.msn.com/" title="MSN Search" target="_blank" rel="noopener">MSN</a>.</p><h3 id="å¼ºè°ƒ"><a href="#å¼ºè°ƒ" class="headerlink" title="å¼ºè°ƒ"></a><strong>å¼ºè°ƒ</strong></h3><p>ä½¿ç”¨ä¸¤ä¸ª<em>*æˆ–è€…_è¡¨ç¤ºå¼ºè°ƒ ä½¿ç”¨ä¸€ä¸ª</em>æˆ–è€…ä¸€ä¸ª_è¡¨ç¤ºæ–œä½“</p><p>å¦‚ï¼š <strong>helloworld</strong> <em>helloworld</em></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a><strong>ä»£ç </strong></h3><p>ä½¿ç”¨`ç¬¦å·æ¥ä½¿ç”¨ä»£ç å—<br>è¡Œå†…ä»£ç ä½¿ç”¨`åŒ…èµ·æ¥ å¦‚ <code>print()</code></p><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a><strong>å›¾ç‰‡</strong></h3><p>åŒæ ·çš„å›¾ç‰‡ä¹Ÿæœ‰è¡Œå†…å¼å’Œå‚è€ƒå¼<br>å‘é“¾æ¥ä¸€æ ·åªä¸è¿‡åœ¨å‰é¢å¤šä¸ª !</p><h3 id="å¤§æ¦‚è¯­æ³•å°±æ˜¯è¿™ä¹ˆå¤š-markdownç®€å•æ–¹ä¾¿ï¼Œæ¨èä½¿ç”¨ã€‚ã€‚"><a href="#å¤§æ¦‚è¯­æ³•å°±æ˜¯è¿™ä¹ˆå¤š-markdownç®€å•æ–¹ä¾¿ï¼Œæ¨èä½¿ç”¨ã€‚ã€‚" class="headerlink" title="å¤§æ¦‚è¯­æ³•å°±æ˜¯è¿™ä¹ˆå¤š markdownç®€å•æ–¹ä¾¿ï¼Œæ¨èä½¿ç”¨ã€‚ã€‚"></a>å¤§æ¦‚è¯­æ³•å°±æ˜¯è¿™ä¹ˆå¤š markdownç®€å•æ–¹ä¾¿ï¼Œæ¨èä½¿ç”¨ã€‚ã€‚</h3><p>è‡ªå·±å†™è¿™ç§ä¸œè¥¿è‡ªå·±æ„Ÿè§‰å†™çš„éƒ½å¥½èœï¼Œå¯èƒ½æ²¡æœ‰ä»€ä¹ˆå†™åšå®¢çš„ä¹ æƒ¯ï¼Œæ…¢æ…¢å†™å§ï¼Œæ€»æœ‰ä¸€å¤©ä¼šæ•´ä½“æ¸…æ™°çš„ã€‚ç®—äº†ï¼Œè‡ªå·±çœ‹å§  :)</p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> è¯­æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlä¸­å‡ºç°Invalid default value for CREATE_TIME é”™è¯¯</title>
      <link href="/2018/01/01/2019-01-01-Mysql%E4%B8%AD%E5%87%BA%E7%8E%B0Invalid_default_value_for_CREATE_TIME%E7%9A%84%E9%94%99%E8%AF%AF/"/>
      <url>/2018/01/01/2019-01-01-Mysql%E4%B8%AD%E5%87%BA%E7%8E%B0Invalid_default_value_for_CREATE_TIME%E7%9A%84%E9%94%99%E8%AF%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="Mysqlä¸­å‡ºç°Invalid-default-value-for-â€˜CREATE-TIMEâ€™é”™è¯¯"><a href="#Mysqlä¸­å‡ºç°Invalid-default-value-for-â€˜CREATE-TIMEâ€™é”™è¯¯" class="headerlink" title="Mysqlä¸­å‡ºç°Invalid default value for â€˜CREATE_TIMEâ€™é”™è¯¯"></a>Mysqlä¸­å‡ºç°Invalid default value for â€˜CREATE_TIMEâ€™é”™è¯¯</h1><p>æœ€è¿‘åšäº†æ–°çš„ç³»ç»Ÿï¼Œå¹¶æŠŠmysqlå‡çº§åˆ°äº†5.7ç‰ˆæœ¬ï¼Œåœ¨å€’å…¥sqlæ—¶å€™ï¼Œå‡ºç°å¦‚é¢˜çš„é”™è¯¯â€˜Mysqlä¸­å‡ºç°Invalid default value for â€˜CREATE_TIMEâ€™é”™è¯¯â€™,æ‰¾åˆ°äº†è§£å†³æ–¹æ³•ã€‚</p><p>æ˜¯å› ä¸ºåœ¨5.7ç‰ˆæœ¬ä¸­çš„sql_modeæœ‰NO_ZERO_IN_DATE,NO_ZERO_DATEè¿™ä¸¤ä¸ªä¸œè¥¿ï¼Œå»æ‰å°±å¥½äº†ã€‚å¦‚ä½•å»æ‰ï¼Ÿ</p><ol><li>ä¸´æ—¶æ–¹æ³•</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set session</span><br><span class="line"> -&gt; sql_mode=&apos;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&apos;;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><ol start="2"><li>æ°¸ä¹…æ€§ä¿®æ”¹</li></ol><p>ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/mysql/mysql.conf.d</span><br><span class="line">vim mysqld.cnf</span><br><span class="line"><span class="comment"># æ‰¾åˆ°ã€mysqldã€‘åœ¨ä¸‹é¢æ’å…¥</span></span><br><span class="line">sql_mode=<span class="string">'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•è§£å†³äº†é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> MYSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MYSQL </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
